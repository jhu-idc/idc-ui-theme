!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);const r=Symbol("Services");class s{constructor(e){this[r]=e}lookup({type:e,name:t}){return this[r][t]}}const i="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`;let l=1;const a=i("TAG_COMPUTE");function o(e){return l}function u(e,t){return t>=e[a]()}const c=i("TAG_TYPE");class h{constructor(e){this.revision=1,this.lastChecked=1,this.lastValue=1,this.isUpdating=!1,this.subtags=null,this.subtag=null,this.subtagBufferCache=null,this[c]=e}[a](){let{lastChecked:e}=this;if(!0===this.isUpdating)this.lastChecked=++l;else if(e!==l){this.isUpdating=!0,this.lastChecked=l;try{let{subtags:e,subtag:t,subtagBufferCache:n,lastValue:r,revision:s}=this;if(null!==t){let e=t[a]();e===n?s=Math.max(s,r):(this.subtagBufferCache=null,s=Math.max(s,e))}if(null!==e)for(let t=0;t<e.length;t++){let n=e[t][a]();s=Math.max(n,s)}this.lastValue=s}finally{this.isUpdating=!1}}return this.lastValue}static updateTag(e,t){let n=e,r=t;r===g?n.subtag=null:(n.subtagBufferCache=r[a](),n.subtag=r)}static dirtyTag(e){e.revision=++l}}const p=h.dirtyTag,d=h.updateTag;function m(){return new h(0)}function f(){return new h(1)}const g=new h(3);function b({tag:e}){return e===g}function y(e){return e===g}new class{[a](){return 9007199254740991}};new class{[a](){return l}};function v(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];r!==g&&t.push(r)}return w(t)}function w(e){switch(e.length){case 0:return g;case 1:return e[0];default:let t=new h(2);return t.subtags=e,t}}let k=function(){};function x(e){return"object"==typeof e&&null!==e||"function"==typeof e}const S=new WeakMap;function E(e,t){if(x(e)){let n=S.get(e);if(void 0===n)n=new Map,S.set(e,n);else if(n.has(t))return n.get(t);let r=f();return n.set(t,r),r}return g}class C{constructor(){this.tags=new Set,this.last=null}add(e){this.tags.add(e),this.last=e}combine(){let{tags:e}=this;if(0===e.size)return g;if(1===e.size)return this.last;{let t=[];return e.forEach(e=>t.push(e)),v(t)}}}let O=null;const _=[];function M(){_.push(O),O=new C}function P(){let e=O;return O=_.pop(),e.combine()}new WeakMap;function A(e,t){let n;M();try{e()}finally{n=P()}return n}function T(e){null!==O&&O.add(e)}function N(e){_.push(O),O=null;try{e()}finally{O=_.pop()}}const B=m();function z(e,t){let n=new WeakMap,r="function"==typeof t;return{getter:function(s){let i;return T(E(s,e)),r&&!n.has(s)?(i=t.call(s),n.set(s,i)):i=n.get(s),i},setter:function(t,r){p(B),function(e,t){if(!x(e))throw new Error("BUG: Can't update a tag for a primitive");{let n=S.get(e);if(void 0===n)return;let r=n.get(t);void 0!==r&&(p(r),k())}}(t,e),n.set(t,r)}}}const L=Object.freeze([]);var I=function(e,t){if(!e)throw new Error(t||"assertion failure")};let R=0;function D(e){return e._guid=++R}function j(){return Object.create(null)}function H(e){return"object"==typeof e&&null!==e}class U{constructor(){this.stack=[],this.current=null}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop(),t=this.stack.length;return this.current=0===t?null:this.stack[t-1],void 0===e?null:e}nth(e){let t=this.stack.length;return t<e?null:this.stack[t-e]}isEmpty(){return 0===this.stack.length}toArray(){return this.stack}}function F(e="unreachable"){return new Error(e)}function V(e){throw new Error("Exhausted "+e)}const $="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`,W=$("DESTROY");function G(e){let t=e.firstChild;for(;t;){let n=t.nextSibling;e.removeChild(t),t=n}}const J=new WeakMap,Y=$("WILL_DROP"),K=$("DID_DROP"),q=$("CHILDREN"),X=new WeakMap;function Q(e){return null!==e&&"object"==typeof e&&void 0!==e[K]}function Z(e,t){ee(e,re(t))}function ee(e,t){let n=J.get(e);n||(n=new Set,J.set(e,n)),n.add(t)}function te(e){let t=J.get(e);t&&t.forEach(e=>{e[Y]()})}function ne(e){let t=J.get(e);t&&t.forEach(e=>{e[K](),t.delete(e)})}function re(e){let t=X.get(e);return t||(t=function(e){return!(!e||void 0===e[W])}(e)?new le(e):function(e){return!(!e||"object"!=typeof e||"function"!=typeof e.destroy)}(e)?new ae(e):new oe(e),X.set(e,t)),t}function se(e){return new ie(e)}class ie{constructor(e){this.destructors=e}[Y](){this.destructors.forEach(e=>e[Y]())}[K](){this.destructors.forEach(e=>e[K]())}get[q](){return this.destructors}toString(){return"SnapshotDestructor"}}class le{constructor(e){this.inner=e}[Y](){te(this.inner)}[K](){this.inner[W](),ne(this.inner)}get[q](){return J.get(this.inner)||[]}toString(){return"DestroyableDestructor"}}class ae{constructor(e){this.inner=e}[Y](){"function"==typeof this.inner.willDestroy&&this.inner.willDestroy(),te(this.inner)}[K](){this.inner.destroy(),ne(this.inner)}get[q](){return J.get(this.inner)||[]}toString(){return"StringDestroyableDestructor"}}class oe{constructor(e){this.inner=e}[Y](){te(this.inner)}[K](){ne(this.inner)}get[q](){return J.get(this.inner)||[]}toString(){return"SimpleDestructor"}}class ue{constructor(){this.clear()}head(){return this._head}tail(){return this._tail}clear(){this._head=this._tail=null}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e.next}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=t.next}insertBefore(e,t=null){return null===t?this.append(e):(t.prev?t.prev.next=e:this._head=e,e.prev=t.prev,e.next=t,t.prev=e,e)}append(e){let t=this._tail;return t?(t.next=e,e.prev=t,e.next=null):this._head=e,this._tail=e}remove(e){return e.prev?e.prev.next=e.next:this._head=e.next,e.next?e.next.prev=e.prev:this._tail=e.prev,e}[Y](){this.forEachNode(e=>re(e)[Y]())}[K](){this.forEachNode(e=>re(e)[K]())}get[q](){let e=[];return this.forEachNode(t=>e.push(...re(t)[q])),e}}class ce{constructor(e,t){this._head=e,this._tail=t}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=this.nextNode(t)}head(){return this._head}tail(){return this._tail}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e===this._tail?null:e.next}}new ce(null,null);const{keys:he}=Object;function pe(e){for(let t=1;t<arguments.length;t++){let n=arguments[t];if(null===n||"object"!=typeof n)continue;let r=he(n);for(let t=0;t<r.length;t++){let s=r[t];e[s]=n[s]}}return e}function de(e){return"number"==typeof e?e<0?1073741827-e:e:!1===e?1073741824:!0===e?1073741825:null===e?1073741826:void 0===e?1073741827:V(e)}function me(e){return function(e,t,n){return e%1==0&&e>=t&&e<=n}(e,-1073741820,1073741823)}function fe(e){return e<0}function ge(e,t=2147483647,n=-1){if(e>t)throw new Error(`index ${e} overflowed range 0 to ${t}`);return n-e}function be(e,t=-1){return t-e}function ye(e){if("number"==typeof e)return e;{let t=e.errors[0];throw new Error(`Compile Error: ${t.problem} @ ${t.span.start}..${t.span.end}`)}}function ve(e){if("error"===e.result)throw new Error(`Compile Error: ${e.problem} @ ${e.span.start}..${e.span.end}`);return e}function we(e,t="unexpected unreachable branch"){console.log("unreachable",e),console.trace(`${t} :: ${JSON.stringify(e)} (${e})`)}function ke(e){return e<=3}var xe,Se;!function(e){e[e.s0=4]="s0",e[e.s1=5]="s1"}(xe||(xe={})),function(e){e[e.t0=6]="t0",e[e.t1=7]="t1"}(Se||(Se={}));const Ee=$("INNER_VM"),Ce=$("DESTRUCTOR_STACK"),Oe=$("STACKS"),_e=$("REGISTERS"),Me=$("HEAP"),Pe=$("CONSTANTS"),Ae=$("ARGS");$("PC");class Te{constructor(e,t){this.element=e,this.nextSibling=t}}class Ne{constructor(e,t,n){this.parentNode=e,this.first=t,this.last=n}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}class Be{constructor(e,t){this.parentNode=e,this.node=t}parentElement(){return this.parentNode}firstNode(){return this.node}lastNode(){return this.node}}function ze(e,t){let n=e.parentElement(),r=e.firstNode(),s=e.lastNode(),i=r;for(;;){let e=i.nextSibling;if(n.insertBefore(i,t),i===s)return e;i=e}}function Le(e){let t=e.parentElement(),n=e.firstNode(),r=e.lastNode(),s=n;for(;;){let e=s.nextSibling;if(t.removeChild(s),s===r)return e;s=e}}function Ie(e,t){let n=function(e){return J.get(e)||null}(e);null!==n&&t.willDestroy(se(n))}function Re(e,t){let n=function(e){let t=J.get(e);return t&&t.size>0?(J.delete(e),t):null}(e);null!==n&&t.didDestroy(se(n))}function De(e,t){t.willDestroy(re(e))}function je(e,t){t.didDestroy(re(e))}var He;class Ue{constructor(e){this.node=e}firstNode(){return this.node}}class Fe{constructor(e){this.node=e}lastNode(){return this.node}}const Ve=$("CURSOR_STACK");class $e{constructor(e,t,n){this.constructing=null,this.operations=null,this[He]=new U,this.modifierStack=new U,this.blockStack=new U,this.pushElement(t,n),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}static forInitialRender(e,t){return new this(e,t.element,t.nextSibling).initialize()}static resume(e,t){let n=new this(e,t.parentElement(),t.reset(e)).initialize();return n.pushLiveBlock(t),n}initialize(){return this.pushSimpleBlock(),this}debugBlocks(){return this.blockStack.toArray()}get element(){return this[Ve].current.element}get nextSibling(){return this[Ve].current.nextSibling}get hasBlocks(){return this.blockStack.size>0}block(){return this.blockStack.current}popElement(){this[Ve].pop(),this[Ve].current}pushSimpleBlock(){return this.pushLiveBlock(new We(this.element))}pushUpdatableBlock(){return this.pushLiveBlock(new Je(this.element))}pushBlockList(e){return this.pushLiveBlock(new Ye(this.element,e))}pushLiveBlock(e,t=!1){let n=this.blockStack.current;return null!==n&&(t||n.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(e){let t=this.element,n=this.constructing;this.__flushElement(t,n),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(n,null),this.didOpenElement(n)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){return this.willCloseElement(),this.popElement(),this.popModifiers()}pushRemoteElement(e,t,n){return this.__pushRemoteElement(e,t,n)}__pushRemoteElement(e,t,n){if(this.pushElement(e,n),void 0===n)for(;e.lastChild;)e.removeChild(e.lastChild);let r=new Ge(e);return this.pushLiveBlock(r,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t=null){this[Ve].push(new Te(e,t))}pushModifiers(e){this.modifierStack.push(e)}popModifiers(){return this.modifierStack.pop()}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let{dom:t,element:n,nextSibling:r}=this,s=t.createTextNode(e);return t.insertBefore(n,s,r),s}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let n=new Ne(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),n}return new Be(this.element,this.__appendComment(""))}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendDynamicHTML(e){let t=this.trustedContent(e);this.didAppendBounds(t)}appendDynamicText(e){let t=this.untrustedContent(e);return this.didAppendNode(t),t}appendDynamicFragment(e){let t=this.__appendFragment(e);this.didAppendBounds(t)}appendDynamicNode(e){let t=this.__appendNode(e),n=new Be(this.element,t);this.didAppendBounds(n)}trustedContent(e){return this.__appendHTML(e)}untrustedContent(e){return this.__appendText(e)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let{dom:t,element:n,nextSibling:r}=this,s=t.createComment(e);return t.insertBefore(n,s,r),s}__setAttribute(e,t,n){this.dom.setAttribute(this.constructing,e,t,n)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,n){this.__setAttribute(e,t,n)}setDynamicAttribute(e,t,n,r){let s=this.constructing,i=this.env.attributeFor(s,e,n,r);return i.set(this,t,this.env),i}}He=Ve;class We{constructor(e){this.parent=e,this.first=null,this.last=null,this.destroyables=null,this.nesting=0}parentElement(){return this.parent}firstNode(){return this.first.firstNode()}lastNode(){return this.last.lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0===this.nesting&&(this.first||(this.first=new Ue(e)),this.last=new Fe(e))}didAppendBounds(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)}finalize(e){null===this.first&&e.appendComment("")}}class Ge extends We{[W](){this.parentElement()===this.firstNode().parentNode&&Le(this)}}class Je extends We{reset(e){let t=function(e,t){return Ie(e,t),Re(e,t),Le(e)}(this,e);return this.first=null,this.last=null,this.destroyables=null,this.nesting=0,t}}class Ye{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}parentElement(){return this.parent}firstNode(){return this.boundList.head().firstNode()}lastNode(){return this.boundList.tail().lastNode()}openElement(e){}closeElement(){}didAppendNode(e){}didAppendBounds(e){}finalize(e){}}class Ke{constructor(e){this.lastValue=null,this.lastRevision=null,this.initialized=!1,this.tag=e.tag,this.reference=e}peek(){return this.initialized?this.lastValue:this.initialize()}revalidate(){if(!this.initialized)return this.initialize();let{reference:e,lastRevision:t}=this,n=e.tag;if(u(n,t))return qe;let{lastValue:r}=this,s=e.value();return this.lastRevision=o(),s===r?qe:(this.lastValue=s,s)}initialize(){let{reference:e}=this,t=this.lastValue=e.value();return this.lastRevision=o(e.tag),this.initialized=!0,t}}const qe=$("NOT_MODIFIED");const Xe=new class{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Xe}}(void 0);class Qe{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Xe}}class Ze extends class{constructor(e){this.next=null,this.prev=null,this.value=e}}{constructor(e,t){super(e.valueReferenceFor(t)),this.retained=!1,this.seen=!1,this.key=t.key,this.iterable=e,this.memo=e.memoReferenceFor(t)}update(e){this.retained=!0,this.iterable.updateValueReference(this.value,e),this.iterable.updateMemoReference(this.memo,e)}shouldRemove(){return!this.retained}reset(){this.retained=!1,this.seen=!1}}class et{constructor(e){this.iterator=null,this.map=new Map,this.list=new ue,this.tag=e.tag,this.iterable=e}isEmpty(){return(this.iterator=this.iterable.iterate()).isEmpty()}iterate(){let e;return e=null===this.iterator?this.iterable.iterate():this.iterator,this.iterator=null,e}advanceToKey(e,t){let n=t;for(;null!==n&&n.key!==e;)n=this.advanceNode(n);return n}has(e){return this.map.has(e)}get(e){return this.map.get(e)}wasSeen(e){let t=this.map.get(e);return void 0!==t&&t.seen}update(e){let t=this.get(e.key);return t.update(e),t}append(e){let{map:t,list:n,iterable:r}=this,s=new Ze(r,e);return t.set(e.key,s),n.append(s),s}insertBefore(e,t){let{map:n,list:r,iterable:s}=this,i=new Ze(s,e);return n.set(e.key,i),i.retained=!0,r.insertBefore(i,t),i}move(e,t){let{list:n}=this;e.retained=!0,n.remove(e),n.insertBefore(e,t)}remove(e){let{list:t}=this;t.remove(e),this.map.delete(e.key)}nextNode(e){return this.list.nextNode(e)}advanceNode(e){return e.seen=!0,this.list.nextNode(e)}head(){return this.list.head()}}class tt{constructor(e){this.iterator=null;let t=new et(e);this.artifacts=t}next(){let{artifacts:e}=this,t=(this.iterator=this.iterator||e.iterate()).next();return null===t?null:e.append(t)}}var nt;!function(e){e[e.Append=0]="Append",e[e.Prune=1]="Prune",e[e.Done=2]="Done"}(nt||(nt={}));const rt=$("END");class st{constructor({target:e,artifacts:t,env:n}){this.target=e,this.artifacts=t,this.iterator=t.iterate(),this.current=t.head(),this.env=n}sync(){let e=nt.Append;for(;;)switch(e){case nt.Append:e=this.nextAppend();break;case nt.Prune:e=this.nextPrune();break;case nt.Done:return void this.nextDone()}}advanceToKey(e){let{current:t,artifacts:n}=this;if(null===t)return;let r=n.advanceNode(t);if(r.key===e)return void(this.current=n.advanceNode(r));let s=n.advanceToKey(e,t);s&&(this.move(s,t),this.current=n.nextNode(t))}move(e,t){e.next!==t&&(this.artifacts.move(e,t),this.target.move(this.env,e.key,e.value,e.memo,t?t.key:rt))}nextAppend(){let{iterator:e,current:t,artifacts:n}=this,r=e.next();if(null===r)return this.startPrune();let{key:s}=r;return null!==t&&t.key===s?this.nextRetain(r,t):n.has(s)?this.nextMove(r):this.nextInsert(r),nt.Append}nextRetain(e,t){let{artifacts:n}=this;t.update(e),this.current=n.nextNode(t),this.target.retain(this.env,e.key,t.value,t.memo)}nextMove(e){let{current:t,artifacts:n}=this,{key:r}=e,s=n.update(e);n.wasSeen(r)?this.move(s,t):this.advanceToKey(r)}nextInsert(e){let{artifacts:t,target:n,current:r}=this,s=t.insertBefore(e,r);n.insert(this.env,s.key,s.value,s.memo,r?r.key:null)}startPrune(){return this.current=this.artifacts.head(),nt.Prune}nextPrune(){let{artifacts:e,target:t,current:n}=this;if(null===n)return nt.Done;let r=n;return this.current=e.nextNode(r),r.shouldRemove()?(e.remove(r),t.delete(this.env,r.key)):r.reset(),nt.Prune}nextDone(){this.target.done(this.env)}}const it=$("UPDATE_REFERENCED_VALUE");class lt{constructor(e){this.env=e,this.children=j(),this.tag=g}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}class at extends lt{constructor(e,t){super(t),this.inner=e}value(){return this.inner}}class ot extends lt{constructor(e,t,n,r){super(n),this.fn=e,this.args=t,this.computeRevision=null,this.computeTag=null,b(t)&&this.compute();let{tag:s,computeTag:i}=this;if(null!==i&&y(i))s=this.tag=g,this.computeRevision=o();else{let e=this.valueTag=f();s=this.tag=v([t.tag,e]),null!==i&&(d(e,i),this.computeRevision=o())}}compute(){this.computeTag=A(()=>{this.computeValue=this.fn(this.args)})}value(){let{tag:e,computeRevision:t}=this;return null!==t&&u(e,t)||(this.compute(),d(this.valueTag,this.computeTag),this.computeRevision=o()),this.computeValue}}class ut{constructor(e,t,n){this.parentReference=e,this.propertyKey=t,this.env=n,this.children=j(),this.lastRevision=null;let r=this.valueTag=f(),s=e.tag;this.tag=v([s,r])}value(){let{tag:e,lastRevision:t,lastValue:n,parentReference:r,valueTag:s,propertyKey:i}=this;if(null===t||!u(e,t)){let e=r.value();if(null!=e){let t=A(()=>{n=this.env.getPath(e,i)});d(s,t)}else n=void 0;this.lastValue=n,this.lastRevision=o()}return n}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}[it](e){let{parentReference:t,propertyKey:n}=this,r=t.value();this.env.setPath(r,n,e)}}class ct{constructor(e,t,n,r){this.parentReference=e,this.itemValue=t,this.env=r,this.tag=f(),this.children=j()}value(){return this.itemValue}update(e){p(this.tag),this.itemValue=e}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}const ht={},pt=(e,t)=>t,dt=(e,t)=>String(t),mt=e=>null===e?ht:e;function ft(e,t){switch(e){case"@key":return yt(pt);case"@index":return yt(dt);case"@identity":return yt(mt);default:return function(e,t){return yt(n=>t(n,e))}(e,t)}}class gt{get weakMap(){return void 0===this._weakMap&&(this._weakMap=new WeakMap),this._weakMap}get primitiveMap(){return void 0===this._primitiveMap&&(this._primitiveMap=new Map),this._primitiveMap}set(e,t){H(e)||"function"==typeof e?this.weakMap.set(e,t):this.primitiveMap.set(e,t)}get(e){return H(e)||"function"==typeof e?this.weakMap.get(e):this.primitiveMap.get(e)}}const bt=new gt;function yt(e){let t=new gt;return(n,r)=>{let s=e(n,r),i=t.get(n)||0;return t.set(s,i+1),0===i?s:function(e,t){let n=bt.get(e);void 0===n&&(n=[],bt.set(e,n));let r=n[t];return void 0===r&&(r={value:e,count:t},n[t]=r),r}(s,i)}}class vt{constructor(e,t,n){this.parentRef=e,this.key=t,this.env=n,this.tag=e.tag}iterate(){let{parentRef:e,key:t,env:n}=this,r=e.value(),s=ft(t,n.getPath);if(Array.isArray(r))return new kt(r,s);let i=n.toIterator(r);return null===i?new kt(L,()=>null):new wt(i,s)}valueReferenceFor(e){let{parentRef:t,env:n}=this;return new ct(t,e.value,e.memo,n)}updateValueReference(e,t){e.update(t.value)}memoReferenceFor(e){let{parentRef:t,env:n}=this;return new ct(t,e.memo,"",n)}updateMemoReference(e,t){e.update(t.memo)}}class wt{constructor(e,t){this.inner=e,this.keyFor=t}isEmpty(){return this.inner.isEmpty()}next(){let e=this.inner.next();return null!==e&&(e.key=this.keyFor(e.value,e.memo)),e}}class kt{constructor(e,t){this.iterator=e,this.keyFor=t,this.pos=0,0===e.length?this.current={kind:"empty"}:this.current={kind:"first",value:e[this.pos]}}isEmpty(){return"empty"===this.current.kind}next(){let e,t=this.current;if("first"===t.kind)this.current={kind:"progress"},e=t.value;else{if(this.pos>=this.iterator.length-1)return null;e=this.iterator[++this.pos]}let{keyFor:n}=this;return{key:n(e,this.pos),value:e,memo:this.pos}}}const xt={foreignObject:1,desc:1,title:1},St=Object.create(null);class Et{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement("div")}createElement(e,t){let n,r;if(t?(n="http://www.w3.org/2000/svg"===t.namespaceURI||"svg"===e,r=!!xt[t.tagName]):(n="svg"===e,r=!1),n&&!r){if(St[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS("http://www.w3.org/2000/svg",e)}return this.document.createElement(e)}insertBefore(e,t,n){e.insertBefore(t,n)}insertHTMLBefore(e,t,n){if(""===n){let n=this.createComment("");return e.insertBefore(n,t),new Ne(e,n,n)}let r,s=t?t.previousSibling:e.lastChild;if(null===t)e.insertAdjacentHTML("beforeend",n),r=e.lastChild;else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",n),r=t.previousSibling;else{let{uselessElement:s}=this;e.insertBefore(s,t),s.insertAdjacentHTML("beforebegin",n),r=s.previousSibling,e.removeChild(s)}let i=s?s.nextSibling:e.firstChild;return new Ne(e,i,r)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}function Ct(e,t,n){if(!e)return t;if(!function(e,t){let n=e.createElementNS(t,"svg");try{n.insertAdjacentHTML("beforeend","<circle></circle>")}catch(e){}finally{return 1!==n.childNodes.length||"http://www.w3.org/2000/svg"!==n.firstChild.namespaceURI}}(e,n))return t;let r=e.createElement("div");return class extends t{insertHTMLBefore(e,t,s){return""===s||e.namespaceURI!==n?super.insertHTMLBefore(e,t,s):function(e,t,n,r){let s;if("FOREIGNOBJECT"===e.tagName.toUpperCase()){let e="<svg><foreignObject>"+n+"</foreignObject></svg>";G(t),t.insertAdjacentHTML("afterbegin",e),s=t.firstChild.firstChild}else{let e="<svg>"+n+"</svg>";G(t),t.insertAdjacentHTML("afterbegin",e),s=t.firstChild}return function(e,t,n){let r=e.firstChild,s=r,i=r;for(;i;){let e=i.nextSibling;t.insertBefore(i,n),s=i,i=e}return new Ne(t,r,s)}(s,e,r)}(e,r,s,t)}}}function Ot(e,t){return e&&function(e){let t=e.createElement("div");if(t.appendChild(e.createTextNode("first")),t.insertAdjacentHTML("beforeend","second"),2===t.childNodes.length)return!1;return!0}(e)?class extends t{constructor(e){super(e),this.uselessComment=e.createComment("")}insertHTMLBefore(e,t,n){if(""===n)return super.insertHTMLBefore(e,t,n);let r=!1,s=t?t.previousSibling:e.lastChild;s&&s instanceof Text&&(r=!0,e.insertBefore(this.uselessComment,t));let i=super.insertHTMLBefore(e,t,n);return r&&e.removeChild(this.uselessComment),i}}:t}["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach(e=>St[e]=1);let _t="undefined"==typeof document?null:document;var Mt;!function(e){class t extends Et{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,n,r=null){r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}}e.TreeConstruction=t;let n=t;n=Ot(_t,n),n=Ct(_t,n,"http://www.w3.org/2000/svg"),e.DOMTreeConstruction=n}(Mt||(Mt={}));class Pt extends Et{constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,n){e.setAttribute(t,n)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,n){this.insertBefore(e,t,n.nextSibling)}}let At=Pt;At=Ot(_t,At),At=Ct(_t,At,"http://www.w3.org/2000/svg");const Tt=Mt.DOMTreeConstruction;class Nt extends Qe{static create(e){return void 0===e?Lt:null===e?It:!0===e?Rt:!1===e?Dt:"number"==typeof e?new zt(e):new Bt(e)}constructor(e){super(e)}get(e){return Lt}}class Bt extends Nt{constructor(){super(...arguments),this.lengthReference=null}get(e){if("length"===e){let{lengthReference:e}=this;return null===e&&(e=this.lengthReference=new zt(this.inner.length)),e}return super.get(e)}}class zt extends Nt{constructor(e){super(e)}}const Lt=new zt(void 0),It=new zt(null),Rt=new zt(!0),Dt=new zt(!1);class jt{constructor(e,t=Ht){this.inner=e,this.toBool=t,this.tag=e.tag}value(){return this.toBool(this.inner.value())}}function Ht(e){return!!e}function Ut(e){return Ft(e)?"":String(e)}function Ft(e){return null==e||"function"!=typeof e.toString}function Vt(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function $t(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function Wt(e){return"string"==typeof e}function Gt(e,t){let n,r;if(t in e)r=t,n="prop";else{let s=t.toLowerCase();s in e?(n="prop",r=s):(n="attr",r=t)}return"prop"!==n||"style"!==r.toLowerCase()&&!function(e,t){let n=Jt[e.toUpperCase()];return n&&n[t.toLowerCase()]||!1}(e.tagName,r)||(n="attr"),{normalized:r,type:n}}const Jt={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},BUTTON:{form:!0}};const Yt=["javascript:","vbscript:"],Kt=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],qt=["EMBED"],Xt=["href","src","background","action"],Qt=["src"];function Zt(e,t){return-1!==e.indexOf(t)}function en(e,t){return(null===e||Zt(Kt,e))&&Zt(Xt,t)}function tn(e,t){return null!==e&&(Zt(qt,e)&&Zt(Qt,t))}function nn(e,t){return en(e,t)||tn(e,t)}function rn(e,t,n,r){let s=null;if(null==r)return r;if(Vt(r))return r.toHTML();s=t?t.tagName.toUpperCase():null;let i=Ut(r);if(en(s,n)){let t=e.protocolForURL(i);if(Zt(Yt,t))return"unsafe:"+i}return tn(s,n)?"unsafe:"+i:i}function sn(e,t,n){let{tagName:r,namespaceURI:s}=e,i={element:e,name:t,namespace:n};if("http://www.w3.org/2000/svg"===s)return ln(r,t,i);let{type:l,normalized:a}=Gt(e,t);return"attr"===l?ln(r,a,i):function(e,t,n){if(nn(e,t))return new cn(t,n);if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new pn(t,n);if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new dn(t,n);return new un(t,n)}(r,a,i)}function ln(e,t,n){return nn(e,t)?new hn(n):new on(n)}class an{constructor(e){this.attribute=e}}class on extends an{set(e,t,n){let r=mn(t);if(null!==r){let{name:t,namespace:n}=this.attribute;e.__setAttribute(t,r,n)}}update(e,t){let n=mn(e),{element:r,name:s}=this.attribute;null===n?r.removeAttribute(s):r.setAttribute(s,n)}}class un extends an{constructor(e,t){super(t),this.normalizedName=e}set(e,t,n){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))}update(e,t){let{element:n}=this.attribute;this.value!==e&&(n[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())}removeAttribute(){let{element:e,namespace:t}=this.attribute;t?e.removeAttributeNS(t,this.normalizedName):e.removeAttribute(this.normalizedName)}}class cn extends un{set(e,t,n){let{element:r,name:s}=this.attribute,i=rn(n,r,s,t);super.set(e,i,n)}update(e,t){let{element:n,name:r}=this.attribute,s=rn(t,n,r,e);super.update(s,t)}}class hn extends on{set(e,t,n){let{element:r,name:s}=this.attribute,i=rn(n,r,s,t);super.set(e,i,n)}update(e,t){let{element:n,name:r}=this.attribute,s=rn(t,n,r,e);super.update(s,t)}}class pn extends un{set(e,t){e.__setProperty("value",Ut(t))}update(e){let t=this.attribute.element,n=t.value,r=Ut(e);n!==r&&(t.value=r)}}class dn extends un{set(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)}update(e){let t=this.attribute.element;t.selected=!!e}}function mn(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}const fn={},gn=Object.freeze([]);class bn{constructor(){this.strings=[],this.arrays=[gn],this.tables=[],this.handles=[],this.resolved=[],this.numbers=[],this.others=[]}other(e){return this.others.push(e)-1}string(e){let t=this.strings.indexOf(e);return t>-1?t:this.strings.push(e)-1}stringArray(e){let t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.string(e[n]);return this.array(t)}array(e){if(0===e.length)return 0;let t=this.arrays.indexOf(e);return t>-1?t:this.arrays.push(e)-1}serializable(e){let t=JSON.stringify(e),n=this.strings.indexOf(t);return n>-1?n:this.strings.push(t)-1}templateMeta(e){return this.serializable(e)}number(e){let t=this.numbers.indexOf(e);return t>-1?t:this.numbers.push(e)-1}toPool(){return{strings:this.strings,arrays:this.arrays,handles:this.handles,numbers:this.numbers}}}class yn{constructor(e){this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.numbers=e.numbers,this.others=[]}getString(e){return this.strings[e]}getNumber(e){return this.numbers[e]}getStringArray(e){let t=this.getArray(e),n=new Array(t.length);for(let e=0;e<t.length;e++){let r=t[e];n[e]=this.getString(r)}return n}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.getSerializable(e)}getOther(e){return this.others[e]}}class vn extends bn{constructor(e){super(),this.metas=[],e&&(this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.resolved=this.handles.map(()=>fn),this.numbers=e.numbers),this.others=[]}templateMeta(e){let t=this.metas.indexOf(e);return t>-1?t:this.metas.push(e)-1}getNumber(e){return this.numbers[e]}getString(e){return this.strings[e]}getStringArray(e){let t=this.getArray(e),n=new Array(t.length);for(let e=0;e<t.length;e++){let r=t[e];n[e]=this.getString(r)}return n}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.metas[e]}getOther(e){return this.others[e]}}class wn{constructor(e){this.heap=e,this.offset=0}get size(){return 1+((768&this.heap.getbyaddr(this.offset))>>8)}get isMachine(){return 1024&this.heap.getbyaddr(this.offset)?1:0}get type(){return 255&this.heap.getbyaddr(this.offset)}get op1(){return this.heap.getbyaddr(this.offset+1)}get op2(){return this.heap.getbyaddr(this.offset+2)}get op3(){return this.heap.getbyaddr(this.offset+3)}}function kn(e,t){return t|e<<2}function xn(e,t){return e|t<<30}class Sn{constructor(e){let{buffer:t,table:n}=e;this.heap=new Int32Array(t),this.table=n}getaddr(e){return this.table[e]}getbyaddr(e){return this.heap[e]}sizeof(e){return _n(this.table,e)}scopesizeof(e){return Mn(this.table,e)}}class En{constructor(){this.placeholders=[],this.stdlibs=[],this.offset=0,this.handle=0,this.capacity=1048576,this.heap=new Int32Array(1048576),this.table=[]}push(e){this.sizeCheck(),this.heap[this.offset++]=e}sizeCheck(){if(0===this.capacity){let e=On(this.heap,0,this.offset);this.heap=new Int32Array(e.length+1048576),this.heap.set(e,0),this.capacity=1048576}this.capacity--}getbyaddr(e){return this.heap[e]}setbyaddr(e,t){this.heap[e]=t}malloc(){this.table.push(this.offset,0,0);let e=this.handle;return this.handle+=3,e}finishMalloc(e,t){this.table[e+1]=kn(t,0)}size(){return this.offset}getaddr(e){return this.table[e]}gethandle(e){this.table.push(e,kn(0,3),0);let t=this.handle;return this.handle+=3,t}sizeof(e){return _n(this.table,e)}scopesizeof(e){return Mn(this.table,e)}free(e){let t=this.table[e+1];this.table[e+1]=xn(t,1)}compact(){let e=0,{table:t,table:{length:n},heap:r}=this;for(let s=0;s<n;s+=3){let n=t[s],i=t[s+1],l=i&Size.SIZE_MASK,a=0&i;if(2!==a)if(1===a)t[s+1]=xn(i,2),e+=l;else if(0===a){for(let t=n;t<=s+l;t++)r[t-e]=r[t];t[s]=n-e}else 3===a&&(t[s]=n-e)}this.offset=this.offset-e}pushPlaceholder(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.placeholders.push([t,e])}pushStdlib(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.stdlibs.push([t,e])}patchPlaceholders(){let{placeholders:e}=this;for(let t=0;t<e.length;t++){let[n,r]=e[t];this.setbyaddr(n,r())}}patchStdlibs(e){let{stdlibs:t}=this;for(let n=0;n<t.length;n++){let[r,{value:s}]=t[n];this.setbyaddr(r,e[s])}this.stdlibs=[]}capture(e,t=this.offset){this.patchPlaceholders(),this.patchStdlibs(e);let n=On(this.heap,0,t).buffer;return{handle:this.handle,table:this.table,buffer:n}}}class Cn{constructor(e,t){this.constants=e,this.heap=t,this._opcode=new wn(this.heap)}static hydrate(e){let t=new Sn(e.heap),n=new yn(e.constants);return new Cn(n,t)}opcode(e){return this._opcode.offset=e,this._opcode}}function On(e,t,n){if(void 0!==e.slice)return e.slice(t,n);let r=new Int32Array(n);for(;t<n;t++)r[t]=e[t];return r}function _n(e,t){return-1}function Mn(e,t){return e[t+1]>>2}function Pn(e){e.heap.patchStdlibs(e.stdlib)}var An;class Tn{constructor(e,t,n,r){this.slots=e,this.callerScope=t,this.evalScope=n,this.partialMap=r}static root(e,t=0){let n=new Array(t+1);for(let e=0;e<=t;e++)n[e]=Lt;return new Tn(n,null,null,null).init({self:e})}static sized(e=0){let t=new Array(e+1);for(let n=0;n<=e;n++)t[n]=Lt;return new Tn(t,null,null,null)}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){let t=this.get(e);return t===Lt?null:t}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new Tn(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}const Nn=$("TRANSACTION");class Bn{constructor(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[],this.destructors=[]}didCreate(e,t){this.createdComponents.push(e),this.createdManagers.push(t)}didUpdate(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)}scheduleInstallModifier(e,t){this.scheduledInstallModifiers.push(e),this.scheduledInstallManagers.push(t)}scheduleUpdateModifier(e,t){this.scheduledUpdateModifiers.push(e),this.scheduledUpdateModifierManagers.push(t)}willDestroy(e){e[Y]()}didDestroy(e){this.destructors.push(e)}commit(){let{createdComponents:e,createdManagers:t}=this;for(let n=0;n<e.length;n++){let r=e[n];t[n].didCreate(r)}let{updatedComponents:n,updatedManagers:r}=this;for(let e=0;e<n.length;e++){let t=n[e];r[e].didUpdate(t)}let{destructors:s}=this;for(let e=0;e<s.length;e++)s[e][K]();let{scheduledInstallManagers:i,scheduledInstallModifiers:l}=this;for(let e=0;e<i.length;e++){let t=l[e];i[e].install(t)}let{scheduledUpdateModifierManagers:a,scheduledUpdateModifiers:o}=this;for(let e=0;e<a.length;e++){let t=o[e];a[e].update(t)}}}function zn(e,t){let n=void 0!==e?e:t;return n}class Ln{constructor(e,t){this.delegate=t,this[An]=null,this.extra=this.delegate.extra,this.isInteractive="boolean"!=typeof this.delegate.isInteractive||this.delegate.isInteractive,this.protocolForURL=zn(this.delegate.protocolForURL,In),this.attributeFor=zn(this.delegate.attributeFor,Rn),this.getPath=zn(this.delegate.getPath,Dn),this.setPath=zn(this.delegate.setPath,jn),this.toBool=zn(this.delegate.toBool,Hn),this.toIterator=zn(this.delegate.toIterator,Un),e.appendOperations?(this.appendOperations=e.appendOperations,this.updateOperations=e.updateOperations):e.document&&(this.appendOperations=new Tt(e.document),this.updateOperations=new Pt(e.document))}getTemplatePathDebugContext(e){return void 0!==this.delegate.getTemplatePathDebugContext?this.delegate.getTemplatePathDebugContext(e):""}setTemplatePathDebugContext(e,t,n){void 0!==this.delegate.setTemplatePathDebugContext&&this.delegate.setTemplatePathDebugContext(e,t,n)}iterableFor(e,t){let n=null===t?"@identity":String(t);return new vt(e,n,this)}toConditionalReference(e){return new jt(e,this.delegate.toBool)}getAppendOperations(){return this.appendOperations}getDOM(){return this.updateOperations}begin(){void 0!==this.delegate.onTransactionBegin&&this.delegate.onTransactionBegin(),this[Nn]=new Bn}get transaction(){return this[Nn]}didCreate(e,t){this.transaction.didCreate(e,t)}didUpdate(e,t){this.transaction.didUpdate(e,t)}scheduleInstallModifier(e,t){this.isInteractive&&this.transaction.scheduleInstallModifier(e,t)}scheduleUpdateModifier(e,t){this.isInteractive&&this.transaction.scheduleUpdateModifier(e,t)}willDestroy(e){this.transaction.willDestroy(e)}didDestroy(e){this.transaction.didDestroy(e)}commit(){let e=this.transaction;this[Nn]=null,e.commit(),void 0!==this.delegate.onTransactionCommit&&this.delegate.onTransactionCommit()}}function In(e){return"object"==typeof URL||"undefined"==typeof URL?function(e){if("undefined"==typeof window){let t=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i.exec(e);return t&&t[1]?t[1].toLowerCase():""}let t=window.document.createElement("a");return t.href=e,t.protocol}(e):"undefined"!=typeof document?new URL(e,document.baseURI).protocol:new URL(e,"https://www.example.com").protocol}function Rn(e,t,n,r){return sn(e,t,r)}function Dn(e,t){return e[t]}function jn(e,t,n){return e[t]=n}function Hn(e){return Boolean(e)}function Un(e){return e&&e[Symbol.iterator]?e[Symbol.iterator]():null}An=Nn;class Fn{constructor(e){this.inner=e}lookupComponent(e,t){if(this.inner.lookupComponent){let n=this.inner.lookupComponent(e,t);if(void 0===n)throw new Error(`Unexpected component ${e} (from ${t}) (lookupComponent returned undefined)`);return n}throw new Error("lookupComponent not implemented on RuntimeResolver.")}lookupPartial(e,t){if(this.inner.lookupPartial){let n=this.inner.lookupPartial(e,t);if(void 0===n)throw new Error(`Unexpected partial ${e} (from ${t}) (lookupPartial returned undefined)`);return n}throw new Error("lookupPartial not implemented on RuntimeResolver.")}resolve(e){if(this.inner.resolve){let t=this.inner.resolve(e);if(void 0===t)throw new Error(`Unexpected handle ${e} (resolve returned undefined)`);return t}throw new Error("resolve not implemented on RuntimeResolver.")}compilable(e){if(this.inner.compilable){let t=this.inner.compilable(e);if(void 0===t)throw new Error(`Unable to compile ${name} (compilable returned undefined)`);return t}throw new Error("compilable not implemented on RuntimeResolver.")}getInvocation(e){if(this.inner.getInvocation){let t=this.inner.getInvocation(e);if(void 0===t)throw new Error(`Unable to get invocation for ${JSON.stringify(e)} (getInvocation returned undefined)`);return t}throw new Error("getInvocation not implemented on RuntimeResolver.")}}const Vn=new class{constructor(){this.evaluateOpcode=function(e){let t=new Array(e);for(let n=0;n<e;n++)t[n]=null;return t}(107).slice()}add(e,t,n="syscall"){this.evaluateOpcode[e]={syscall:"machine"!==n,evaluate:t}}debugBefore(e,t){return{sp:void 0,pc:e.fetchValue(0),name:void 0,params:void 0,type:t.type,isMachine:t.isMachine,size:t.size,state:void 0}}debugAfter(e,t){let{sp:n,type:r,isMachine:s,pc:i}=t}evaluate(e,t,n){let r=this.evaluateOpcode[n];r.syscall?r.evaluate(e,t):r.evaluate(e[Ee],t)}};class $n extends class{constructor(){D(this)}}{constructor(){super(...arguments),this.next=null,this.prev=null}}function Wn(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n].tag;r!==g&&t.push(r)}return w(t)}function Gn(e){let t=[],n=e.head();for(;null!==n;){let r=n.tag;r!==g&&t.push(r),n=e.nextNode(n)}return w(t)}class Jn extends class{constructor(){this.lastRevision=null,this.lastValue=null}value(){let{tag:e,lastRevision:t,lastValue:n}=this;return null!==t&&u(e,t)||(n=this.lastValue=this.compute(),this.lastRevision=o()),n}invalidate(){this.lastRevision=null}}{constructor(e){super(),this.parts=e,this.tag=Wn(e)}compute(){let e=new Array;for(let t=0;t<this.parts.length;t++){let n=this.parts[t].value();null!=n&&(e[t]=Yn(n))}return e.length>0?e.join(""):null}}function Yn(e){return"function"!=typeof e.toString?"":String(e)}function Kn(e){return e===Lt}function qn(e){return 0|(e.dynamicLayout?1:0)|(e.dynamicTag?2:0)|(e.prepareArgs?4:0)|(e.createArgs?8:0)|(e.attributeHook?16:0)|(e.elementHook?32:0)|(e.dynamicScope?64:0)|(e.createCaller?128:0)|(e.updateHook?256:0)|(e.createInstance?512:0)|(e.wrapped?1024:0)|(e.willDestroy?2048:0)}function Xn(e,t,n){return!!(t&n)}function Qn(e,t){return!!(e&t)}var Zn;Vn.add(16,(e,{op1:t})=>{let n=e.stack,r=e.runtime.resolver.resolve(t)(n.pop(),e);e.loadValue(8,r)}),Vn.add(22,(e,{op1:t})=>{let n=e.referenceForSymbol(t);e.stack.push(n)}),Vn.add(19,(e,{op1:t})=>{let n=e.stack.pop();e.scope().bindSymbol(t,n)}),Vn.add(21,(e,{op1:t})=>{let n=e.stack.pop(),r=e.stack.pop(),s=e.stack.pop(),i=s?[n,r,s]:null;e.scope().bindBlock(t,i)},"jit"),Vn.add(20,(e,{op1:t})=>{let n=e.stack.pop(),r=e.stack.pop(),s=e.stack.pop(),i=s?[n,r,s]:null;e.scope().bindBlock(t,i)}),Vn.add(105,(e,{op1:t})=>{let n=e[Pe].getString(t),r=e.scope().getPartialMap()[n];void 0===r&&(r=e.getSelf().get(n)),e.stack.push(r)}),Vn.add(37,(e,{op1:t})=>{e.pushRootScope(t)}),Vn.add(23,(e,{op1:t})=>{let n=e[Pe].getString(t),r=e.stack.pop();e.stack.push(r.get(n))}),Vn.add(24,(e,{op1:t})=>{let{stack:n}=e,r=e.scope().getBlock(t);n.push(r)}),Vn.add(25,e=>{let{stack:t}=e,n=t.pop();n&&!Kn(n)?(t.push(n[2]),t.push(n[1]),t.push(n[0])):(t.push(null),t.push(null),t.push(null))}),Vn.add(26,e=>{let{stack:t}=e,n=t.pop();n&&!Kn(n)?t.push(Rt):t.push(Dt)}),Vn.add(27,e=>{e.stack.pop(),e.stack.pop();let t=e.stack.pop(),n=t&&t.parameters.length;e.stack.push(n?Rt:Dt)}),Vn.add(28,(e,{op1:t})=>{let n=new Array(t);for(let r=t;r>0;r--){n[r-1]=e.stack.pop()}e.stack.push(new Jn(n))});const er=$("CURRIED COMPONENT DEFINITION");function tr(e){return!(!e||!e[er])}class nr{constructor(e,t){this.inner=e,this.args=t,this[Zn]=!0}unwrap(e){e.realloc(this.offset);let t=this;for(;;){let{args:n,inner:r}=t;if(n&&(e.positional.prepend(n.positional),e.named.merge(n.named)),!tr(r))return r;t=r}}get offset(){let{inner:e,args:t}=this,n=t?t.positional.length:0;return tr(e)?n+e.offset:n}}function rr(e,t,n){return e.lookupComponent(t,n)}Zn=er;class sr{constructor(e){this.list=e,this.tag=Wn(e),this.list=e}value(){let e=[],{list:t}=this;for(let n=0;n<t.length;n++){let r=Ut(t[n].value());r&&e.push(r)}return 0===e.length?null:e.join(" ")}}class ir{constructor(e,t,n,r){this.inner=e,this.resolver=t,this.meta=n,this.args=r,this.tag=e.tag,this.lastValue=null,this.lastDefinition=null}value(){let{inner:e,lastValue:t}=this,n=e.value();if(n===t)return this.lastDefinition;let r=null;if(tr(n))r=n;else if("string"==typeof n&&n){let{resolver:e,meta:t}=this;r=rr(e,n,t)}return r=this.curry(r),this.lastValue=n,this.lastDefinition=r,r}get(){return Lt}curry(e){let{args:t}=this;return!t&&tr(e)?e:e?new nr(e,t):null}}class lr extends $n{constructor(e,t,n){super(),this.node=e,this.reference=t,this.lastValue=n,this.type="dynamic-text",this.tag=t.tag,this.lastRevision=o(this.tag)}evaluate(){let{reference:e,tag:t}=this;u(t,this.lastRevision)||(this.lastRevision=o(),this.update(e.value()))}update(e){let t,{lastValue:n}=this;if(e!==n&&(t=Ft(e)?"":Wt(e)?e:String(e),t!==n)){this.node.nodeValue=this.lastValue=t}}}class ar{constructor(e){this.inner=e,this.tag=e.tag}value(){let e=this.inner.value();return function(e){return Wt(e)||Ft(e)||"boolean"==typeof e||"number"==typeof e}(e)?1:(t=e)&&t[er]?0:Vt(e)?3:function(e){return $t(e)&&11===e.nodeType}(e)?4:$t(e)?5:1;var t}}Vn.add(43,e=>{let t=e.stack.pop().value(),n=Ft(t)?"":String(t);e.elements().appendDynamicHTML(n)}),Vn.add(44,e=>{let t=e.stack.pop().value().toHTML(),n=Ft(t)?"":t;e.elements().appendDynamicHTML(n)}),Vn.add(47,e=>{let t=e.stack.pop(),n=t.value(),r=Ft(n)?"":String(n),s=e.elements().appendDynamicText(r);b(t)||e.updateWith(new lr(s,t,r))}),Vn.add(45,e=>{let t=e.stack.pop().value();e.elements().appendDynamicFragment(t)}),Vn.add(46,e=>{let t=e.stack.pop().value();e.elements().appendDynamicNode(t)}),Vn.add(39,e=>e.pushChildScope()),Vn.add(40,e=>e.popScope()),Vn.add(59,e=>e.pushDynamicScope()),Vn.add(60,e=>e.popDynamicScope()),Vn.add(29,(e,{op1:t})=>{e.stack.push(e[Pe].getOther(t))}),Vn.add(30,(e,{op1:t})=>{let n=e.stack;if(fe(t)){let r;r=t>-1073741825?e[Pe].getString(be(t,-1)):e[Pe].getNumber(be(t,-1073741825)),n.pushJs(r)}else n.pushRaw(t)}),Vn.add(31,e=>{let t=e.stack;t.push(Nt.create(t.pop()))}),Vn.add(32,e=>{let t=e.stack;t.push(t.peek().value())}),Vn.add(33,(e,{op1:t,op2:n})=>{let r=e.fetchValue(t)-n;e.stack.dup(r)}),Vn.add(34,(e,{op1:t})=>{e.stack.pop(t)}),Vn.add(35,(e,{op1:t})=>{e.load(t)}),Vn.add(36,(e,{op1:t})=>{e.fetch(t)}),Vn.add(58,(e,{op1:t})=>{let n=e[Pe].getArray(t);e.bindDynamicScope(n)}),Vn.add(69,(e,{op1:t})=>{e.enter(t)}),Vn.add(70,e=>{e.exit()}),Vn.add(63,(e,{op1:t})=>{e.stack.push(e[Pe].getSerializable(t))}),Vn.add(62,e=>{e.stack.push(e.scope())}),Vn.add(61,e=>{let t=e.stack,n=t.pop();n?t.push(e.compile(n)):t.push(null)},"jit"),Vn.add(64,e=>{let{stack:t}=e,n=t.pop(),r=t.pop(),s=t.pop(),i=t.pop();if(null===s)return e.pushFrame(),void e.pushScope(r);let l=r;{let e=s.parameters,t=e.length;if(t>0){l=l.child();for(let n=0;n<t;n++)l.bindSymbol(e[n],i.at(n))}}e.pushFrame(),e.pushScope(l),e.call(n)}),Vn.add(65,(e,{op1:t})=>{let n=e.stack.pop();if(b(n))n.value()&&e.goto(t);else{let r=new Ke(n);r.peek()&&e.goto(t),e.updateWith(new or(r))}}),Vn.add(66,(e,{op1:t})=>{let n=e.stack.pop();if(b(n))n.value()||e.goto(t);else{let r=new Ke(n);r.peek()||e.goto(t),e.updateWith(new or(r))}}),Vn.add(67,(e,{op1:t,op2:n})=>{e.stack.peek()===n&&e.goto(t)}),Vn.add(68,e=>{let t=e.stack.peek();b(t)||e.updateWith(or.initialize(new Ke(t)))}),Vn.add(71,e=>{let{env:t,stack:n}=e;n.push(t.toConditionalReference(n.pop()))});class or extends $n{constructor(e){super(),this.type="assert",this.tag=e.tag,this.cache=e}static initialize(e){let t=new or(e);return e.peek(),t}evaluate(e){let{cache:t}=this;t.revalidate()!==qe&&e.throw()}}class ur extends $n{constructor(e,t){super(),this.target=t,this.type="jump-if-not-modified",this.tag=e,this.lastRevision=o()}evaluate(e){let{tag:t,target:n,lastRevision:r}=this;!e.alwaysRevalidate&&u(t,r)&&e.goto(n)}didModify(){this.lastRevision=o(this.tag)}}class cr extends $n{constructor(e){super(),this.target=e,this.type="did-modify",this.tag=g}evaluate(){this.target.didModify()}}class hr{constructor(e){this.tag=g,this.type="label",this.label=null,this.prev=null,this.next=null,D(this),this.label=e}evaluate(){}inspect(){return`${this.label} [${this._guid}]`}}Vn.add(41,(e,{op1:t})=>{e.elements().appendText(e[Pe].getString(t))}),Vn.add(42,(e,{op1:t})=>{e.elements().appendComment(e[Pe].getString(t))}),Vn.add(48,(e,{op1:t})=>{e.elements().openElement(e[Pe].getString(t))}),Vn.add(49,e=>{let t=e.stack.pop().value();e.elements().openElement(t)}),Vn.add(50,e=>{let t,n,r=e.stack.pop(),s=e.stack.pop(),i=e.stack.pop().value();if(b(r))t=r.value();else{let n=new Ke(r);t=n.peek(),e.updateWith(new or(n))}if(void 0!==s.value())if(b(s))n=s.value();else{let t=new Ke(s);n=t.peek(),e.updateWith(new or(t))}let l=e.elements().pushRemoteElement(t,i,n);l&&e.associateDestroyable(l)}),Vn.add(56,e=>{e.elements().popRemoteElement()}),Vn.add(54,e=>{let t=e.fetchValue(6),n=null;t&&(n=t.flush(e),e.loadValue(6,null)),e.elements().flushElement(n)}),Vn.add(55,e=>{let t=e.elements().closeElement();t&&t.forEach(([t,n])=>{e.env.scheduleInstallModifier(n,t);let r=t.getDestructor(n);r&&e.associateDestroyable(r)})}),Vn.add(57,(e,{op1:t})=>{let{manager:n,state:r}=e.runtime.resolver.resolve(t),s=e.stack.pop(),{constructing:i,updateOperations:l}=e.elements(),a=e.dynamicScope(),o=n.create(i,r,s,a,l);e.fetchValue(6).addModifier(n,o);let u=n.getTag(o);y(u)||e.updateWith(new pr(u,n,o))});class pr extends $n{constructor(e,t,n){super(),this.tag=e,this.manager=t,this.modifier=n,this.type="update-modifier",this.lastUpdated=o()}evaluate(e){let{manager:t,modifier:n,tag:r,lastUpdated:s}=this;u(r,s)||(e.env.scheduleUpdateModifier(n,t),this.lastUpdated=o())}}Vn.add(51,(e,{op1:t,op2:n,op3:r})=>{let s=e[Pe].getString(t),i=e[Pe].getString(n),l=r?e[Pe].getString(r):null;e.elements().setStaticAttribute(s,i,l)}),Vn.add(52,(e,{op1:t,op2:n,op3:r})=>{let s=e[Pe].getString(t),i=e.stack.pop(),l=i.value(),a=r?e[Pe].getString(r):null,o=e.elements().setDynamicAttribute(s,l,!!n,a);b(i)||e.updateWith(new dr(i,o))});class dr extends $n{constructor(e,t){super(),this.reference=e,this.attribute=t,this.type="patch-element";let{tag:n}=e;this.tag=n,this.lastRevision=o()}evaluate(e){let{attribute:t,reference:n,tag:r}=this;u(r,this.lastRevision)||(t.update(n.value(),e.env),this.lastRevision=o())}}const mr=$("COMPONENT_INSTANCE");Vn.add(77,e=>{let t=e.stack,n=t.pop();t.push(new jt(n,tr))}),Vn.add(78,e=>{let t=e.stack,n=t.peek();t.push(new ar(n))}),Vn.add(79,(e,{op1:t})=>{let n=e.stack,r=n.pop(),s=n.pop(),i=e[Pe].getTemplateMeta(t),l=e.runtime.resolver;e.loadValue(8,new ir(r,l,i,s))}),Vn.add(80,(e,{op1:t})=>{let n=e.runtime.resolver.resolve(t),{manager:r}=n,s=qn(r.getCapabilities(n.state)),i={[mr]:!0,definition:n,manager:r,capabilities:s,state:null,handle:null,table:null,lookup:null};e.stack.push(i)}),Vn.add(83,(e,{op1:t})=>{let n,r=e.stack,s=r.pop().value(),i=e[Pe].getTemplateMeta(t);if(e.loadValue(7,null),"string"==typeof s){n=rr(e.runtime.resolver,s,i)}else{if(!tr(s))throw F();n=s}r.push(n)}),Vn.add(81,e=>{let t,n,{stack:r}=e,s=r.pop();tr(s)?n=t=null:(n=s.manager,t=qn(n.getCapabilities(s.state))),r.push({definition:s,capabilities:t,manager:n,state:null,handle:null,table:null})}),Vn.add(82,e=>{let t,n=e.stack,r=n.pop().value();if(!tr(r))throw F();t=r,n.push(t)}),Vn.add(84,(e,{op1:t,op2:n,op3:r})=>{let s=e.stack,i=e[Pe].getStringArray(t),l=r>>4,a=8&r,o=7&r?e[Pe].getStringArray(n):L;e[Ae].setup(s,i,o,l,!!a),s.push(e[Ae])}),Vn.add(85,e=>{let{stack:t}=e;t.push(e[Ae].empty(t))}),Vn.add(88,e=>{let t=e.stack,n=t.pop().capture();t.push(n)}),Vn.add(87,(e,{op1:t})=>{let n=e.stack,r=e.fetchValue(t),s=n.pop(),{definition:i}=r;tr(i)&&(i=function(e,t,n){let r=e.definition=t.unwrap(n),{manager:s,state:i}=r;return e.manager=s,e.capabilities=qn(s.getCapabilities(i)),r}(r,i,s));let{manager:l,state:a}=i;if(!Xn(0,r.capabilities,4))return void n.push(s);let o=s.blocks.values,u=s.blocks.names,c=l.prepareArgs(a,s);if(c){s.clear();for(let e=0;e<o.length;e++)n.push(o[e]);let{positional:e,named:t}=c,r=e.length;for(let t=0;t<r;t++)n.push(e[t]);let i=Object.keys(t);for(let e=0;e<i.length;e++)n.push(t[i[e]]);s.setup(n,i,u,r,!1)}n.push(s)}),Vn.add(89,(e,{op1:t,op2:n})=>{let r=e.fetchValue(n),{definition:s,manager:i}=r,l=r.capabilities=qn(i.getCapabilities(s.state));if(!Xn(0,l,512))throw new Error("BUG");let a=null;Xn(0,l,64)&&(a=e.dynamicScope());let o=1&t,u=null;Xn(0,l,8)&&(u=e.stack.peek());let c=null;Xn(0,l,128)&&(c=e.getSelf());let h=i.create(e.env,s.state,u,a,c,!!o);r.state=h;let p=i.getTag(h);Xn(0,l,256)&&!y(p)&&e.updateWith(new kr(p,h,i,a))}),Vn.add(90,(e,{op1:t})=>{let{manager:n,state:r,capabilities:s}=e.fetchValue(t),i=n.getDestructor(r);i&&e.associateDestroyable(i)}),Vn.add(100,e=>{e.beginCacheGroup(),e.elements().pushSimpleBlock()}),Vn.add(91,e=>{e.loadValue(6,new fr)}),Vn.add(53,(e,{op1:t,op2:n,op3:r})=>{let s=e[Pe].getString(t),i=e.stack.pop(),l=r?e[Pe].getString(r):null;e.fetchValue(6).setAttribute(s,i,!!n,l)}),Vn.add(108,(e,{op1:t,op2:n,op3:r})=>{let s=e[Pe].getString(t),i=e[Pe].getString(n),l=r?e[Pe].getString(r):null;e.fetchValue(6).setStaticAttribute(s,i,l)});class fr{constructor(){this.attributes=j(),this.classes=[],this.modifiers=[]}setAttribute(e,t,n,r){let s={value:t,namespace:r,trusting:n};"class"===e&&this.classes.push(t),this.attributes[e]=s}setStaticAttribute(e,t,n){let r={value:t,namespace:n};"class"===e&&this.classes.push(t),this.attributes[e]=r}addModifier(e,t){this.modifiers.push([e,t])}flush(e){let t,n=this.attributes;for(let r in this.attributes){if("type"===r){t=n[r];continue}let s=this.attributes[r];"class"===r?br(e,"class",gr(this.classes),s.namespace,s.trusting):br(e,r,s.value,s.namespace,s.trusting)}return void 0!==t&&br(e,"type",t.value,t.namespace,t.trusting),this.modifiers}}function gr(e){return 0===e.length?"":1===e.length?e[0]:function(e){for(let t=0;t<e.length;t++)if("string"!=typeof e[t])return!1;return!0}(e)?e.join(" "):function(e){for(let t=0;t<e.length;t++){const n=e[t];"string"==typeof n&&(e[t]=Nt.create(n))}return new sr(e)}(e)}function br(e,t,n,r,s=!1){if("string"==typeof n)e.elements().setStaticAttribute(t,n,r);else{let i=e.elements().setDynamicAttribute(t,n.value(),s,r);b(n)||e.updateWith(new dr(n,i))}}function yr(e,t){return!1===Xn(0,e,1)}function vr(e,t){return!0===Xn(0,e,1)}function wr(e,t,n,r,s){let i=n.table.symbols.indexOf(e),l=r.get(t);-1!==i&&s.scope().bindBlock(i+1,l),n.lookup&&(n.lookup[e]=l)}Vn.add(102,(e,{op1:t})=>{let{definition:n,state:r}=e.fetchValue(t),{manager:s}=n,i=e.fetchValue(6);s.didCreateElement(r,e.elements().constructing,i)}),Vn.add(92,(e,{op1:t})=>{let{definition:n,state:r}=e.fetchValue(t),{manager:s}=n;e.stack.push(s.getSelf(r))}),Vn.add(93,(e,{op1:t})=>{let{definition:n,state:r}=e.fetchValue(t),{manager:s}=n;e.stack.push(s.getTagName(r))}),Vn.add(95,(e,{op1:t})=>{let n,r=e.fetchValue(t),s=r.manager,{definition:i}=r,{stack:l}=e,{capabilities:a}=r;if(yr(a,s))n=s.getJitStaticLayout(i.state,e.runtime.resolver);else{if(!vr(a,s))throw F();{let t=ve(s.getJitDynamicLayout(r.state,e.runtime.resolver));n=Qn(a,1024)?t.asWrappedLayout():t.asLayout()}}let o=n.compile(e.context);l.push(n.symbolTable),l.push(o)},"jit"),Vn.add(94,(e,{op1:t})=>{let n,r=e.fetchValue(t),{manager:s,definition:i}=r,{stack:l}=e,{state:a,capabilities:o}=r,{state:u}=i;if(yr(o,s))n=s.getAotStaticLayout(u,e.runtime.resolver);else{if(!vr(o,s))throw F();n=s.getAotDynamicLayout(a,e.runtime.resolver)}l.push(n.symbolTable),l.push(n.handle)}),Vn.add(76,(e,{op1:t})=>{let n=e.stack.pop(),r=e.stack.pop(),{manager:s}=n,i=qn(s.getCapabilities(n.state)),l={[mr]:!0,definition:n,manager:s,capabilities:i,state:null,handle:r.handle,table:r.symbolTable,lookup:null};e.loadValue(t,l)}),Vn.add(98,(e,{op1:t})=>{let{stack:n}=e,r=n.pop(),s=n.pop(),i=e.fetchValue(t);i.handle=r,i.table=s}),Vn.add(38,(e,{op1:t})=>{let{symbols:n}=e.fetchValue(t).table;e.pushRootScope(n.length+1)}),Vn.add(97,(e,{op1:t})=>{let n=e.fetchValue(t);if(n.table.hasEval){let t=n.lookup=j();e.scope().bindEvalScope(t)}}),Vn.add(17,(e,{op1:t})=>{let n=e.fetchValue(t),r=e.scope(),s=e.stack.peek(),i=s.named.atNames;for(let e=i.length-1;e>=0;e--){let t=i[e],l=n.table.symbols.indexOf(i[e]),a=s.named.get(t,!0);-1!==l&&r.bindSymbol(l+1,a),n.lookup&&(n.lookup[t]=a)}}),Vn.add(18,(e,{op1:t})=>{let n=e.fetchValue(t),{blocks:r}=e.stack.peek();for(let t=0;t<r.names.length;t++)wr(r.symbolNames[t],r.names[t],n,r,e)}),Vn.add(99,(e,{op1:t})=>{let n=e.fetchValue(t);e.call(n.handle)}),Vn.add(103,(e,{op1:t})=>{let{manager:n,state:r,capabilities:s}=e.fetchValue(t),i=e.elements().popBlock();if(!Xn(0,s,512))throw new Error("BUG");n.didRenderLayout(r,i),e.env.didCreate(r,n),e.updateWith(new xr(n,r,i))}),Vn.add(101,e=>{e.commitCacheGroup()});class kr extends $n{constructor(e,t,n,r){super(),this.tag=e,this.component=t,this.manager=n,this.dynamicScope=r,this.type="update-component"}evaluate(e){let{component:t,manager:n,dynamicScope:r}=this;n.update(t,r)}}class xr extends $n{constructor(e,t,n){super(),this.manager=e,this.component=t,this.bounds=n,this.type="did-update-layout",this.tag=g}evaluate(e){let{manager:t,component:n,bounds:r}=this;t.didUpdateLayout(n,r),e.env.didUpdate(n,t)}}function Sr(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}let Er=Sr;class Cr{constructor(e,t,n){this.scope=e,this.locals=j();for(let r=0;r<n.length;r++){let s=n[r],i=t[s-1],l=e.getSymbol(s);this.locals[i]=l}}get(e){let t,{scope:n,locals:r}=this,s=e.split("."),[i,...l]=e.split("."),a=n.getEvalScope();return"this"===i?t=n.getSelf():r[i]?t=r[i]:0===i.indexOf("@")&&a[i]?t=a[i]:(t=this.scope.getSelf(),l=s),l.reduce((e,t)=>e.get(t),t)}}Vn.add(106,(e,{op1:t,op2:n})=>{let r=e[Pe].getStringArray(t),s=e[Pe].getArray(n),i=new Cr(e.scope(),r,s);Er(e.getSelf().value(),e=>i.get(e).value())}),Vn.add(104,(e,{op1:t,op2:n,op3:r})=>{let{[Pe]:s,stack:i}=e,l=i.pop().value(),a=s.getTemplateMeta(t),o=s.getStringArray(n),u=s.getArray(r),c=e.runtime.resolver.lookupPartial(l,a),h=e.runtime.resolver.resolve(c),{symbolTable:p,handle:d}=h.getPartial(e.context);{let t=p.symbols,n=e.scope(),r=e.pushRootScope(t.length),s=n.getEvalScope();r.bindEvalScope(s),r.bindSelf(n.getSelf());let i=Object.create(n.getPartialMap());for(let e=0;e<u.length;e++){let t=u[e],r=o[t-1],s=n.getSymbol(t);i[r]=s}if(s)for(let e=0;e<t.length;e++){let n=e+1,i=s[t[e]];void 0!==i&&r.bind(n,i)}r.bindPartialMap(i),e.pushFrame(),e.call(ye(d))}},"jit");class Or{constructor(e){this.tag=e.tag,this.artifacts=e}value(){return!this.artifacts.isEmpty()}}Vn.add(74,e=>{let t=e.stack,n=t.pop(),r=t.pop(),s=e.env.iterableFor(n,r.value()),i=new tt(s);t.push(i),t.push(new Or(i.artifacts))}),Vn.add(72,(e,{op1:t})=>{e.enterList(t)}),Vn.add(73,e=>{e.exitList()}),Vn.add(75,(e,{op1:t})=>{let n=e.stack.peek().next();if(n){let t=e.iterate(n.memo,n.value);e.enterItem(n.key,t)}else e.goto(t)});const _r={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};new class{getCapabilities(e){return _r}prepareArgs(e,t){throw new Error("Unimplemented prepareArgs in SimpleComponentManager")}create(e,t,n,r,s,i){throw new Error("Unimplemented create in SimpleComponentManager")}getSelf(e){return Lt}getTag(e){throw new Error("Unimplemented getTag in SimpleComponentManager")}didRenderLayout(e,t){throw new Error("Unimplemented didRenderLayout in SimpleComponentManager")}didCreate(e){throw new Error("Unimplemented didCreate in SimpleComponentManager")}update(e,t){throw new Error("Unimplemented update in SimpleComponentManager")}didUpdateLayout(e,t){throw new Error("Unimplemented didUpdateLayout in SimpleComponentManager")}didUpdate(e){throw new Error("Unimplemented didUpdate in SimpleComponentManager")}getDestructor(e){return null}};class Mr{constructor(e){this.bucket=e?pe({},e):{}}get(e){return this.bucket[e]}set(e,t){return this.bucket[e]=t}child(){return new Mr(this.bucket)}}class Pr{constructor(){this.stack=null,this.positional=new Ar,this.named=new Nr,this.blocks=new Lr}empty(e){let t=e[_e][3]+1;return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this}setup(e,t,n,r,s){this.stack=e;let i=this.named,l=t.length,a=e[_e][3]-l+1;i.setup(e,a,l,t,s);let o=a-r;this.positional.setup(e,o,r);let u=this.blocks,c=n.length,h=o-3*c;u.setup(e,h,c,n)}get tag(){return Wn([this.positional,this.named])}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){let{stack:t}=this;if(e>0&&null!==t){let{positional:n,named:r}=this,s=n.base+e;for(let e=n.length+r.length-1;e>=0;e--)t.copy(e+n.base,e+s);n.base+=e,r.base+=e,t[_e][3]+=e}}capture(){let e=0===this.positional.length?jr:this.positional.capture(),t=0===this.named.length?Dr:this.named.capture();return new Rr(this.tag,e,t,this.length)}clear(){let{stack:e,length:t}=this;t>0&&null!==e&&e.pop(t)}}class Ar{constructor(){this.base=0,this.length=0,this.stack=null,this._tag=null,this._references=null}empty(e,t){this.stack=e,this.base=t,this.length=0,this._tag=g,this._references=L}setup(e,t,n){this.stack=e,this.base=t,this.length=n,0===n?(this._tag=g,this._references=L):(this._tag=null,this._references=null)}get tag(){let e=this._tag;return e||(e=this._tag=Wn(this.references)),e}at(e){let{base:t,length:n,stack:r}=this;return e<0||e>=n?Lt:r.get(e,t)}capture(){return new Tr(this.tag,this.references)}prepend(e){let t=e.length;if(t>0){let{base:n,length:r,stack:s}=this;this.base=n-=t,this.length=r+t;for(let r=0;r<t;r++)s.set(e.at(r),r,n);this._tag=null,this._references=null}}get references(){let e=this._references;if(!e){let{stack:t,base:n,length:r}=this;e=this._references=t.sliceArray(n,n+r)}return e}}class Tr{constructor(e,t,n=t.length){this.tag=e,this.references=t,this.length=n}static empty(){return new Tr(g,L,0)}at(e){return this.references[e]}value(){return this.references.map(this.valueOf)}get(e){let{references:t,length:n}=this;if("length"===e)return Nt.create(n);{let r=parseInt(e,10);return r<0||r>=n?Lt:t[r]}}valueOf(e){return e.value()}}class Nr{constructor(){this.base=0,this.length=0,this._references=null,this._names=L,this._atNames=L}empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=L,this._names=L,this._atNames=L}setup(e,t,n,r,s){this.stack=e,this.base=t,this.length=n,0===n?(this._references=L,this._names=L,this._atNames=L):(this._references=null,s?(this._names=null,this._atNames=r):(this._names=r,this._atNames=null))}get tag(){return Wn(this.references)}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!1){let{base:n,stack:r}=this,s=(t?this.atNames:this.names).indexOf(e);return-1===s?Lt:r.get(s,n)}capture(){return new Br(this.tag,this.names,this.references)}merge(e){let{length:t}=e;if(t>0){let{names:n,length:r,stack:s}=this,{names:i}=e;Object.isFrozen(n)&&0===n.length&&(n=[]);for(let l=0;l<t;l++){let t=i[l];-1===n.indexOf(t)&&(r=n.push(t),s.push(e.references[l]))}this.length=r,this._references=null,this._names=n,this._atNames=null}}get references(){let e=this._references;if(!e){let{base:t,length:n,stack:r}=this;e=this._references=r.sliceArray(t,t+n)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return"@"+e}}class Br{constructor(e,t,n){this.tag=e,this.names=t,this.references=n,this.length=t.length,this._map=null}get map(){let e=this._map;if(!e){let{names:t,references:n}=this;e=this._map=j();for(let r=0;r<t.length;r++){e[t[r]]=n[r]}}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let{names:t,references:n}=this,r=t.indexOf(e);return-1===r?Lt:n[r]}value(){let{names:e,references:t}=this,n=j();for(let r=0;r<e.length;r++){n[e[r]]=t[r].value()}return n}}function zr(e){return"&"+e}class Lr{constructor(){this.internalValues=null,this._symbolNames=null,this.internalTag=null,this.names=L,this.length=0,this.base=0}empty(e,t){this.stack=e,this.names=L,this.base=t,this.length=0,this._symbolNames=null,this.internalTag=g,this.internalValues=L}setup(e,t,n,r){this.stack=e,this.names=r,this.base=t,this.length=n,this._symbolNames=null,0===n?(this.internalTag=g,this.internalValues=L):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let{base:t,length:n,stack:r}=this;e=this.internalValues=r.sliceArray(t,t+3*n)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);if(-1===t)return null;let{base:n,stack:r}=this,s=r.get(3*t,n),i=r.get(3*t+1,n),l=r.get(3*t+2,n);return null===l?null:[l,i,s]}capture(){return new Ir(this.names,this.values)}get symbolNames(){let e=this._symbolNames;return null===e&&(e=this._symbolNames=this.names.map(zr)),e}}class Ir{constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}class Rr{constructor(e,t,n,r){this.tag=e,this.positional=t,this.named=n,this.length=r}value(){return{named:this.named.value(),positional:this.positional.value()}}}const Dr=new Br(g,L,L),jr=new Tr(g,L);new Rr(g,jr,Dr,0);class Hr{constructor(e,t,n,r,s){this.stack=e,this.heap=t,this.program=n,this.externs=r,this.registers=s,this.currentOpSize=0}fetchRegister(e){return this.registers[e]}loadRegister(e,t){this.registers[e]=t}setPc(e){this.registers[0]=e}pushFrame(){this.stack.push(this.registers[1]),this.stack.push(this.registers[2]),this.registers[2]=this.registers[3]-1}popFrame(){this.registers[3]=this.registers[2]-1,this.registers[1]=this.stack.get(0),this.registers[2]=this.stack.get(1)}pushSmallFrame(){this.stack.push(this.registers[1])}popSmallFrame(){this.registers[1]=this.stack.pop()}goto(e){this.setPc(this.target(e))}target(e){return this.registers[0]+e-this.currentOpSize}call(e){this.registers[1]=this.registers[0],this.setPc(this.heap.getaddr(e))}returnTo(e){this.registers[1]=this.target(e)}return(){this.setPc(this.registers[1])}nextStatement(){let{registers:e,program:t}=this,n=e[0];if(-1===n)return null;let r=t.opcode(n),s=this.currentOpSize=r.size;return this.registers[0]+=s,r}evaluateOuter(e,t){this.evaluateInner(e,t)}evaluateInner(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)}evaluateMachine(e){switch(e.type){case 0:return this.pushFrame();case 1:return this.popFrame();case 3:return this.call(e.op1);case 2:return this.call(this.stack.pop());case 4:return this.goto(e.op1);case 5:return this.return();case 6:return this.returnTo(e.op1)}}evaluateSyscall(e,t){Vn.evaluate(t,e,e.type)}}class Ur{constructor(e,{alwaysRevalidate:t=!1}){this.frameStack=new U,this.env=e,this.dom=e.getDOM(),this.alwaysRevalidate=t}execute(e,t){let{frameStack:n}=this;for(this.try(e,t);!n.isEmpty();){let e=this.frame.nextStatement();null!==e?e.evaluate(this):n.pop()}}get frame(){return this.frameStack.current}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new Jr(e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class Fr{constructor(e,t){this.state=e,this.resumeCallback=t}resume(e,t){return this.resumeCallback(e,this.state,t)}}class Vr extends $n{constructor(e,t,n,r){super(),this.state=e,this.runtime=t,this.type="block",this.next=null,this.prev=null,this.children=r,this.bounds=n}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}}class $r extends Vr{constructor(e,t,n,r){super(e,t,n,r),this.type="try",this.tag=this._tag=f()}didInitializeChildren(){d(this._tag,Gn(this.children))}evaluate(e){e.try(this.children,this)}handleException(){let{state:e,bounds:t,children:n,prev:r,next:s,runtime:i}=this;Ie(this,i.env),n.clear(),Re(this,i.env);let l=$e.resume(i.env,t),a=e.resume(i,l),o=new ue;Z(this,a.execute(e=>{e.pushUpdating(o),e.updateWith(this),e.pushUpdating(n)}).drop),this.prev=r,this.next=s}}class Wr{constructor(e,t){this.opcode=e,this.marker=t,this.didInsert=!1,this.didDelete=!1,this.map=e.map,this.updating=e.children}insert(e,t,n,r,s){let{map:i,opcode:l,updating:a}=this,o=null,u=null;u=i.get(s),o=void 0!==u?u.bounds.firstNode():this.marker;let c=l.vmForInsertion(o),h=null,p=c.execute(e=>{h=e.iterate(r,n),i.set(t,h),e.pushUpdating(new ue),e.updateWith(h),e.pushUpdating(h.children)});a.insertBefore(h,u),Z(l,p.drop),this.didInsert=!0}retain(e,t,n,r){}move(e,t,n,r,s){let{map:i,updating:l}=this,a=i.get(t);if(s===rt)ze(a,this.marker),l.remove(a),l.append(a);else{let e=i.get(s);ze(a,e.firstNode()),l.remove(a),l.insertBefore(a,e)}}delete(e,t){let{map:n,updating:r}=this,s=n.get(t);!function(e,t){De(e,t),Le(e),je(e,t)}(s,e),r.remove(s),n.delete(t),this.didDelete=!0}done(){this.opcode.didInitializeChildren(this.didInsert||this.didDelete)}}class Gr extends Vr{constructor(e,t,n,r,s){super(e,t,n,r),this.type="list-block",this.map=new Map,this.lastIterated=1,this.artifacts=s;let i=this._tag=f();this.tag=v([s.tag,i])}didInitializeChildren(e=!0){this.lastIterated=o(this.artifacts.tag),e&&d(this._tag,Gn(this.children))}evaluate(e){let{artifacts:t,lastIterated:n}=this;if(!u(t.tag,n)){let{bounds:n}=this,{dom:r}=e,s=r.createComment("");r.insertAfter(n.parentElement(),s,n.lastNode());let i=new Wr(this,s);new st({target:i,artifacts:t,env:e.env}).sync(),this.parentElement().removeChild(s)}super.evaluate(e)}vmForInsertion(e){let{bounds:t,state:n,runtime:r}=this,s=$e.forInitialRender(r.env,{element:t.parentElement(),nextSibling:e});return n.resume(r,s)}}class Jr{constructor(e,t){this.ops=e,this.exceptionHandler=t,this.current=e.head()}goto(e){this.current=e}nextStatement(){let{current:e,ops:t}=this;return e&&(this.current=t.nextNode(e)),e}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class Yr{constructor(e,t,n,r){this.env=e,this.updating=t,this.bounds=n,this.drop=r,Z(this,r)}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let{env:t,updating:n}=this;new Ur(t,{alwaysRevalidate:e}).execute(n,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw"this should never happen"}[W](){Le(this.bounds)}destroy(){!function(e,t){if(e[Nn])t();else{e.begin();try{t()}finally{e.commit()}}}(this.env,()=>{De(this,this.env),je(this,this.env)})}}class Kr{constructor(e=[]){this.vec=e}clone(){return new Kr(this.vec.slice())}sliceFrom(e){return new Kr(this.vec.slice(e))}slice(e,t){return new Kr(this.vec.slice(e,t))}copy(e,t){this.vec[t]=this.vec[e]}writeRaw(e,t){this.vec[e]=t}getRaw(e){return this.vec[e]}reset(){this.vec.length=0}len(){return this.vec.length}}class qr{constructor(e=new Kr,t=[]){this.inner=e,this.js=t}slice(e,t){let n;return n="number"==typeof e&&"number"==typeof t?this.inner.slice(e,t):"number"==typeof e&&void 0===t?this.inner.sliceFrom(e):this.inner.clone(),new qr(n,this.js.slice(e,t))}sliceInner(e,t){let n=[];if(-1===e)return n;for(let r=e;r<t;r++)n.push(this.get(r));return n}copy(e,t){this.inner.copy(e,t)}write(e,t){switch(typeof t){case"boolean":case"undefined":this.writeRaw(e,de(t));break;case"number":if(me(t)){this.writeRaw(e,de(t));break}case"object":if(null===t){this.writeRaw(e,de(t));break}default:this.writeJs(e,t)}}writeJs(e,t){let n=this.js.length;this.js.push(t),this.inner.writeRaw(e,ge(n))}writeRaw(e,t){this.inner.writeRaw(e,t)}get(e){let t=this.inner.getRaw(e);return fe(t)?this.js[be(t)]:function(e){if(e>1073741823)switch(e){case 1073741824:return!1;case 1073741825:return!0;case 1073741826:return null;case 1073741827:return;default:return 1073741827-e}return e}(t)}reset(){this.inner.reset(),this.js.length=0}get length(){return this.inner.len()}}var Xr,Qr;class Zr{constructor(){this.scope=new U,this.dynamicScope=new U,this.updating=new U,this.cache=new U,this.list=new U}}class es{constructor(e,{pc:t,scope:n,dynamicScope:r,stack:s},i){this.runtime=e,this.elementStack=i,this[Xr]=new Zr,this[Qr]=new U,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null;let l=class{constructor(e,t){this.stack=e,this[_e]=t}static restore(e){let t=new qr;for(let n=0;n<e.length;n++)t.write(n,e[n]);return new this(t,[0,-1,e.length-1,0])}push(e){this.stack.write(++this[_e][3],e)}pushJs(e){this.stack.writeJs(++this[_e][3],e)}pushRaw(e){this.stack.writeRaw(++this[_e][3],e)}dup(e=this[_e][3]){this.stack.copy(e,++this[_e][3])}copy(e,t){this.stack.copy(e,t)}pop(e=1){let t=this.stack.get(this[_e][3]);return this[_e][3]-=e,t}peek(e=0){return this.stack.get(this[_e][3]-e)}get(e,t=this[_e][2]){return this.stack.get(t+e)}set(e,t,n=this[_e][2]){this.stack.write(n+t,e)}slice(e,t){return this.stack.slice(e,t)}sliceArray(e,t){return this.stack.sliceInner(e,t)}capture(e){let t=this[_e][3]+1,n=t-e;return this.stack.sliceInner(n,t)}reset(){this.stack.reset()}toArray(){return console.log(this[_e]),this.stack.sliceInner(this[_e][2],this[_e][3]+1)}}.restore(s);l[_e][0]=t,l[_e][3]=s.length-1,l[_e][2]=-1,this[Me]=this.program.heap,this[Pe]=this.program.constants,this.elementStack=i,this[Oe].scope.push(n),this[Oe].dynamicScope.push(r),this[Ae]=new Pr,this[Ee]=new Hr(l,this[Me],e.program,{debugBefore:e=>Vn.debugBefore(this,e),debugAfter:e=>{Vn.debugAfter(this,e)}},l[_e]),this.destructor={},this[Ce].push(this.destructor)}get stack(){return this[Ee].stack}get pc(){return this[Ee].fetchRegister(0)}fetch(e){this.stack.push(this.fetchValue(e))}load(e){let t=this.stack.pop();this.loadValue(e,t)}fetchValue(e){if(ke(e))return this[Ee].fetchRegister(e);switch(e){case 4:return this.s0;case 5:return this.s1;case 6:return this.t0;case 7:return this.t1;case 8:return this.v0}}loadValue(e,t){switch(ke(e)&&this[Ee].loadRegister(e,t),e){case 4:this.s0=t;break;case 5:this.s1=t;break;case 6:this.t0=t;break;case 7:this.t1=t;break;case 8:this.v0=t}}pushFrame(){this[Ee].pushFrame()}popFrame(){this[Ee].popFrame()}goto(e){this[Ee].goto(e)}call(e){this[Ee].call(e)}returnTo(e){this[Ee].returnTo(e)}return(){this[Ee].return()}get program(){return this.runtime.program}get env(){return this.runtime.env}captureState(e,t=this[Ee].fetchRegister(0)){return{pc:t,dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}}beginCacheGroup(){this[Oe].cache.push(this.updating().tail())}commitCacheGroup(){let e=new hr("END"),t=this.updating(),n=this[Oe].cache.pop(),r=n?t.nextNode(n):t.head(),s=t.tail(),i=Gn(new ce(r,s)),l=new ur(i,e);t.insertBefore(l,r),t.append(new cr(l)),t.append(e)}enter(e){let t=new ue,n=this.capture(e),r=this.elements().pushUpdatableBlock(),s=new $r(n,this.runtime,r,t);this.didEnter(s)}iterate(e,t){let n=this.stack;n.push(t),n.push(e);let r=this.capture(2),s=this.elements().pushUpdatableBlock();return new $r(r,this.runtime,s,new ue)}enterItem(e,t){this.listBlock().map.set(e,t),this.didEnter(t)}enterList(e){let t=new ue,n=this[Ee].target(e),r=this.capture(0,n),s=this.elements().pushBlockList(t),i=this.stack.peek().artifacts,l=new Gr(r,this.runtime,s,t,i);this[Oe].list.push(l),this.didEnter(l)}didEnter(e){this.associateDestructor(re(e)),this[Ce].push(e),this.updateWith(e),this.pushUpdating(e.children)}exit(){this[Ce].pop(),this.elements().popBlock(),this.popUpdating(),this.updating().tail().didInitializeChildren()}exitList(){this.exit(),this[Oe].list.pop()}pushUpdating(e=new ue){this[Oe].updating.push(e)}popUpdating(){return this[Oe].updating.pop()}updateWith(e){this.updating().append(e)}listBlock(){return this[Oe].list.current}associateDestructor(e){if(!Q(e))return;ee(this[Ce].current,e)}associateDestroyable(e){this.associateDestructor(re(e))}tryUpdating(){return this[Oe].updating.current}updating(){return this[Oe].updating.current}elements(){return this.elementStack}scope(){return this[Oe].scope.current}dynamicScope(){return this[Oe].dynamicScope.current}pushChildScope(){this[Oe].scope.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this[Oe].dynamicScope.push(e),e}pushRootScope(e){let t=Tn.sized(e);return this[Oe].scope.push(t),t}pushScope(e){this[Oe].scope.push(e)}popScope(){this[Oe].scope.pop()}popDynamicScope(){this[Oe].dynamicScope.pop()}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e){let t;e&&e(this);try{for(;t=this.next(),!t.done;);}finally{let e=this.elements();for(;e.hasBlocks;)e.popBlock()}return t.value}next(){let e,{env:t,elementStack:n}=this,r=this[Ee].nextStatement();return null!==r?(this[Ee].evaluateOuter(r,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new Yr(t,this.popUpdating(),n.popBlock(),this.destructor)}),e}bindDynamicScope(e){let t=this.dynamicScope();for(let n=e.length-1;n>=0;n--){let r=this[Pe].getString(e[n]);t.set(r,this.stack.pop())}}}function ts(e,t=Tn.root(Lt,0),n){return{pc:e,scope:t,dynamicScope:n,stack:[]}}Xr=Oe,Qr=Ce;function ns(e){return(t,n,r)=>new rs(t,n,r,e)}class rs extends es{constructor(e,t,n,r){super(e,t,n),this.context=r,this.resume=ns(this.context)}static initial(e,t,{handle:n,self:r,dynamicScope:s,treeBuilder:i}){let l=e.program.heap.scopesizeof(n),a=Tn.root(r,l),o=ts(e.program.heap.getaddr(n),a,s),u=ns(t)(e,o,i);return u.pushUpdating(),u}static empty(e,{handle:t,treeBuilder:n,dynamicScope:r},s){let i=ns(s)(e,ts(e.program.heap.getaddr(t),Tn.root(Lt,0),r),n);return i.pushUpdating(),i}capture(e,t=this[Ee].fetchRegister(0)){return new Fr(this.captureState(e,t),this.resume)}compile(e){return ye(e.compile(this.context))}}class ss{constructor(e){this.vm=e}next(){return this.vm.next()}sync(){return function(e,t){let n;e.begin();do{n=t.next()}while(!n.done);let r=n.value;return e.commit(),r}(this.vm.runtime.env,this)}}function is(e,t,n,r){const s=Object.keys(r).map(e=>[e,r[e]]),i=["main","else","attrs"],l=s.map(([e])=>"@"+e);e.pushFrame();for(let t=0;t<3*i.length;t++)e.stack.push(null);return e.stack.push(null),s.forEach(([,t])=>{e.stack.push(t)}),e[Ae].setup(e.stack,l,i,0,!0),e.stack.push(e[Ae]),e.stack.push(t),e.stack.push(n),new ss(e)}function ls(e){return{type:"array",value:e}}function as(e){return{type:"string-array",value:e}}function os(e){return{type:"template-meta",value:e}}function us(e){return{type:"other",value:e}}function cs(e){return{type:"label",value:e}}function hs(e,t){return{type:"primitive",value:{primitive:e,type:t}}}const ps={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};class ds{constructor(e){this.inner=e}lookupHelper(e,t){if(this.inner.lookupHelper){let n=this.inner.lookupHelper(e,t);if(void 0===n)throw new Error(`Unexpected helper (${e} from ${JSON.stringify(t)}) (lookupHelper returned undefined)`);return n}throw new Error("Can't compile global helper invocations without an implementation of lookupHelper")}lookupModifier(e,t){if(this.inner.lookupModifier){let n=this.inner.lookupModifier(e,t);if(void 0===n)throw new Error(`Unexpected modifier (${e} from ${JSON.stringify(t)}) (lookupModifier returned undefined)`);return n}throw new Error("Can't compile global modifier invocations without an implementation of lookupModifier")}lookupComponent(e,t){if(this.inner.lookupComponent){let n=this.inner.lookupComponent(e,t);if(void 0===n)throw new Error(`Unexpected component (${e} from ${JSON.stringify(t)}) (lookupComponent returned undefined)`);return n}throw new Error("Can't compile global component invocations without an implementation of lookupComponent")}lookupPartial(e,t){if(this.inner.lookupPartial){let n=this.inner.lookupPartial(e,t);if(void 0===n)throw new Error(`Unexpected partial (${e} from ${JSON.stringify(t)}) (lookupPartial returned undefined)`);return n}throw new Error("Can't compile global partial invocations without an implementation of lookupPartial")}resolve(e){if(this.inner.resolve)return this.inner.resolve(e);throw new Error("Compile-time debugging requires an implementation of resolve")}}function ms(e,{resolver:t,meta:{referrer:n}}){let r=t.lookupComponent(e,n);if(null===r)return r;let{handle:s,compilable:i,capabilities:l}=r;return{handle:s,compilable:i,capabilities:l||ps}}class fs{constructor(e){this.buffer=e,this.size=0}encode(e,t){if(e>255)throw new Error(`Opcode type over 8-bits. Got ${e}.`);let n=e|t|arguments.length-2<<8;this.buffer.push(n);for(let e=2;e<arguments.length;e++){let t=arguments[e];if("number"==typeof t&&t>2147483647)throw new Error(`Operand over 32-bits. Got ${t}.`);this.buffer.push(t)}this.size=this.buffer.length}patch(e,t){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.");this.buffer[e+1]=t}}function gs(e){return[bs(e),ni(31)]}function bs(e){let t;switch(typeof e){case"number":t=me(e)?hs(e,0):hs(e,2);break;case"string":t=hs(e,1);break;case"boolean":case"object":case"undefined":t=hs(e,0);break;default:throw new Error("Invalid primitive passed to pushPrimitive")}return ni(30,t)}function ys({handle:e,params:t,hash:n}){return[ni(0),ni("SimpleArgs",{params:t,hash:n,atNames:!1}),ni(16,e),ni(1),ni(36,8)]}function vs(e,t){return[ni(59),ni(58,as(e)),t(),ni(60)]}function ws(e,t){return[ni("SimpleArgs",{params:t,hash:null,atNames:!0}),ni(24,e),ni(25),ni("Option",ni("JitCompileBlock")),ni(64),ni(40),ni(1)]}function ks(e){return[Es(e&&e.symbolTable),ni(62),ni("PushCompilable",e)]}function xs(e){return[ni(0),ni("PushCompilable",e),ni("JitCompileBlock"),ni(2),ni(1)]}function Ss(e,t){let{parameters:n}=e.symbolTable,r=n.length,s=Math.min(t,r);if(0===s)return xs(e);let i=[];if(i.push(ni(0)),s){i.push(ni(39));for(let e=0;e<s;e++)i.push(ni(33,2,t-e)),i.push(ni(19,n[e]))}return i.push(ni("PushCompilable",e)),i.push(ni("JitCompileBlock")),i.push(ni(2)),s&&i.push(ni(40)),i.push(ni(1)),i}function Es(e){return e?ni(63,{type:"serializable",value:e}):bs(null)}function Cs(e){let t=[],n=0;e((function(e,r){t.push({match:e,callback:r,label:"CLAUSE"+n++})}));let r=[ni(69,2),ni(68),ni(32),ni("StartLabels")];for(let e of t.slice(0,-1))r.push(ni(67,cs(e.label),e.match));for(let e=t.length-1;e>=0;e--){let n=t[e];r.push(ni("Label",n.label),ni(34,2),n.callback()),0!==e&&r.push(ni(4,cs("END")))}return r.push(ni("Label","END"),ni("StopLabels"),ni(70)),r}function Os({args:e,body:t}){let{count:n,actions:r}=e();return[ni("StartLabels"),ni(0),ni(6,cs("ENDINITIAL")),r,ni(69,n),t(),ni("Label","FINALLY"),ni(70),ni(5),ni("Label","ENDINITIAL"),ni(1),ni("StopLabels")]}function _s({args:e,ifTrue:t,ifFalse:n}){return Os({args:e,body:()=>{let e=[ni(66,cs("ELSE")),t(),ni(4,cs("FINALLY")),ni("Label","ELSE")];return n&&e.push(n()),e}})}function Ms(e,t){let{encoder:n,syntax:{program:{mode:r,constants:s}}}=e;switch(t.op){case"Option":return Ds(e,function(e){let t=e.op1;return null===t?zs:t}(t));case"Label":return n.label(t.op1);case"StartLabels":return n.startLabels();case"StopLabels":return n.stopLabels();case"JitCompileBlock":return Ds(e,function(e){return"jit"===e?ni(61):zs}(r));case"GetComponentLayout":return n.push(s,function(e){return"aot"===e?94:95}(r),t.op1);case"SetBlock":return n.push(s,function(e){return"aot"===e?20:21}(r),t.op1);default:return V(t)}}function Ps(e,t){Hs(e,function(e,t){switch(t.op){case"CompileBlock":return function(e,t){return function(e,t){let[,n,r,s,i]=e,l=Qs(i,t.meta),a=Zs(n,t.meta,"Expected block head to be a string");if("string"!=typeof a)return a;return t.syntax.macros.blocks.compile(a,r||[],s,l,t)}(t.op1,e)}(e,t);case"CompileInline":return function(e,t){let{inline:n,ifUnhandled:r}=t.op1,s=function(e,t){return t.syntax.macros.inlines.compile(e,t)}(n,e);return Rs(s)?s:r(n)}(e,t);case"InvokeStatic":return function(e,t){let n=t.op1;if("aot"===e.program.mode){let t=n.compile(e);return"number"!=typeof t?ni("Error",{problem:"Invalid block",start:0,end:0}):ni(3,t===Gs?()=>n.compile(e):t)}return[ni(29,us(t.op1)),ni(61),ni(2)]}(e.syntax,t);case"Args":return function({params:e,hash:t,blocks:n,atNames:r}){let s=[],i=n.names;for(let e=0;e<i.length;e++)s.push(ks(n.get(i[e])));let{count:l,actions:a}=si(e);s.push(a);let o=l<<4;r&&(o|=8);n&&(o|=7);let u=L;if(t){u=t[0];let e=t[1];for(let t=0;t<e.length;t++)s.push(ni("Expr",e[t]))}return s.push(ni(84,as(u),as(i),o)),s}(t.op1);case"PushCompilable":return function(e,t){if(null===e)return bs(null);if("aot"===t.program.mode){let n=e.compile(t);return"number"!=typeof n?ni("Error",{problem:"Compile Error (TODO: thread better)",start:0,end:0}):bs(n)}return ni(29,us(e))}(t.op1,e.syntax);case"DynamicComponent":return function(e,t){let{definition:n,attrs:r,params:s,args:i,blocks:l,atNames:a}=t.op1,o=r&&r.length>0?Ks(r,e.meta):null,u=Array.isArray(l)||null===l?Qs(l,e.meta):l;return ui(e.meta,{definition:n,attrs:o,params:s,hash:i,atNames:a,blocks:u})}(e,t);case"IfResolvedComponent":return function(e,t){let{name:n,attrs:r,blocks:s,staticTemplate:i,dynamicTemplate:l,orElse:a}=t.op1,o=ms(n,{resolver:e.syntax.program.resolverDelegate,meta:e.meta}),{meta:u}=e;if(null!==o){let{handle:e,capabilities:t,compilable:n}=o,a=Ks(r,u),c=Qs(s,u);return null!==n?i(e,t,n,{attrs:a,blocks:c}):l(e,t,{attrs:a,blocks:c})}if(a)return a();throw new Error("Compile Error: Cannot find component "+n)}(e,t);default:return V(t)}}(e,t))}function As(e,t,n){void 0!==n.op3?e.push(t,n.op,n.op1,n.op2,n.op3):void 0!==n.op2?e.push(t,n.op,n.op1,n.op2):void 0!==n.op1?e.push(t,n.op,n.op1):e.push(t,n.op)}class Ts{constructor(){this.names={},this.funcs=[]}add(e,t){this.names[e]=this.funcs.push(t)-1}compile(e,t){let n=e[0],r=this.names[n];return(0,this.funcs[r])(e,t)}}const Ns=new Ts;function Bs(e,t,n,r){switch(n.op){case"SimpleArgs":js(e,t,function(e,t,n){let r=[],{count:s,actions:i}=si(e);r.push(i);let l=s<<4;n&&(l|=8);let a=L;if(t){a=t[0];let e=t[1];for(let t=0;t<e.length;t++)r.push(ni("Expr",e[t]))}return r.push(ni(84,as(a),as(L),l)),r}(n.op1.params,n.op1.hash,n.op1.atNames),r);break;case"Expr":js(e,t,(s=n.op1,i=t.meta,Array.isArray(s)?Ns.compile(s,i):[bs(s),ni(31)]),r);break;case"IfResolved":js(e,t,function(e,{op1:t}){let{kind:n,name:r,andThen:s,orElse:i,span:l}=t,a=function(e,t,n,r){switch(t){case"Modifier":return e.lookupModifier(n,r);case"Helper":return e.lookupHelper(n,r);case"ComponentDefinition":{let t=e.lookupComponent(n,r);return t&&t.handle}}}(e.syntax.program.resolverDelegate,n,r,e.meta.referrer);return null!==a?s(a):i?i():ti(`Unexpected ${n} ${r}`,l.start,l.end)}(t,n),r);break;case"ResolveFree":throw new Error("Unimplemented HighLevelResolutionOpcode.ResolveFree");case"ResolveContextualFree":{let{freeVar:s,context:i}=n.op1;if(t.meta.asPartial){js(e,t,[ni(105,t.meta.upvars[s])],r);break}switch(i){case"Expression":{let n=t.meta.upvars[s];js(e,t,[ni(22,0),ni(23,n)],r);break}case"AppendSingleId":{let n,i=t.syntax.program.resolverDelegate,l=t.meta.upvars[s],a=i.lookupHelper(l,t.meta.referrer);n=a?ys({handle:a,params:null,hash:null}):[ni(22,0),ni(23,l)],js(e,t,n,r);break}default:throw new Error("unimplemented: Can't evaluate expression in context "+i)}break}default:return V(n)}var s,i}Ns.add(32,([,e])=>{let t=[];for(let n of e)t.push(ni("Expr",n));return t.push(ni(28,e.length)),t}),Ns.add(31,([,e,t,n,r,s],i)=>{if(function(e,t){if(!Array.isArray(e))return!1;if(27===e[0]){let n=e[1];return!(26!==n[0]||!t.upvars||"component"!==t.upvars[n[1]])}return!1}(n,i)){if(!r||0===r.length)return ni("Error",{problem:"component helper requires at least one argument",start:e,end:e+t});let[n,...l]=r;return function({definition:e,params:t,hash:n,atNames:r},s){return[ni(0),ni("SimpleArgs",{params:t,hash:n,atNames:r}),ni(88),ni("Expr",e),ni(79,os(s)),ni(1),ni(36,8)]}({definition:n,params:l,hash:s,atNames:!1},i.referrer)}let l=Zs(n,i,"Expected call head to be a string");return"string"!=typeof l?l:ni("IfResolved",{kind:"Helper",name:l,andThen:e=>ys({handle:e,params:r,hash:s}),span:{start:e,end:e+t}})}),Ns.add(24,([,e])=>[ni(22,e)]),Ns.add(27,([,e,t])=>[ni("Expr",e),...t.map(e=>ni(23,e))]),Ns.add(25,([,e])=>ni("ResolveFree",e)),Ns.add(26,([,e,t])=>ni("ResolveContextualFree",{freeVar:e,context:t})),Ns.add(30,()=>gs(void 0)),Ns.add(28,([,e])=>[ni("Expr",e),ni(26)]),Ns.add(29,([,e])=>[ni("Expr",e),ni(25),ni("JitCompileBlock"),ni(27)]);const zs={"no-action":!0},Ls={"not-handled":!0};function Is(e){return e&&!!e["no-action"]}function Rs(e){return!e||!e["not-handled"]}function Ds(e,t){if(!Is(t))if(Array.isArray(t))for(let n of t)Ds(e,n);else"Simple"===t.type?Ms(e,t):As(e.encoder,e.syntax.program.constants,t)}function js(e,t,n,r){if(!Is(n))if(Array.isArray(n))for(let s of n)js(e,t,s,r);else if("Number"===n.type)As(e,r,n);else if("Resolution"===n.type)Bs(e,t,n,r);else if("Simple"===n.type)Ms(t,n);else{if("Error"!==n.type)throw we(n,"unexpected action kind");e.error({problem:n.op1.problem,span:{start:n.op1.start,end:n.op1.end}})}}function Hs(e,t){if(!Is(t))if(Array.isArray(t))for(let n of t)Hs(e,n);else if("Number"===t.type)As(e.encoder,e.syntax.program.constants,t);else if("Compile"===t.type)Ps(e,t);else if("Resolution"===t.type)Bs(e.encoder,e,t,e.syntax.program.constants);else if("Simple"===t.type)Ms(e,t);else if("Error"!==t.type)throw we(t,"unexpected action type")}class Us{constructor(){let{blocks:e,inlines:t}=function(e,t){return e.add("if",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #if requires a single argument");return _s({args:()=>({count:1,actions:[ni("Expr",e[0]),ni(71)]}),ifTrue:()=>xs(n.get("default")),ifFalse:()=>n.has("else")?xs(n.get("else")):zs})}),e.add("unless",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #unless requires a single argument");return _s({args:()=>({count:1,actions:[ni("Expr",e[0]),ni(71)]}),ifTrue:()=>n.has("else")?xs(n.get("else")):zs,ifFalse:()=>xs(n.get("default"))})}),e.add("with",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #with requires a single argument");return _s({args:()=>({count:2,actions:[ni("Expr",e[0]),ni(33,3,0),ni(71)]}),ifTrue:()=>Ss(n.get("default"),1),ifFalse:()=>n.has("else")?xs(n.get("else")):zs})}),e.add("let",(e,t,n)=>{if(!e)return ti("let requires arguments",0,0);let{count:r,actions:s}=si(e);return[s,Ss(n.get("default"),r)]}),e.add("each",(e,t,n)=>Os({args(){let n;return n=t&&"key"===t[0][0]?[ni("Expr",t[1][0])]:[gs(null)],n.push(ni("Expr",e[0])),{count:2,actions:n}},body(){let e=[ni(74),ni(66,cs("ELSE")),ni(0),ni(33,2,1),ni(6,cs("ITER")),ni(72,cs("BODY")),ni("Label","ITER"),ni(75,cs("BREAK")),ni("Label","BODY"),Ss(n.get("default"),2),ni(34,2),ni(4,cs("FINALLY")),ni("Label","BREAK"),ni(73),ni(1),ni(4,cs("FINALLY")),ni("Label","ELSE")];return n.has("else")&&e.push(xs(n.get("else"))),e}})),e.add("in-element",(e,t,n)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #in-element requires a single argument");return _s({args(){let[n,r]=t,s=[];for(let e=0;e<n.length;e++){let t=n[e];if("guid"!==t&&"insertBefore"!==t)throw new Error(`SYNTAX ERROR: #in-element does not take a \`${n[0]}\` option`);s.push(ni("Expr",r[e]))}return s.push(ni("Expr",e[0]),ni(33,3,0)),{count:4,actions:s}},ifTrue:()=>[ni(50),xs(n.get("default")),ni(56)]})}),e.add("-with-dynamic-vars",(e,t,n)=>{if(t){let[e,r]=t,{actions:s}=si(r);return[s,vs(e,()=>xs(n.get("default")))]}return xs(n.get("default"))}),e.add("component",(e,t,n,r)=>{if("string"==typeof e[0]){let s=ai(r,e[0],t,n.get("default"));if(Rs(s))return s}let[s,...i]=e;return ni("DynamicComponent",{definition:s,attrs:null,params:i,args:t,atNames:!1,blocks:n})}),t.add("component",(e,t,n,r)=>{let s=t&&t[0];if("string"==typeof s){let e=ai(r,s,n,null);if(e!==Ls)return e}let[i,...l]=t;return ui(r.meta,{definition:i,attrs:null,params:l,hash:n,atNames:!1,blocks:Xs})}),{blocks:e,inlines:t}}(new Fs,new Vs);this.blocks=e,this.inlines=t}}class Fs{constructor(){this.names=j(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t,n,r,s){let i=this.names[e],l={resolver:s.syntax.program.resolverDelegate,meta:s.meta};if(void 0===i){return(0,this.missing)(e,t,n,r,l)}return(0,this.funcs[i])(t,n,r,l)}}class Vs{constructor(){this.names=j(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t){let n,r,s,[,,,,i]=e;if(!Array.isArray(i))return Ls;if(31===i[0]){let e=Zs(i[3],t.meta,"Expected head of call to be a string");if("string"!=typeof e)return e;n=e,r=i[4],s=i[5]}else{if(27!==i[0])return Ls;{let e=function([,e,t],n){if(t.length>0)return null;if(25===e[0]||26===e[0])return n.upvars[e[1]];return null}(i,t.meta);if(null===e)return Ls;n=e,r=null,s=null}}let l=this.names[n],a={resolver:t.syntax.program.resolverDelegate,meta:t.meta};if(void 0===l&&this.missing){return(0,this.missing)(n,r,s,a)}if(void 0!==l){return(0,this.funcs[l])(n,r,s,a)}return Ls}}function $s(e,t){return{syntax:e,encoder:new ri,meta:t}}const Ws=new Ts;Ws.add(2,e=>ni(42,e[1])),Ws.add(11,()=>ni(55)),Ws.add(10,()=>ni(54)),Ws.add(3,(e,t)=>{let[,,,n,r,s]=e,i=Zs(n,t,"Expected modifier head to be a string");return"string"!=typeof i?i:ni("IfResolved",{kind:"Modifier",name:i,andThen:e=>[ni(0),ni("SimpleArgs",{params:r,hash:s,atNames:!1}),ni(57,e),ni(1)],span:{start:0,end:0}})}),Ws.add(12,([,e,t,n])=>ni(51,e,t,n)),Ws.add(23,([,e,t,n])=>ni(108,e,t,n)),Ws.add(13,([,e,t,n])=>[ni("Expr",t),ni(52,e,!1,n)]),Ws.add(20,([,e,t,n])=>[ni("Expr",t),ni(52,e,!0,n)]),Ws.add(14,([,e,t,n])=>[ni("Expr",t),ni(53,e,!1,n)]),Ws.add(21,([,e,t,n])=>[ni("Expr",t),ni(53,e,!0,n)]),Ws.add(9,([,e,t])=>t?ni(48,e):[ni(91),ni(48,e)]),Ws.add(7,([,e,t,n,r])=>"string"==typeof e?ni("IfResolvedComponent",{name:e,attrs:t,blocks:r,staticTemplate:(e,t,r,{blocks:s,attrs:i})=>[ni(80,e),oi({capabilities:t,layout:r,attrs:i,params:null,hash:n,blocks:s})],dynamicTemplate:(e,t,{attrs:r,blocks:s})=>[ni(80,e),ci({capabilities:t,attrs:r,params:null,hash:n,atNames:!0,blocks:s})]}):ni("DynamicComponent",{definition:e,attrs:t,params:null,args:n,blocks:r,atNames:!0})),Ws.add(17,([,e,t],n)=>_s({args:()=>({count:2,actions:[ni("Expr",e),ni(33,3,0)]}),ifTrue:()=>[ni(104,os(n.referrer),as(n.evalSymbols),ls(t)),ni(40),ni(1)]})),Ws.add(16,([,e,t])=>ws(e,t)),Ws.add(15,([,e])=>ws(e,L)),Ws.add(22,([,e],t)=>ni(106,as(t.evalSymbols),ls(e))),Ws.add(1,e=>{let[,t,,,n]=e;return"string"==typeof n&&t?ni(41,n):ni("CompileInline",{inline:e,ifUnhandled:()=>[ni(0),ni("Expr",n),ni(3,{type:"stdlib",value:t?"trusting-append":"cautious-append"}),ni(1)]})}),Ws.add(5,e=>ni("CompileBlock",e));const Gs=-1;class Js{constructor(e,t,n){this.statements=e,this.meta=t,this.symbolTable=n,this.compiled=null}compile(e){return function(e,t){if(null!==e.compiled)return e.compiled;e.compiled=Gs;let{statements:n,meta:r}=e,s=function(e,t,n){let r=Ws,s=$s(n,t);for(let t=0;t<e.length;t++)Hs(s,r.compile(e[t],s.meta));0;return s.encoder.commit(n.program.heap,t.size)}(n,r,t);return Pn(t.program),e.compiled=s,s}(this,e)}}function Ys(e){let t=e.block;return new Js(t.statements,ii(e),{symbols:t.symbols,hasEval:t.hasEval})}function Ks(e,t){let n=Array.isArray(e)?{statements:e,parameters:L}:e;return new Js(n.statements,t,{parameters:n.parameters})}class qs{constructor(e){this.blocks=e,this.names=e?Object.keys(e):[]}get(e){return this.blocks&&this.blocks[e]||null}has(e){let{blocks:t}=this;return null!==t&&e in t}with(e,t){let{blocks:n}=this;return new qs(n?pe({},n,{[e]:t}):{[e]:t})}get hasAny(){return null!==this.blocks}}const Xs=new qs(null);function Qs(e,t){if(null===e)return Xs;let n=j(),[r,s]=e;for(let e=0;e<r.length;e++)n[r[e]]=Ks(s[e],t);return new qs(n)}function Zs(e,t,n){if(!t.upvars)return ti(n+", but there were no free variables in the template",0,0);if(!Array.isArray(e)||27!==e[0])throw new Error(`${n}, got ${JSON.stringify(e)}`);if(0!==e[2].length)throw new Error(`${n}, got ${JSON.stringify(e)}`);if(26===e[1][0]||25===e[1][0]){let n=e[1][1];return t.upvars[n]}throw new Error(`${n}, got ${JSON.stringify(e)}`)}class ei{constructor(){this.labels=j(),this.targets=[]}label(e,t){this.labels[e]=t}target(e,t){this.targets.push({at:e,target:t})}patch(e){let{targets:t,labels:n}=this;for(let r=0;r<t.length;r++){let{at:s,target:i}=t[r],l=n[i]-s;e.patch(s,l)}}}function ti(e,t,n){return ni("Error",{problem:e,start:t,end:n})}function ni(e,t,n,r){if("number"==typeof e)return void 0!==r?{type:"Number",op:e,op1:t,op2:n,op3:r}:void 0!==n?{type:"Number",op:e,op1:t,op2:n}:void 0!==t?{type:"Number",op:e,op1:t}:{type:"Number",op:e};{let n;if("CompileInline"===(s=e)||"CompileBlock"===s||"InvokeStatic"===s||"PushCompilable"===s||"Args"===s||"IfResolvedComponent"===s||"DynamicComponent"===s)n="Compile";else if(function(e){return"IfResolved"===e||"Expr"===e||"SimpleArgs"===e||"ResolveFree"===e||"ResolveContextualFree"===e}(e))n="Resolution";else if(function(e){return"Label"===e||"Option"===e||"GetComponentLayout"===e||"StartLabels"===e||"StopLabels"===e||"SimpleArgs"===e||"JitCompileBlock"===e||"SetBlock"===e}(e))n="Simple";else{if(!function(e){return"Error"===e}(e))throw new Error("Exhausted "+e);n="Error"}return void 0===t?{type:n,op:e,op1:void 0}:{type:n,op:e,op1:t}}var s}class ri{constructor(){this.labelsStack=new U,this.encoder=new fs([]),this.errors=[]}error(e){this.encoder.encode(30,0),this.errors.push(e)}commit(e,t){this.encoder.encode(5,1024);let n=function(e,t,n){let r=e.malloc();for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?e.pushPlaceholder(r):"object"==typeof r?e.pushStdlib(r):e.push(r)}return e.finishMalloc(r,t),r}(e,t,this.encoder.buffer);return this.errors.length?{errors:this.errors,handle:n}:n}push(e,t,...n){if((r=t)>=0&&r<=15){let r=n.map((t,n)=>this.operand(e,t,n));return this.encoder.encode(t,1024,...r)}{let r=n.map((t,n)=>this.operand(e,t,n));return this.encoder.encode(t,0,...r)}var r}operand(e,t,n){return t&&"object"==typeof t&&"label"===t.type?(this.currentLabels.target(this.encoder.size+n,t.value),-1):function(e,t){if("number"==typeof t||"function"==typeof t)return t;if("boolean"==typeof t)return!0===t?1:0;if("string"==typeof t)return e.string(t);if(null===t)return 0;switch(t.type){case"array":return e.array(t.value);case"string-array":return e.stringArray(t.value);case"serializable":return e.serializable(t.value);case"template-meta":return e.templateMeta(t.value);case"other":return e.other(t.value);case"stdlib":return t;case"primitive":switch(t.value.type){case 1:return ge(e.string(t.value.primitive),1073741823,-1);case 2:return ge(e.number(t.value.primitive),1073741823,-1073741825);case 0:return de(t.value.primitive);default:return V(t.value)}case"lookup":throw F("lookup not reachable");default:return V(t)}}(e,t)}get currentLabels(){return this.labelsStack.current}label(e){this.currentLabels.label(e,this.encoder.size)}startLabels(){this.labelsStack.push(new ei)}stopLabels(){this.labelsStack.pop().patch(this.encoder)}}function si(e){if(!e)return{count:0,actions:zs};let t=[];for(let n=0;n<e.length;n++)t.push(ni("Expr",e[n]));return{count:e.length,actions:t}}function ii(e){return{asPartial:e.asPartial||!1,evalSymbols:li(e),upvars:e.block.upvars,referrer:e.referrer,size:e.block.symbols.length}}function li(e){let{block:t}=e;return t.hasEval?t.symbols:null}function ai(e,t,n,r){let s=ms(t,e);if(null!==s){let{compilable:e,handle:t,capabilities:i}=s;if(e){if(n)for(let e=0;e<n.length;e+=2)n[e][0]="@"+n[e][0];let s=[ni(80,t)];return s.push(oi({capabilities:i,layout:e,attrs:null,params:null,hash:n,blocks:new qs({default:r})})),s}}return Ls}function oi({capabilities:e,layout:t,attrs:n,params:r,hash:s,blocks:i}){let{symbolTable:l}=t;if(l.hasEval||e.prepareArgs)return ci({capabilities:e,attrs:n,params:r,hash:s,atNames:!0,blocks:i,layout:t});let a=[ni(36,4),ni(33,3,1),ni(35,4)],{symbols:o}=l;e.createArgs&&a.push(ni(0),ni("SimpleArgs",{params:r,hash:s,atNames:!0})),a.push(ni(100)),e.dynamicScope&&a.push(ni(59)),e.createInstance&&a.push(ni(89,0|i.has("default"),4)),e.createArgs&&a.push(ni(1)),a.push(ni(0),ni(90,4));let u=[];a.push(ni(92,4)),u.push({symbol:0,isBlock:!1});for(let e=0;e<o.length;e++){let t=o[e];switch(t.charAt(0)){case"&":let r;r="&attrs"===t?n:i.get(t.slice(1)),r?(a.push(ks(r)),u.push({symbol:e+1,isBlock:!0})):(a.push(ks(null)),u.push({symbol:e+1,isBlock:!0}));break;case"@":if(!s)break;let[l,o]=s,c=t,h=l.indexOf(c);-1!==h&&(a.push(ni("Expr",o[h])),u.push({symbol:e+1,isBlock:!1}))}}a.push(ni(37,o.length+1,Object.keys(i).length>0?1:0));for(let e=u.length-1;e>=0;e--){let{symbol:t,isBlock:n}=u[e];n?a.push(ni("SetBlock",t)):a.push(ni(19,t))}return a.push(ni("InvokeStatic",t)),e.createInstance&&a.push(ni(103,4)),a.push(ni(1),ni(40)),e.dynamicScope&&a.push(ni(60)),a.push(ni(101),ni(35,4)),a}function ui(e,{definition:t,attrs:n,params:r,hash:s,atNames:i,blocks:l}){return Os({args:()=>({count:2,actions:[ni("Expr",t),ni(33,3,0)]}),body:()=>[ni(66,cs("ELSE")),ni(83,os(e.referrer)),ni(81),ci({capabilities:!0,attrs:n,params:r,hash:s,atNames:i,blocks:l}),ni("Label","ELSE")]})}function ci({capabilities:e,attrs:t,params:n,hash:r,atNames:s,blocks:i,layout:l}){let a=!!i,o=!0===e||e.prepareArgs||!(!r||0===r[0].length),u=i.with("attrs",t);return[ni(36,4),ni(33,3,1),ni(35,4),ni(0),ni("Args",{params:n,hash:r,blocks:u,atNames:s}),ni(87,4),hi(u.has("default"),a,o,()=>{let e;return e=l?[Es(l.symbolTable),ni("PushCompilable",l),ni("JitCompileBlock")]:[ni("GetComponentLayout",4)],e.push(ni(98,4)),e}),ni(35,4)]}function hi(e,t,n,r=null){let s=[ni(100),ni(59),ni(89,0|e,4)];return r&&s.push(r()),s.push(ni(90,4),ni(92,4),ni(38,4),ni(19,0),ni(97,4),n?ni(17,4):zs,t?ni(18,4):zs,ni(34,1),ni(99,4),ni(103,4),ni(1),ni(40),ni(60),ni(101)),s}function pi(e){return Ks(e.block.statements,ii(e))}class di{constructor(e,t,n){this.main=e,this.trustingGuardedAppend=t,this.cautiousGuardedAppend=n}get"trusting-append"(){return this.trustingGuardedAppend}get"cautious-append"(){return this.cautiousGuardedAppend}getAppend(e){return e?this.trustingGuardedAppend:this.cautiousGuardedAppend}}function mi(){return[ni(76,4),hi(!1,!1,!0)]}function fi(e){return[ni(78),Cs(t=>{t(1,()=>e?[ni(68),ni(43)]:ni(47)),t(0,()=>[ni(82),ni(81),[ni(36,4),ni(33,3,1),ni(35,4),ni(0),ni(85),ni(87,4),hi(!1,!1,!0,()=>[ni("GetComponentLayout",4),ni(98,4)]),ni(35,4)]]),t(3,()=>[ni(68),ni(44)]),t(4,()=>[ni(68),ni(45)]),t(5,()=>[ni(68),ni(46)])})]}function gi(e){let t=yi(e,mi),n=yi(e,()=>fi(!0)),r=yi(e,()=>fi(!1));return new di(t,n,r)}const bi={asPartial:!1,evalSymbols:null,upvars:null,referrer:{},size:0};function yi(e,t){let n=new ri,r=new Us;Ds({encoder:n,meta:bi,syntax:{macros:r,program:e}},t());let s=n.commit(e.heap,0);if("number"!=typeof s)throw new Error("Unexpected errors compiling std");return s}class vi{constructor(e){this.constants=new vn,this.heap=new En,this.mode="jit",this.resolverDelegate=e,this.stdlib=gi(this)}}class wi{constructor(e){this.layout=e,this.compiled=null;let{block:t}=e,n=t.symbols.slice(),r=n.indexOf("&attrs");this.attrsBlockNumber=-1===r?n.push("&attrs"):r+1,this.symbolTable={hasEval:t.hasEval,symbols:n}}compile(e){if(null!==this.compiled)return this.compiled;let t=ii(this.layout),n=$s(e,t);var r,s,i,l;Hs(n,(r=this.layout,s=this.attrsBlockNumber,[ni("StartLabels"),(i=5,l=()=>[ni(93,4),ni(31),ni(33,3,0)],[ni(36,i),l(),ni(35,i)]),ni(66,cs("BODY")),ni(36,5),ni(91),ni(49),ni(102,4),ws(s,L),ni(54),ni("Label","BODY"),xs(pi(r)),ni(36,5),ni(66,cs("END")),ni(55),ni("Label","END"),ni(35,5),ni("StopLabels")]));let a=n.encoder.commit(n.syntax.program.heap,t.size);return"number"!=typeof a||(this.compiled=a,Pn(n.syntax.program)),a}}let ki=0;function xi({id:e,meta:t,block:n}){let r,s=e||"client-"+ki++;return{id:s,meta:t,create:e=>{let i=e?pe({},e,t):t;return r||(r=JSON.parse(n)),new Si({id:s,block:r,referrer:i})}}}class Si{constructor(e){this.parsedLayout=e,this.result="ok",this.layout=null,this.partial=null,this.wrappedLayout=null;let{block:t}=e;this.symbols=t.symbols,this.hasEval=t.hasEval,this.referrer=e.referrer,this.id=e.id||"client-"+ki++}asLayout(){return this.layout?this.layout:this.layout=Ys(pe({},this.parsedLayout,{asPartial:!1}))}asPartial(){return this.partial?this.partial:this.layout=Ys(pe({},this.parsedLayout,{asPartial:!0}))}asWrappedLayout(){return this.wrappedLayout?this.wrappedLayout:this.wrappedLayout=new wi(pe({},this.parsedLayout,{asPartial:!1}))}}function Ei(e){return Array.isArray(e)?0!==e.length:Boolean(e)}class Ci{constructor(){this.toBool=Ei}toIterator(e){return function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)?class{constructor(e,t){this.iterable=e,this.result=t,this.position=0}static from(e){const t=e[Symbol.iterator](),n=t.next(),{done:r}=n;return!0===r?null:new this(t,n)}isEmpty(){return!1}next(){const{iterable:e,result:t,position:n}=this;if(t.done)return null;const r=t.value,s=n;return this.position++,this.result=e.next(),{value:r,memo:s}}}.from(e):null}}class Oi extends Ci{constructor(){super(...arguments),this.isInteractive=!0,this.uselessAnchor=self.document.createElement("a"),this.protocolForURL=e=>(this.uselessAnchor.href=e,this.uselessAnchor.protocol)}}const _i=new WeakMap,Mi=Object.getPrototypeOf;function Pi(e,t){return _i.set(t,e),t}const Ai=new WeakMap,Ti=`__OWNER_${Math.floor(Math.random()*Date.now())}__`;let Ni={};const Bi=new WeakMap,zi=new WeakMap,Li=Object.getPrototypeOf;function Ii(e,t){return Bi.set(t,e),t}function Ri(e){let t=e;for(;null!=t;){const e=Bi.get(t);if(void 0!==e)return e;t=Li(t)}}function Di(e,t){let n=zi.get(e);void 0===n&&(n=new WeakMap,zi.set(e,n));let r=n.get(t);return void 0===r&&(r=t(e),n.set(t,r)),r}function ji(e,t){const n=Ri(t);if(void 0!==n&&"component"===n.type)return Di(e,n.factory)}function Hi(e){if("symbol"==typeof e)return null;const t=Number(e);return isNaN(t)?null:t%1==0?t:null}function Ui(e,t){const{named:n,positional:r}=e,s={get(e,t){if(n.has(t)){const e=n.get(t);return T(e.tag),e.value()}},has:(e,t)=>n.has(t),ownKeys:e=>n.names,isExtensible:()=>!1,getOwnPropertyDescriptor:(e,t)=>({enumerable:!0,configurable:!0})},i={get(e,t){if("length"===t)return T(r.tag),r.length;const n=Hi(t);if(null!==n&&n<r.length){const e=r.at(n);return T(e.tag),e.value()}return e[t]},isExtensible:()=>!1,has(e,t){const n=Hi(t);return null!==n&&n<r.length}},l=Object.create(null);return{named:new Proxy(l,s),positional:new Proxy([],i)}}const Fi={createInstance:!0,dynamicLayout:!1,dynamicTag:!1,wrapped:!1,prepareArgs:!1,createArgs:!0,attributeHook:!1,elementHook:!1,updateHook:!1,createCaller:!1,dynamicScope:!0,willDestroy:!1};function Vi(e){return e.capabilities.asyncLifecycleCallbacks}function $i(e){return e.capabilities.updateHook}function Wi(e){return e.capabilities.destructor}class Gi{constructor(e,t,n,r,s){this.env=e,this.delegate=t,this.component=n,this.args=r,this.argsProxy=s}destroy(){const{delegate:e,component:t}=this;Wi(e)&&e.destroyComponent(t)}}const Ji=new class{create(e,t,n,r){const{ComponentDefinition:s}=t,i=n.capture(),l=ji(r.get(Ti).value(),s),a=Ui(i),o=l.createComponent(s,a);return new Gi(e,l,o,i,a)}update({delegate:e,component:t,argsProxy:n}){$i(e)&&e.updateComponent(t,n)}didCreate({delegate:e,component:t}){Vi(e)&&e.didCreateComponent(t)}didUpdate({delegate:e,component:t}){(function(e){return Vi(e)&&$i(e)})(e)&&e.didUpdateComponent(t)}getContext({delegate:e,component:t}){e.getContext(t)}getSelf({env:e,delegate:t,component:n}){return new at(t.getContext(n),e)}getDestructor(e){return Wi(e.delegate)?e:null}getCapabilities({capabilities:e}){return Object.assign({},Fi,{updateHook:e.updateHook})}getTag({args:e}){return b(e)?m():e.tag}didRenderLayout(){}didUpdateLayout(){}getJitStaticLayout({definition:e}){return e.template.asLayout()}};class Yi{constructor(e,t,n){this.manager=Ji,this.handle=e,this.template=ve(n);const r=ji(Ni,t).capabilities;this.state={ComponentDefinition:t,capabilities:r,definition:this}}}function Ki(e){let t,n,r;return()=>(n&&u(n,r)||(n=A(()=>t=e()),r=o()),T(n),t)}function qi(e){return(t,n)=>{const r=function(e,t){const n=Ri(t);if(void 0!==n&&"helper"===n.type)return Di(e,n.factory)}(n.dynamicScope().get(Ti).value(),e),s=t.capture();let i;if(void 0!==r)i=function(e,t,n,r){let s;const i=Ui(n),l=e.capabilities.updateHook;(function(e){return e.capabilities.destructor})(e)&&r.associateDestroyable({destroy(){void 0!==s&&e.destroyHelper(s)}});const a=Ki(()=>e.getValue(s)),o=Ki(()=>{void 0===s?s=e.createHelper(t,i):l&&e.updateHelper(s,i)});return()=>(o(),a())}(r,e,s,n);else{0;const t=e;i=e=>t(...e.positional.value())}return new ot(i,s,n.env)}}const Xi={attributeHook:!1,createArgs:!1,createCaller:!1,createInstance:!0,dynamicLayout:!1,dynamicScope:!1,dynamicTag:!1,elementHook:!1,prepareArgs:!1,updateHook:!1,wrapped:!1,willDestroy:!1};const Qi=new Qe(null);class Zi{static create(){return new Zi}getCapabilities(){return Xi}getJitStaticLayout({definition:e}){return e.template.asLayout()}create(e,t){}getSelf(e){return Qi}getTag(){return g}didRenderLayout(){}didCreate(){}didUpdateLayout(){}didUpdate(){}getDestructor(){return null}}const el=new Zi;class tl{constructor(e,t,n){this.manager=el,this.handle=e,this.template=ve(n),this.state={name:t,definition:this}}}class nl{}function rl(e,t={}){return I("3.13"===e,"Invalid component manager compatibility specified"),{disableAutoTracking:Boolean(t.disableAutoTracking)}}const sl=new class{constructor(){this.capabilities=rl("3.13")}createModifier(e,t){return{definition:e}}installModifier(e,t,n){e.destructor=e.definition(t,...n.positional),e.element=t}updateModifier(e,t){this.destroyModifier(e),this.installModifier(e,e.element,t)}destroyModifier(e){const{destructor:t}=e;void 0!==t&&t()}};class il{constructor(e,t,n,r,s){this.element=e,this.delegate=t,this.modifier=n,this.argsProxy=r,this.capturedArgs=s,this.tag=f()}destroy(){const{delegate:e,modifier:t,argsProxy:n}=this;e.destroyModifier(t,n)}}const ll=new class{create(e,t,n,r){let s=function(e,t){const n=Ri(t);if(void 0!==n&&"modifier"===n.type)return Di(e,n.factory)}(r.get(Ti).value(),t);void 0===s&&(s=sl);const i=n.capture(),l=Ui(i),a=s.createModifier(t,l);return new il(e,s,a,l,i)}getTag({tag:e,capturedArgs:t}){return v([e,t.tag])}install(e){const{element:t,argsProxy:n,delegate:r,modifier:s,tag:i}=e;if(!0===r.capabilities.disableAutoTracking)N(()=>r.installModifier(s,t,n));else{const e=A(()=>r.installModifier(s,t,n));d(i,e)}}update(e){const{argsProxy:t,delegate:n,modifier:r,tag:s}=e;if(!0===n.capabilities.disableAutoTracking)N(()=>n.updateModifier(r,t));else{const e=A(()=>n.updateModifier(r,t));d(s,e)}}getDestructor(e){return e}};class al{constructor(e,t){this.handle=e,this.state=t,this.manager=ll}}let ol=0;const ul=new WeakMap,cl=new WeakMap,hl=new WeakMap;function pl(e){return ul.get(e)||function(e){const t=xi(function(e){let t=e;for(;null!=t;){const e=_i.get(t);if(void 0!==e)return e;t=Mi(t)}}(e)).create();let n;n=e instanceof nl?new tl(ol++,"template-only-component",t):new Yi(ol++,e,t);return ul.set(e,n),n}(e)}function dl(e){return cl.get(e)||function(e){const t={helper:qi(e),handle:ol++};return cl.set(e,t),t}(e)}function ml(e){return hl.get(e)||function(e){const t=new al(ol++,e);return hl.set(e,t),t}(e)}const fl={if:(gl=function(e,t){return new ot(({positional:e})=>{if(e.length>3)throw new Error('The inline form of the `if` helper expects two or three arguments, e.g. `{{if trialExpired "Expired" expiryDate}}`.');const t=e.at(0),n=e.at(1),r=e.at(2);return!0===Ei(t.value())?n.value():void 0!==r?r.value():void 0},e.capture(),t.env,"if")},{helper:gl,handle:ol++})};var gl;let bl=[];var yl=async function(e,t){const n=t instanceof HTMLElement?{element:t}:t,{element:r,args:s,owner:i}=n,l=function(e,t,n,r,s={},i=Ni){const l=function(e,t={},n,r={}){return{env:new Ln(e,t),program:new Cn(n.program.constants,n.program.heap),resolver:new Fn(r)}}(n,r,xl,kl),a=(u=l.env,c={element:t,nextSibling:null},$e.forInitialRender(u,c)),o=kl.registerRoot(e);var u,c;let h;i&&(h=new Mr({[Ti]:new Qe(i)}));return function(e,t,n,r,s,i={},l=new Mr){let a=rs.empty(e,{treeBuilder:t,handle:r,dynamicScope:l},n);const o=rr(a.runtime.resolver,s),{manager:u,state:c}=o;let h;if(!yr(qn(u.getCapabilities(c))))throw new Error("Cannot invoke components with dynamic layouts as a root component.");{let e=u.getJitStaticLayout(c,a.runtime.resolver),t=ye(e.compile(n));if(Array.isArray(t)){let e=t[0];throw new Error(`Compile Error: ${e.problem} ${e.span.start}..${e.span.end} :: TODO (thread better)`)}h={handle:t,symbolTable:e.symbolTable}}return is(a,h,o,i)}(l,a,xl,0,o,function(e,t){const n=new at(e,t);return Object.keys(e).reduce((e,t)=>(e[t]=n.get(t),e),{})}(s,l.env),h)}(e,r,{document:self.document},new Oi,s,i).sync();vl.push(l)};const vl=[];k=function(){wl||(wl=!0,setTimeout(()=>{wl=!1;try{!function(){for(const e of vl){const{env:t}=e;t.begin(),e.rerender(),t.commit()}}(),bl.forEach(([e])=>e())}catch(e){bl.forEach(([,t])=>t(e))}bl=[]},0))};let wl=!1;const kl=new class{constructor(){this.registry=[]}registerRoot(e){const t=pl(e),{handle:n}=t;return this.registry[n]=t,n}lookupComponent(e,t){return this.registry[e]}resolve(e){return this.registry[e]}compilable(e){throw new Error("Method not implemented.")}lookupPartial(e,t){throw new Error("Method not implemented.")}},xl=function(e={},t=new Us){return{program:new vi(new ds(e)),macros:t}}(new class{constructor(e){this.inner=e}lookupHelper(e,t){const n=t.scope(),{helper:r,handle:s}=fl[e]||dl(n[e]);return this.inner.registry[s]=r,s}lookupModifier(e,t){const n=ml(t.scope()[e]),{handle:r}=n;return this.inner.registry[r]=n,r}lookupComponent(e,t){const n=t.scope()[e];const r=pl(n),{state:s,manager:i,template:l,handle:a}=r;return this.inner.registry[a]=r,{handle:a,capabilities:i.getCapabilities(s),compilable:ve(l).asLayout()}}resolve(e){return this.inner.resolve(e)}lookupPartial(e,t){throw new Error("Method not implemented.")}}(kl));function Sl(e,t){if(t instanceof Element)return yl(e,t);const{element:n,args:r,services:i}=t,l=new s(null!=i?i:{});return yl(e,{element:n,args:r,owner:l})}const El=new WeakMap,Cl=new WeakMap;const Ol=function(e,t={}){I("3.4"===e||"3.13"===e,"Invalid component manager compatibility specified");const n="3.4"===e||Boolean(t.updateHook);return{asyncLifecycleCallbacks:Boolean(t.asyncLifecycleCallbacks),destructor:Boolean(t.destructor),updateHook:n}}("3.13",{destructor:!0});class _l extends class{constructor(e){this.owner=e}createComponent(e,t){return new e(this.owner,t.named)}getContext(e){return e}}{constructor(){super(...arguments),this.capabilities=Ol}destroyComponent(e){!function(e){El.set(e,!0)}(e),e.willDestroy(),function(e){Cl.set(e,!0)}(e)}}class Ml extends class{constructor(e,t){this.args=t,El.set(this,!1),Cl.set(this,!1)}get isDestroying(){return El.get(this)||!1}get isDestroyed(){return Cl.get(this)||!1}willDestroy(){}}{constructor(e,t){super(e,t),function(e,t){Ai.set(e,t)}(this,e)}}Ii({factory:e=>new _l(e),type:"component"},Ml);const Pl=(...e)=>{const[t,n,r]=e;if(r)return Al(t,n,r);Object.defineProperty(t,n,Al(t,n))};function Al(e,t,n){const{getter:r,setter:s}=z(t,n&&n.initializer);return{enumerable:!0,configurable:!0,get(){return r(this)},set(e){s(this,e)}}}function Tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Nl{constructor(e,t,n,r,s){Tl(this,"key",void 0),Tl(this,"label",void 0),Tl(this,"items",void 0),Tl(this,"isEmpty",void 0),Tl(this,"empty",void 0),this.key=e,this.label=t,this.items=n,this.isEmpty=r,this.empty=s}item(e){return this.items[e]}length(){return this.items.length}}function Bl(e,t){const n=Object.keys(e);if(0===n.length)throw new Error("No facet field found. "+e);if(e.hasOwnProperty("#attributes")&&e["#attributes"].class.includes("facet-empty"))return function(e){return new Nl(e["#attributes"]["data-drupal-facet-id"],"",[],!0,e)}(e);const r=n[0],s=e[r].map(e=>({key:r,value:e.values.value,count:e.values.count,url:e.url,frag:`${Ll(r,t)}:${e.values.value}`})),i=function(e,t){return Object.values(t).find(t=>t.field_id===e).label}(r,t);return new Nl(r,i,s,!1)}function zl(e,t){return!(!e||!t)&&(e.key===t.key&&e.value===t.value)}function Ll(e,t){return Object.values(t).find(t=>t.field_id===e).url_alias}var Il,Rl,Dl,jl,Hl,Ul,Fl,Vl,$l,Wl;function Gl(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Jl(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const Yl={collections:{types:["collection_object"]},items:{types:["islandora_object"]},mixed:{types:["collection_object","islandora_object"]},none:{types:[]}},Kl={COLLECTIONS:"collections",COLLECTION:"mixed",ITEM:"items",NONE:"none"};let ql=(Rl=Jl((Il=class{constructor(e){var t,n,r;r=[],(n="types")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,Gl(this,"rows",Rl,this),Gl(this,"pager",Dl,this),Gl(this,"sortBy",jl,this),Gl(this,"sortOrder",Hl,this),Gl(this,"itemsPerPage",Ul,this),Gl(this,"searchTerms",Fl,this),Gl(this,"facets",Vl,this),Gl(this,"selectedFacets",$l,this),Gl(this,"initMode",Wl,this),this.types=Yl[e].types}initFromUrl(e){const t=new URL(e);if(!t.search)return;const n=t.searchParams;if(this.parseSolrQuery(n.get("query")),n.has("page")&&(this.pager.current_page=parseInt(n.get("page"))),n.has("items_per_page")){const e=parseInt(n.get("items_per_page"));this.pager.items_per_page=e,this.itemsPerPage=e}if(n.has("sort_by")&&(this.sortBy="&sort_by="+n.get("sort_by")),n.has("sort_order")&&(this.sortOrder="&sort_order="+n.get("sort_order")),t.search.includes("f[")){this.initMode=!0;let e=t.search;e.startsWith("?")&&(e=e.slice(1));e.split("&").filter(e=>e.startsWith("f[")).forEach(e=>{const t=e.slice(e.indexOf("=")+1),n=t.split(":");this.selectedFacets.push({key:n[0],value:n[1],frag:decodeURI(t),count:0,url:""})})}}parseSolrQuery(e){if(!e)return;const t=e.split(" AND ");this.searchTerms=t.find(e=>!e.includes("ss_type")&&!e.includes("field_memeber_of"))}searchParams(e){const t=this.searchTerms?""+this.searchTerms:"",n=e?"its_field_member_of:"+e:"",r=this.types&&this.types.length>0?`(${this.types.map(e=>"ss_type:"+e).join(" OR ")})`:"";let s=t+(t&&(n||r)?" AND ":"")+n+(n&&r?" AND ":"")+r+(this.pager.current_page?"&page="+--this.pager.current_page:"")+(this.sortBy?this.sortBy:"")+(this.sortOrder?this.sortOrder:"")+(this.itemsPerPage?"&items_per_page="+this.itemsPerPage:"")+(this.selectedFacets.length>0?"&"+this.selectedFacets.map((e,t)=>`f[${t}]=${e.frag}`).join("&"):"");return s="query="+s,s}async fetchData(e){const t=this.searchParams(e);let n="/search_rest_endpoint?"+t;console.log(n);try{let e=await fetch(n),r=await e.json();if(this.updateClientUrl(t),this.rows=r.rows,this.pager=r.pager,this.pager.current_page=++this.pager.current_page,this.facets=this.parseFacets(r.facets,r.facets_metadata),this.initMode){const e=[...this.selectedFacets];this.selectedFacets=this.facets.map(e=>e.items).flat().filter(t=>e.some(e=>e.frag===t.frag)),this.initMode=!1}}catch(e){console.log(e)}}parseFacets(e,t){let n=[];return e.forEach((e,r)=>{n.push(Bl(e[0],t))}),n.filter(e=>!e.isEmpty)}updateClientUrl(e){let t=new URL(window.location.href);const n=e.split("&").filter(e=>!!e&&!e.startsWith("query"));let r=[];this.searchTerms&&(r=r.concat("query="+this.searchTerms)),r=r.concat(n),t.search=r.join("&"),history.replaceState({},"",t.toString())}}).prototype,"rows",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Dl=Jl(Il.prototype,"pager",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{current_page:0,total_items:0,total_pages:0,items_per_page:0}}}),jl=Jl(Il.prototype,"sortBy",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hl=Jl(Il.prototype,"sortOrder",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ul=Jl(Il.prototype,"itemsPerPage",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fl=Jl(Il.prototype,"searchTerms",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vl=Jl(Il.prototype,"facets",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$l=Jl(Il.prototype,"selectedFacets",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wl=Jl(Il.prototype,"initMode",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Il);function Xl(e,t,n,r){}class Ql{constructor(){this.capabilities=rl("3.13")}createModifier(e,t){return{args:t,previousArgs:t}}installModifier(e,t){const{args:n}=e,[r,s]=n.positional,i=Object.assign({},n.named);t.addEventListener(r,s,i),e.element=t,e.previousArgs={positional:[r,s],named:i}}updateModifier(e){this.destroyModifier(e),this.installModifier(e,e.element)}destroyModifier({element:e,previousArgs:t}){const[n,r]=t.positional;e.removeEventListener(n,r,t.named)}}!function(e,t){Ii({factory:e,type:"modifier"},t)}(()=>new Ql,Xl);const Zl=new WeakMap;function ea(e,t,n){const r=n.value;return{enumerable:n.enumerable,configurable:n.configurable,get(){let e=Zl.get(this);void 0===e&&(e=new Map,Zl.set(this,e));let t=e.get(r);return void 0===t&&(t=r.bind(this),e.set(r,t)),t}}}function ta(e){return()=>({enumerable:!0,configurable:!1,get(){return(t=this,Ai.get(t)).lookup({type:"service",name:e});var t}})}var na,ra;function sa(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let ia=Pi({id:"BYaM1+EY",block:'{"symbols":["@item"],"statements":[[1,1,0,0,"\\n    "],[9,"button",false],[14,"class",[32,["py-1 px-3 flex items-center rounded-full text-left text-black hover:bg-gray-200 ",[31,134,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["isSelected"]],"bg-blue-spirit"],null]]],null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["selectFacet"]]],null],[10],[1,1,0,0,"\\n      "],[1,0,0,0,[27,[24,1],["value"]]],[1,1,0,0,"\\n      "],[9,"span",true],[12,"class","mr-3",null],[10],[1,1,0,0,"("],[1,0,0,0,[27,[24,1],["count"]]],[1,1,0,0,")"],[11],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["isSelected"]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[9,"svg",true],[12,"class","h-5 w-5",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M6 18L18 6M6 6l12 12",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:Xl})}},(ra=sa((na=class extends Ml{constructor(...e){var t,n,r,s;super(...e),t=this,n="selectedFacets",s=this,(r=ra)&&Object.defineProperty(t,n,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(s):void 0})}get isSelected(){let e=!1;return e=this.args.selectedFacets.filter(e=>e.key===this.args.item.key&&e.value===this.args.item.value).length>0,e}selectFacet(){this.args.onClick(this.args.item)}}).prototype,"selectedFacets",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.selectedFacets||[]}}),sa(na.prototype,"selectFacet",[ea],Object.getOwnPropertyDescriptor(na.prototype,"selectFacet"),na.prototype),na));var la,aa,oa;function ua(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ca(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let ha=Pi({id:"wk+aEHJZ",block:'{"symbols":["item","@facet","@facetSelected","@selectedFacets"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow my-4",null],[10],[1,1,0,0,"\\n      "],[9,"button",false],[23,"class","flex w-full justify-between py-2 px-4 border-b hover:bg-gray-100 focus:bg-gray-100",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["toggleList"]]],null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-lg text-gray-500",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,2],["label"]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["isOpen"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","{2}",null],[12,"d","M5 15l7-7 7 7",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M19 9l-7 7-7-7",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n      "],[9,"ul",true],[13,"id",[27,[24,0],["guid"]],null],[12,"class","flex flex-col px-8 overflow-hidden transition-all ease-in-out duration-500",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","py-2 space-y-1",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,2],["items"]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[9,"li",true],[10],[1,1,0,0,"\\n            "],[7,"FacetItem",[],[["@facet","@item","@onClick","@selectedFacets"],[[27,[24,2],[]],[27,[24,1],[]],[27,[24,3],[]],[27,[24,4],[]]]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","if","each"]}',meta:{scope:()=>({on:Xl,FacetItem:ia})}},(aa=ca((la=class extends Ml{constructor(...e){super(...e),ua(this,"isOpen",aa,this),ua(this,"guid",oa,this)}toggleList(){if(this.isOpen){this.isOpen=!this.isOpen;document.getElementById(this.guid).style["max-height"]="0"}else{this.isOpen=!this.isOpen;const e=document.getElementById(this.guid);e.style["max-height"]=e.scrollHeight+"px"}}}).prototype,"isOpen",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oa=ca(la.prototype,"guid",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Math.random()}}),ca(la.prototype,"toggleList",[ea],Object.getOwnPropertyDescriptor(la.prototype,"toggleList"),la.prototype),la));class pa extends Ml{get hasSelectedFacets(){return this.args.selectedFacets&&this.args.selectedFacets.length>0}}Pi({id:"HOsxSwGO",block:'{"symbols":["facet","@facetSelected","@selectedFacets","@resetFacets","@facets"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[10],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["hasSelectedFacets"]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[9,"div",true],[12,"class","flex my-4 px-4 justify-between text-black",null],[10],[1,1,0,0,"\\n          "],[9,"h3",true],[12,"class","text-lg",null],[10],[1,1,0,0,"Filters"],[11],[1,1,0,0,"\\n          "],[9,"button",false],[23,"class","",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,4],[]]],null],[10],[1,1,0,0,"Clear"],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,5],[]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[7,"Facet",[],[["@facet","@facetSelected","@selectedFacets"],[[27,[24,1],[]],[27,[24,2],[]],[27,[24,3],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","if","each"]}',meta:{scope:()=>({on:Xl,Facet:ha})}},pa);class da extends Ml{}var ma,fa,ga;Pi({id:"qE8k8VX7",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex items-center justify-center h-24 w-24 mr-2 sm:mr-20 flex-shrink-0",null],[10],[1,1,0,0,"\\n      "],[9,"svg",true],[12,"class","h-16 w-16 text-gray-200",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n        "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",null],[10],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},da);let ba=Pi({id:"s0wIRd4W",block:'{"symbols":["@listItem"],"statements":[[1,1,0,0,"\\n    "],[9,"a",true],[13,"href",[32,["/node/",[27,[24,1],["nid"]]]],null],[12,"class","flex items-center justify-between w-full min-h-12 p-4 border-b border-gray-200 hover:bg-gray-100 cursor-pointer",null],[12,"type","button",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["imageUrl"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[9,"img",true],[13,"src",[27,[24,0],["imageUrl"]],null],[12,"alt","collection or item image",null],[12,"class","h-24 w-24 mr-2 sm:mr-20 flex-shrink-0",null],[10],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[7,"MissingAsset",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[9,"ul",true],[12,"class","flex flex-col text-align-left w-3/5 text-gray-600",null],[10],[1,1,0,0,"\\n          "],[9,"li",true],[10],[1,1,0,0,"\\n            "],[9,"h3",true],[12,"class","text-xl mb-2",null],[10],[1,0,0,0,[27,[24,1],["title"]]],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["uid"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","italic",null],[10],[1,1,0,0,"Author:"],[11],[1,1,0,0,"\\n                "],[9,"span",true],[10],[1,1,0,0,[27,[24,1],["uid"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["field_date_created"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","italic",null],[10],[1,1,0,0,"Created on:"],[11],[1,1,0,0,"\\n                "],[9,"span",true],[10],[1,0,0,0,[27,[24,1],["field_date_created"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["field_date_published"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","italic",null],[10],[1,1,0,0,"Published on:"],[11],[1,1,0,0,"\\n                "],[9,"span",true],[10],[1,0,0,0,[27,[24,1],["field_date_published"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["field_description"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","text-gray-600 line-clamp-2",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,1],["field_description"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5l7 7-7 7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({MissingAsset:da})}},(ga=class extends Ml{constructor(e,t){var n,r,s,i;super(e,t),n=this,r="imageUrl",i=this,(s=fa)&&Object.defineProperty(n,r,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(i):void 0}),this.fetchThumbnail()}async fetchThumbnail(){let e=`/jsonapi/media/image?include=thumbnail&filter[media-filter][condition][value]=${this.args.listItem.uuid}&filter[media-filter][condition][operator]=IN&filter[media-filter][condition][path]=field_media_of.id&filter[thumb-filter][condition][value]=Thumbnail Image&filter[thumb-filter][condition][operator]=IN&filter[thumb-filter][condition][path]=field_media_use.name`;try{let t=await fetch(e),n=await t.json();n.data.length>0&&(this.imageUrl=n.included[0].attributes.uri.url)}catch(e){console.log(e)}}},ya=(ma=ga).prototype,va="imageUrl",wa=[Pl],ka={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},Sa={},Object.keys(ka).forEach((function(e){Sa[e]=ka[e]})),Sa.enumerable=!!Sa.enumerable,Sa.configurable=!!Sa.configurable,("value"in Sa||Sa.initializer)&&(Sa.writable=!0),Sa=wa.slice().reverse().reduce((function(e,t){return t(ya,va,e)||e}),Sa),xa&&void 0!==Sa.initializer&&(Sa.value=Sa.initializer?Sa.initializer.call(xa):void 0,Sa.initializer=void 0),void 0===Sa.initializer&&(Object.defineProperty(ya,va,Sa),Sa=null),fa=Sa,ma));var ya,va,wa,ka,xa,Sa;class Ea extends Ml{}Pi({id:"UFCAov7T",block:'{"symbols":["listItem","@list"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","h-auto",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,2],[]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[7,"ListItem",[],[["@listItem"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["each"]}',meta:{scope:()=>({ListItem:ba})}},Ea);class Ca extends Ml{}Pi({id:"S+rNk3Cq",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex h-auto p-4 items-center justify-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","sk-pulse bg-blue-heritage",null],[10],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},Ca);class Oa{constructor(e){this.owner=e,this.capabilities=function(e,t={}){return I("glimmerjs-2.0.0"===e,"Invalid helper manager compatibility specified"),{destructor:Boolean(t.destructor),updateHook:Boolean(t.updateHook)}}("glimmerjs-2.0.0")}getValue({fn:e,args:t,ownerProxy:n}){return e(t.positional,t.named,{services:n})}createHelper(e,t){const{owner:n}=this;return{fn:e,args:t,ownerProxy:new Proxy({},{get:(e,t)=>n.lookup({type:"service",name:t})})}}}const _a=e=>new Oa(e);function Ma(e){return function(e,t){Ii({factory:e,type:"helper"},t)}(_a,e),e}function Pa(e,...t){return e.bind(null,...t)}function Aa(e){return Ma((t,n)=>e(n,...t))}const Ta=Aa(({},e,t,n)=>e[t]===n);Aa(({},e)=>!e),Aa(({},e,t)=>e===t);class Na extends Ml{}var Ba,za;Pi({id:"fTWuUzbA",block:'{"symbols":["@item","@nextPage","@prevPage","@goToPage"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[31,12,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","page"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[14,"aria-label",[32,["page number ",[27,[24,1],["page"]]]],null],[14,"class",[32,["mr-2 hover:bg-gray-200 rounded-full p-2 ",[31,141,2,[27,[26,2,"CallHead"],[]],[[27,[24,1],["selected"]],"bg-blue-spirit"],null]]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,193,2,[27,[26,3,"CallHead"],[]],[[27,[24,4],[]],[27,[24,1],["page"]]],null]],null],[10],[1,1,0,0,"\\n        "],[1,0,0,0,[27,[24,1],["page"]]],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,275,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","start-ellipsis"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"aria-label","start ellipsis",null],[12,"class","mr-2",null],[10],[1,1,0,0,"..."],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,388,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","end-ellipsis"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"aria-label","end ellipsis",null],[12,"class","mr-2",null],[10],[1,1,0,0,"..."],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,497,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","previous"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"aria-label","previous page",null],[23,"class","border rounded-full mr-4 p-2 shadow hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",null],[14,"disabled",[27,[24,1],["disabled"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,3],[]]],null],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-4 w-4 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M15 19l-7-7 7-7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,1053,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","next"],null]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"aria-label","next page",null],[23,"class","border rounded-full ml-2 p-2 shadow hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",null],[14,"disabled",[27,[24,1],["disabled"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,2],[]]],null],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-4 w-4 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5l7 7-7 7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["on","is","if","fn"]}',meta:{scope:()=>({on:Xl,fn:Pa,is:Ta})}},Na);let La=Pi({id:"Ta6PpoS8",block:'{"symbols":["item","item","@goToPage","@prevPage","@nextPage","@pager","@itemLabel"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["compact"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","flex flex-col items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["paginatedItems"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"PageItem",[],[["@item","@goToPage","@prevPage","@nextPage"],[[27,[24,2],[]],[27,[24,3],[]],[27,[24,4],[]],[27,[24,5],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-gray-500 text-sm",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,0],["offset"]]],[1,1,0,0,"  "],[1,0,0,0,[27,[24,0],["lastItemOnPage"]]],[1,1,0,0," of "],[1,0,0,0,[27,[24,6],["total_items"]]],[1,1,0,0," "],[1,0,0,0,[27,[24,7],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex items-center mr-6",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["paginatedItems"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"PageItem",[],[["@item","@goToPage","@prevPage","@nextPage"],[[27,[24,1],[]],[27,[24,3],[]],[27,[24,4],[]],[27,[24,5],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n          Showing "],[1,0,0,0,[27,[24,0],["offset"]]],[1,1,0,0,"  "],[1,0,0,0,[27,[24,0],["lastItemOnPage"]]],[1,1,0,0," of "],[1,0,0,0,[27,[24,6],["total_items"]]],[1,1,0,0," "],[1,0,0,0,[27,[24,7],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["each","if"]}',meta:{scope:()=>({PageItem:Na})}},(za=function(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}((Ba=class extends Ml{constructor(...e){super(...e),function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}(this,"compact",za,this)}get lastItemOnPage(){const e=this.offset+Number(this.args.pager.items_per_page)-1;return e>this.args.pager.total_items?this.args.pager.total_items:e}get offset(){return(this.args.pager.current_page-1)*Number(this.args.pager.items_per_page)+1}get paginatedItems(){let e=this.args.pager.current_page,t=this.compact?1:3,n=this.compact?1:3,r=this.args.pager.total_pages;const s=(e,t)=>{const n=t-e+1;return Array.from({length:n},(t,n)=>e+n)},i=s(1,Math.min(t,r)),l=s(Math.max(r-t+1,t+1),r),a=Math.max(Math.min(e-n,r-t-2*n-1),t+2),o=Math.min(Math.max(e+n,t+2*n+2),l.length>0?l[0]-2:r-1),u=["previous",...i,...a>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...s(a,o),...o<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...l,"next"],c=t=>{switch(t){case"first":return 1;case"previous":return e-1;case"next":return e+1;case"last":return r;default:return null}};return u.map(t=>"number"==typeof t?{type:"page",page:t,selected:t===e,disabled:!1,"aria-current":t===e?"true":void 0}:{type:t,page:c(t),selected:!1,disabled:-1===t.indexOf("ellipsis")&&("next"===t||"last"===t?e>=r:e<=1)})}}).prototype,"compact",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.compact||!1}}),Ba));var Ia,Ra;function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ja(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let Ha=Pi({id:"IeK3vVP2",block:'{"symbols":["page","numItems","selectOption","selectOption","@resetOptions"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","text-left ml-0",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex my-4 px-4 justify-between text-black",null],[10],[1,1,0,0,"\\n        "],[9,"h3",true],[12,"class","text-lg",null],[10],[1,1,0,0,"List Options"],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,5],[]]],null],[10],[1,1,0,0,"Clear"],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","bg-white shadow divide-y divide-gray-100 px-10 py-2 outline-none",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex flex-col h-full justify-between my-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","my-2",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","sort-by",null],[10],[1,1,0,0,"\\n              Sort by\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","sort-by",null],[23,"class","mb-3 inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","sort-by",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleSortByChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[13,"disabled",[27,[24,0],["args","sortBy"]],null],[12,"selected","",null],[10],[1,1,0,0,"Sort by"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["sortByOptions"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,4],["value"]],null],[13,"selected",[31,1203,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"sortBy",[27,[24,4],["value"]]],null],null],[10],[1,1,0,0,"Sort by: "],[1,0,0,0,[27,[24,4],["displayValue"]]],[11],[1,1,0,0,"\\n"]],"parameters":[4]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","sort-order",null],[10],[1,1,0,0,"\\n              Sort Order\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","sort-order",null],[23,"class","mb-3 inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","sort-order",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleSortOrderChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[13,"disabled",[27,[24,0],["args","sortOrder"]],null],[12,"selected","",null],[10],[1,1,0,0,"Sort order"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["sortOrderOptions"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,3],["value"]],null],[13,"selected",[31,2165,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"sortOrder",[27,[24,3],["value"]]],null],null],[10],[1,1,0,0,"Sort order: "],[1,0,0,0,[27,[24,3],["displayValue"]]],[11],[1,1,0,0,"\\n"]],"parameters":[3]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","items-per-page",null],[10],[1,1,0,0,"\\n              Items Per Page\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","items-per-page",null],[23,"class","mb-3 inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","items-per-page",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleItemsPerPageChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[13,"disabled",[27,[24,0],["args","itemsPerPage"]],null],[12,"selected","",null],[10],[1,1,0,0,"Items per page"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["itemsPerPage"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,2],[]],null],[13,"selected",[31,3141,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"itemsPerPage",[27,[24,2],[]]],null],null],[10],[1,1,0,0,"Items per page: "],[1,0,0,0,[27,[24,2],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","current-page",null],[10],[1,1,0,0,"\\n              Go to page\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","current-page",null],[23,"class","inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","current-page",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleCurrentPageChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[12,"disabled","",null],[12,"selected","",null],[10],[1,1,0,0,"Go to page"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["pages"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,1],[]],null],[13,"selected",[31,4035,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args","pager"]],"current_page",[27,[24,1],[]]],null],null],[10],[1,1,0,0,"Go to page: "],[1,0,0,0,[27,[24,1],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["is","on","each"]}',meta:{scope:()=>({on:Xl,is:Ta})}},(Ra=ja((Ia=class extends Ml{constructor(...e){super(...e),function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}(this,"displayMenu",Ra,this),Da(this,"sortByOptions",[{value:"&sort_by=search_api_relevance",displayValue:"Relevance"},{value:"&sort_by=title",displayValue:"Title"}]),Da(this,"sortOrderOptions",[{value:"&sort_order=ASC",displayValue:"Ascending"},{value:"&sort_order=DESC",displayValue:"Descending"}]),Da(this,"itemsPerPage",[5,10,25,50])}get pages(){const e=this.args.pager.total_pages;return Array.from({length:e},(e,t)=>1+t)}updateMenuDisplay(){this.displayMenu=!this.displayMenu}handleSortByChange(e){this.args.changeSearchOptions({sortBy:e.target.value})}handleSortOrderChange(e){this.args.changeSearchOptions({sortOrder:e.target.value})}handleCurrentPageChange(e){this.args.changeSearchOptions({currentPage:Number(e.target.value)})}handleItemsPerPageChange(e){this.args.changeSearchOptions({itemsPerPage:Number(e.target.value)})}}).prototype,"displayMenu",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ja(Ia.prototype,"updateMenuDisplay",[ea],Object.getOwnPropertyDescriptor(Ia.prototype,"updateMenuDisplay"),Ia.prototype),ja(Ia.prototype,"handleSortByChange",[ea],Object.getOwnPropertyDescriptor(Ia.prototype,"handleSortByChange"),Ia.prototype),ja(Ia.prototype,"handleSortOrderChange",[ea],Object.getOwnPropertyDescriptor(Ia.prototype,"handleSortOrderChange"),Ia.prototype),ja(Ia.prototype,"handleCurrentPageChange",[ea],Object.getOwnPropertyDescriptor(Ia.prototype,"handleCurrentPageChange"),Ia.prototype),ja(Ia.prototype,"handleItemsPerPageChange",[ea],Object.getOwnPropertyDescriptor(Ia.prototype,"handleItemsPerPageChange"),Ia.prototype),Ia));var Ua,Fa;n(0);function Va(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let $a=Pi({id:"s/xkV0wz",block:'{"symbols":["@placeholder","@applySearchTerms"],"statements":[[1,1,0,0,"\\n    "],[9,"div",false],[23,"class","flex flex-col",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["keyup",[27,[24,0],["submitOnEnter"]]],null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-row",null],[10],[1,1,0,0,"\\n        "],[9,"input",false],[23,"aria-label","Search",null],[23,"value","",null],[23,"size","30",null],[23,"maxlength","128",null],[23,"class","form-text h-10 border-gray-500 bg-gray-100 border-2 px-2",null],[14,"placeholder",[27,[24,1],[]],null],[14,"value",[27,[24,0],["searchTerms"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["keyup",[27,[24,0],["updateSearchTerms"]]],null],[10],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","inline-flex items-center px-3 py-2 h-10 border border-transparent text-sm leading-4 font-medium text-white bg-blue-heritage hover:bg-blue-800",null],[23,"aria-label","submit search",null],[23,"type","button",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,721,2,[27,[26,1,"CallHead"],[]],[[27,[24,2],[]],[27,[24,0],["searchTerms"]]],null]],null],[10],[1,1,0,0,"\\n          "],[9,"svg",true],[12,"class","h-5 w-5 text-white",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","fn"]}',meta:{scope:()=>({on:Xl,fn:Pa})}},(Fa=Va((Ua=class extends Ml{constructor(e,t){super(...arguments),function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}(this,"searchTerms",Fa,this),this.searchTerms=t.searchTerms}updateSearchTerms(e){this.searchTerms=e.target.value}submitOnEnter(e){13===e.which&&this.args.applySearchTerms(this.searchTerms)}}).prototype,"searchTerms",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Va(Ua.prototype,"updateSearchTerms",[ea],Object.getOwnPropertyDescriptor(Ua.prototype,"updateSearchTerms"),Ua.prototype),Va(Ua.prototype,"submitOnEnter",[ea],Object.getOwnPropertyDescriptor(Ua.prototype,"submitOnEnter"),Ua.prototype),Ua));class Wa extends Ml{}var Ga,Ja,Ya,Ka,qa,Xa,Qa,Za,eo,to;function no(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ro(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Pi({id:"NYWpK0zP",block:'{"symbols":["@title","@searchInputPlaceholder","@applySearchTerms","@searchTerms","@pager","@goToPage","@prevPage","@nextPage","@paginationItemLabel"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex flex-col lg:flex-row bg-white px-4 py-5 border-b border-gray-200 sm:px-6 justify-between items-center",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-col 2xl:flex-row items-center lg:mr-6 mb-4 lg:mb-0 w-full justify-between",null],[10],[1,1,0,0,"\\n        "],[9,"h2",true],[12,"class","text-xl font-bold leading-6 mb-2 2xl:mb-0 mr-4",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,1],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[7,"SearchInput",[],[["@placeholder","@applySearchTerms","@searchTerms"],[[27,[24,2],[]],[27,[24,3],[]],[27,[24,4],[]]]],null],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-col 2xl:flex-row items-center flex-shrink-0 items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-2 2xl:mb-0",null],[10],[1,1,0,0,"\\n          "],[7,"PaginationControls",[],[["@compact","@pager","@goToPage","@prevPage","@nextPage","@itemLabel"],[true,[27,[24,5],[]],[27,[24,6],[]],[27,[24,7],[]],[27,[24,8],[]],[27,[24,9],[]]]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({PaginationControls:La,SearchInput:$a})}},Wa);let so=Pi({id:"46y5sz5t",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","grid md:gap-4 grid-cols-1 md:grid-cols-4 container mx-auto",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","col-span-1",null],[10],[1,1,0,0,"\\n        "],[7,"SearchOptions",[],[["@pager","@sortBy","@sortOrder","@itemsPerPage","@changeSearchOptions","@resetOptions"],[[27,[24,0],["results","pager"]],[27,[24,0],["results","sortBy"]],[27,[24,0],["results","sortOrder"]],[27,[24,0],["results","itemsPerPage"]],[27,[24,0],["changeSearchOptions"]],[27,[24,0],["resetOptions"]]]],null],[1,1,0,0,"\\n        "],[7,"FacetList",[],[["@facets","@hasFacets","@facetSelected","@selectedFacets","@resetFacets"],[[27,[24,0],["facets"]],[27,[24,0],["hasFacets"]],[27,[24,0],["facetSelected"]],[27,[24,0],["results","selectedFacets"]],[27,[24,0],["resetFacets"]]]],null],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","col-span-3",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","bg-white shadow mb-4",null],[10],[1,1,0,0,"\\n          "],[7,"TitleBar",[],[["@title","@pager","@goToPage","@prevPage","@nextPage","@searchTerms","@applySearchTerms","@searchInputPlaceholder","@paginationItemLabel"],[[27,[24,0],["title"]],[27,[24,0],["results","pager"]],[27,[24,0],["goToPage"]],[27,[24,0],["prevPage"]],[27,[24,0],["nextPage"]],[27,[24,0],["results","searchTerms"]],[27,[24,0],["applySearchTerms"]],[27,[24,0],["searchInputPlaceholder"]],[27,[24,0],["paginationItemLabel"]]]],null],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["isLoading"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[7,"ListSpinner",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[7,"List",[],[["@list"],[[27,[24,0],["list"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex bg-white shadow p-4 items-center justify-center",null],[10],[1,1,0,0,"\\n          "],[7,"PaginationControls",[],[["@compact","@pager","@goToPage","@prevPage","@nextPage","@itemLabel"],[true,[27,[24,0],["results","pager"]],[27,[24,0],["goToPage"]],[27,[24,0],["prevPage"]],[27,[24,0],["nextPage"]],[27,[24,0],["paginationItemLabel"]]]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({FacetList:pa,List:Ea,ListSpinner:Ca,PaginationControls:La,SearchOptions:Ha,TitleBar:Wa})}},(Ja=ro((Ga=class extends Ml{constructor(e,t){super(...arguments),no(this,"results",Ja,this),no(this,"isLoading",Ya,this),no(this,"list",Ka,this),no(this,"facets",qa,this),no(this,"hasFacets",Xa,this),no(this,"title",Qa,this),no(this,"collectionId",Za,this),no(this,"searchInputPlaceholder",eo,this),no(this,"paginationItemLabel",to,this);const n=document.getElementById("idc-search");this.collectionId=n.dataset.collectionId,this.title=n.dataset.title,this.searchInputPlaceholder=n.dataset.searchPlaceholder,this.paginationItemLabel=n.dataset.paginationLabel,this.results.initFromUrl(document.location.href),this.doSearch()}async doSearch(){this.isLoading=!0,await this.results.fetchData(this.collectionId),this.list=this.results.rows,this.isLoading=!1,this.facets=this.results.facets,this.hasFacets=this.results.facets.length>0}goToPage(e){this.results.pager.current_page=e,this.doSearch()}prevPage(){this.results.pager.current_page=--this.results.pager.current_page,this.doSearch()}nextPage(){this.results.pager.current_page=++this.results.pager.current_page,this.doSearch()}changeSearchOptions(e){Object.entries(e).map(([e,t],n)=>{"currentPage"===e?this.results.pager.current_page=1===Number(t)?0:Number(t):this.results[e]=t}),this.doSearch()}applySearchTerms(e){this.results.searchTerms=e,this.doSearch()}facetSelected(e){var t;t=e,this.results.selectedFacets.find(e=>zl(e,t))?this.results.selectedFacets=function(e,t){return t.filter(t=>!zl(t,e))}(e,this.results.selectedFacets):this.results.selectedFacets.push(e),this.doSearch()}resetOptions(){this.changeSearchOptions({sortBy:null,sortOrder:null,itemsPerPage:0,currentPage:0})}resetFacets(){this.results.selectedFacets=[],this.doSearch()}}).prototype,"results",[function(e,t){return"string"==typeof e?ta(e):ta(t)(e,t)}],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ya=ro(Ga.prototype,"isLoading",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ka=ro(Ga.prototype,"list",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qa=ro(Ga.prototype,"facets",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xa=ro(Ga.prototype,"hasFacets",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qa=ro(Ga.prototype,"title",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Za=ro(Ga.prototype,"collectionId",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),eo=ro(Ga.prototype,"searchInputPlaceholder",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),to=ro(Ga.prototype,"paginationItemLabel",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ro(Ga.prototype,"goToPage",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"goToPage"),Ga.prototype),ro(Ga.prototype,"prevPage",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"prevPage"),Ga.prototype),ro(Ga.prototype,"nextPage",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"nextPage"),Ga.prototype),ro(Ga.prototype,"changeSearchOptions",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"changeSearchOptions"),Ga.prototype),ro(Ga.prototype,"applySearchTerms",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"applySearchTerms"),Ga.prototype),ro(Ga.prototype,"facetSelected",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"facetSelected"),Ga.prototype),ro(Ga.prototype,"resetOptions",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"resetOptions"),Ga.prototype),ro(Ga.prototype,"resetFacets",[ea],Object.getOwnPropertyDescriptor(Ga.prototype,"resetFacets"),Ga.prototype),Ga));var io,lo,ao,oo,uo,co;function ho(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function po(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let mo=Pi({id:"gtcwRDhw",block:'{"symbols":["aid","number","title","description"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex flex-col place-content-center",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex items-center mx-auto",null],[10],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","flex items-center place-content-center hover:bg-gray-200 focus:bg-gray-200 p-4 z-50 mb-2",null],[3,0,0,[27,[26,3,"ModifierHead"],[]],["click",[27,[24,0],["toggleDrawer"]]],null],[10],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["drawerIsOpen"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-blue-heritage",null],[10],[1,1,0,0,"\\n              Hide Full Collection Record\\n            "],[11],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","{2}",null],[12,"d","M5 15l7-7 7 7",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-blue-heritage",null],[10],[1,1,0,0,"\\n            Show Full Collection Record\\n            "],[11],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M19 9l-7 7-7-7",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"id","drawer-content",null],[12,"class","flex flex-col place-content-center relative overflow-hidden transition-all ease-in-out duration-700 max-h-0",null],[10],[1,1,0,0,"\\n        "],[9,"hr",true],[12,"class","mt-4 mb-6 w-3/4 self-center",null],[10],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Translated Descriptions"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["descriptions","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["descriptions"]]],null,[["default"],[{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,1530,2,[27,[26,1,"CallHead"],[]],[[27,[24,4],[]],"language","English"],null]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"div",true],[12,"class","flex mb-2 text-gray-500",null],[10],[1,1,0,0,"\\n                  "],[1,0,0,0,[27,[24,4],["value"]]],[1,1,0,0," ("],[1,0,0,0,[27,[24,4],["language"]]],[1,1,0,0,")\\n                "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]]],"parameters":[4]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No translated descriptions available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Alternative Titles"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["alternativeTitles","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["alternativeTitles"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,3],["value"]]],[1,1,0,0," ("],[1,0,0,0,[27,[24,3],["language"]]],[1,1,0,0,")\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[3]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No alternative titles available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex flex-col mr-8",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Collection Contact Name"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_contact_name"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,0],["collectionAttrs","field_collection_contact_name"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n                No collection contact name available\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex flex-col",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Collection Contact Email"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_contact_email"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,0],["collectionAttrs","field_collection_contact_email"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n                No collection contact email available\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Collection Numbers"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_number","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_number"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,2],[]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No collection numbers available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Citable URL"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_citable_url","uri"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n              "],[9,"a",true],[12,"target","_blank",null],[13,"href",[27,[24,0],["collectionAttrs","field_citable_url","uri"]],null],[10],[1,0,0,0,[27,[24,0],["collectionAttrs","field_citable_url","uri"]]],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No citable URL available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Finding Aids"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_finding_aid","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_finding_aid"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n                "],[9,"a",true],[12,"target","_blank",null],[13,"href",[27,[24,1],["uri"]],null],[10],[1,0,0,0,[27,[24,1],["title"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No finding aids available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["each","is","unless","on","if"]}',meta:{scope:()=>({on:Xl,is:Ta})}},(lo=po((io=class extends Ml{constructor(e,t){super(...arguments),ho(this,"drawerIsOpen",lo,this),ho(this,"collectionUuid",ao,this),ho(this,"descriptions",oo,this),ho(this,"alternativeTitles",uo,this),ho(this,"collectionAttrs",co,this);const n=document.getElementById("about-collection-drawer");this.collectionUuid=n.dataset.collectionUuid,this.fetchCollectionData()}async fetchCollectionData(){const e=await fetch(`/jsonapi/node/collection_object/${this.collectionUuid}?include=field_description,field_alternative_title`),t=await e.json();this.descriptions=await this.processDescriptions(t),this.alternativeTitles=await this.processAlternativeTitles(t),this.collectionAttrs=t.data.attributes}async processDescriptions(e){return e.data.relationships.field_description.data.map(t=>{const n=e.included.find(e=>e.id===t.id);return{value:t.meta.value,language:n.attributes.name}})}async processAlternativeTitles(e){return e.data.relationships.field_alternative_title.data.map(t=>{const n=e.included.find(e=>e.id===t.id);return{value:t.meta.value,language:n.attributes.name}})}toggleDrawer(){if(this.drawerIsOpen){this.drawerIsOpen=!this.drawerIsOpen;document.getElementById("drawer-content").style["max-height"]="0"}else{this.drawerIsOpen=!this.drawerIsOpen;const e=document.getElementById("drawer-content");e.style["max-height"]=e.scrollHeight+1e3+"px"}}}).prototype,"drawerIsOpen",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ao=po(io.prototype,"collectionUuid",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oo=po(io.prototype,"descriptions",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{value:"",language:""}]}}),uo=po(io.prototype,"alternativeTitles",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{value:"",language:""}]}}),co=po(io.prototype,"collectionAttrs",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),po(io.prototype,"toggleDrawer",[ea],Object.getOwnPropertyDescriptor(io.prototype,"toggleDrawer"),io.prototype),io));var fo,go,bo;function yo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function vo(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let wo=Pi({id:"Vg9IsPqr",block:'{"symbols":["&attrs","&default"],"statements":[[1,1,0,0,"\\n    "],[9,"button",false],[14,"class",[32,["flex items-center place-content-center p-4 bg-blue-spirit hover:bg-gray-200 hover:shadow-xl text-black w-full ",[31,138,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["effect"]],"animate-wiggle"],null]]],null],[15,1],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["animate"]]],null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["animationend",[27,[24,0],["reset"]]],null],[10],[1,1,0,0,"\\n      "],[16,2,null],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:Xl})}},(go=vo((fo=class extends Ml{constructor(...e){super(...e),yo(this,"effect",go,this),yo(this,"clicked",bo,this)}animate(){this.effect=!0,this.clicked=!0}reset(){this.effect=!1}}).prototype,"effect",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bo=vo(fo.prototype,"clicked",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vo(fo.prototype,"animate",[ea],Object.getOwnPropertyDescriptor(fo.prototype,"animate"),fo.prototype),vo(fo.prototype,"reset",[ea],Object.getOwnPropertyDescriptor(fo.prototype,"reset"),fo.prototype),fo));var ko,xo,So,Eo;function Co(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Oo(e,t,n,r,s){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let _o=Pi({id:"WWqoFHeu",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["hasContact"]]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"class","flex items-center place-content-center p-4 bg-blue-spirit hover:bg-gray-200 hover:shadow-xl text-black mb-4 w-full",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["toggleContactModal"]]],null],[10],[1,1,0,0,"\\n        Ask the collection admin\\n        "],[9,"svg",true],[12,"class","h-5 w-5 ml-1",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[7,"AnimatedButton",[[23,"id","copy-url-button",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["copyCitableUrl"]]],null]],[[],[]],[["default"],[{"statements":[[1,1,0,0,"\\n      Copy the citable url\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["copied"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[9,"svg",true],[12,"class","h-5 w-5 ml-1",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"        "],[9,"svg",true],[12,"class","h-5 w-5 ml-1",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "]],"parameters":[]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","if"]}',meta:{scope:()=>({on:Xl,AnimatedButton:wo})}},(xo=Oo((ko=class extends Ml{constructor(e,t){super(...arguments),Co(this,"copied",xo,this),Co(this,"citableUrl",So,this),Co(this,"hasContact",Eo,this);let n=document.getElementById("about-collection-button-group");this.citableUrl=n.dataset.collectionUrl,this.hasContact=!!n.dataset.contactEmail}copyCitableUrl(){this.copied=!0,navigator.clipboard.writeText(this.citableUrl)}toggleContactModal(){const e=document.getElementById("idc-modal-container");e?e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden"):console.error("Contact modal not found on page.")}}).prototype,"copied",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),So=Oo(ko.prototype,"citableUrl",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Eo=Oo(ko.prototype,"hasContact",[Pl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oo(ko.prototype,"copyCitableUrl",[ea],Object.getOwnPropertyDescriptor(ko.prototype,"copyCitableUrl"),ko.prototype),Oo(ko.prototype,"toggleContactModal",[ea],Object.getOwnPropertyDescriptor(ko.prototype,"toggleContactModal"),ko.prototype),ko));const Mo=document.getElementById("idc-search"),Po=document.getElementById("about-collection-drawer"),Ao=document.getElementById("about-collection-button-group");if(Mo){const e=Mo.dataset.type;e&&Sl(so,{element:Mo,services:{results:new ql(Kl[e.toUpperCase()])}})}Po&&Ao&&(Sl(mo,Po),Sl(_o,Ao))}]);