!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=1)}([function(e,t){},function(e,t,r){"use strict";r.r(t);const n=Symbol("Services");class s{constructor(e){this[n]=e}lookup({type:e,name:t}){return this[n][t]}}const i="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`;let l=1;const a=i("TAG_COMPUTE");function o(e){return l}function u(e,t){return t>=e[a]()}const c=i("TAG_TYPE");class h{constructor(e){this.revision=1,this.lastChecked=1,this.lastValue=1,this.isUpdating=!1,this.subtags=null,this.subtag=null,this.subtagBufferCache=null,this[c]=e}[a](){let{lastChecked:e}=this;if(!0===this.isUpdating)this.lastChecked=++l;else if(e!==l){this.isUpdating=!0,this.lastChecked=l;try{let{subtags:e,subtag:t,subtagBufferCache:r,lastValue:n,revision:s}=this;if(null!==t){let e=t[a]();e===r?s=Math.max(s,n):(this.subtagBufferCache=null,s=Math.max(s,e))}if(null!==e)for(let t=0;t<e.length;t++){let r=e[t][a]();s=Math.max(r,s)}this.lastValue=s}finally{this.isUpdating=!1}}return this.lastValue}static updateTag(e,t){let r=e,n=t;n===g?r.subtag=null:(r.subtagBufferCache=n[a](),r.subtag=n)}static dirtyTag(e){e.revision=++l}}const p=h.dirtyTag,d=h.updateTag;function m(){return new h(0)}function f(){return new h(1)}const g=new h(3);function b({tag:e}){return e===g}function y(e){return e===g}new class{[a](){return 9007199254740991}};new class{[a](){return l}};function v(e){let t=[];for(let r=0,n=e.length;r<n;r++){let n=e[r];n!==g&&t.push(n)}return w(t)}function w(e){switch(e.length){case 0:return g;case 1:return e[0];default:let t=new h(2);return t.subtags=e,t}}let k=function(){};function x(e){return"object"==typeof e&&null!==e||"function"==typeof e}const S=new WeakMap;function E(e,t){if(x(e)){let r=S.get(e);if(void 0===r)r=new Map,S.set(e,r);else if(r.has(t))return r.get(t);let n=f();return r.set(t,n),n}return g}class O{constructor(){this.tags=new Set,this.last=null}add(e){this.tags.add(e),this.last=e}combine(){let{tags:e}=this;if(0===e.size)return g;if(1===e.size)return this.last;{let t=[];return e.forEach(e=>t.push(e)),v(t)}}}let C=null;const T=[];function P(){T.push(C),C=new O}function _(){let e=C;return C=T.pop(),e.combine()}new WeakMap;function M(e,t){let r;P();try{e()}finally{r=_()}return r}function A(e){null!==C&&C.add(e)}function I(e){T.push(C),C=null;try{e()}finally{C=T.pop()}}const N=m();function B(e,t){let r=new WeakMap,n="function"==typeof t;return{getter:function(s){let i;return A(E(s,e)),n&&!r.has(s)?(i=t.call(s),r.set(s,i)):i=r.get(s),i},setter:function(t,n){p(N),function(e,t){if(!x(e))throw new Error("BUG: Can't update a tag for a primitive");{let r=S.get(e);if(void 0===r)return;let n=r.get(t);void 0!==n&&(p(n),k())}}(t,e),r.set(t,n)}}}const z=Object.freeze([]);var L=function(e,t){if(!e)throw new Error(t||"assertion failure")};let j=0;function R(e){return e._guid=++j}function D(){return Object.create(null)}function H(e){return"object"==typeof e&&null!==e}class F{constructor(){this.stack=[],this.current=null}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop(),t=this.stack.length;return this.current=0===t?null:this.stack[t-1],void 0===e?null:e}nth(e){let t=this.stack.length;return t<e?null:this.stack[t-e]}isEmpty(){return 0===this.stack.length}toArray(){return this.stack}}function U(e="unreachable"){return new Error(e)}function V(e){throw new Error("Exhausted "+e)}const $="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`,W=$("DESTROY");function G(e){let t=e.firstChild;for(;t;){let r=t.nextSibling;e.removeChild(t),t=r}}const J=new WeakMap,q=$("WILL_DROP"),K=$("DID_DROP"),Y=$("CHILDREN"),X=new WeakMap;function Q(e){return null!==e&&"object"==typeof e&&void 0!==e[K]}function Z(e,t){ee(e,ne(t))}function ee(e,t){let r=J.get(e);r||(r=new Set,J.set(e,r)),r.add(t)}function te(e){let t=J.get(e);t&&t.forEach(e=>{e[q]()})}function re(e){let t=J.get(e);t&&t.forEach(e=>{e[K](),t.delete(e)})}function ne(e){let t=X.get(e);return t||(t=function(e){return!(!e||void 0===e[W])}(e)?new le(e):function(e){return!(!e||"object"!=typeof e||"function"!=typeof e.destroy)}(e)?new ae(e):new oe(e),X.set(e,t)),t}function se(e){return new ie(e)}class ie{constructor(e){this.destructors=e}[q](){this.destructors.forEach(e=>e[q]())}[K](){this.destructors.forEach(e=>e[K]())}get[Y](){return this.destructors}toString(){return"SnapshotDestructor"}}class le{constructor(e){this.inner=e}[q](){te(this.inner)}[K](){this.inner[W](),re(this.inner)}get[Y](){return J.get(this.inner)||[]}toString(){return"DestroyableDestructor"}}class ae{constructor(e){this.inner=e}[q](){"function"==typeof this.inner.willDestroy&&this.inner.willDestroy(),te(this.inner)}[K](){this.inner.destroy(),re(this.inner)}get[Y](){return J.get(this.inner)||[]}toString(){return"StringDestroyableDestructor"}}class oe{constructor(e){this.inner=e}[q](){te(this.inner)}[K](){re(this.inner)}get[Y](){return J.get(this.inner)||[]}toString(){return"SimpleDestructor"}}class ue{constructor(){this.clear()}head(){return this._head}tail(){return this._tail}clear(){this._head=this._tail=null}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e.next}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=t.next}insertBefore(e,t=null){return null===t?this.append(e):(t.prev?t.prev.next=e:this._head=e,e.prev=t.prev,e.next=t,t.prev=e,e)}append(e){let t=this._tail;return t?(t.next=e,e.prev=t,e.next=null):this._head=e,this._tail=e}remove(e){return e.prev?e.prev.next=e.next:this._head=e.next,e.next?e.next.prev=e.prev:this._tail=e.prev,e}[q](){this.forEachNode(e=>ne(e)[q]())}[K](){this.forEachNode(e=>ne(e)[K]())}get[Y](){let e=[];return this.forEachNode(t=>e.push(...ne(t)[Y])),e}}class ce{constructor(e,t){this._head=e,this._tail=t}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=this.nextNode(t)}head(){return this._head}tail(){return this._tail}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e===this._tail?null:e.next}}new ce(null,null);const{keys:he}=Object;function pe(e){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(null===r||"object"!=typeof r)continue;let n=he(r);for(let t=0;t<n.length;t++){let s=n[t];e[s]=r[s]}}return e}function de(e){return"number"==typeof e?e<0?1073741827-e:e:!1===e?1073741824:!0===e?1073741825:null===e?1073741826:void 0===e?1073741827:V(e)}function me(e){return function(e,t,r){return e%1==0&&e>=t&&e<=r}(e,-1073741820,1073741823)}function fe(e){return e<0}function ge(e,t=2147483647,r=-1){if(e>t)throw new Error(`index ${e} overflowed range 0 to ${t}`);return r-e}function be(e,t=-1){return t-e}function ye(e){if("number"==typeof e)return e;{let t=e.errors[0];throw new Error(`Compile Error: ${t.problem} @ ${t.span.start}..${t.span.end}`)}}function ve(e){if("error"===e.result)throw new Error(`Compile Error: ${e.problem} @ ${e.span.start}..${e.span.end}`);return e}function we(e,t="unexpected unreachable branch"){console.log("unreachable",e),console.trace(`${t} :: ${JSON.stringify(e)} (${e})`)}function ke(e){return e<=3}var xe,Se;!function(e){e[e.s0=4]="s0",e[e.s1=5]="s1"}(xe||(xe={})),function(e){e[e.t0=6]="t0",e[e.t1=7]="t1"}(Se||(Se={}));const Ee=$("INNER_VM"),Oe=$("DESTRUCTOR_STACK"),Ce=$("STACKS"),Te=$("REGISTERS"),Pe=$("HEAP"),_e=$("CONSTANTS"),Me=$("ARGS");$("PC");class Ae{constructor(e,t){this.element=e,this.nextSibling=t}}class Ie{constructor(e,t,r){this.parentNode=e,this.first=t,this.last=r}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}class Ne{constructor(e,t){this.parentNode=e,this.node=t}parentElement(){return this.parentNode}firstNode(){return this.node}lastNode(){return this.node}}function Be(e,t){let r=e.parentElement(),n=e.firstNode(),s=e.lastNode(),i=n;for(;;){let e=i.nextSibling;if(r.insertBefore(i,t),i===s)return e;i=e}}function ze(e){let t=e.parentElement(),r=e.firstNode(),n=e.lastNode(),s=r;for(;;){let e=s.nextSibling;if(t.removeChild(s),s===n)return e;s=e}}function Le(e,t){let r=function(e){return J.get(e)||null}(e);null!==r&&t.willDestroy(se(r))}function je(e,t){let r=function(e){let t=J.get(e);return t&&t.size>0?(J.delete(e),t):null}(e);null!==r&&t.didDestroy(se(r))}function Re(e,t){t.willDestroy(ne(e))}function De(e,t){t.didDestroy(ne(e))}var He;class Fe{constructor(e){this.node=e}firstNode(){return this.node}}class Ue{constructor(e){this.node=e}lastNode(){return this.node}}const Ve=$("CURSOR_STACK");class $e{constructor(e,t,r){this.constructing=null,this.operations=null,this[He]=new F,this.modifierStack=new F,this.blockStack=new F,this.pushElement(t,r),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}static forInitialRender(e,t){return new this(e,t.element,t.nextSibling).initialize()}static resume(e,t){let r=new this(e,t.parentElement(),t.reset(e)).initialize();return r.pushLiveBlock(t),r}initialize(){return this.pushSimpleBlock(),this}debugBlocks(){return this.blockStack.toArray()}get element(){return this[Ve].current.element}get nextSibling(){return this[Ve].current.nextSibling}get hasBlocks(){return this.blockStack.size>0}block(){return this.blockStack.current}popElement(){this[Ve].pop(),this[Ve].current}pushSimpleBlock(){return this.pushLiveBlock(new We(this.element))}pushUpdatableBlock(){return this.pushLiveBlock(new Je(this.element))}pushBlockList(e){return this.pushLiveBlock(new qe(this.element,e))}pushLiveBlock(e,t=!1){let r=this.blockStack.current;return null!==r&&(t||r.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(e){let t=this.element,r=this.constructing;this.__flushElement(t,r),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(r,null),this.didOpenElement(r)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){return this.willCloseElement(),this.popElement(),this.popModifiers()}pushRemoteElement(e,t,r){return this.__pushRemoteElement(e,t,r)}__pushRemoteElement(e,t,r){if(this.pushElement(e,r),void 0===r)for(;e.lastChild;)e.removeChild(e.lastChild);let n=new Ge(e);return this.pushLiveBlock(n,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t=null){this[Ve].push(new Ae(e,t))}pushModifiers(e){this.modifierStack.push(e)}popModifiers(){return this.modifierStack.pop()}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let{dom:t,element:r,nextSibling:n}=this,s=t.createTextNode(e);return t.insertBefore(r,s,n),s}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let r=new Ie(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),r}return new Ne(this.element,this.__appendComment(""))}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendDynamicHTML(e){let t=this.trustedContent(e);this.didAppendBounds(t)}appendDynamicText(e){let t=this.untrustedContent(e);return this.didAppendNode(t),t}appendDynamicFragment(e){let t=this.__appendFragment(e);this.didAppendBounds(t)}appendDynamicNode(e){let t=this.__appendNode(e),r=new Ne(this.element,t);this.didAppendBounds(r)}trustedContent(e){return this.__appendHTML(e)}untrustedContent(e){return this.__appendText(e)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let{dom:t,element:r,nextSibling:n}=this,s=t.createComment(e);return t.insertBefore(r,s,n),s}__setAttribute(e,t,r){this.dom.setAttribute(this.constructing,e,t,r)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,r){this.__setAttribute(e,t,r)}setDynamicAttribute(e,t,r,n){let s=this.constructing,i=this.env.attributeFor(s,e,r,n);return i.set(this,t,this.env),i}}He=Ve;class We{constructor(e){this.parent=e,this.first=null,this.last=null,this.destroyables=null,this.nesting=0}parentElement(){return this.parent}firstNode(){return this.first.firstNode()}lastNode(){return this.last.lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0===this.nesting&&(this.first||(this.first=new Fe(e)),this.last=new Ue(e))}didAppendBounds(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)}finalize(e){null===this.first&&e.appendComment("")}}class Ge extends We{[W](){this.parentElement()===this.firstNode().parentNode&&ze(this)}}class Je extends We{reset(e){let t=function(e,t){return Le(e,t),je(e,t),ze(e)}(this,e);return this.first=null,this.last=null,this.destroyables=null,this.nesting=0,t}}class qe{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}parentElement(){return this.parent}firstNode(){return this.boundList.head().firstNode()}lastNode(){return this.boundList.tail().lastNode()}openElement(e){}closeElement(){}didAppendNode(e){}didAppendBounds(e){}finalize(e){}}class Ke{constructor(e){this.lastValue=null,this.lastRevision=null,this.initialized=!1,this.tag=e.tag,this.reference=e}peek(){return this.initialized?this.lastValue:this.initialize()}revalidate(){if(!this.initialized)return this.initialize();let{reference:e,lastRevision:t}=this,r=e.tag;if(u(r,t))return Ye;let{lastValue:n}=this,s=e.value();return this.lastRevision=o(),s===n?Ye:(this.lastValue=s,s)}initialize(){let{reference:e}=this,t=this.lastValue=e.value();return this.lastRevision=o(e.tag),this.initialized=!0,t}}const Ye=$("NOT_MODIFIED");const Xe=new class{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Xe}}(void 0);class Qe{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Xe}}class Ze extends class{constructor(e){this.next=null,this.prev=null,this.value=e}}{constructor(e,t){super(e.valueReferenceFor(t)),this.retained=!1,this.seen=!1,this.key=t.key,this.iterable=e,this.memo=e.memoReferenceFor(t)}update(e){this.retained=!0,this.iterable.updateValueReference(this.value,e),this.iterable.updateMemoReference(this.memo,e)}shouldRemove(){return!this.retained}reset(){this.retained=!1,this.seen=!1}}class et{constructor(e){this.iterator=null,this.map=new Map,this.list=new ue,this.tag=e.tag,this.iterable=e}isEmpty(){return(this.iterator=this.iterable.iterate()).isEmpty()}iterate(){let e;return e=null===this.iterator?this.iterable.iterate():this.iterator,this.iterator=null,e}advanceToKey(e,t){let r=t;for(;null!==r&&r.key!==e;)r=this.advanceNode(r);return r}has(e){return this.map.has(e)}get(e){return this.map.get(e)}wasSeen(e){let t=this.map.get(e);return void 0!==t&&t.seen}update(e){let t=this.get(e.key);return t.update(e),t}append(e){let{map:t,list:r,iterable:n}=this,s=new Ze(n,e);return t.set(e.key,s),r.append(s),s}insertBefore(e,t){let{map:r,list:n,iterable:s}=this,i=new Ze(s,e);return r.set(e.key,i),i.retained=!0,n.insertBefore(i,t),i}move(e,t){let{list:r}=this;e.retained=!0,r.remove(e),r.insertBefore(e,t)}remove(e){let{list:t}=this;t.remove(e),this.map.delete(e.key)}nextNode(e){return this.list.nextNode(e)}advanceNode(e){return e.seen=!0,this.list.nextNode(e)}head(){return this.list.head()}}class tt{constructor(e){this.iterator=null;let t=new et(e);this.artifacts=t}next(){let{artifacts:e}=this,t=(this.iterator=this.iterator||e.iterate()).next();return null===t?null:e.append(t)}}var rt;!function(e){e[e.Append=0]="Append",e[e.Prune=1]="Prune",e[e.Done=2]="Done"}(rt||(rt={}));const nt=$("END");class st{constructor({target:e,artifacts:t,env:r}){this.target=e,this.artifacts=t,this.iterator=t.iterate(),this.current=t.head(),this.env=r}sync(){let e=rt.Append;for(;;)switch(e){case rt.Append:e=this.nextAppend();break;case rt.Prune:e=this.nextPrune();break;case rt.Done:return void this.nextDone()}}advanceToKey(e){let{current:t,artifacts:r}=this;if(null===t)return;let n=r.advanceNode(t);if(n.key===e)return void(this.current=r.advanceNode(n));let s=r.advanceToKey(e,t);s&&(this.move(s,t),this.current=r.nextNode(t))}move(e,t){e.next!==t&&(this.artifacts.move(e,t),this.target.move(this.env,e.key,e.value,e.memo,t?t.key:nt))}nextAppend(){let{iterator:e,current:t,artifacts:r}=this,n=e.next();if(null===n)return this.startPrune();let{key:s}=n;return null!==t&&t.key===s?this.nextRetain(n,t):r.has(s)?this.nextMove(n):this.nextInsert(n),rt.Append}nextRetain(e,t){let{artifacts:r}=this;t.update(e),this.current=r.nextNode(t),this.target.retain(this.env,e.key,t.value,t.memo)}nextMove(e){let{current:t,artifacts:r}=this,{key:n}=e,s=r.update(e);r.wasSeen(n)?this.move(s,t):this.advanceToKey(n)}nextInsert(e){let{artifacts:t,target:r,current:n}=this,s=t.insertBefore(e,n);r.insert(this.env,s.key,s.value,s.memo,n?n.key:null)}startPrune(){return this.current=this.artifacts.head(),rt.Prune}nextPrune(){let{artifacts:e,target:t,current:r}=this;if(null===r)return rt.Done;let n=r;return this.current=e.nextNode(n),n.shouldRemove()?(e.remove(n),t.delete(this.env,n.key)):n.reset(),rt.Prune}nextDone(){this.target.done(this.env)}}const it=$("UPDATE_REFERENCED_VALUE");class lt{constructor(e){this.env=e,this.children=D(),this.tag=g}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}class at extends lt{constructor(e,t){super(t),this.inner=e}value(){return this.inner}}class ot extends lt{constructor(e,t,r,n){super(r),this.fn=e,this.args=t,this.computeRevision=null,this.computeTag=null,b(t)&&this.compute();let{tag:s,computeTag:i}=this;if(null!==i&&y(i))s=this.tag=g,this.computeRevision=o();else{let e=this.valueTag=f();s=this.tag=v([t.tag,e]),null!==i&&(d(e,i),this.computeRevision=o())}}compute(){this.computeTag=M(()=>{this.computeValue=this.fn(this.args)})}value(){let{tag:e,computeRevision:t}=this;return null!==t&&u(e,t)||(this.compute(),d(this.valueTag,this.computeTag),this.computeRevision=o()),this.computeValue}}class ut{constructor(e,t,r){this.parentReference=e,this.propertyKey=t,this.env=r,this.children=D(),this.lastRevision=null;let n=this.valueTag=f(),s=e.tag;this.tag=v([s,n])}value(){let{tag:e,lastRevision:t,lastValue:r,parentReference:n,valueTag:s,propertyKey:i}=this;if(null===t||!u(e,t)){let e=n.value();if(null!=e){let t=M(()=>{r=this.env.getPath(e,i)});d(s,t)}else r=void 0;this.lastValue=r,this.lastRevision=o()}return r}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}[it](e){let{parentReference:t,propertyKey:r}=this,n=t.value();this.env.setPath(n,r,e)}}class ct{constructor(e,t,r,n){this.parentReference=e,this.itemValue=t,this.env=n,this.tag=f(),this.children=D()}value(){return this.itemValue}update(e){p(this.tag),this.itemValue=e}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}const ht={},pt=(e,t)=>t,dt=(e,t)=>String(t),mt=e=>null===e?ht:e;function ft(e,t){switch(e){case"@key":return yt(pt);case"@index":return yt(dt);case"@identity":return yt(mt);default:return function(e,t){return yt(r=>t(r,e))}(e,t)}}class gt{get weakMap(){return void 0===this._weakMap&&(this._weakMap=new WeakMap),this._weakMap}get primitiveMap(){return void 0===this._primitiveMap&&(this._primitiveMap=new Map),this._primitiveMap}set(e,t){H(e)||"function"==typeof e?this.weakMap.set(e,t):this.primitiveMap.set(e,t)}get(e){return H(e)||"function"==typeof e?this.weakMap.get(e):this.primitiveMap.get(e)}}const bt=new gt;function yt(e){let t=new gt;return(r,n)=>{let s=e(r,n),i=t.get(r)||0;return t.set(s,i+1),0===i?s:function(e,t){let r=bt.get(e);void 0===r&&(r=[],bt.set(e,r));let n=r[t];return void 0===n&&(n={value:e,count:t},r[t]=n),n}(s,i)}}class vt{constructor(e,t,r){this.parentRef=e,this.key=t,this.env=r,this.tag=e.tag}iterate(){let{parentRef:e,key:t,env:r}=this,n=e.value(),s=ft(t,r.getPath);if(Array.isArray(n))return new kt(n,s);let i=r.toIterator(n);return null===i?new kt(z,()=>null):new wt(i,s)}valueReferenceFor(e){let{parentRef:t,env:r}=this;return new ct(t,e.value,e.memo,r)}updateValueReference(e,t){e.update(t.value)}memoReferenceFor(e){let{parentRef:t,env:r}=this;return new ct(t,e.memo,"",r)}updateMemoReference(e,t){e.update(t.memo)}}class wt{constructor(e,t){this.inner=e,this.keyFor=t}isEmpty(){return this.inner.isEmpty()}next(){let e=this.inner.next();return null!==e&&(e.key=this.keyFor(e.value,e.memo)),e}}class kt{constructor(e,t){this.iterator=e,this.keyFor=t,this.pos=0,0===e.length?this.current={kind:"empty"}:this.current={kind:"first",value:e[this.pos]}}isEmpty(){return"empty"===this.current.kind}next(){let e,t=this.current;if("first"===t.kind)this.current={kind:"progress"},e=t.value;else{if(this.pos>=this.iterator.length-1)return null;e=this.iterator[++this.pos]}let{keyFor:r}=this;return{key:r(e,this.pos),value:e,memo:this.pos}}}const xt={foreignObject:1,desc:1,title:1},St=Object.create(null);class Et{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement("div")}createElement(e,t){let r,n;if(t?(r="http://www.w3.org/2000/svg"===t.namespaceURI||"svg"===e,n=!!xt[t.tagName]):(r="svg"===e,n=!1),r&&!n){if(St[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS("http://www.w3.org/2000/svg",e)}return this.document.createElement(e)}insertBefore(e,t,r){e.insertBefore(t,r)}insertHTMLBefore(e,t,r){if(""===r){let r=this.createComment("");return e.insertBefore(r,t),new Ie(e,r,r)}let n,s=t?t.previousSibling:e.lastChild;if(null===t)e.insertAdjacentHTML("beforeend",r),n=e.lastChild;else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",r),n=t.previousSibling;else{let{uselessElement:s}=this;e.insertBefore(s,t),s.insertAdjacentHTML("beforebegin",r),n=s.previousSibling,e.removeChild(s)}let i=s?s.nextSibling:e.firstChild;return new Ie(e,i,n)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}function Ot(e,t,r){if(!e)return t;if(!function(e,t){let r=e.createElementNS(t,"svg");try{r.insertAdjacentHTML("beforeend","<circle></circle>")}catch(e){}finally{return 1!==r.childNodes.length||"http://www.w3.org/2000/svg"!==r.firstChild.namespaceURI}}(e,r))return t;let n=e.createElement("div");return class extends t{insertHTMLBefore(e,t,s){return""===s||e.namespaceURI!==r?super.insertHTMLBefore(e,t,s):function(e,t,r,n){let s;if("FOREIGNOBJECT"===e.tagName.toUpperCase()){let e="<svg><foreignObject>"+r+"</foreignObject></svg>";G(t),t.insertAdjacentHTML("afterbegin",e),s=t.firstChild.firstChild}else{let e="<svg>"+r+"</svg>";G(t),t.insertAdjacentHTML("afterbegin",e),s=t.firstChild}return function(e,t,r){let n=e.firstChild,s=n,i=n;for(;i;){let e=i.nextSibling;t.insertBefore(i,r),s=i,i=e}return new Ie(t,n,s)}(s,e,n)}(e,n,s,t)}}}function Ct(e,t){return e&&function(e){let t=e.createElement("div");if(t.appendChild(e.createTextNode("first")),t.insertAdjacentHTML("beforeend","second"),2===t.childNodes.length)return!1;return!0}(e)?class extends t{constructor(e){super(e),this.uselessComment=e.createComment("")}insertHTMLBefore(e,t,r){if(""===r)return super.insertHTMLBefore(e,t,r);let n=!1,s=t?t.previousSibling:e.lastChild;s&&s instanceof Text&&(n=!0,e.insertBefore(this.uselessComment,t));let i=super.insertHTMLBefore(e,t,r);return n&&e.removeChild(this.uselessComment),i}}:t}["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach(e=>St[e]=1);let Tt="undefined"==typeof document?null:document;var Pt;!function(e){class t extends Et{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,r,n=null){n?e.setAttributeNS(n,t,r):e.setAttribute(t,r)}}e.TreeConstruction=t;let r=t;r=Ct(Tt,r),r=Ot(Tt,r,"http://www.w3.org/2000/svg"),e.DOMTreeConstruction=r}(Pt||(Pt={}));class _t extends Et{constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,r){e.setAttribute(t,r)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,r){this.insertBefore(e,t,r.nextSibling)}}let Mt=_t;Mt=Ct(Tt,Mt),Mt=Ot(Tt,Mt,"http://www.w3.org/2000/svg");const At=Pt.DOMTreeConstruction;class It extends Qe{static create(e){return void 0===e?zt:null===e?Lt:!0===e?jt:!1===e?Rt:"number"==typeof e?new Bt(e):new Nt(e)}constructor(e){super(e)}get(e){return zt}}class Nt extends It{constructor(){super(...arguments),this.lengthReference=null}get(e){if("length"===e){let{lengthReference:e}=this;return null===e&&(e=this.lengthReference=new Bt(this.inner.length)),e}return super.get(e)}}class Bt extends It{constructor(e){super(e)}}const zt=new Bt(void 0),Lt=new Bt(null),jt=new Bt(!0),Rt=new Bt(!1);class Dt{constructor(e,t=Ht){this.inner=e,this.toBool=t,this.tag=e.tag}value(){return this.toBool(this.inner.value())}}function Ht(e){return!!e}function Ft(e){return Ut(e)?"":String(e)}function Ut(e){return null==e||"function"!=typeof e.toString}function Vt(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function $t(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function Wt(e){return"string"==typeof e}function Gt(e,t){let r,n;if(t in e)n=t,r="prop";else{let s=t.toLowerCase();s in e?(r="prop",n=s):(r="attr",n=t)}return"prop"!==r||"style"!==n.toLowerCase()&&!function(e,t){let r=Jt[e.toUpperCase()];return r&&r[t.toLowerCase()]||!1}(e.tagName,n)||(r="attr"),{normalized:n,type:r}}const Jt={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},BUTTON:{form:!0}};const qt=["javascript:","vbscript:"],Kt=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],Yt=["EMBED"],Xt=["href","src","background","action"],Qt=["src"];function Zt(e,t){return-1!==e.indexOf(t)}function er(e,t){return(null===e||Zt(Kt,e))&&Zt(Xt,t)}function tr(e,t){return null!==e&&(Zt(Yt,e)&&Zt(Qt,t))}function rr(e,t){return er(e,t)||tr(e,t)}function nr(e,t,r,n){let s=null;if(null==n)return n;if(Vt(n))return n.toHTML();s=t?t.tagName.toUpperCase():null;let i=Ft(n);if(er(s,r)){let t=e.protocolForURL(i);if(Zt(qt,t))return"unsafe:"+i}return tr(s,r)?"unsafe:"+i:i}function sr(e,t,r){let{tagName:n,namespaceURI:s}=e,i={element:e,name:t,namespace:r};if("http://www.w3.org/2000/svg"===s)return ir(n,t,i);let{type:l,normalized:a}=Gt(e,t);return"attr"===l?ir(n,a,i):function(e,t,r){if(rr(e,t))return new ur(t,r);if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new hr(t,r);if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new pr(t,r);return new or(t,r)}(n,a,i)}function ir(e,t,r){return rr(e,t)?new cr(r):new ar(r)}class lr{constructor(e){this.attribute=e}}class ar extends lr{set(e,t,r){let n=dr(t);if(null!==n){let{name:t,namespace:r}=this.attribute;e.__setAttribute(t,n,r)}}update(e,t){let r=dr(e),{element:n,name:s}=this.attribute;null===r?n.removeAttribute(s):n.setAttribute(s,r)}}class or extends lr{constructor(e,t){super(t),this.normalizedName=e}set(e,t,r){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))}update(e,t){let{element:r}=this.attribute;this.value!==e&&(r[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())}removeAttribute(){let{element:e,namespace:t}=this.attribute;t?e.removeAttributeNS(t,this.normalizedName):e.removeAttribute(this.normalizedName)}}class ur extends or{set(e,t,r){let{element:n,name:s}=this.attribute,i=nr(r,n,s,t);super.set(e,i,r)}update(e,t){let{element:r,name:n}=this.attribute,s=nr(t,r,n,e);super.update(s,t)}}class cr extends ar{set(e,t,r){let{element:n,name:s}=this.attribute,i=nr(r,n,s,t);super.set(e,i,r)}update(e,t){let{element:r,name:n}=this.attribute,s=nr(t,r,n,e);super.update(s,t)}}class hr extends or{set(e,t){e.__setProperty("value",Ft(t))}update(e){let t=this.attribute.element,r=t.value,n=Ft(e);r!==n&&(t.value=n)}}class pr extends or{set(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)}update(e){let t=this.attribute.element;t.selected=!!e}}function dr(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}const mr={},fr=Object.freeze([]);class gr{constructor(){this.strings=[],this.arrays=[fr],this.tables=[],this.handles=[],this.resolved=[],this.numbers=[],this.others=[]}other(e){return this.others.push(e)-1}string(e){let t=this.strings.indexOf(e);return t>-1?t:this.strings.push(e)-1}stringArray(e){let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=this.string(e[r]);return this.array(t)}array(e){if(0===e.length)return 0;let t=this.arrays.indexOf(e);return t>-1?t:this.arrays.push(e)-1}serializable(e){let t=JSON.stringify(e),r=this.strings.indexOf(t);return r>-1?r:this.strings.push(t)-1}templateMeta(e){return this.serializable(e)}number(e){let t=this.numbers.indexOf(e);return t>-1?t:this.numbers.push(e)-1}toPool(){return{strings:this.strings,arrays:this.arrays,handles:this.handles,numbers:this.numbers}}}class br{constructor(e){this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.numbers=e.numbers,this.others=[]}getString(e){return this.strings[e]}getNumber(e){return this.numbers[e]}getStringArray(e){let t=this.getArray(e),r=new Array(t.length);for(let e=0;e<t.length;e++){let n=t[e];r[e]=this.getString(n)}return r}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.getSerializable(e)}getOther(e){return this.others[e]}}class yr extends gr{constructor(e){super(),this.metas=[],e&&(this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.resolved=this.handles.map(()=>mr),this.numbers=e.numbers),this.others=[]}templateMeta(e){let t=this.metas.indexOf(e);return t>-1?t:this.metas.push(e)-1}getNumber(e){return this.numbers[e]}getString(e){return this.strings[e]}getStringArray(e){let t=this.getArray(e),r=new Array(t.length);for(let e=0;e<t.length;e++){let n=t[e];r[e]=this.getString(n)}return r}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.metas[e]}getOther(e){return this.others[e]}}class vr{constructor(e){this.heap=e,this.offset=0}get size(){return 1+((768&this.heap.getbyaddr(this.offset))>>8)}get isMachine(){return 1024&this.heap.getbyaddr(this.offset)?1:0}get type(){return 255&this.heap.getbyaddr(this.offset)}get op1(){return this.heap.getbyaddr(this.offset+1)}get op2(){return this.heap.getbyaddr(this.offset+2)}get op3(){return this.heap.getbyaddr(this.offset+3)}}function wr(e,t){return t|e<<2}function kr(e,t){return e|t<<30}class xr{constructor(e){let{buffer:t,table:r}=e;this.heap=new Int32Array(t),this.table=r}getaddr(e){return this.table[e]}getbyaddr(e){return this.heap[e]}sizeof(e){return Cr(this.table,e)}scopesizeof(e){return Tr(this.table,e)}}class Sr{constructor(){this.placeholders=[],this.stdlibs=[],this.offset=0,this.handle=0,this.capacity=1048576,this.heap=new Int32Array(1048576),this.table=[]}push(e){this.sizeCheck(),this.heap[this.offset++]=e}sizeCheck(){if(0===this.capacity){let e=Or(this.heap,0,this.offset);this.heap=new Int32Array(e.length+1048576),this.heap.set(e,0),this.capacity=1048576}this.capacity--}getbyaddr(e){return this.heap[e]}setbyaddr(e,t){this.heap[e]=t}malloc(){this.table.push(this.offset,0,0);let e=this.handle;return this.handle+=3,e}finishMalloc(e,t){this.table[e+1]=wr(t,0)}size(){return this.offset}getaddr(e){return this.table[e]}gethandle(e){this.table.push(e,wr(0,3),0);let t=this.handle;return this.handle+=3,t}sizeof(e){return Cr(this.table,e)}scopesizeof(e){return Tr(this.table,e)}free(e){let t=this.table[e+1];this.table[e+1]=kr(t,1)}compact(){let e=0,{table:t,table:{length:r},heap:n}=this;for(let s=0;s<r;s+=3){let r=t[s],i=t[s+1],l=i&Size.SIZE_MASK,a=0&i;if(2!==a)if(1===a)t[s+1]=kr(i,2),e+=l;else if(0===a){for(let t=r;t<=s+l;t++)n[t-e]=n[t];t[s]=r-e}else 3===a&&(t[s]=r-e)}this.offset=this.offset-e}pushPlaceholder(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.placeholders.push([t,e])}pushStdlib(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.stdlibs.push([t,e])}patchPlaceholders(){let{placeholders:e}=this;for(let t=0;t<e.length;t++){let[r,n]=e[t];this.setbyaddr(r,n())}}patchStdlibs(e){let{stdlibs:t}=this;for(let r=0;r<t.length;r++){let[n,{value:s}]=t[r];this.setbyaddr(n,e[s])}this.stdlibs=[]}capture(e,t=this.offset){this.patchPlaceholders(),this.patchStdlibs(e);let r=Or(this.heap,0,t).buffer;return{handle:this.handle,table:this.table,buffer:r}}}class Er{constructor(e,t){this.constants=e,this.heap=t,this._opcode=new vr(this.heap)}static hydrate(e){let t=new xr(e.heap),r=new br(e.constants);return new Er(r,t)}opcode(e){return this._opcode.offset=e,this._opcode}}function Or(e,t,r){if(void 0!==e.slice)return e.slice(t,r);let n=new Int32Array(r);for(;t<r;t++)n[t]=e[t];return n}function Cr(e,t){return-1}function Tr(e,t){return e[t+1]>>2}function Pr(e){e.heap.patchStdlibs(e.stdlib)}var _r;class Mr{constructor(e,t,r,n){this.slots=e,this.callerScope=t,this.evalScope=r,this.partialMap=n}static root(e,t=0){let r=new Array(t+1);for(let e=0;e<=t;e++)r[e]=zt;return new Mr(r,null,null,null).init({self:e})}static sized(e=0){let t=new Array(e+1);for(let r=0;r<=e;r++)t[r]=zt;return new Mr(t,null,null,null)}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){let t=this.get(e);return t===zt?null:t}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new Mr(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}const Ar=$("TRANSACTION");class Ir{constructor(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[],this.destructors=[]}didCreate(e,t){this.createdComponents.push(e),this.createdManagers.push(t)}didUpdate(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)}scheduleInstallModifier(e,t){this.scheduledInstallModifiers.push(e),this.scheduledInstallManagers.push(t)}scheduleUpdateModifier(e,t){this.scheduledUpdateModifiers.push(e),this.scheduledUpdateModifierManagers.push(t)}willDestroy(e){e[q]()}didDestroy(e){this.destructors.push(e)}commit(){let{createdComponents:e,createdManagers:t}=this;for(let r=0;r<e.length;r++){let n=e[r];t[r].didCreate(n)}let{updatedComponents:r,updatedManagers:n}=this;for(let e=0;e<r.length;e++){let t=r[e];n[e].didUpdate(t)}let{destructors:s}=this;for(let e=0;e<s.length;e++)s[e][K]();let{scheduledInstallManagers:i,scheduledInstallModifiers:l}=this;for(let e=0;e<i.length;e++){let t=l[e];i[e].install(t)}let{scheduledUpdateModifierManagers:a,scheduledUpdateModifiers:o}=this;for(let e=0;e<a.length;e++){let t=o[e];a[e].update(t)}}}function Nr(e,t){let r=void 0!==e?e:t;return r}class Br{constructor(e,t){this.delegate=t,this[_r]=null,this.extra=this.delegate.extra,this.isInteractive="boolean"!=typeof this.delegate.isInteractive||this.delegate.isInteractive,this.protocolForURL=Nr(this.delegate.protocolForURL,zr),this.attributeFor=Nr(this.delegate.attributeFor,Lr),this.getPath=Nr(this.delegate.getPath,jr),this.setPath=Nr(this.delegate.setPath,Rr),this.toBool=Nr(this.delegate.toBool,Dr),this.toIterator=Nr(this.delegate.toIterator,Hr),e.appendOperations?(this.appendOperations=e.appendOperations,this.updateOperations=e.updateOperations):e.document&&(this.appendOperations=new At(e.document),this.updateOperations=new _t(e.document))}getTemplatePathDebugContext(e){return void 0!==this.delegate.getTemplatePathDebugContext?this.delegate.getTemplatePathDebugContext(e):""}setTemplatePathDebugContext(e,t,r){void 0!==this.delegate.setTemplatePathDebugContext&&this.delegate.setTemplatePathDebugContext(e,t,r)}iterableFor(e,t){let r=null===t?"@identity":String(t);return new vt(e,r,this)}toConditionalReference(e){return new Dt(e,this.delegate.toBool)}getAppendOperations(){return this.appendOperations}getDOM(){return this.updateOperations}begin(){void 0!==this.delegate.onTransactionBegin&&this.delegate.onTransactionBegin(),this[Ar]=new Ir}get transaction(){return this[Ar]}didCreate(e,t){this.transaction.didCreate(e,t)}didUpdate(e,t){this.transaction.didUpdate(e,t)}scheduleInstallModifier(e,t){this.isInteractive&&this.transaction.scheduleInstallModifier(e,t)}scheduleUpdateModifier(e,t){this.isInteractive&&this.transaction.scheduleUpdateModifier(e,t)}willDestroy(e){this.transaction.willDestroy(e)}didDestroy(e){this.transaction.didDestroy(e)}commit(){let e=this.transaction;this[Ar]=null,e.commit(),void 0!==this.delegate.onTransactionCommit&&this.delegate.onTransactionCommit()}}function zr(e){return"object"==typeof URL||"undefined"==typeof URL?function(e){if("undefined"==typeof window){let t=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i.exec(e);return t&&t[1]?t[1].toLowerCase():""}let t=window.document.createElement("a");return t.href=e,t.protocol}(e):"undefined"!=typeof document?new URL(e,document.baseURI).protocol:new URL(e,"https://www.example.com").protocol}function Lr(e,t,r,n){return sr(e,t,n)}function jr(e,t){return e[t]}function Rr(e,t,r){return e[t]=r}function Dr(e){return Boolean(e)}function Hr(e){return e&&e[Symbol.iterator]?e[Symbol.iterator]():null}_r=Ar;class Fr{constructor(e){this.inner=e}lookupComponent(e,t){if(this.inner.lookupComponent){let r=this.inner.lookupComponent(e,t);if(void 0===r)throw new Error(`Unexpected component ${e} (from ${t}) (lookupComponent returned undefined)`);return r}throw new Error("lookupComponent not implemented on RuntimeResolver.")}lookupPartial(e,t){if(this.inner.lookupPartial){let r=this.inner.lookupPartial(e,t);if(void 0===r)throw new Error(`Unexpected partial ${e} (from ${t}) (lookupPartial returned undefined)`);return r}throw new Error("lookupPartial not implemented on RuntimeResolver.")}resolve(e){if(this.inner.resolve){let t=this.inner.resolve(e);if(void 0===t)throw new Error(`Unexpected handle ${e} (resolve returned undefined)`);return t}throw new Error("resolve not implemented on RuntimeResolver.")}compilable(e){if(this.inner.compilable){let t=this.inner.compilable(e);if(void 0===t)throw new Error(`Unable to compile ${name} (compilable returned undefined)`);return t}throw new Error("compilable not implemented on RuntimeResolver.")}getInvocation(e){if(this.inner.getInvocation){let t=this.inner.getInvocation(e);if(void 0===t)throw new Error(`Unable to get invocation for ${JSON.stringify(e)} (getInvocation returned undefined)`);return t}throw new Error("getInvocation not implemented on RuntimeResolver.")}}const Ur=new class{constructor(){this.evaluateOpcode=function(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=null;return t}(107).slice()}add(e,t,r="syscall"){this.evaluateOpcode[e]={syscall:"machine"!==r,evaluate:t}}debugBefore(e,t){return{sp:void 0,pc:e.fetchValue(0),name:void 0,params:void 0,type:t.type,isMachine:t.isMachine,size:t.size,state:void 0}}debugAfter(e,t){let{sp:r,type:n,isMachine:s,pc:i}=t}evaluate(e,t,r){let n=this.evaluateOpcode[r];n.syscall?n.evaluate(e,t):n.evaluate(e[Ee],t)}};class Vr extends class{constructor(){R(this)}}{constructor(){super(...arguments),this.next=null,this.prev=null}}function $r(e){let t=[];for(let r=0,n=e.length;r<n;r++){let n=e[r].tag;n!==g&&t.push(n)}return w(t)}function Wr(e){let t=[],r=e.head();for(;null!==r;){let n=r.tag;n!==g&&t.push(n),r=e.nextNode(r)}return w(t)}class Gr extends class{constructor(){this.lastRevision=null,this.lastValue=null}value(){let{tag:e,lastRevision:t,lastValue:r}=this;return null!==t&&u(e,t)||(r=this.lastValue=this.compute(),this.lastRevision=o()),r}invalidate(){this.lastRevision=null}}{constructor(e){super(),this.parts=e,this.tag=$r(e)}compute(){let e=new Array;for(let t=0;t<this.parts.length;t++){let r=this.parts[t].value();null!=r&&(e[t]=Jr(r))}return e.length>0?e.join(""):null}}function Jr(e){return"function"!=typeof e.toString?"":String(e)}function qr(e){return e===zt}function Kr(e){return 0|(e.dynamicLayout?1:0)|(e.dynamicTag?2:0)|(e.prepareArgs?4:0)|(e.createArgs?8:0)|(e.attributeHook?16:0)|(e.elementHook?32:0)|(e.dynamicScope?64:0)|(e.createCaller?128:0)|(e.updateHook?256:0)|(e.createInstance?512:0)|(e.wrapped?1024:0)|(e.willDestroy?2048:0)}function Yr(e,t,r){return!!(t&r)}function Xr(e,t){return!!(e&t)}var Qr;Ur.add(16,(e,{op1:t})=>{let r=e.stack,n=e.runtime.resolver.resolve(t)(r.pop(),e);e.loadValue(8,n)}),Ur.add(22,(e,{op1:t})=>{let r=e.referenceForSymbol(t);e.stack.push(r)}),Ur.add(19,(e,{op1:t})=>{let r=e.stack.pop();e.scope().bindSymbol(t,r)}),Ur.add(21,(e,{op1:t})=>{let r=e.stack.pop(),n=e.stack.pop(),s=e.stack.pop(),i=s?[r,n,s]:null;e.scope().bindBlock(t,i)},"jit"),Ur.add(20,(e,{op1:t})=>{let r=e.stack.pop(),n=e.stack.pop(),s=e.stack.pop(),i=s?[r,n,s]:null;e.scope().bindBlock(t,i)}),Ur.add(105,(e,{op1:t})=>{let r=e[_e].getString(t),n=e.scope().getPartialMap()[r];void 0===n&&(n=e.getSelf().get(r)),e.stack.push(n)}),Ur.add(37,(e,{op1:t})=>{e.pushRootScope(t)}),Ur.add(23,(e,{op1:t})=>{let r=e[_e].getString(t),n=e.stack.pop();e.stack.push(n.get(r))}),Ur.add(24,(e,{op1:t})=>{let{stack:r}=e,n=e.scope().getBlock(t);r.push(n)}),Ur.add(25,e=>{let{stack:t}=e,r=t.pop();r&&!qr(r)?(t.push(r[2]),t.push(r[1]),t.push(r[0])):(t.push(null),t.push(null),t.push(null))}),Ur.add(26,e=>{let{stack:t}=e,r=t.pop();r&&!qr(r)?t.push(jt):t.push(Rt)}),Ur.add(27,e=>{e.stack.pop(),e.stack.pop();let t=e.stack.pop(),r=t&&t.parameters.length;e.stack.push(r?jt:Rt)}),Ur.add(28,(e,{op1:t})=>{let r=new Array(t);for(let n=t;n>0;n--){r[n-1]=e.stack.pop()}e.stack.push(new Gr(r))});const Zr=$("CURRIED COMPONENT DEFINITION");function en(e){return!(!e||!e[Zr])}class tn{constructor(e,t){this.inner=e,this.args=t,this[Qr]=!0}unwrap(e){e.realloc(this.offset);let t=this;for(;;){let{args:r,inner:n}=t;if(r&&(e.positional.prepend(r.positional),e.named.merge(r.named)),!en(n))return n;t=n}}get offset(){let{inner:e,args:t}=this,r=t?t.positional.length:0;return en(e)?r+e.offset:r}}function rn(e,t,r){return e.lookupComponent(t,r)}Qr=Zr;class nn{constructor(e){this.list=e,this.tag=$r(e),this.list=e}value(){let e=[],{list:t}=this;for(let r=0;r<t.length;r++){let n=Ft(t[r].value());n&&e.push(n)}return 0===e.length?null:e.join(" ")}}class sn{constructor(e,t,r,n){this.inner=e,this.resolver=t,this.meta=r,this.args=n,this.tag=e.tag,this.lastValue=null,this.lastDefinition=null}value(){let{inner:e,lastValue:t}=this,r=e.value();if(r===t)return this.lastDefinition;let n=null;if(en(r))n=r;else if("string"==typeof r&&r){let{resolver:e,meta:t}=this;n=rn(e,r,t)}return n=this.curry(n),this.lastValue=r,this.lastDefinition=n,n}get(){return zt}curry(e){let{args:t}=this;return!t&&en(e)?e:e?new tn(e,t):null}}class ln extends Vr{constructor(e,t,r){super(),this.node=e,this.reference=t,this.lastValue=r,this.type="dynamic-text",this.tag=t.tag,this.lastRevision=o(this.tag)}evaluate(){let{reference:e,tag:t}=this;u(t,this.lastRevision)||(this.lastRevision=o(),this.update(e.value()))}update(e){let t,{lastValue:r}=this;if(e!==r&&(t=Ut(e)?"":Wt(e)?e:String(e),t!==r)){this.node.nodeValue=this.lastValue=t}}}class an{constructor(e){this.inner=e,this.tag=e.tag}value(){let e=this.inner.value();return function(e){return Wt(e)||Ut(e)||"boolean"==typeof e||"number"==typeof e}(e)?1:(t=e)&&t[Zr]?0:Vt(e)?3:function(e){return $t(e)&&11===e.nodeType}(e)?4:$t(e)?5:1;var t}}Ur.add(43,e=>{let t=e.stack.pop().value(),r=Ut(t)?"":String(t);e.elements().appendDynamicHTML(r)}),Ur.add(44,e=>{let t=e.stack.pop().value().toHTML(),r=Ut(t)?"":t;e.elements().appendDynamicHTML(r)}),Ur.add(47,e=>{let t=e.stack.pop(),r=t.value(),n=Ut(r)?"":String(r),s=e.elements().appendDynamicText(n);b(t)||e.updateWith(new ln(s,t,n))}),Ur.add(45,e=>{let t=e.stack.pop().value();e.elements().appendDynamicFragment(t)}),Ur.add(46,e=>{let t=e.stack.pop().value();e.elements().appendDynamicNode(t)}),Ur.add(39,e=>e.pushChildScope()),Ur.add(40,e=>e.popScope()),Ur.add(59,e=>e.pushDynamicScope()),Ur.add(60,e=>e.popDynamicScope()),Ur.add(29,(e,{op1:t})=>{e.stack.push(e[_e].getOther(t))}),Ur.add(30,(e,{op1:t})=>{let r=e.stack;if(fe(t)){let n;n=t>-1073741825?e[_e].getString(be(t,-1)):e[_e].getNumber(be(t,-1073741825)),r.pushJs(n)}else r.pushRaw(t)}),Ur.add(31,e=>{let t=e.stack;t.push(It.create(t.pop()))}),Ur.add(32,e=>{let t=e.stack;t.push(t.peek().value())}),Ur.add(33,(e,{op1:t,op2:r})=>{let n=e.fetchValue(t)-r;e.stack.dup(n)}),Ur.add(34,(e,{op1:t})=>{e.stack.pop(t)}),Ur.add(35,(e,{op1:t})=>{e.load(t)}),Ur.add(36,(e,{op1:t})=>{e.fetch(t)}),Ur.add(58,(e,{op1:t})=>{let r=e[_e].getArray(t);e.bindDynamicScope(r)}),Ur.add(69,(e,{op1:t})=>{e.enter(t)}),Ur.add(70,e=>{e.exit()}),Ur.add(63,(e,{op1:t})=>{e.stack.push(e[_e].getSerializable(t))}),Ur.add(62,e=>{e.stack.push(e.scope())}),Ur.add(61,e=>{let t=e.stack,r=t.pop();r?t.push(e.compile(r)):t.push(null)},"jit"),Ur.add(64,e=>{let{stack:t}=e,r=t.pop(),n=t.pop(),s=t.pop(),i=t.pop();if(null===s)return e.pushFrame(),void e.pushScope(n);let l=n;{let e=s.parameters,t=e.length;if(t>0){l=l.child();for(let r=0;r<t;r++)l.bindSymbol(e[r],i.at(r))}}e.pushFrame(),e.pushScope(l),e.call(r)}),Ur.add(65,(e,{op1:t})=>{let r=e.stack.pop();if(b(r))r.value()&&e.goto(t);else{let n=new Ke(r);n.peek()&&e.goto(t),e.updateWith(new on(n))}}),Ur.add(66,(e,{op1:t})=>{let r=e.stack.pop();if(b(r))r.value()||e.goto(t);else{let n=new Ke(r);n.peek()||e.goto(t),e.updateWith(new on(n))}}),Ur.add(67,(e,{op1:t,op2:r})=>{e.stack.peek()===r&&e.goto(t)}),Ur.add(68,e=>{let t=e.stack.peek();b(t)||e.updateWith(on.initialize(new Ke(t)))}),Ur.add(71,e=>{let{env:t,stack:r}=e;r.push(t.toConditionalReference(r.pop()))});class on extends Vr{constructor(e){super(),this.type="assert",this.tag=e.tag,this.cache=e}static initialize(e){let t=new on(e);return e.peek(),t}evaluate(e){let{cache:t}=this;t.revalidate()!==Ye&&e.throw()}}class un extends Vr{constructor(e,t){super(),this.target=t,this.type="jump-if-not-modified",this.tag=e,this.lastRevision=o()}evaluate(e){let{tag:t,target:r,lastRevision:n}=this;!e.alwaysRevalidate&&u(t,n)&&e.goto(r)}didModify(){this.lastRevision=o(this.tag)}}class cn extends Vr{constructor(e){super(),this.target=e,this.type="did-modify",this.tag=g}evaluate(){this.target.didModify()}}class hn{constructor(e){this.tag=g,this.type="label",this.label=null,this.prev=null,this.next=null,R(this),this.label=e}evaluate(){}inspect(){return`${this.label} [${this._guid}]`}}Ur.add(41,(e,{op1:t})=>{e.elements().appendText(e[_e].getString(t))}),Ur.add(42,(e,{op1:t})=>{e.elements().appendComment(e[_e].getString(t))}),Ur.add(48,(e,{op1:t})=>{e.elements().openElement(e[_e].getString(t))}),Ur.add(49,e=>{let t=e.stack.pop().value();e.elements().openElement(t)}),Ur.add(50,e=>{let t,r,n=e.stack.pop(),s=e.stack.pop(),i=e.stack.pop().value();if(b(n))t=n.value();else{let r=new Ke(n);t=r.peek(),e.updateWith(new on(r))}if(void 0!==s.value())if(b(s))r=s.value();else{let t=new Ke(s);r=t.peek(),e.updateWith(new on(t))}let l=e.elements().pushRemoteElement(t,i,r);l&&e.associateDestroyable(l)}),Ur.add(56,e=>{e.elements().popRemoteElement()}),Ur.add(54,e=>{let t=e.fetchValue(6),r=null;t&&(r=t.flush(e),e.loadValue(6,null)),e.elements().flushElement(r)}),Ur.add(55,e=>{let t=e.elements().closeElement();t&&t.forEach(([t,r])=>{e.env.scheduleInstallModifier(r,t);let n=t.getDestructor(r);n&&e.associateDestroyable(n)})}),Ur.add(57,(e,{op1:t})=>{let{manager:r,state:n}=e.runtime.resolver.resolve(t),s=e.stack.pop(),{constructing:i,updateOperations:l}=e.elements(),a=e.dynamicScope(),o=r.create(i,n,s,a,l);e.fetchValue(6).addModifier(r,o);let u=r.getTag(o);y(u)||e.updateWith(new pn(u,r,o))});class pn extends Vr{constructor(e,t,r){super(),this.tag=e,this.manager=t,this.modifier=r,this.type="update-modifier",this.lastUpdated=o()}evaluate(e){let{manager:t,modifier:r,tag:n,lastUpdated:s}=this;u(n,s)||(e.env.scheduleUpdateModifier(r,t),this.lastUpdated=o())}}Ur.add(51,(e,{op1:t,op2:r,op3:n})=>{let s=e[_e].getString(t),i=e[_e].getString(r),l=n?e[_e].getString(n):null;e.elements().setStaticAttribute(s,i,l)}),Ur.add(52,(e,{op1:t,op2:r,op3:n})=>{let s=e[_e].getString(t),i=e.stack.pop(),l=i.value(),a=n?e[_e].getString(n):null,o=e.elements().setDynamicAttribute(s,l,!!r,a);b(i)||e.updateWith(new dn(i,o))});class dn extends Vr{constructor(e,t){super(),this.reference=e,this.attribute=t,this.type="patch-element";let{tag:r}=e;this.tag=r,this.lastRevision=o()}evaluate(e){let{attribute:t,reference:r,tag:n}=this;u(n,this.lastRevision)||(t.update(r.value(),e.env),this.lastRevision=o())}}const mn=$("COMPONENT_INSTANCE");Ur.add(77,e=>{let t=e.stack,r=t.pop();t.push(new Dt(r,en))}),Ur.add(78,e=>{let t=e.stack,r=t.peek();t.push(new an(r))}),Ur.add(79,(e,{op1:t})=>{let r=e.stack,n=r.pop(),s=r.pop(),i=e[_e].getTemplateMeta(t),l=e.runtime.resolver;e.loadValue(8,new sn(n,l,i,s))}),Ur.add(80,(e,{op1:t})=>{let r=e.runtime.resolver.resolve(t),{manager:n}=r,s=Kr(n.getCapabilities(r.state)),i={[mn]:!0,definition:r,manager:n,capabilities:s,state:null,handle:null,table:null,lookup:null};e.stack.push(i)}),Ur.add(83,(e,{op1:t})=>{let r,n=e.stack,s=n.pop().value(),i=e[_e].getTemplateMeta(t);if(e.loadValue(7,null),"string"==typeof s){r=rn(e.runtime.resolver,s,i)}else{if(!en(s))throw U();r=s}n.push(r)}),Ur.add(81,e=>{let t,r,{stack:n}=e,s=n.pop();en(s)?r=t=null:(r=s.manager,t=Kr(r.getCapabilities(s.state))),n.push({definition:s,capabilities:t,manager:r,state:null,handle:null,table:null})}),Ur.add(82,e=>{let t,r=e.stack,n=r.pop().value();if(!en(n))throw U();t=n,r.push(t)}),Ur.add(84,(e,{op1:t,op2:r,op3:n})=>{let s=e.stack,i=e[_e].getStringArray(t),l=n>>4,a=8&n,o=7&n?e[_e].getStringArray(r):z;e[Me].setup(s,i,o,l,!!a),s.push(e[Me])}),Ur.add(85,e=>{let{stack:t}=e;t.push(e[Me].empty(t))}),Ur.add(88,e=>{let t=e.stack,r=t.pop().capture();t.push(r)}),Ur.add(87,(e,{op1:t})=>{let r=e.stack,n=e.fetchValue(t),s=r.pop(),{definition:i}=n;en(i)&&(i=function(e,t,r){let n=e.definition=t.unwrap(r),{manager:s,state:i}=n;return e.manager=s,e.capabilities=Kr(s.getCapabilities(i)),n}(n,i,s));let{manager:l,state:a}=i;if(!Yr(0,n.capabilities,4))return void r.push(s);let o=s.blocks.values,u=s.blocks.names,c=l.prepareArgs(a,s);if(c){s.clear();for(let e=0;e<o.length;e++)r.push(o[e]);let{positional:e,named:t}=c,n=e.length;for(let t=0;t<n;t++)r.push(e[t]);let i=Object.keys(t);for(let e=0;e<i.length;e++)r.push(t[i[e]]);s.setup(r,i,u,n,!1)}r.push(s)}),Ur.add(89,(e,{op1:t,op2:r})=>{let n=e.fetchValue(r),{definition:s,manager:i}=n,l=n.capabilities=Kr(i.getCapabilities(s.state));if(!Yr(0,l,512))throw new Error("BUG");let a=null;Yr(0,l,64)&&(a=e.dynamicScope());let o=1&t,u=null;Yr(0,l,8)&&(u=e.stack.peek());let c=null;Yr(0,l,128)&&(c=e.getSelf());let h=i.create(e.env,s.state,u,a,c,!!o);n.state=h;let p=i.getTag(h);Yr(0,l,256)&&!y(p)&&e.updateWith(new kn(p,h,i,a))}),Ur.add(90,(e,{op1:t})=>{let{manager:r,state:n,capabilities:s}=e.fetchValue(t),i=r.getDestructor(n);i&&e.associateDestroyable(i)}),Ur.add(100,e=>{e.beginCacheGroup(),e.elements().pushSimpleBlock()}),Ur.add(91,e=>{e.loadValue(6,new fn)}),Ur.add(53,(e,{op1:t,op2:r,op3:n})=>{let s=e[_e].getString(t),i=e.stack.pop(),l=n?e[_e].getString(n):null;e.fetchValue(6).setAttribute(s,i,!!r,l)}),Ur.add(108,(e,{op1:t,op2:r,op3:n})=>{let s=e[_e].getString(t),i=e[_e].getString(r),l=n?e[_e].getString(n):null;e.fetchValue(6).setStaticAttribute(s,i,l)});class fn{constructor(){this.attributes=D(),this.classes=[],this.modifiers=[]}setAttribute(e,t,r,n){let s={value:t,namespace:n,trusting:r};"class"===e&&this.classes.push(t),this.attributes[e]=s}setStaticAttribute(e,t,r){let n={value:t,namespace:r};"class"===e&&this.classes.push(t),this.attributes[e]=n}addModifier(e,t){this.modifiers.push([e,t])}flush(e){let t,r=this.attributes;for(let n in this.attributes){if("type"===n){t=r[n];continue}let s=this.attributes[n];"class"===n?bn(e,"class",gn(this.classes),s.namespace,s.trusting):bn(e,n,s.value,s.namespace,s.trusting)}return void 0!==t&&bn(e,"type",t.value,t.namespace,t.trusting),this.modifiers}}function gn(e){return 0===e.length?"":1===e.length?e[0]:function(e){for(let t=0;t<e.length;t++)if("string"!=typeof e[t])return!1;return!0}(e)?e.join(" "):function(e){for(let t=0;t<e.length;t++){const r=e[t];"string"==typeof r&&(e[t]=It.create(r))}return new nn(e)}(e)}function bn(e,t,r,n,s=!1){if("string"==typeof r)e.elements().setStaticAttribute(t,r,n);else{let i=e.elements().setDynamicAttribute(t,r.value(),s,n);b(r)||e.updateWith(new dn(r,i))}}function yn(e,t){return!1===Yr(0,e,1)}function vn(e,t){return!0===Yr(0,e,1)}function wn(e,t,r,n,s){let i=r.table.symbols.indexOf(e),l=n.get(t);-1!==i&&s.scope().bindBlock(i+1,l),r.lookup&&(r.lookup[e]=l)}Ur.add(102,(e,{op1:t})=>{let{definition:r,state:n}=e.fetchValue(t),{manager:s}=r,i=e.fetchValue(6);s.didCreateElement(n,e.elements().constructing,i)}),Ur.add(92,(e,{op1:t})=>{let{definition:r,state:n}=e.fetchValue(t),{manager:s}=r;e.stack.push(s.getSelf(n))}),Ur.add(93,(e,{op1:t})=>{let{definition:r,state:n}=e.fetchValue(t),{manager:s}=r;e.stack.push(s.getTagName(n))}),Ur.add(95,(e,{op1:t})=>{let r,n=e.fetchValue(t),s=n.manager,{definition:i}=n,{stack:l}=e,{capabilities:a}=n;if(yn(a,s))r=s.getJitStaticLayout(i.state,e.runtime.resolver);else{if(!vn(a,s))throw U();{let t=ve(s.getJitDynamicLayout(n.state,e.runtime.resolver));r=Xr(a,1024)?t.asWrappedLayout():t.asLayout()}}let o=r.compile(e.context);l.push(r.symbolTable),l.push(o)},"jit"),Ur.add(94,(e,{op1:t})=>{let r,n=e.fetchValue(t),{manager:s,definition:i}=n,{stack:l}=e,{state:a,capabilities:o}=n,{state:u}=i;if(yn(o,s))r=s.getAotStaticLayout(u,e.runtime.resolver);else{if(!vn(o,s))throw U();r=s.getAotDynamicLayout(a,e.runtime.resolver)}l.push(r.symbolTable),l.push(r.handle)}),Ur.add(76,(e,{op1:t})=>{let r=e.stack.pop(),n=e.stack.pop(),{manager:s}=r,i=Kr(s.getCapabilities(r.state)),l={[mn]:!0,definition:r,manager:s,capabilities:i,state:null,handle:n.handle,table:n.symbolTable,lookup:null};e.loadValue(t,l)}),Ur.add(98,(e,{op1:t})=>{let{stack:r}=e,n=r.pop(),s=r.pop(),i=e.fetchValue(t);i.handle=n,i.table=s}),Ur.add(38,(e,{op1:t})=>{let{symbols:r}=e.fetchValue(t).table;e.pushRootScope(r.length+1)}),Ur.add(97,(e,{op1:t})=>{let r=e.fetchValue(t);if(r.table.hasEval){let t=r.lookup=D();e.scope().bindEvalScope(t)}}),Ur.add(17,(e,{op1:t})=>{let r=e.fetchValue(t),n=e.scope(),s=e.stack.peek(),i=s.named.atNames;for(let e=i.length-1;e>=0;e--){let t=i[e],l=r.table.symbols.indexOf(i[e]),a=s.named.get(t,!0);-1!==l&&n.bindSymbol(l+1,a),r.lookup&&(r.lookup[t]=a)}}),Ur.add(18,(e,{op1:t})=>{let r=e.fetchValue(t),{blocks:n}=e.stack.peek();for(let t=0;t<n.names.length;t++)wn(n.symbolNames[t],n.names[t],r,n,e)}),Ur.add(99,(e,{op1:t})=>{let r=e.fetchValue(t);e.call(r.handle)}),Ur.add(103,(e,{op1:t})=>{let{manager:r,state:n,capabilities:s}=e.fetchValue(t),i=e.elements().popBlock();if(!Yr(0,s,512))throw new Error("BUG");r.didRenderLayout(n,i),e.env.didCreate(n,r),e.updateWith(new xn(r,n,i))}),Ur.add(101,e=>{e.commitCacheGroup()});class kn extends Vr{constructor(e,t,r,n){super(),this.tag=e,this.component=t,this.manager=r,this.dynamicScope=n,this.type="update-component"}evaluate(e){let{component:t,manager:r,dynamicScope:n}=this;r.update(t,n)}}class xn extends Vr{constructor(e,t,r){super(),this.manager=e,this.component=t,this.bounds=r,this.type="did-update-layout",this.tag=g}evaluate(e){let{manager:t,component:r,bounds:n}=this;t.didUpdateLayout(r,n),e.env.didUpdate(r,t)}}function Sn(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}let En=Sn;class On{constructor(e,t,r){this.scope=e,this.locals=D();for(let n=0;n<r.length;n++){let s=r[n],i=t[s-1],l=e.getSymbol(s);this.locals[i]=l}}get(e){let t,{scope:r,locals:n}=this,s=e.split("."),[i,...l]=e.split("."),a=r.getEvalScope();return"this"===i?t=r.getSelf():n[i]?t=n[i]:0===i.indexOf("@")&&a[i]?t=a[i]:(t=this.scope.getSelf(),l=s),l.reduce((e,t)=>e.get(t),t)}}Ur.add(106,(e,{op1:t,op2:r})=>{let n=e[_e].getStringArray(t),s=e[_e].getArray(r),i=new On(e.scope(),n,s);En(e.getSelf().value(),e=>i.get(e).value())}),Ur.add(104,(e,{op1:t,op2:r,op3:n})=>{let{[_e]:s,stack:i}=e,l=i.pop().value(),a=s.getTemplateMeta(t),o=s.getStringArray(r),u=s.getArray(n),c=e.runtime.resolver.lookupPartial(l,a),h=e.runtime.resolver.resolve(c),{symbolTable:p,handle:d}=h.getPartial(e.context);{let t=p.symbols,r=e.scope(),n=e.pushRootScope(t.length),s=r.getEvalScope();n.bindEvalScope(s),n.bindSelf(r.getSelf());let i=Object.create(r.getPartialMap());for(let e=0;e<u.length;e++){let t=u[e],n=o[t-1],s=r.getSymbol(t);i[n]=s}if(s)for(let e=0;e<t.length;e++){let r=e+1,i=s[t[e]];void 0!==i&&n.bind(r,i)}n.bindPartialMap(i),e.pushFrame(),e.call(ye(d))}},"jit");class Cn{constructor(e){this.tag=e.tag,this.artifacts=e}value(){return!this.artifacts.isEmpty()}}Ur.add(74,e=>{let t=e.stack,r=t.pop(),n=t.pop(),s=e.env.iterableFor(r,n.value()),i=new tt(s);t.push(i),t.push(new Cn(i.artifacts))}),Ur.add(72,(e,{op1:t})=>{e.enterList(t)}),Ur.add(73,e=>{e.exitList()}),Ur.add(75,(e,{op1:t})=>{let r=e.stack.peek().next();if(r){let t=e.iterate(r.memo,r.value);e.enterItem(r.key,t)}else e.goto(t)});const Tn={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};new class{getCapabilities(e){return Tn}prepareArgs(e,t){throw new Error("Unimplemented prepareArgs in SimpleComponentManager")}create(e,t,r,n,s,i){throw new Error("Unimplemented create in SimpleComponentManager")}getSelf(e){return zt}getTag(e){throw new Error("Unimplemented getTag in SimpleComponentManager")}didRenderLayout(e,t){throw new Error("Unimplemented didRenderLayout in SimpleComponentManager")}didCreate(e){throw new Error("Unimplemented didCreate in SimpleComponentManager")}update(e,t){throw new Error("Unimplemented update in SimpleComponentManager")}didUpdateLayout(e,t){throw new Error("Unimplemented didUpdateLayout in SimpleComponentManager")}didUpdate(e){throw new Error("Unimplemented didUpdate in SimpleComponentManager")}getDestructor(e){return null}};class Pn{constructor(e){this.bucket=e?pe({},e):{}}get(e){return this.bucket[e]}set(e,t){return this.bucket[e]=t}child(){return new Pn(this.bucket)}}class _n{constructor(){this.stack=null,this.positional=new Mn,this.named=new In,this.blocks=new zn}empty(e){let t=e[Te][3]+1;return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this}setup(e,t,r,n,s){this.stack=e;let i=this.named,l=t.length,a=e[Te][3]-l+1;i.setup(e,a,l,t,s);let o=a-n;this.positional.setup(e,o,n);let u=this.blocks,c=r.length,h=o-3*c;u.setup(e,h,c,r)}get tag(){return $r([this.positional,this.named])}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){let{stack:t}=this;if(e>0&&null!==t){let{positional:r,named:n}=this,s=r.base+e;for(let e=r.length+n.length-1;e>=0;e--)t.copy(e+r.base,e+s);r.base+=e,n.base+=e,t[Te][3]+=e}}capture(){let e=0===this.positional.length?Dn:this.positional.capture(),t=0===this.named.length?Rn:this.named.capture();return new jn(this.tag,e,t,this.length)}clear(){let{stack:e,length:t}=this;t>0&&null!==e&&e.pop(t)}}class Mn{constructor(){this.base=0,this.length=0,this.stack=null,this._tag=null,this._references=null}empty(e,t){this.stack=e,this.base=t,this.length=0,this._tag=g,this._references=z}setup(e,t,r){this.stack=e,this.base=t,this.length=r,0===r?(this._tag=g,this._references=z):(this._tag=null,this._references=null)}get tag(){let e=this._tag;return e||(e=this._tag=$r(this.references)),e}at(e){let{base:t,length:r,stack:n}=this;return e<0||e>=r?zt:n.get(e,t)}capture(){return new An(this.tag,this.references)}prepend(e){let t=e.length;if(t>0){let{base:r,length:n,stack:s}=this;this.base=r-=t,this.length=n+t;for(let n=0;n<t;n++)s.set(e.at(n),n,r);this._tag=null,this._references=null}}get references(){let e=this._references;if(!e){let{stack:t,base:r,length:n}=this;e=this._references=t.sliceArray(r,r+n)}return e}}class An{constructor(e,t,r=t.length){this.tag=e,this.references=t,this.length=r}static empty(){return new An(g,z,0)}at(e){return this.references[e]}value(){return this.references.map(this.valueOf)}get(e){let{references:t,length:r}=this;if("length"===e)return It.create(r);{let n=parseInt(e,10);return n<0||n>=r?zt:t[n]}}valueOf(e){return e.value()}}class In{constructor(){this.base=0,this.length=0,this._references=null,this._names=z,this._atNames=z}empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=z,this._names=z,this._atNames=z}setup(e,t,r,n,s){this.stack=e,this.base=t,this.length=r,0===r?(this._references=z,this._names=z,this._atNames=z):(this._references=null,s?(this._names=null,this._atNames=n):(this._names=n,this._atNames=null))}get tag(){return $r(this.references)}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!1){let{base:r,stack:n}=this,s=(t?this.atNames:this.names).indexOf(e);return-1===s?zt:n.get(s,r)}capture(){return new Nn(this.tag,this.names,this.references)}merge(e){let{length:t}=e;if(t>0){let{names:r,length:n,stack:s}=this,{names:i}=e;Object.isFrozen(r)&&0===r.length&&(r=[]);for(let l=0;l<t;l++){let t=i[l];-1===r.indexOf(t)&&(n=r.push(t),s.push(e.references[l]))}this.length=n,this._references=null,this._names=r,this._atNames=null}}get references(){let e=this._references;if(!e){let{base:t,length:r,stack:n}=this;e=this._references=n.sliceArray(t,t+r)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return"@"+e}}class Nn{constructor(e,t,r){this.tag=e,this.names=t,this.references=r,this.length=t.length,this._map=null}get map(){let e=this._map;if(!e){let{names:t,references:r}=this;e=this._map=D();for(let n=0;n<t.length;n++){e[t[n]]=r[n]}}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let{names:t,references:r}=this,n=t.indexOf(e);return-1===n?zt:r[n]}value(){let{names:e,references:t}=this,r=D();for(let n=0;n<e.length;n++){r[e[n]]=t[n].value()}return r}}function Bn(e){return"&"+e}class zn{constructor(){this.internalValues=null,this._symbolNames=null,this.internalTag=null,this.names=z,this.length=0,this.base=0}empty(e,t){this.stack=e,this.names=z,this.base=t,this.length=0,this._symbolNames=null,this.internalTag=g,this.internalValues=z}setup(e,t,r,n){this.stack=e,this.names=n,this.base=t,this.length=r,this._symbolNames=null,0===r?(this.internalTag=g,this.internalValues=z):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let{base:t,length:r,stack:n}=this;e=this.internalValues=n.sliceArray(t,t+3*r)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);if(-1===t)return null;let{base:r,stack:n}=this,s=n.get(3*t,r),i=n.get(3*t+1,r),l=n.get(3*t+2,r);return null===l?null:[l,i,s]}capture(){return new Ln(this.names,this.values)}get symbolNames(){let e=this._symbolNames;return null===e&&(e=this._symbolNames=this.names.map(Bn)),e}}class Ln{constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}class jn{constructor(e,t,r,n){this.tag=e,this.positional=t,this.named=r,this.length=n}value(){return{named:this.named.value(),positional:this.positional.value()}}}const Rn=new Nn(g,z,z),Dn=new An(g,z);new jn(g,Dn,Rn,0);class Hn{constructor(e,t,r,n,s){this.stack=e,this.heap=t,this.program=r,this.externs=n,this.registers=s,this.currentOpSize=0}fetchRegister(e){return this.registers[e]}loadRegister(e,t){this.registers[e]=t}setPc(e){this.registers[0]=e}pushFrame(){this.stack.push(this.registers[1]),this.stack.push(this.registers[2]),this.registers[2]=this.registers[3]-1}popFrame(){this.registers[3]=this.registers[2]-1,this.registers[1]=this.stack.get(0),this.registers[2]=this.stack.get(1)}pushSmallFrame(){this.stack.push(this.registers[1])}popSmallFrame(){this.registers[1]=this.stack.pop()}goto(e){this.setPc(this.target(e))}target(e){return this.registers[0]+e-this.currentOpSize}call(e){this.registers[1]=this.registers[0],this.setPc(this.heap.getaddr(e))}returnTo(e){this.registers[1]=this.target(e)}return(){this.setPc(this.registers[1])}nextStatement(){let{registers:e,program:t}=this,r=e[0];if(-1===r)return null;let n=t.opcode(r),s=this.currentOpSize=n.size;return this.registers[0]+=s,n}evaluateOuter(e,t){this.evaluateInner(e,t)}evaluateInner(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)}evaluateMachine(e){switch(e.type){case 0:return this.pushFrame();case 1:return this.popFrame();case 3:return this.call(e.op1);case 2:return this.call(this.stack.pop());case 4:return this.goto(e.op1);case 5:return this.return();case 6:return this.returnTo(e.op1)}}evaluateSyscall(e,t){Ur.evaluate(t,e,e.type)}}class Fn{constructor(e,{alwaysRevalidate:t=!1}){this.frameStack=new F,this.env=e,this.dom=e.getDOM(),this.alwaysRevalidate=t}execute(e,t){let{frameStack:r}=this;for(this.try(e,t);!r.isEmpty();){let e=this.frame.nextStatement();null!==e?e.evaluate(this):r.pop()}}get frame(){return this.frameStack.current}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new Jn(e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class Un{constructor(e,t){this.state=e,this.resumeCallback=t}resume(e,t){return this.resumeCallback(e,this.state,t)}}class Vn extends Vr{constructor(e,t,r,n){super(),this.state=e,this.runtime=t,this.type="block",this.next=null,this.prev=null,this.children=n,this.bounds=r}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}}class $n extends Vn{constructor(e,t,r,n){super(e,t,r,n),this.type="try",this.tag=this._tag=f()}didInitializeChildren(){d(this._tag,Wr(this.children))}evaluate(e){e.try(this.children,this)}handleException(){let{state:e,bounds:t,children:r,prev:n,next:s,runtime:i}=this;Le(this,i.env),r.clear(),je(this,i.env);let l=$e.resume(i.env,t),a=e.resume(i,l),o=new ue;Z(this,a.execute(e=>{e.pushUpdating(o),e.updateWith(this),e.pushUpdating(r)}).drop),this.prev=n,this.next=s}}class Wn{constructor(e,t){this.opcode=e,this.marker=t,this.didInsert=!1,this.didDelete=!1,this.map=e.map,this.updating=e.children}insert(e,t,r,n,s){let{map:i,opcode:l,updating:a}=this,o=null,u=null;u=i.get(s),o=void 0!==u?u.bounds.firstNode():this.marker;let c=l.vmForInsertion(o),h=null,p=c.execute(e=>{h=e.iterate(n,r),i.set(t,h),e.pushUpdating(new ue),e.updateWith(h),e.pushUpdating(h.children)});a.insertBefore(h,u),Z(l,p.drop),this.didInsert=!0}retain(e,t,r,n){}move(e,t,r,n,s){let{map:i,updating:l}=this,a=i.get(t);if(s===nt)Be(a,this.marker),l.remove(a),l.append(a);else{let e=i.get(s);Be(a,e.firstNode()),l.remove(a),l.insertBefore(a,e)}}delete(e,t){let{map:r,updating:n}=this,s=r.get(t);!function(e,t){Re(e,t),ze(e),De(e,t)}(s,e),n.remove(s),r.delete(t),this.didDelete=!0}done(){this.opcode.didInitializeChildren(this.didInsert||this.didDelete)}}class Gn extends Vn{constructor(e,t,r,n,s){super(e,t,r,n),this.type="list-block",this.map=new Map,this.lastIterated=1,this.artifacts=s;let i=this._tag=f();this.tag=v([s.tag,i])}didInitializeChildren(e=!0){this.lastIterated=o(this.artifacts.tag),e&&d(this._tag,Wr(this.children))}evaluate(e){let{artifacts:t,lastIterated:r}=this;if(!u(t.tag,r)){let{bounds:r}=this,{dom:n}=e,s=n.createComment("");n.insertAfter(r.parentElement(),s,r.lastNode());let i=new Wn(this,s);new st({target:i,artifacts:t,env:e.env}).sync(),this.parentElement().removeChild(s)}super.evaluate(e)}vmForInsertion(e){let{bounds:t,state:r,runtime:n}=this,s=$e.forInitialRender(n.env,{element:t.parentElement(),nextSibling:e});return r.resume(n,s)}}class Jn{constructor(e,t){this.ops=e,this.exceptionHandler=t,this.current=e.head()}goto(e){this.current=e}nextStatement(){let{current:e,ops:t}=this;return e&&(this.current=t.nextNode(e)),e}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class qn{constructor(e,t,r,n){this.env=e,this.updating=t,this.bounds=r,this.drop=n,Z(this,n)}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let{env:t,updating:r}=this;new Fn(t,{alwaysRevalidate:e}).execute(r,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw"this should never happen"}[W](){ze(this.bounds)}destroy(){!function(e,t){if(e[Ar])t();else{e.begin();try{t()}finally{e.commit()}}}(this.env,()=>{Re(this,this.env),De(this,this.env)})}}class Kn{constructor(e=[]){this.vec=e}clone(){return new Kn(this.vec.slice())}sliceFrom(e){return new Kn(this.vec.slice(e))}slice(e,t){return new Kn(this.vec.slice(e,t))}copy(e,t){this.vec[t]=this.vec[e]}writeRaw(e,t){this.vec[e]=t}getRaw(e){return this.vec[e]}reset(){this.vec.length=0}len(){return this.vec.length}}class Yn{constructor(e=new Kn,t=[]){this.inner=e,this.js=t}slice(e,t){let r;return r="number"==typeof e&&"number"==typeof t?this.inner.slice(e,t):"number"==typeof e&&void 0===t?this.inner.sliceFrom(e):this.inner.clone(),new Yn(r,this.js.slice(e,t))}sliceInner(e,t){let r=[];if(-1===e)return r;for(let n=e;n<t;n++)r.push(this.get(n));return r}copy(e,t){this.inner.copy(e,t)}write(e,t){switch(typeof t){case"boolean":case"undefined":this.writeRaw(e,de(t));break;case"number":if(me(t)){this.writeRaw(e,de(t));break}case"object":if(null===t){this.writeRaw(e,de(t));break}default:this.writeJs(e,t)}}writeJs(e,t){let r=this.js.length;this.js.push(t),this.inner.writeRaw(e,ge(r))}writeRaw(e,t){this.inner.writeRaw(e,t)}get(e){let t=this.inner.getRaw(e);return fe(t)?this.js[be(t)]:function(e){if(e>1073741823)switch(e){case 1073741824:return!1;case 1073741825:return!0;case 1073741826:return null;case 1073741827:return;default:return 1073741827-e}return e}(t)}reset(){this.inner.reset(),this.js.length=0}get length(){return this.inner.len()}}var Xn,Qn;class Zn{constructor(){this.scope=new F,this.dynamicScope=new F,this.updating=new F,this.cache=new F,this.list=new F}}class es{constructor(e,{pc:t,scope:r,dynamicScope:n,stack:s},i){this.runtime=e,this.elementStack=i,this[Xn]=new Zn,this[Qn]=new F,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null;let l=class{constructor(e,t){this.stack=e,this[Te]=t}static restore(e){let t=new Yn;for(let r=0;r<e.length;r++)t.write(r,e[r]);return new this(t,[0,-1,e.length-1,0])}push(e){this.stack.write(++this[Te][3],e)}pushJs(e){this.stack.writeJs(++this[Te][3],e)}pushRaw(e){this.stack.writeRaw(++this[Te][3],e)}dup(e=this[Te][3]){this.stack.copy(e,++this[Te][3])}copy(e,t){this.stack.copy(e,t)}pop(e=1){let t=this.stack.get(this[Te][3]);return this[Te][3]-=e,t}peek(e=0){return this.stack.get(this[Te][3]-e)}get(e,t=this[Te][2]){return this.stack.get(t+e)}set(e,t,r=this[Te][2]){this.stack.write(r+t,e)}slice(e,t){return this.stack.slice(e,t)}sliceArray(e,t){return this.stack.sliceInner(e,t)}capture(e){let t=this[Te][3]+1,r=t-e;return this.stack.sliceInner(r,t)}reset(){this.stack.reset()}toArray(){return console.log(this[Te]),this.stack.sliceInner(this[Te][2],this[Te][3]+1)}}.restore(s);l[Te][0]=t,l[Te][3]=s.length-1,l[Te][2]=-1,this[Pe]=this.program.heap,this[_e]=this.program.constants,this.elementStack=i,this[Ce].scope.push(r),this[Ce].dynamicScope.push(n),this[Me]=new _n,this[Ee]=new Hn(l,this[Pe],e.program,{debugBefore:e=>Ur.debugBefore(this,e),debugAfter:e=>{Ur.debugAfter(this,e)}},l[Te]),this.destructor={},this[Oe].push(this.destructor)}get stack(){return this[Ee].stack}get pc(){return this[Ee].fetchRegister(0)}fetch(e){this.stack.push(this.fetchValue(e))}load(e){let t=this.stack.pop();this.loadValue(e,t)}fetchValue(e){if(ke(e))return this[Ee].fetchRegister(e);switch(e){case 4:return this.s0;case 5:return this.s1;case 6:return this.t0;case 7:return this.t1;case 8:return this.v0}}loadValue(e,t){switch(ke(e)&&this[Ee].loadRegister(e,t),e){case 4:this.s0=t;break;case 5:this.s1=t;break;case 6:this.t0=t;break;case 7:this.t1=t;break;case 8:this.v0=t}}pushFrame(){this[Ee].pushFrame()}popFrame(){this[Ee].popFrame()}goto(e){this[Ee].goto(e)}call(e){this[Ee].call(e)}returnTo(e){this[Ee].returnTo(e)}return(){this[Ee].return()}get program(){return this.runtime.program}get env(){return this.runtime.env}captureState(e,t=this[Ee].fetchRegister(0)){return{pc:t,dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}}beginCacheGroup(){this[Ce].cache.push(this.updating().tail())}commitCacheGroup(){let e=new hn("END"),t=this.updating(),r=this[Ce].cache.pop(),n=r?t.nextNode(r):t.head(),s=t.tail(),i=Wr(new ce(n,s)),l=new un(i,e);t.insertBefore(l,n),t.append(new cn(l)),t.append(e)}enter(e){let t=new ue,r=this.capture(e),n=this.elements().pushUpdatableBlock(),s=new $n(r,this.runtime,n,t);this.didEnter(s)}iterate(e,t){let r=this.stack;r.push(t),r.push(e);let n=this.capture(2),s=this.elements().pushUpdatableBlock();return new $n(n,this.runtime,s,new ue)}enterItem(e,t){this.listBlock().map.set(e,t),this.didEnter(t)}enterList(e){let t=new ue,r=this[Ee].target(e),n=this.capture(0,r),s=this.elements().pushBlockList(t),i=this.stack.peek().artifacts,l=new Gn(n,this.runtime,s,t,i);this[Ce].list.push(l),this.didEnter(l)}didEnter(e){this.associateDestructor(ne(e)),this[Oe].push(e),this.updateWith(e),this.pushUpdating(e.children)}exit(){this[Oe].pop(),this.elements().popBlock(),this.popUpdating(),this.updating().tail().didInitializeChildren()}exitList(){this.exit(),this[Ce].list.pop()}pushUpdating(e=new ue){this[Ce].updating.push(e)}popUpdating(){return this[Ce].updating.pop()}updateWith(e){this.updating().append(e)}listBlock(){return this[Ce].list.current}associateDestructor(e){if(!Q(e))return;ee(this[Oe].current,e)}associateDestroyable(e){this.associateDestructor(ne(e))}tryUpdating(){return this[Ce].updating.current}updating(){return this[Ce].updating.current}elements(){return this.elementStack}scope(){return this[Ce].scope.current}dynamicScope(){return this[Ce].dynamicScope.current}pushChildScope(){this[Ce].scope.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this[Ce].dynamicScope.push(e),e}pushRootScope(e){let t=Mr.sized(e);return this[Ce].scope.push(t),t}pushScope(e){this[Ce].scope.push(e)}popScope(){this[Ce].scope.pop()}popDynamicScope(){this[Ce].dynamicScope.pop()}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e){let t;e&&e(this);try{for(;t=this.next(),!t.done;);}finally{let e=this.elements();for(;e.hasBlocks;)e.popBlock()}return t.value}next(){let e,{env:t,elementStack:r}=this,n=this[Ee].nextStatement();return null!==n?(this[Ee].evaluateOuter(n,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new qn(t,this.popUpdating(),r.popBlock(),this.destructor)}),e}bindDynamicScope(e){let t=this.dynamicScope();for(let r=e.length-1;r>=0;r--){let n=this[_e].getString(e[r]);t.set(n,this.stack.pop())}}}function ts(e,t=Mr.root(zt,0),r){return{pc:e,scope:t,dynamicScope:r,stack:[]}}Xn=Ce,Qn=Oe;function rs(e){return(t,r,n)=>new ns(t,r,n,e)}class ns extends es{constructor(e,t,r,n){super(e,t,r),this.context=n,this.resume=rs(this.context)}static initial(e,t,{handle:r,self:n,dynamicScope:s,treeBuilder:i}){let l=e.program.heap.scopesizeof(r),a=Mr.root(n,l),o=ts(e.program.heap.getaddr(r),a,s),u=rs(t)(e,o,i);return u.pushUpdating(),u}static empty(e,{handle:t,treeBuilder:r,dynamicScope:n},s){let i=rs(s)(e,ts(e.program.heap.getaddr(t),Mr.root(zt,0),n),r);return i.pushUpdating(),i}capture(e,t=this[Ee].fetchRegister(0)){return new Un(this.captureState(e,t),this.resume)}compile(e){return ye(e.compile(this.context))}}class ss{constructor(e){this.vm=e}next(){return this.vm.next()}sync(){return function(e,t){let r;e.begin();do{r=t.next()}while(!r.done);let n=r.value;return e.commit(),n}(this.vm.runtime.env,this)}}function is(e,t,r,n){const s=Object.keys(n).map(e=>[e,n[e]]),i=["main","else","attrs"],l=s.map(([e])=>"@"+e);e.pushFrame();for(let t=0;t<3*i.length;t++)e.stack.push(null);return e.stack.push(null),s.forEach(([,t])=>{e.stack.push(t)}),e[Me].setup(e.stack,l,i,0,!0),e.stack.push(e[Me]),e.stack.push(t),e.stack.push(r),new ss(e)}function ls(e){return{type:"array",value:e}}function as(e){return{type:"string-array",value:e}}function os(e){return{type:"template-meta",value:e}}function us(e){return{type:"other",value:e}}function cs(e){return{type:"label",value:e}}function hs(e,t){return{type:"primitive",value:{primitive:e,type:t}}}const ps={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};class ds{constructor(e){this.inner=e}lookupHelper(e,t){if(this.inner.lookupHelper){let r=this.inner.lookupHelper(e,t);if(void 0===r)throw new Error(`Unexpected helper (${e} from ${JSON.stringify(t)}) (lookupHelper returned undefined)`);return r}throw new Error("Can't compile global helper invocations without an implementation of lookupHelper")}lookupModifier(e,t){if(this.inner.lookupModifier){let r=this.inner.lookupModifier(e,t);if(void 0===r)throw new Error(`Unexpected modifier (${e} from ${JSON.stringify(t)}) (lookupModifier returned undefined)`);return r}throw new Error("Can't compile global modifier invocations without an implementation of lookupModifier")}lookupComponent(e,t){if(this.inner.lookupComponent){let r=this.inner.lookupComponent(e,t);if(void 0===r)throw new Error(`Unexpected component (${e} from ${JSON.stringify(t)}) (lookupComponent returned undefined)`);return r}throw new Error("Can't compile global component invocations without an implementation of lookupComponent")}lookupPartial(e,t){if(this.inner.lookupPartial){let r=this.inner.lookupPartial(e,t);if(void 0===r)throw new Error(`Unexpected partial (${e} from ${JSON.stringify(t)}) (lookupPartial returned undefined)`);return r}throw new Error("Can't compile global partial invocations without an implementation of lookupPartial")}resolve(e){if(this.inner.resolve)return this.inner.resolve(e);throw new Error("Compile-time debugging requires an implementation of resolve")}}function ms(e,{resolver:t,meta:{referrer:r}}){let n=t.lookupComponent(e,r);if(null===n)return n;let{handle:s,compilable:i,capabilities:l}=n;return{handle:s,compilable:i,capabilities:l||ps}}class fs{constructor(e){this.buffer=e,this.size=0}encode(e,t){if(e>255)throw new Error(`Opcode type over 8-bits. Got ${e}.`);let r=e|t|arguments.length-2<<8;this.buffer.push(r);for(let e=2;e<arguments.length;e++){let t=arguments[e];if("number"==typeof t&&t>2147483647)throw new Error(`Operand over 32-bits. Got ${t}.`);this.buffer.push(t)}this.size=this.buffer.length}patch(e,t){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.");this.buffer[e+1]=t}}function gs(e){return[bs(e),ri(31)]}function bs(e){let t;switch(typeof e){case"number":t=me(e)?hs(e,0):hs(e,2);break;case"string":t=hs(e,1);break;case"boolean":case"object":case"undefined":t=hs(e,0);break;default:throw new Error("Invalid primitive passed to pushPrimitive")}return ri(30,t)}function ys({handle:e,params:t,hash:r}){return[ri(0),ri("SimpleArgs",{params:t,hash:r,atNames:!1}),ri(16,e),ri(1),ri(36,8)]}function vs(e,t){return[ri(59),ri(58,as(e)),t(),ri(60)]}function ws(e,t){return[ri("SimpleArgs",{params:t,hash:null,atNames:!0}),ri(24,e),ri(25),ri("Option",ri("JitCompileBlock")),ri(64),ri(40),ri(1)]}function ks(e){return[Es(e&&e.symbolTable),ri(62),ri("PushCompilable",e)]}function xs(e){return[ri(0),ri("PushCompilable",e),ri("JitCompileBlock"),ri(2),ri(1)]}function Ss(e,t){let{parameters:r}=e.symbolTable,n=r.length,s=Math.min(t,n);if(0===s)return xs(e);let i=[];if(i.push(ri(0)),s){i.push(ri(39));for(let e=0;e<s;e++)i.push(ri(33,2,t-e)),i.push(ri(19,r[e]))}return i.push(ri("PushCompilable",e)),i.push(ri("JitCompileBlock")),i.push(ri(2)),s&&i.push(ri(40)),i.push(ri(1)),i}function Es(e){return e?ri(63,{type:"serializable",value:e}):bs(null)}function Os(e){let t=[],r=0;e((function(e,n){t.push({match:e,callback:n,label:"CLAUSE"+r++})}));let n=[ri(69,2),ri(68),ri(32),ri("StartLabels")];for(let e of t.slice(0,-1))n.push(ri(67,cs(e.label),e.match));for(let e=t.length-1;e>=0;e--){let r=t[e];n.push(ri("Label",r.label),ri(34,2),r.callback()),0!==e&&n.push(ri(4,cs("END")))}return n.push(ri("Label","END"),ri("StopLabels"),ri(70)),n}function Cs({args:e,body:t}){let{count:r,actions:n}=e();return[ri("StartLabels"),ri(0),ri(6,cs("ENDINITIAL")),n,ri(69,r),t(),ri("Label","FINALLY"),ri(70),ri(5),ri("Label","ENDINITIAL"),ri(1),ri("StopLabels")]}function Ts({args:e,ifTrue:t,ifFalse:r}){return Cs({args:e,body:()=>{let e=[ri(66,cs("ELSE")),t(),ri(4,cs("FINALLY")),ri("Label","ELSE")];return r&&e.push(r()),e}})}function Ps(e,t){let{encoder:r,syntax:{program:{mode:n,constants:s}}}=e;switch(t.op){case"Option":return Rs(e,function(e){let t=e.op1;return null===t?Bs:t}(t));case"Label":return r.label(t.op1);case"StartLabels":return r.startLabels();case"StopLabels":return r.stopLabels();case"JitCompileBlock":return Rs(e,function(e){return"jit"===e?ri(61):Bs}(n));case"GetComponentLayout":return r.push(s,function(e){return"aot"===e?94:95}(n),t.op1);case"SetBlock":return r.push(s,function(e){return"aot"===e?20:21}(n),t.op1);default:return V(t)}}function _s(e,t){Hs(e,function(e,t){switch(t.op){case"CompileBlock":return function(e,t){return function(e,t){let[,r,n,s,i]=e,l=Qs(i,t.meta),a=Zs(r,t.meta,"Expected block head to be a string");if("string"!=typeof a)return a;return t.syntax.macros.blocks.compile(a,n||[],s,l,t)}(t.op1,e)}(e,t);case"CompileInline":return function(e,t){let{inline:r,ifUnhandled:n}=t.op1,s=function(e,t){return t.syntax.macros.inlines.compile(e,t)}(r,e);return js(s)?s:n(r)}(e,t);case"InvokeStatic":return function(e,t){let r=t.op1;if("aot"===e.program.mode){let t=r.compile(e);return"number"!=typeof t?ri("Error",{problem:"Invalid block",start:0,end:0}):ri(3,t===Gs?()=>r.compile(e):t)}return[ri(29,us(t.op1)),ri(61),ri(2)]}(e.syntax,t);case"Args":return function({params:e,hash:t,blocks:r,atNames:n}){let s=[],i=r.names;for(let e=0;e<i.length;e++)s.push(ks(r.get(i[e])));let{count:l,actions:a}=si(e);s.push(a);let o=l<<4;n&&(o|=8);r&&(o|=7);let u=z;if(t){u=t[0];let e=t[1];for(let t=0;t<e.length;t++)s.push(ri("Expr",e[t]))}return s.push(ri(84,as(u),as(i),o)),s}(t.op1);case"PushCompilable":return function(e,t){if(null===e)return bs(null);if("aot"===t.program.mode){let r=e.compile(t);return"number"!=typeof r?ri("Error",{problem:"Compile Error (TODO: thread better)",start:0,end:0}):bs(r)}return ri(29,us(e))}(t.op1,e.syntax);case"DynamicComponent":return function(e,t){let{definition:r,attrs:n,params:s,args:i,blocks:l,atNames:a}=t.op1,o=n&&n.length>0?Ks(n,e.meta):null,u=Array.isArray(l)||null===l?Qs(l,e.meta):l;return ui(e.meta,{definition:r,attrs:o,params:s,hash:i,atNames:a,blocks:u})}(e,t);case"IfResolvedComponent":return function(e,t){let{name:r,attrs:n,blocks:s,staticTemplate:i,dynamicTemplate:l,orElse:a}=t.op1,o=ms(r,{resolver:e.syntax.program.resolverDelegate,meta:e.meta}),{meta:u}=e;if(null!==o){let{handle:e,capabilities:t,compilable:r}=o,a=Ks(n,u),c=Qs(s,u);return null!==r?i(e,t,r,{attrs:a,blocks:c}):l(e,t,{attrs:a,blocks:c})}if(a)return a();throw new Error("Compile Error: Cannot find component "+r)}(e,t);default:return V(t)}}(e,t))}function Ms(e,t,r){void 0!==r.op3?e.push(t,r.op,r.op1,r.op2,r.op3):void 0!==r.op2?e.push(t,r.op,r.op1,r.op2):void 0!==r.op1?e.push(t,r.op,r.op1):e.push(t,r.op)}class As{constructor(){this.names={},this.funcs=[]}add(e,t){this.names[e]=this.funcs.push(t)-1}compile(e,t){let r=e[0],n=this.names[r];return(0,this.funcs[n])(e,t)}}const Is=new As;function Ns(e,t,r,n){switch(r.op){case"SimpleArgs":Ds(e,t,function(e,t,r){let n=[],{count:s,actions:i}=si(e);n.push(i);let l=s<<4;r&&(l|=8);let a=z;if(t){a=t[0];let e=t[1];for(let t=0;t<e.length;t++)n.push(ri("Expr",e[t]))}return n.push(ri(84,as(a),as(z),l)),n}(r.op1.params,r.op1.hash,r.op1.atNames),n);break;case"Expr":Ds(e,t,(s=r.op1,i=t.meta,Array.isArray(s)?Is.compile(s,i):[bs(s),ri(31)]),n);break;case"IfResolved":Ds(e,t,function(e,{op1:t}){let{kind:r,name:n,andThen:s,orElse:i,span:l}=t,a=function(e,t,r,n){switch(t){case"Modifier":return e.lookupModifier(r,n);case"Helper":return e.lookupHelper(r,n);case"ComponentDefinition":{let t=e.lookupComponent(r,n);return t&&t.handle}}}(e.syntax.program.resolverDelegate,r,n,e.meta.referrer);return null!==a?s(a):i?i():ti(`Unexpected ${r} ${n}`,l.start,l.end)}(t,r),n);break;case"ResolveFree":throw new Error("Unimplemented HighLevelResolutionOpcode.ResolveFree");case"ResolveContextualFree":{let{freeVar:s,context:i}=r.op1;if(t.meta.asPartial){Ds(e,t,[ri(105,t.meta.upvars[s])],n);break}switch(i){case"Expression":{let r=t.meta.upvars[s];Ds(e,t,[ri(22,0),ri(23,r)],n);break}case"AppendSingleId":{let r,i=t.syntax.program.resolverDelegate,l=t.meta.upvars[s],a=i.lookupHelper(l,t.meta.referrer);r=a?ys({handle:a,params:null,hash:null}):[ri(22,0),ri(23,l)],Ds(e,t,r,n);break}default:throw new Error("unimplemented: Can't evaluate expression in context "+i)}break}default:return V(r)}var s,i}Is.add(32,([,e])=>{let t=[];for(let r of e)t.push(ri("Expr",r));return t.push(ri(28,e.length)),t}),Is.add(31,([,e,t,r,n,s],i)=>{if(function(e,t){if(!Array.isArray(e))return!1;if(27===e[0]){let r=e[1];return!(26!==r[0]||!t.upvars||"component"!==t.upvars[r[1]])}return!1}(r,i)){if(!n||0===n.length)return ri("Error",{problem:"component helper requires at least one argument",start:e,end:e+t});let[r,...l]=n;return function({definition:e,params:t,hash:r,atNames:n},s){return[ri(0),ri("SimpleArgs",{params:t,hash:r,atNames:n}),ri(88),ri("Expr",e),ri(79,os(s)),ri(1),ri(36,8)]}({definition:r,params:l,hash:s,atNames:!1},i.referrer)}let l=Zs(r,i,"Expected call head to be a string");return"string"!=typeof l?l:ri("IfResolved",{kind:"Helper",name:l,andThen:e=>ys({handle:e,params:n,hash:s}),span:{start:e,end:e+t}})}),Is.add(24,([,e])=>[ri(22,e)]),Is.add(27,([,e,t])=>[ri("Expr",e),...t.map(e=>ri(23,e))]),Is.add(25,([,e])=>ri("ResolveFree",e)),Is.add(26,([,e,t])=>ri("ResolveContextualFree",{freeVar:e,context:t})),Is.add(30,()=>gs(void 0)),Is.add(28,([,e])=>[ri("Expr",e),ri(26)]),Is.add(29,([,e])=>[ri("Expr",e),ri(25),ri("JitCompileBlock"),ri(27)]);const Bs={"no-action":!0},zs={"not-handled":!0};function Ls(e){return e&&!!e["no-action"]}function js(e){return!e||!e["not-handled"]}function Rs(e,t){if(!Ls(t))if(Array.isArray(t))for(let r of t)Rs(e,r);else"Simple"===t.type?Ps(e,t):Ms(e.encoder,e.syntax.program.constants,t)}function Ds(e,t,r,n){if(!Ls(r))if(Array.isArray(r))for(let s of r)Ds(e,t,s,n);else if("Number"===r.type)Ms(e,n,r);else if("Resolution"===r.type)Ns(e,t,r,n);else if("Simple"===r.type)Ps(t,r);else{if("Error"!==r.type)throw we(r,"unexpected action kind");e.error({problem:r.op1.problem,span:{start:r.op1.start,end:r.op1.end}})}}function Hs(e,t){if(!Ls(t))if(Array.isArray(t))for(let r of t)Hs(e,r);else if("Number"===t.type)Ms(e.encoder,e.syntax.program.constants,t);else if("Compile"===t.type)_s(e,t);else if("Resolution"===t.type)Ns(e.encoder,e,t,e.syntax.program.constants);else if("Simple"===t.type)Ps(e,t);else if("Error"!==t.type)throw we(t,"unexpected action type")}class Fs{constructor(){let{blocks:e,inlines:t}=function(e,t){return e.add("if",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #if requires a single argument");return Ts({args:()=>({count:1,actions:[ri("Expr",e[0]),ri(71)]}),ifTrue:()=>xs(r.get("default")),ifFalse:()=>r.has("else")?xs(r.get("else")):Bs})}),e.add("unless",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #unless requires a single argument");return Ts({args:()=>({count:1,actions:[ri("Expr",e[0]),ri(71)]}),ifTrue:()=>r.has("else")?xs(r.get("else")):Bs,ifFalse:()=>xs(r.get("default"))})}),e.add("with",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #with requires a single argument");return Ts({args:()=>({count:2,actions:[ri("Expr",e[0]),ri(33,3,0),ri(71)]}),ifTrue:()=>Ss(r.get("default"),1),ifFalse:()=>r.has("else")?xs(r.get("else")):Bs})}),e.add("let",(e,t,r)=>{if(!e)return ti("let requires arguments",0,0);let{count:n,actions:s}=si(e);return[s,Ss(r.get("default"),n)]}),e.add("each",(e,t,r)=>Cs({args(){let r;return r=t&&"key"===t[0][0]?[ri("Expr",t[1][0])]:[gs(null)],r.push(ri("Expr",e[0])),{count:2,actions:r}},body(){let e=[ri(74),ri(66,cs("ELSE")),ri(0),ri(33,2,1),ri(6,cs("ITER")),ri(72,cs("BODY")),ri("Label","ITER"),ri(75,cs("BREAK")),ri("Label","BODY"),Ss(r.get("default"),2),ri(34,2),ri(4,cs("FINALLY")),ri("Label","BREAK"),ri(73),ri(1),ri(4,cs("FINALLY")),ri("Label","ELSE")];return r.has("else")&&e.push(xs(r.get("else"))),e}})),e.add("in-element",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #in-element requires a single argument");return Ts({args(){let[r,n]=t,s=[];for(let e=0;e<r.length;e++){let t=r[e];if("guid"!==t&&"insertBefore"!==t)throw new Error(`SYNTAX ERROR: #in-element does not take a \`${r[0]}\` option`);s.push(ri("Expr",n[e]))}return s.push(ri("Expr",e[0]),ri(33,3,0)),{count:4,actions:s}},ifTrue:()=>[ri(50),xs(r.get("default")),ri(56)]})}),e.add("-with-dynamic-vars",(e,t,r)=>{if(t){let[e,n]=t,{actions:s}=si(n);return[s,vs(e,()=>xs(r.get("default")))]}return xs(r.get("default"))}),e.add("component",(e,t,r,n)=>{if("string"==typeof e[0]){let s=ai(n,e[0],t,r.get("default"));if(js(s))return s}let[s,...i]=e;return ri("DynamicComponent",{definition:s,attrs:null,params:i,args:t,atNames:!1,blocks:r})}),t.add("component",(e,t,r,n)=>{let s=t&&t[0];if("string"==typeof s){let e=ai(n,s,r,null);if(e!==zs)return e}let[i,...l]=t;return ui(n.meta,{definition:i,attrs:null,params:l,hash:r,atNames:!1,blocks:Xs})}),{blocks:e,inlines:t}}(new Us,new Vs);this.blocks=e,this.inlines=t}}class Us{constructor(){this.names=D(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t,r,n,s){let i=this.names[e],l={resolver:s.syntax.program.resolverDelegate,meta:s.meta};if(void 0===i){return(0,this.missing)(e,t,r,n,l)}return(0,this.funcs[i])(t,r,n,l)}}class Vs{constructor(){this.names=D(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t){let r,n,s,[,,,,i]=e;if(!Array.isArray(i))return zs;if(31===i[0]){let e=Zs(i[3],t.meta,"Expected head of call to be a string");if("string"!=typeof e)return e;r=e,n=i[4],s=i[5]}else{if(27!==i[0])return zs;{let e=function([,e,t],r){if(t.length>0)return null;if(25===e[0]||26===e[0])return r.upvars[e[1]];return null}(i,t.meta);if(null===e)return zs;r=e,n=null,s=null}}let l=this.names[r],a={resolver:t.syntax.program.resolverDelegate,meta:t.meta};if(void 0===l&&this.missing){return(0,this.missing)(r,n,s,a)}if(void 0!==l){return(0,this.funcs[l])(r,n,s,a)}return zs}}function $s(e,t){return{syntax:e,encoder:new ni,meta:t}}const Ws=new As;Ws.add(2,e=>ri(42,e[1])),Ws.add(11,()=>ri(55)),Ws.add(10,()=>ri(54)),Ws.add(3,(e,t)=>{let[,,,r,n,s]=e,i=Zs(r,t,"Expected modifier head to be a string");return"string"!=typeof i?i:ri("IfResolved",{kind:"Modifier",name:i,andThen:e=>[ri(0),ri("SimpleArgs",{params:n,hash:s,atNames:!1}),ri(57,e),ri(1)],span:{start:0,end:0}})}),Ws.add(12,([,e,t,r])=>ri(51,e,t,r)),Ws.add(23,([,e,t,r])=>ri(108,e,t,r)),Ws.add(13,([,e,t,r])=>[ri("Expr",t),ri(52,e,!1,r)]),Ws.add(20,([,e,t,r])=>[ri("Expr",t),ri(52,e,!0,r)]),Ws.add(14,([,e,t,r])=>[ri("Expr",t),ri(53,e,!1,r)]),Ws.add(21,([,e,t,r])=>[ri("Expr",t),ri(53,e,!0,r)]),Ws.add(9,([,e,t])=>t?ri(48,e):[ri(91),ri(48,e)]),Ws.add(7,([,e,t,r,n])=>"string"==typeof e?ri("IfResolvedComponent",{name:e,attrs:t,blocks:n,staticTemplate:(e,t,n,{blocks:s,attrs:i})=>[ri(80,e),oi({capabilities:t,layout:n,attrs:i,params:null,hash:r,blocks:s})],dynamicTemplate:(e,t,{attrs:n,blocks:s})=>[ri(80,e),ci({capabilities:t,attrs:n,params:null,hash:r,atNames:!0,blocks:s})]}):ri("DynamicComponent",{definition:e,attrs:t,params:null,args:r,blocks:n,atNames:!0})),Ws.add(17,([,e,t],r)=>Ts({args:()=>({count:2,actions:[ri("Expr",e),ri(33,3,0)]}),ifTrue:()=>[ri(104,os(r.referrer),as(r.evalSymbols),ls(t)),ri(40),ri(1)]})),Ws.add(16,([,e,t])=>ws(e,t)),Ws.add(15,([,e])=>ws(e,z)),Ws.add(22,([,e],t)=>ri(106,as(t.evalSymbols),ls(e))),Ws.add(1,e=>{let[,t,,,r]=e;return"string"==typeof r&&t?ri(41,r):ri("CompileInline",{inline:e,ifUnhandled:()=>[ri(0),ri("Expr",r),ri(3,{type:"stdlib",value:t?"trusting-append":"cautious-append"}),ri(1)]})}),Ws.add(5,e=>ri("CompileBlock",e));const Gs=-1;class Js{constructor(e,t,r){this.statements=e,this.meta=t,this.symbolTable=r,this.compiled=null}compile(e){return function(e,t){if(null!==e.compiled)return e.compiled;e.compiled=Gs;let{statements:r,meta:n}=e,s=function(e,t,r){let n=Ws,s=$s(r,t);for(let t=0;t<e.length;t++)Hs(s,n.compile(e[t],s.meta));0;return s.encoder.commit(r.program.heap,t.size)}(r,n,t);return Pr(t.program),e.compiled=s,s}(this,e)}}function qs(e){let t=e.block;return new Js(t.statements,ii(e),{symbols:t.symbols,hasEval:t.hasEval})}function Ks(e,t){let r=Array.isArray(e)?{statements:e,parameters:z}:e;return new Js(r.statements,t,{parameters:r.parameters})}class Ys{constructor(e){this.blocks=e,this.names=e?Object.keys(e):[]}get(e){return this.blocks&&this.blocks[e]||null}has(e){let{blocks:t}=this;return null!==t&&e in t}with(e,t){let{blocks:r}=this;return new Ys(r?pe({},r,{[e]:t}):{[e]:t})}get hasAny(){return null!==this.blocks}}const Xs=new Ys(null);function Qs(e,t){if(null===e)return Xs;let r=D(),[n,s]=e;for(let e=0;e<n.length;e++)r[n[e]]=Ks(s[e],t);return new Ys(r)}function Zs(e,t,r){if(!t.upvars)return ti(r+", but there were no free variables in the template",0,0);if(!Array.isArray(e)||27!==e[0])throw new Error(`${r}, got ${JSON.stringify(e)}`);if(0!==e[2].length)throw new Error(`${r}, got ${JSON.stringify(e)}`);if(26===e[1][0]||25===e[1][0]){let r=e[1][1];return t.upvars[r]}throw new Error(`${r}, got ${JSON.stringify(e)}`)}class ei{constructor(){this.labels=D(),this.targets=[]}label(e,t){this.labels[e]=t}target(e,t){this.targets.push({at:e,target:t})}patch(e){let{targets:t,labels:r}=this;for(let n=0;n<t.length;n++){let{at:s,target:i}=t[n],l=r[i]-s;e.patch(s,l)}}}function ti(e,t,r){return ri("Error",{problem:e,start:t,end:r})}function ri(e,t,r,n){if("number"==typeof e)return void 0!==n?{type:"Number",op:e,op1:t,op2:r,op3:n}:void 0!==r?{type:"Number",op:e,op1:t,op2:r}:void 0!==t?{type:"Number",op:e,op1:t}:{type:"Number",op:e};{let r;if("CompileInline"===(s=e)||"CompileBlock"===s||"InvokeStatic"===s||"PushCompilable"===s||"Args"===s||"IfResolvedComponent"===s||"DynamicComponent"===s)r="Compile";else if(function(e){return"IfResolved"===e||"Expr"===e||"SimpleArgs"===e||"ResolveFree"===e||"ResolveContextualFree"===e}(e))r="Resolution";else if(function(e){return"Label"===e||"Option"===e||"GetComponentLayout"===e||"StartLabels"===e||"StopLabels"===e||"SimpleArgs"===e||"JitCompileBlock"===e||"SetBlock"===e}(e))r="Simple";else{if(!function(e){return"Error"===e}(e))throw new Error("Exhausted "+e);r="Error"}return void 0===t?{type:r,op:e,op1:void 0}:{type:r,op:e,op1:t}}var s}class ni{constructor(){this.labelsStack=new F,this.encoder=new fs([]),this.errors=[]}error(e){this.encoder.encode(30,0),this.errors.push(e)}commit(e,t){this.encoder.encode(5,1024);let r=function(e,t,r){let n=e.malloc();for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?e.pushPlaceholder(n):"object"==typeof n?e.pushStdlib(n):e.push(n)}return e.finishMalloc(n,t),n}(e,t,this.encoder.buffer);return this.errors.length?{errors:this.errors,handle:r}:r}push(e,t,...r){if((n=t)>=0&&n<=15){let n=r.map((t,r)=>this.operand(e,t,r));return this.encoder.encode(t,1024,...n)}{let n=r.map((t,r)=>this.operand(e,t,r));return this.encoder.encode(t,0,...n)}var n}operand(e,t,r){return t&&"object"==typeof t&&"label"===t.type?(this.currentLabels.target(this.encoder.size+r,t.value),-1):function(e,t){if("number"==typeof t||"function"==typeof t)return t;if("boolean"==typeof t)return!0===t?1:0;if("string"==typeof t)return e.string(t);if(null===t)return 0;switch(t.type){case"array":return e.array(t.value);case"string-array":return e.stringArray(t.value);case"serializable":return e.serializable(t.value);case"template-meta":return e.templateMeta(t.value);case"other":return e.other(t.value);case"stdlib":return t;case"primitive":switch(t.value.type){case 1:return ge(e.string(t.value.primitive),1073741823,-1);case 2:return ge(e.number(t.value.primitive),1073741823,-1073741825);case 0:return de(t.value.primitive);default:return V(t.value)}case"lookup":throw U("lookup not reachable");default:return V(t)}}(e,t)}get currentLabels(){return this.labelsStack.current}label(e){this.currentLabels.label(e,this.encoder.size)}startLabels(){this.labelsStack.push(new ei)}stopLabels(){this.labelsStack.pop().patch(this.encoder)}}function si(e){if(!e)return{count:0,actions:Bs};let t=[];for(let r=0;r<e.length;r++)t.push(ri("Expr",e[r]));return{count:e.length,actions:t}}function ii(e){return{asPartial:e.asPartial||!1,evalSymbols:li(e),upvars:e.block.upvars,referrer:e.referrer,size:e.block.symbols.length}}function li(e){let{block:t}=e;return t.hasEval?t.symbols:null}function ai(e,t,r,n){let s=ms(t,e);if(null!==s){let{compilable:e,handle:t,capabilities:i}=s;if(e){if(r)for(let e=0;e<r.length;e+=2)r[e][0]="@"+r[e][0];let s=[ri(80,t)];return s.push(oi({capabilities:i,layout:e,attrs:null,params:null,hash:r,blocks:new Ys({default:n})})),s}}return zs}function oi({capabilities:e,layout:t,attrs:r,params:n,hash:s,blocks:i}){let{symbolTable:l}=t;if(l.hasEval||e.prepareArgs)return ci({capabilities:e,attrs:r,params:n,hash:s,atNames:!0,blocks:i,layout:t});let a=[ri(36,4),ri(33,3,1),ri(35,4)],{symbols:o}=l;e.createArgs&&a.push(ri(0),ri("SimpleArgs",{params:n,hash:s,atNames:!0})),a.push(ri(100)),e.dynamicScope&&a.push(ri(59)),e.createInstance&&a.push(ri(89,0|i.has("default"),4)),e.createArgs&&a.push(ri(1)),a.push(ri(0),ri(90,4));let u=[];a.push(ri(92,4)),u.push({symbol:0,isBlock:!1});for(let e=0;e<o.length;e++){let t=o[e];switch(t.charAt(0)){case"&":let n;n="&attrs"===t?r:i.get(t.slice(1)),n?(a.push(ks(n)),u.push({symbol:e+1,isBlock:!0})):(a.push(ks(null)),u.push({symbol:e+1,isBlock:!0}));break;case"@":if(!s)break;let[l,o]=s,c=t,h=l.indexOf(c);-1!==h&&(a.push(ri("Expr",o[h])),u.push({symbol:e+1,isBlock:!1}))}}a.push(ri(37,o.length+1,Object.keys(i).length>0?1:0));for(let e=u.length-1;e>=0;e--){let{symbol:t,isBlock:r}=u[e];r?a.push(ri("SetBlock",t)):a.push(ri(19,t))}return a.push(ri("InvokeStatic",t)),e.createInstance&&a.push(ri(103,4)),a.push(ri(1),ri(40)),e.dynamicScope&&a.push(ri(60)),a.push(ri(101),ri(35,4)),a}function ui(e,{definition:t,attrs:r,params:n,hash:s,atNames:i,blocks:l}){return Cs({args:()=>({count:2,actions:[ri("Expr",t),ri(33,3,0)]}),body:()=>[ri(66,cs("ELSE")),ri(83,os(e.referrer)),ri(81),ci({capabilities:!0,attrs:r,params:n,hash:s,atNames:i,blocks:l}),ri("Label","ELSE")]})}function ci({capabilities:e,attrs:t,params:r,hash:n,atNames:s,blocks:i,layout:l}){let a=!!i,o=!0===e||e.prepareArgs||!(!n||0===n[0].length),u=i.with("attrs",t);return[ri(36,4),ri(33,3,1),ri(35,4),ri(0),ri("Args",{params:r,hash:n,blocks:u,atNames:s}),ri(87,4),hi(u.has("default"),a,o,()=>{let e;return e=l?[Es(l.symbolTable),ri("PushCompilable",l),ri("JitCompileBlock")]:[ri("GetComponentLayout",4)],e.push(ri(98,4)),e}),ri(35,4)]}function hi(e,t,r,n=null){let s=[ri(100),ri(59),ri(89,0|e,4)];return n&&s.push(n()),s.push(ri(90,4),ri(92,4),ri(38,4),ri(19,0),ri(97,4),r?ri(17,4):Bs,t?ri(18,4):Bs,ri(34,1),ri(99,4),ri(103,4),ri(1),ri(40),ri(60),ri(101)),s}function pi(e){return Ks(e.block.statements,ii(e))}class di{constructor(e,t,r){this.main=e,this.trustingGuardedAppend=t,this.cautiousGuardedAppend=r}get"trusting-append"(){return this.trustingGuardedAppend}get"cautious-append"(){return this.cautiousGuardedAppend}getAppend(e){return e?this.trustingGuardedAppend:this.cautiousGuardedAppend}}function mi(){return[ri(76,4),hi(!1,!1,!0)]}function fi(e){return[ri(78),Os(t=>{t(1,()=>e?[ri(68),ri(43)]:ri(47)),t(0,()=>[ri(82),ri(81),[ri(36,4),ri(33,3,1),ri(35,4),ri(0),ri(85),ri(87,4),hi(!1,!1,!0,()=>[ri("GetComponentLayout",4),ri(98,4)]),ri(35,4)]]),t(3,()=>[ri(68),ri(44)]),t(4,()=>[ri(68),ri(45)]),t(5,()=>[ri(68),ri(46)])})]}function gi(e){let t=yi(e,mi),r=yi(e,()=>fi(!0)),n=yi(e,()=>fi(!1));return new di(t,r,n)}const bi={asPartial:!1,evalSymbols:null,upvars:null,referrer:{},size:0};function yi(e,t){let r=new ni,n=new Fs;Rs({encoder:r,meta:bi,syntax:{macros:n,program:e}},t());let s=r.commit(e.heap,0);if("number"!=typeof s)throw new Error("Unexpected errors compiling std");return s}class vi{constructor(e){this.constants=new yr,this.heap=new Sr,this.mode="jit",this.resolverDelegate=e,this.stdlib=gi(this)}}class wi{constructor(e){this.layout=e,this.compiled=null;let{block:t}=e,r=t.symbols.slice(),n=r.indexOf("&attrs");this.attrsBlockNumber=-1===n?r.push("&attrs"):n+1,this.symbolTable={hasEval:t.hasEval,symbols:r}}compile(e){if(null!==this.compiled)return this.compiled;let t=ii(this.layout),r=$s(e,t);var n,s,i,l;Hs(r,(n=this.layout,s=this.attrsBlockNumber,[ri("StartLabels"),(i=5,l=()=>[ri(93,4),ri(31),ri(33,3,0)],[ri(36,i),l(),ri(35,i)]),ri(66,cs("BODY")),ri(36,5),ri(91),ri(49),ri(102,4),ws(s,z),ri(54),ri("Label","BODY"),xs(pi(n)),ri(36,5),ri(66,cs("END")),ri(55),ri("Label","END"),ri(35,5),ri("StopLabels")]));let a=r.encoder.commit(r.syntax.program.heap,t.size);return"number"!=typeof a||(this.compiled=a,Pr(r.syntax.program)),a}}let ki=0;function xi({id:e,meta:t,block:r}){let n,s=e||"client-"+ki++;return{id:s,meta:t,create:e=>{let i=e?pe({},e,t):t;return n||(n=JSON.parse(r)),new Si({id:s,block:n,referrer:i})}}}class Si{constructor(e){this.parsedLayout=e,this.result="ok",this.layout=null,this.partial=null,this.wrappedLayout=null;let{block:t}=e;this.symbols=t.symbols,this.hasEval=t.hasEval,this.referrer=e.referrer,this.id=e.id||"client-"+ki++}asLayout(){return this.layout?this.layout:this.layout=qs(pe({},this.parsedLayout,{asPartial:!1}))}asPartial(){return this.partial?this.partial:this.layout=qs(pe({},this.parsedLayout,{asPartial:!0}))}asWrappedLayout(){return this.wrappedLayout?this.wrappedLayout:this.wrappedLayout=new wi(pe({},this.parsedLayout,{asPartial:!1}))}}function Ei(e){return Array.isArray(e)?0!==e.length:Boolean(e)}class Oi{constructor(){this.toBool=Ei}toIterator(e){return function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)?class{constructor(e,t){this.iterable=e,this.result=t,this.position=0}static from(e){const t=e[Symbol.iterator](),r=t.next(),{done:n}=r;return!0===n?null:new this(t,r)}isEmpty(){return!1}next(){const{iterable:e,result:t,position:r}=this;if(t.done)return null;const n=t.value,s=r;return this.position++,this.result=e.next(),{value:n,memo:s}}}.from(e):null}}class Ci extends Oi{constructor(){super(...arguments),this.isInteractive=!0,this.uselessAnchor=self.document.createElement("a"),this.protocolForURL=e=>(this.uselessAnchor.href=e,this.uselessAnchor.protocol)}}const Ti=new WeakMap,Pi=Object.getPrototypeOf;function _i(e,t){return Ti.set(t,e),t}const Mi=new WeakMap,Ai=`__OWNER_${Math.floor(Math.random()*Date.now())}__`;let Ii={};const Ni=new WeakMap,Bi=new WeakMap,zi=Object.getPrototypeOf;function Li(e,t){return Ni.set(t,e),t}function ji(e){let t=e;for(;null!=t;){const e=Ni.get(t);if(void 0!==e)return e;t=zi(t)}}function Ri(e,t){let r=Bi.get(e);void 0===r&&(r=new WeakMap,Bi.set(e,r));let n=r.get(t);return void 0===n&&(n=t(e),r.set(t,n)),n}function Di(e,t){const r=ji(t);if(void 0!==r&&"component"===r.type)return Ri(e,r.factory)}function Hi(e){if("symbol"==typeof e)return null;const t=Number(e);return isNaN(t)?null:t%1==0?t:null}function Fi(e,t){const{named:r,positional:n}=e,s={get(e,t){if(r.has(t)){const e=r.get(t);return A(e.tag),e.value()}},has:(e,t)=>r.has(t),ownKeys:e=>r.names,isExtensible:()=>!1,getOwnPropertyDescriptor:(e,t)=>({enumerable:!0,configurable:!0})},i={get(e,t){if("length"===t)return A(n.tag),n.length;const r=Hi(t);if(null!==r&&r<n.length){const e=n.at(r);return A(e.tag),e.value()}return e[t]},isExtensible:()=>!1,has(e,t){const r=Hi(t);return null!==r&&r<n.length}},l=Object.create(null);return{named:new Proxy(l,s),positional:new Proxy([],i)}}const Ui={createInstance:!0,dynamicLayout:!1,dynamicTag:!1,wrapped:!1,prepareArgs:!1,createArgs:!0,attributeHook:!1,elementHook:!1,updateHook:!1,createCaller:!1,dynamicScope:!0,willDestroy:!1};function Vi(e){return e.capabilities.asyncLifecycleCallbacks}function $i(e){return e.capabilities.updateHook}function Wi(e){return e.capabilities.destructor}class Gi{constructor(e,t,r,n,s){this.env=e,this.delegate=t,this.component=r,this.args=n,this.argsProxy=s}destroy(){const{delegate:e,component:t}=this;Wi(e)&&e.destroyComponent(t)}}const Ji=new class{create(e,t,r,n){const{ComponentDefinition:s}=t,i=r.capture(),l=Di(n.get(Ai).value(),s),a=Fi(i),o=l.createComponent(s,a);return new Gi(e,l,o,i,a)}update({delegate:e,component:t,argsProxy:r}){$i(e)&&e.updateComponent(t,r)}didCreate({delegate:e,component:t}){Vi(e)&&e.didCreateComponent(t)}didUpdate({delegate:e,component:t}){(function(e){return Vi(e)&&$i(e)})(e)&&e.didUpdateComponent(t)}getContext({delegate:e,component:t}){e.getContext(t)}getSelf({env:e,delegate:t,component:r}){return new at(t.getContext(r),e)}getDestructor(e){return Wi(e.delegate)?e:null}getCapabilities({capabilities:e}){return Object.assign({},Ui,{updateHook:e.updateHook})}getTag({args:e}){return b(e)?m():e.tag}didRenderLayout(){}didUpdateLayout(){}getJitStaticLayout({definition:e}){return e.template.asLayout()}};class qi{constructor(e,t,r){this.manager=Ji,this.handle=e,this.template=ve(r);const n=Di(Ii,t).capabilities;this.state={ComponentDefinition:t,capabilities:n,definition:this}}}function Ki(e){let t,r,n;return()=>(r&&u(r,n)||(r=M(()=>t=e()),n=o()),A(r),t)}function Yi(e){return(t,r)=>{const n=function(e,t){const r=ji(t);if(void 0!==r&&"helper"===r.type)return Ri(e,r.factory)}(r.dynamicScope().get(Ai).value(),e),s=t.capture();let i;if(void 0!==n)i=function(e,t,r,n){let s;const i=Fi(r),l=e.capabilities.updateHook;(function(e){return e.capabilities.destructor})(e)&&n.associateDestroyable({destroy(){void 0!==s&&e.destroyHelper(s)}});const a=Ki(()=>e.getValue(s)),o=Ki(()=>{void 0===s?s=e.createHelper(t,i):l&&e.updateHelper(s,i)});return()=>(o(),a())}(n,e,s,r);else{0;const t=e;i=e=>t(...e.positional.value())}return new ot(i,s,r.env)}}const Xi={attributeHook:!1,createArgs:!1,createCaller:!1,createInstance:!0,dynamicLayout:!1,dynamicScope:!1,dynamicTag:!1,elementHook:!1,prepareArgs:!1,updateHook:!1,wrapped:!1,willDestroy:!1};const Qi=new Qe(null);class Zi{static create(){return new Zi}getCapabilities(){return Xi}getJitStaticLayout({definition:e}){return e.template.asLayout()}create(e,t){}getSelf(e){return Qi}getTag(){return g}didRenderLayout(){}didCreate(){}didUpdateLayout(){}didUpdate(){}getDestructor(){return null}}const el=new Zi;class tl{constructor(e,t,r){this.manager=el,this.handle=e,this.template=ve(r),this.state={name:t,definition:this}}}class rl{}function nl(e,t={}){return L("3.13"===e,"Invalid component manager compatibility specified"),{disableAutoTracking:Boolean(t.disableAutoTracking)}}const sl=new class{constructor(){this.capabilities=nl("3.13")}createModifier(e,t){return{definition:e}}installModifier(e,t,r){e.destructor=e.definition(t,...r.positional),e.element=t}updateModifier(e,t){this.destroyModifier(e),this.installModifier(e,e.element,t)}destroyModifier(e){const{destructor:t}=e;void 0!==t&&t()}};class il{constructor(e,t,r,n,s){this.element=e,this.delegate=t,this.modifier=r,this.argsProxy=n,this.capturedArgs=s,this.tag=f()}destroy(){const{delegate:e,modifier:t,argsProxy:r}=this;e.destroyModifier(t,r)}}const ll=new class{create(e,t,r,n){let s=function(e,t){const r=ji(t);if(void 0!==r&&"modifier"===r.type)return Ri(e,r.factory)}(n.get(Ai).value(),t);void 0===s&&(s=sl);const i=r.capture(),l=Fi(i),a=s.createModifier(t,l);return new il(e,s,a,l,i)}getTag({tag:e,capturedArgs:t}){return v([e,t.tag])}install(e){const{element:t,argsProxy:r,delegate:n,modifier:s,tag:i}=e;if(!0===n.capabilities.disableAutoTracking)I(()=>n.installModifier(s,t,r));else{const e=M(()=>n.installModifier(s,t,r));d(i,e)}}update(e){const{argsProxy:t,delegate:r,modifier:n,tag:s}=e;if(!0===r.capabilities.disableAutoTracking)I(()=>r.updateModifier(n,t));else{const e=M(()=>r.updateModifier(n,t));d(s,e)}}getDestructor(e){return e}};class al{constructor(e,t){this.handle=e,this.state=t,this.manager=ll}}let ol=0;const ul=new WeakMap,cl=new WeakMap,hl=new WeakMap;function pl(e){return ul.get(e)||function(e){const t=xi(function(e){let t=e;for(;null!=t;){const e=Ti.get(t);if(void 0!==e)return e;t=Pi(t)}}(e)).create();let r;r=e instanceof rl?new tl(ol++,"template-only-component",t):new qi(ol++,e,t);return ul.set(e,r),r}(e)}function dl(e){return cl.get(e)||function(e){const t={helper:Yi(e),handle:ol++};return cl.set(e,t),t}(e)}function ml(e){return hl.get(e)||function(e){const t=new al(ol++,e);return hl.set(e,t),t}(e)}const fl={if:(gl=function(e,t){return new ot(({positional:e})=>{if(e.length>3)throw new Error('The inline form of the `if` helper expects two or three arguments, e.g. `{{if trialExpired "Expired" expiryDate}}`.');const t=e.at(0),r=e.at(1),n=e.at(2);return!0===Ei(t.value())?r.value():void 0!==n?n.value():void 0},e.capture(),t.env,"if")},{helper:gl,handle:ol++})};var gl;let bl=[];var yl=async function(e,t){const r=t instanceof HTMLElement?{element:t}:t,{element:n,args:s,owner:i}=r,l=function(e,t,r,n,s={},i=Ii){const l=function(e,t={},r,n={}){return{env:new Br(e,t),program:new Er(r.program.constants,r.program.heap),resolver:new Fr(n)}}(r,n,xl,kl),a=(u=l.env,c={element:t,nextSibling:null},$e.forInitialRender(u,c)),o=kl.registerRoot(e);var u,c;let h;i&&(h=new Pn({[Ai]:new Qe(i)}));return function(e,t,r,n,s,i={},l=new Pn){let a=ns.empty(e,{treeBuilder:t,handle:n,dynamicScope:l},r);const o=rn(a.runtime.resolver,s),{manager:u,state:c}=o;let h;if(!yn(Kr(u.getCapabilities(c))))throw new Error("Cannot invoke components with dynamic layouts as a root component.");{let e=u.getJitStaticLayout(c,a.runtime.resolver),t=ye(e.compile(r));if(Array.isArray(t)){let e=t[0];throw new Error(`Compile Error: ${e.problem} ${e.span.start}..${e.span.end} :: TODO (thread better)`)}h={handle:t,symbolTable:e.symbolTable}}return is(a,h,o,i)}(l,a,xl,0,o,function(e,t){const r=new at(e,t);return Object.keys(e).reduce((e,t)=>(e[t]=r.get(t),e),{})}(s,l.env),h)}(e,n,{document:self.document},new Ci,s,i).sync();vl.push(l)};const vl=[];k=function(){wl||(wl=!0,setTimeout(()=>{wl=!1;try{!function(){for(const e of vl){const{env:t}=e;t.begin(),e.rerender(),t.commit()}}(),bl.forEach(([e])=>e())}catch(e){bl.forEach(([,t])=>t(e))}bl=[]},0))};let wl=!1;const kl=new class{constructor(){this.registry=[]}registerRoot(e){const t=pl(e),{handle:r}=t;return this.registry[r]=t,r}lookupComponent(e,t){return this.registry[e]}resolve(e){return this.registry[e]}compilable(e){throw new Error("Method not implemented.")}lookupPartial(e,t){throw new Error("Method not implemented.")}},xl=function(e={},t=new Fs){return{program:new vi(new ds(e)),macros:t}}(new class{constructor(e){this.inner=e}lookupHelper(e,t){const r=t.scope(),{helper:n,handle:s}=fl[e]||dl(r[e]);return this.inner.registry[s]=n,s}lookupModifier(e,t){const r=ml(t.scope()[e]),{handle:n}=r;return this.inner.registry[n]=r,n}lookupComponent(e,t){const r=t.scope()[e];const n=pl(r),{state:s,manager:i,template:l,handle:a}=n;return this.inner.registry[a]=n,{handle:a,capabilities:i.getCapabilities(s),compilable:ve(l).asLayout()}}resolve(e){return this.inner.resolve(e)}lookupPartial(e,t){throw new Error("Method not implemented.")}}(kl));function Sl(e,t){if(t instanceof Element)return yl(e,t);const{element:r,args:n,services:i}=t,l=new s(null!=i?i:{});return yl(e,{element:r,args:n,owner:l})}const El=new WeakMap,Ol=new WeakMap;const Cl=function(e,t={}){L("3.4"===e||"3.13"===e,"Invalid component manager compatibility specified");const r="3.4"===e||Boolean(t.updateHook);return{asyncLifecycleCallbacks:Boolean(t.asyncLifecycleCallbacks),destructor:Boolean(t.destructor),updateHook:r}}("3.13",{destructor:!0});class Tl extends class{constructor(e){this.owner=e}createComponent(e,t){return new e(this.owner,t.named)}getContext(e){return e}}{constructor(){super(...arguments),this.capabilities=Cl}destroyComponent(e){!function(e){El.set(e,!0)}(e),e.willDestroy(),function(e){Ol.set(e,!0)}(e)}}class Pl extends class{constructor(e,t){this.args=t,El.set(this,!1),Ol.set(this,!1)}get isDestroying(){return El.get(this)||!1}get isDestroyed(){return Ol.get(this)||!1}willDestroy(){}}{constructor(e,t){super(e,t),function(e,t){Mi.set(e,t)}(this,e)}}Li({factory:e=>new Tl(e),type:"component"},Pl);const _l=(...e)=>{const[t,r,n]=e;if(n)return Ml(t,r,n);Object.defineProperty(t,r,Ml(t,r))};function Ml(e,t,r){const{getter:n,setter:s}=B(t,r&&r.initializer);return{enumerable:!0,configurable:!0,get(){return n(this)},set(e){s(this,e)}}}function Al(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Il{constructor(e,t,r,n,s){Al(this,"key",void 0),Al(this,"label",void 0),Al(this,"items",void 0),Al(this,"isEmpty",void 0),Al(this,"empty",void 0),this.key=e,this.label=t,this.items=r,this.isEmpty=n,this.empty=s}item(e){return this.items[e]}length(){return this.items.length}}function Nl(e,t){const r=Object.keys(e);if(0===r.length)throw new Error("No facet field found. "+e);if(e.hasOwnProperty("#attributes")&&e["#attributes"].class.includes("facet-empty"))return function(e){return new Il(e["#attributes"]["data-drupal-facet-id"],"",[],!0,e)}(e);const n=r[0],s=e[n].map(e=>({key:n,value:e.values.value,count:e.values.count,url:e.url,frag:`${zl(n,t)}:${e.values.value}`})),i=function(e,t){return Object.values(t).find(t=>t.field_id===e).label}(n,t);return new Il(n,i,s,!1)}function Bl(e,t){return!(!e||!t)&&(e.key===t.key&&e.value===t.value)}function zl(e,t){return Object.values(t).find(t=>t.field_id===e).url_alias}var Ll,jl,Rl,Dl,Hl,Fl,Ul,Vl,$l,Wl,Gl;function Jl(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ql(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const Kl={collections:{types:["collection_object"]},items:{types:["islandora_object"]},mixed:{types:["collection_object","islandora_object"]},none:{types:[]}},Yl={COLLECTIONS:"collections",COLLECTION:"mixed",ITEM:"items",NONE:"none"};let Xl=(jl=ql((Ll=class{constructor(e){var t,r,n;n=[],(r="types")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,Jl(this,"rows",jl,this),Jl(this,"pager",Rl,this),Jl(this,"sortBy",Dl,this),Jl(this,"sortOrder",Hl,this),Jl(this,"itemsPerPage",Fl,this),Jl(this,"searchTerms",Ul,this),Jl(this,"facets",Vl,this),Jl(this,"selectedFacets",$l,this),Jl(this,"nodeFilters",Wl,this),Jl(this,"initMode",Gl,this),this.types=Kl[e].types}initFromUrl(e){const t=new URL(e);if(!t.search)return;const r=t.searchParams;if(this.parseSolrQuery(r.get("query")),r.has("page")&&(this.pager.current_page=parseInt(r.get("page"))),r.has("items_per_page")){const e=parseInt(r.get("items_per_page"));this.pager.items_per_page=e,this.itemsPerPage=e}if(r.has("sort_by")&&(this.sortBy="&sort_by="+r.get("sort_by")),r.has("sort_order")&&(this.sortOrder="&sort_order="+r.get("sort_order")),t.search.includes("f[")){this.initMode=!0;let e=t.search;e.startsWith("?")&&(e=e.slice(1));e.split("&").filter(e=>e.startsWith("f[")).forEach(e=>{const t=e.slice(e.indexOf("=")+1),r=t.split(":");this.selectedFacets.push({key:r[0],value:r[1],frag:decodeURI(t),count:0,url:""})})}}parseSolrQuery(e){if(!e)return;const t=e.split(" AND ");this.searchTerms=t.find(e=>!e.includes("ss_type")&&!e.includes("field_memeber_of"))}searchParams(e){const t=this.searchTerms?""+this.searchTerms:"",r=e?"its_field_member_of:"+e:"",n=this.nodeFilters.length>0?this.nodeFilters.map(e=>"its_field_member_of:"+e.id).join(" OR "):"",s=this.types&&this.types.length>0?`(${this.types.map(e=>"ss_type:"+e).join(" OR ")})`:"",i=this.pager.current_page?"&page="+--this.pager.current_page:"",l=this.sortBy?this.sortBy:"",a=this.sortOrder?this.sortOrder:"",o=this.itemsPerPage?"&items_per_page="+this.itemsPerPage:"",u=this.selectedFacets.length>0?"&"+this.selectedFacets.map((e,t)=>`f[${t}]=${e.frag}`).join("&"):"";let c="";return c=c.concat(t),t&&(n||r||s)&&(c=c.concat(" AND ")),c=c.concat(r),r&&(n||s)&&(c=c.concat(" AND ")),c=c.concat(n),n&&s&&(c=c.concat(" AND ")),c=c.concat(s).concat(i).concat(l).concat(a).concat(o).concat(u),"query="+c}async fetchData(e){const t=this.searchParams(e);let r="/search_rest_endpoint?"+t;console.log(r);try{let e=await fetch(r),n=await e.json();if(this.updateClientUrl(t),this.rows=n.rows,this.pager=n.pager,this.pager.current_page=++this.pager.current_page,this.facets=this.parseFacets(n.facets,n.facets_metadata),this.initMode){const e=[...this.selectedFacets];this.selectedFacets=this.facets.map(e=>e.items).flat().filter(t=>e.some(e=>e.frag===t.frag)),this.initMode=!1}}catch(e){console.log(e)}}parseFacets(e,t){let r=[];return e.forEach((e,n)=>{r.push(Nl(e[0],t))}),r.filter(e=>!e.isEmpty)}updateClientUrl(e){let t=new URL(window.location.href);const r=e.split("&").filter(e=>!!e&&!e.startsWith("query"));let n=[];this.searchTerms&&(n=n.concat("query="+this.searchTerms)),n=n.concat(r),t.search=n.join("&"),history.replaceState({},"",t.toString())}}).prototype,"rows",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rl=ql(Ll.prototype,"pager",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{current_page:0,total_items:0,total_pages:0,items_per_page:0}}}),Dl=ql(Ll.prototype,"sortBy",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hl=ql(Ll.prototype,"sortOrder",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fl=ql(Ll.prototype,"itemsPerPage",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ul=ql(Ll.prototype,"searchTerms",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vl=ql(Ll.prototype,"facets",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$l=ql(Ll.prototype,"selectedFacets",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Wl=ql(Ll.prototype,"nodeFilters",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gl=ql(Ll.prototype,"initMode",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ll);function Ql(e,t,r,n){}class Zl{constructor(){this.capabilities=nl("3.13")}createModifier(e,t){return{args:t,previousArgs:t}}installModifier(e,t){const{args:r}=e,[n,s]=r.positional,i=Object.assign({},r.named);t.addEventListener(n,s,i),e.element=t,e.previousArgs={positional:[n,s],named:i}}updateModifier(e){this.destroyModifier(e),this.installModifier(e,e.element)}destroyModifier({element:e,previousArgs:t}){const[r,n]=t.positional;e.removeEventListener(r,n,t.named)}}!function(e,t){Li({factory:e,type:"modifier"},t)}(()=>new Zl,Ql);const ea=new WeakMap;function ta(e,t,r){const n=r.value;return{enumerable:r.enumerable,configurable:r.configurable,get(){let e=ea.get(this);void 0===e&&(e=new Map,ea.set(this,e));let t=e.get(n);return void 0===t&&(t=n.bind(this),e.set(n,t)),t}}}function ra(e){return()=>({enumerable:!0,configurable:!1,get(){return(t=this,Mi.get(t)).lookup({type:"service",name:e});var t}})}function na(e,t){return"string"==typeof e?ra(e):ra(t)(e,t)}class sa{constructor(e){this.owner=e,this.capabilities=function(e,t={}){return L("glimmerjs-2.0.0"===e,"Invalid helper manager compatibility specified"),{destructor:Boolean(t.destructor),updateHook:Boolean(t.updateHook)}}("glimmerjs-2.0.0")}getValue({fn:e,args:t,ownerProxy:r}){return e(t.positional,t.named,{services:r})}createHelper(e,t){const{owner:r}=this;return{fn:e,args:t,ownerProxy:new Proxy({},{get:(e,t)=>r.lookup({type:"service",name:t})})}}}const ia=e=>new sa(e);function la(e){return function(e,t){Li({factory:e,type:"helper"},t)}(ia,e),e}function aa(e,...t){return e.bind(null,...t)}function oa(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}var ua,ca,ha,pa,da,ma,fa,ga;function ba(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ya(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let va=_i({id:"QK0vn9KG",block:'{"symbols":["suggestion","collection"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[13,"id",[27,[24,0],["id"]],null],[12,"class","p-2 bg-white",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,3,"BlockHead"],[]],[[27,[24,0],["results","nodeFilters"]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[9,"ul",true],[12,"class","autocomplete-selected mb-4",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["results","nodeFilters"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[12,"class","flex items-center my-2",null],[10],[1,1,0,0,"\\n              "],[9,"button",false],[23,"class","flex items-center rounded-full px-4 py-1 bg-blue-spirit text-black max-w-full",null],[23,"title","Remove this selection",null],[23,"type","button",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[31,473,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["unselect"]],[27,[24,2],[]]],null]],null],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","truncate",null],[10],[1,0,0,0,[27,[24,2],["title"]]],[11],[1,1,0,0,"\\n                "],[9,"svg",true],[12,"class","inline-flex ml-3 h-5 w-5",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n                  "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M6 18L18 6M6 6l12 12",null],[10],[11],[1,1,0,0,"\\n                "],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"      "],[9,"div",true],[12,"class","relative w-full",null],[10],[1,1,0,0,"\\n        "],[9,"input",false],[23,"class","",null],[14,"value",[27,[24,0],["query"]],null],[23,"type","text",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["keyup",[27,[24,0],["getSuggestion"]]],null],[10],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","absolute right-0 px-2 h-full text-accent-7",null],[23,"title","Clear",null],[23,"type","button",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["cleanup"]]],null],[10],[1,1,0,0,"\\n          "],[9,"svg",true],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"class","h-6 w-6",null],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"],[5,[27,[26,3,"BlockHead"],[]],[[27,[24,0],["suggestions"]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[9,"div",true],[12,"class","border p-2",null],[10],[1,1,0,0,"\\n          "],[9,"ul",true],[12,"class","autocomplete-suggestions overflow-x-auto",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["suggestions"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"li",false],[23,"class","cursor-pointer py-1 px-4 mb-1 hover:bg-gray-200",null],[23,"title","Search within this collection",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[31,1999,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["doSelect"]],[27,[24,1],[]]],null]],null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,1],["title"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["fn","on","each","if"]}',meta:{scope:()=>({fn:aa,on:Ql})}},(ca=ya((ua=class extends Pl{constructor(e,t){var r,n,s;super(e,t),ba(this,"searchInfo",ca,this),ba(this,"results",ha,this),r=this,n="id",s=oa(),n in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,ba(this,"field",pa,this),ba(this,"operator",da,this),ba(this,"query",ma,this),ba(this,"suggestions",fa,this),ba(this,"selected",ga,this),this.field=this.args.field||"title",this.operator=this.args.operator||"CONTAINS"}async getSuggestion(e){const t=e.target.value;this.query=t;const r=await this.searchInfo.suggestCollection(t,this.field,this.operator);this.suggestions=r}doSelect(e){this.suggestionsInclude(this.results.nodeFilters,e)||(this.results.nodeFilters=this.results.nodeFilters.concat(e),this.args.collectionSelected(this.results.nodeFilters))}unselect(e){this.results.nodeFilters=this.results.nodeFilters.filter(t=>!this.suggestionEquals(t,e)),this.args.collectionSelected(this.results.nodeFilters)}cleanup(){this.suggestions=[],this.query=""}suggestionsInclude(e,t){return e.some(e=>this.suggestionEquals(e,t))}suggestionEquals(e,t){return!(e&&!t||!e&&t)&&(e.id===t.id&&e.title===t.title)}}).prototype,"searchInfo",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ha=ya(ua.prototype,"results",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa=ya(ua.prototype,"field",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),da=ya(ua.prototype,"operator",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma=ya(ua.prototype,"query",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),fa=ya(ua.prototype,"suggestions",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ga=ya(ua.prototype,"selected",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ya(ua.prototype,"getSuggestion",[ta],Object.getOwnPropertyDescriptor(ua.prototype,"getSuggestion"),ua.prototype),ya(ua.prototype,"doSelect",[ta],Object.getOwnPropertyDescriptor(ua.prototype,"doSelect"),ua.prototype),ya(ua.prototype,"unselect",[ta],Object.getOwnPropertyDescriptor(ua.prototype,"unselect"),ua.prototype),ya(ua.prototype,"cleanup",[ta],Object.getOwnPropertyDescriptor(ua.prototype,"cleanup"),ua.prototype),ua));class wa extends Pl{}var ka,xa;function Sa(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}_i({id:"AF5glXM4",block:'{"symbols":["@collectionFilterSelected"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow my-4 p-4",null],[10],[1,1,0,0,"\\n      "],[9,"h3",true],[12,"class","text-lg text-gray-500",null],[10],[1,1,0,0,"Filter by collections"],[11],[1,1,0,0,"\\n      "],[7,"CollectionSuggester",[],[["@collectionSelected"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({CollectionSuggester:va})}},wa);let Ea=_i({id:"BYaM1+EY",block:'{"symbols":["@item"],"statements":[[1,1,0,0,"\\n    "],[9,"button",false],[14,"class",[32,["py-1 px-3 flex items-center rounded-full text-left text-black hover:bg-gray-200 ",[31,134,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["isSelected"]],"bg-blue-spirit"],null]]],null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["selectFacet"]]],null],[10],[1,1,0,0,"\\n      "],[1,0,0,0,[27,[24,1],["value"]]],[1,1,0,0," \\n      "],[9,"span",true],[12,"class","mr-3",null],[10],[1,1,0,0,"("],[1,0,0,0,[27,[24,1],["count"]]],[1,1,0,0,")"],[11],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["isSelected"]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[9,"svg",true],[12,"class","h-5 w-5",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M6 18L18 6M6 6l12 12",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:Ql})}},(xa=Sa((ka=class extends Pl{constructor(...e){var t,r,n,s;super(...e),t=this,r="selectedFacets",s=this,(n=xa)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}get isSelected(){let e=!1;return e=this.args.selectedFacets.filter(e=>e.key===this.args.item.key&&e.value===this.args.item.value).length>0,e}selectFacet(){this.args.onClick(this.args.item)}}).prototype,"selectedFacets",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.selectedFacets||[]}}),Sa(ka.prototype,"selectFacet",[ta],Object.getOwnPropertyDescriptor(ka.prototype,"selectFacet"),ka.prototype),ka));var Oa,Ca,Ta;function Pa(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function _a(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let Ma=_i({id:"wk+aEHJZ",block:'{"symbols":["item","@facet","@facetSelected","@selectedFacets"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow my-4",null],[10],[1,1,0,0,"\\n      "],[9,"button",false],[23,"class","flex w-full justify-between py-2 px-4 border-b hover:bg-gray-100 focus:bg-gray-100",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["toggleList"]]],null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-lg text-gray-500",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,2],["label"]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["isOpen"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","{2}",null],[12,"d","M5 15l7-7 7 7",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M19 9l-7 7-7-7",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n      "],[9,"ul",true],[13,"id",[27,[24,0],["guid"]],null],[12,"class","flex flex-col px-8 overflow-hidden transition-all ease-in-out duration-500",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","py-2 space-y-1",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,2],["items"]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[9,"li",true],[10],[1,1,0,0,"\\n            "],[7,"FacetItem",[],[["@facet","@item","@onClick","@selectedFacets"],[[27,[24,2],[]],[27,[24,1],[]],[27,[24,3],[]],[27,[24,4],[]]]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","if","each"]}',meta:{scope:()=>({on:Ql,FacetItem:Ea})}},(Ca=_a((Oa=class extends Pl{constructor(...e){super(...e),Pa(this,"isOpen",Ca,this),Pa(this,"guid",Ta,this)}toggleList(){if(this.isOpen){this.isOpen=!this.isOpen;document.getElementById(this.guid).style["max-height"]="0"}else{this.isOpen=!this.isOpen;const e=document.getElementById(this.guid);e.style["max-height"]=e.scrollHeight+"px"}}}).prototype,"isOpen",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ta=_a(Oa.prototype,"guid",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Math.random()}}),_a(Oa.prototype,"toggleList",[ta],Object.getOwnPropertyDescriptor(Oa.prototype,"toggleList"),Oa.prototype),Oa));class Aa extends Pl{}_i({id:"fAVzJbf9",block:'{"symbols":["facet","@facetSelected","@selectedFacets","@facets"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,4],[]]],null,[["default"],[{"statements":[[1,1,0,0,"        "],[7,"Facet",[],[["@facet","@facetSelected","@selectedFacets"],[[27,[24,1],[]],[27,[24,2],[]],[27,[24,3],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["each"]}',meta:{scope:()=>({Facet:Ma})}},Aa);class Ia extends Pl{}var Na,Ba,za;_i({id:"qE8k8VX7",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex items-center justify-center h-24 w-24 mr-2 sm:mr-20 flex-shrink-0",null],[10],[1,1,0,0,"\\n      "],[9,"svg",true],[12,"class","h-16 w-16 text-gray-200",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n        "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",null],[10],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},Ia);let La=_i({id:"s0wIRd4W",block:'{"symbols":["@listItem"],"statements":[[1,1,0,0,"\\n    "],[9,"a",true],[13,"href",[32,["/node/",[27,[24,1],["nid"]]]],null],[12,"class","flex items-center justify-between w-full min-h-12 p-4 border-b border-gray-200 hover:bg-gray-100 cursor-pointer",null],[12,"type","button",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["imageUrl"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[9,"img",true],[13,"src",[27,[24,0],["imageUrl"]],null],[12,"alt","collection or item image",null],[12,"class","h-24 w-24 mr-2 sm:mr-20 flex-shrink-0",null],[10],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[7,"MissingAsset",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[9,"ul",true],[12,"class","flex flex-col text-align-left w-3/5 text-gray-600",null],[10],[1,1,0,0,"\\n          "],[9,"li",true],[10],[1,1,0,0,"\\n            "],[9,"h3",true],[12,"class","text-xl mb-2",null],[10],[1,0,0,0,[27,[24,1],["title"]]],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["uid"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","italic",null],[10],[1,1,0,0,"Author: "],[11],[1,1,0,0,"\\n                "],[9,"span",true],[10],[1,1,0,0,[27,[24,1],["uid"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["field_date_created"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","italic",null],[10],[1,1,0,0,"Created on: "],[11],[1,1,0,0,"\\n                "],[9,"span",true],[10],[1,0,0,0,[27,[24,1],["field_date_created"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["field_date_published"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[10],[1,1,0,0,"\\n                "],[9,"span",true],[12,"class","italic",null],[10],[1,1,0,0,"Published on: "],[11],[1,1,0,0,"\\n                "],[9,"span",true],[10],[1,0,0,0,[27,[24,1],["field_date_published"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,1],["field_description"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[9,"li",true],[10],[1,1,0,0,"\\n              "],[9,"div",true],[12,"class","text-gray-600 line-clamp-2",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,1],["field_description"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5l7 7-7 7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({MissingAsset:Ia})}},(za=class extends Pl{constructor(e,t){var r,n,s,i;super(e,t),r=this,n="imageUrl",i=this,(s=Ba)&&Object.defineProperty(r,n,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(i):void 0}),this.fetchThumbnail()}async fetchThumbnail(){let e=`/jsonapi/media/image?include=thumbnail&filter[media-filter][condition][value]=${this.args.listItem.uuid}&filter[media-filter][condition][operator]=IN&filter[media-filter][condition][path]=field_media_of.id&filter[thumb-filter][condition][value]=Thumbnail Image&filter[thumb-filter][condition][operator]=IN&filter[thumb-filter][condition][path]=field_media_use.name`;try{let t=await fetch(e),r=await t.json();r.data.length>0&&(this.imageUrl=r.included[0].attributes.uri.url)}catch(e){console.log(e)}}},ja=(Na=za).prototype,Ra="imageUrl",Da=[_l],Ha={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},Ua={},Object.keys(Ha).forEach((function(e){Ua[e]=Ha[e]})),Ua.enumerable=!!Ua.enumerable,Ua.configurable=!!Ua.configurable,("value"in Ua||Ua.initializer)&&(Ua.writable=!0),Ua=Da.slice().reverse().reduce((function(e,t){return t(ja,Ra,e)||e}),Ua),Fa&&void 0!==Ua.initializer&&(Ua.value=Ua.initializer?Ua.initializer.call(Fa):void 0,Ua.initializer=void 0),void 0===Ua.initializer&&(Object.defineProperty(ja,Ra,Ua),Ua=null),Ba=Ua,Na));var ja,Ra,Da,Ha,Fa,Ua;class Va extends Pl{}_i({id:"UFCAov7T",block:'{"symbols":["listItem","@list"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","h-auto",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,2],[]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[7,"ListItem",[],[["@listItem"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["each"]}',meta:{scope:()=>({ListItem:La})}},Va);class $a extends Pl{}function Wa(e){return la((t,r)=>e(r,...t))}_i({id:"S+rNk3Cq",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex h-auto p-4 items-center justify-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","sk-pulse bg-blue-heritage",null],[10],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},$a);const Ga=Wa(({},e,t,r)=>e[t]===r);Wa(({},e)=>!e),Wa(({},e,t)=>e===t);class Ja extends Pl{}var qa,Ka;_i({id:"fTWuUzbA",block:'{"symbols":["@item","@nextPage","@prevPage","@goToPage"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[31,12,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","page"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[14,"aria-label",[32,["page number ",[27,[24,1],["page"]]]],null],[14,"class",[32,["mr-2 hover:bg-gray-200 rounded-full p-2 ",[31,141,2,[27,[26,2,"CallHead"],[]],[[27,[24,1],["selected"]],"bg-blue-spirit"],null]]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,193,2,[27,[26,3,"CallHead"],[]],[[27,[24,4],[]],[27,[24,1],["page"]]],null]],null],[10],[1,1,0,0,"\\n        "],[1,0,0,0,[27,[24,1],["page"]]],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,275,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","start-ellipsis"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"aria-label","start ellipsis",null],[12,"class","mr-2",null],[10],[1,1,0,0,"..."],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,388,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","end-ellipsis"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"aria-label","end ellipsis",null],[12,"class","mr-2",null],[10],[1,1,0,0,"..."],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,497,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","previous"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"aria-label","previous page",null],[23,"class","border rounded-full mr-4 p-2 shadow hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",null],[14,"disabled",[27,[24,1],["disabled"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,3],[]]],null],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-4 w-4 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M15 19l-7-7 7-7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,1053,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","next"],null]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"aria-label","next page",null],[23,"class","border rounded-full ml-2 p-2 shadow hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",null],[14,"disabled",[27,[24,1],["disabled"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,2],[]]],null],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-4 w-4 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5l7 7-7 7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["on","is","if","fn"]}',meta:{scope:()=>({on:Ql,fn:aa,is:Ga})}},Ja);let Ya=_i({id:"Ta6PpoS8",block:'{"symbols":["item","item","@goToPage","@prevPage","@nextPage","@pager","@itemLabel"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["compact"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","flex flex-col items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["paginatedItems"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"PageItem",[],[["@item","@goToPage","@prevPage","@nextPage"],[[27,[24,2],[]],[27,[24,3],[]],[27,[24,4],[]],[27,[24,5],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-gray-500 text-sm",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,0],["offset"]]],[1,1,0,0," – "],[1,0,0,0,[27,[24,0],["lastItemOnPage"]]],[1,1,0,0," of "],[1,0,0,0,[27,[24,6],["total_items"]]],[1,1,0,0," "],[1,0,0,0,[27,[24,7],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex items-center mr-6",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["paginatedItems"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"PageItem",[],[["@item","@goToPage","@prevPage","@nextPage"],[[27,[24,1],[]],[27,[24,3],[]],[27,[24,4],[]],[27,[24,5],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n          Showing "],[1,0,0,0,[27,[24,0],["offset"]]],[1,1,0,0," – "],[1,0,0,0,[27,[24,0],["lastItemOnPage"]]],[1,1,0,0," of "],[1,0,0,0,[27,[24,6],["total_items"]]],[1,1,0,0," "],[1,0,0,0,[27,[24,7],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["each","if"]}',meta:{scope:()=>({PageItem:Ja})}},(Ka=function(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}((qa=class extends Pl{constructor(...e){super(...e),function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"compact",Ka,this)}get lastItemOnPage(){const e=this.offset+Number(this.args.pager.items_per_page)-1;return e>this.args.pager.total_items?this.args.pager.total_items:e}get offset(){return(this.args.pager.current_page-1)*Number(this.args.pager.items_per_page)+1}get paginatedItems(){let e=this.args.pager.current_page,t=this.compact?1:3,r=this.compact?1:3,n=this.args.pager.total_pages;const s=(e,t)=>{const r=t-e+1;return Array.from({length:r},(t,r)=>e+r)},i=s(1,Math.min(t,n)),l=s(Math.max(n-t+1,t+1),n),a=Math.max(Math.min(e-r,n-t-2*r-1),t+2),o=Math.min(Math.max(e+r,t+2*r+2),l.length>0?l[0]-2:n-1),u=["previous",...i,...a>t+2?["start-ellipsis"]:t+1<n-t?[t+1]:[],...s(a,o),...o<n-t-1?["end-ellipsis"]:n-t>t?[n-t]:[],...l,"next"],c=t=>{switch(t){case"first":return 1;case"previous":return e-1;case"next":return e+1;case"last":return n;default:return null}};return u.map(t=>"number"==typeof t?{type:"page",page:t,selected:t===e,disabled:!1,"aria-current":t===e?"true":void 0}:{type:t,page:c(t),selected:!1,disabled:-1===t.indexOf("ellipsis")&&("next"===t||"last"===t?e>=n:e<=1)})}}).prototype,"compact",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.compact||!1}}),qa));var Xa,Qa;function Za(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eo(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let to=_i({id:"DRaUP1VI",block:'{"symbols":["page","numItems","selectOption","selectOption","@resetOptions"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","text-left ml-0",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex my-4 px-4 justify-between text-black",null],[10],[1,1,0,0,"\\n        "],[9,"h3",true],[12,"class","text-lg",null],[10],[1,1,0,0,"List Options"],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,5],[]]],null],[10],[1,1,0,0,"Clear"],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","bg-white shadow divide-y divide-gray-100 px-10 py-2 outline-none",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex flex-col h-full justify-between my-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","my-2",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","sort-by",null],[10],[1,1,0,0,"\\n              Sort by\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","sort-by",null],[23,"class","idc-dropdown",null],[23,"name","sort-by",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleSortByChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[13,"disabled",[27,[24,0],["args","sortBy"]],null],[12,"selected","",null],[10],[1,1,0,0,"Sort by"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["sortByOptions"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,4],["value"]],null],[13,"selected",[31,925,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"sortBy",[27,[24,4],["value"]]],null],null],[10],[1,1,0,0,"Sort by: "],[1,0,0,0,[27,[24,4],["displayValue"]]],[11],[1,1,0,0,"\\n"]],"parameters":[4]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","sort-order",null],[10],[1,1,0,0,"\\n              Sort Order\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","sort-order",null],[23,"class","idc-dropdown",null],[23,"name","sort-order",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleSortOrderChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[13,"disabled",[27,[24,0],["args","sortOrder"]],null],[12,"selected","",null],[10],[1,1,0,0,"Sort order"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["sortOrderOptions"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,3],["value"]],null],[13,"selected",[31,1609,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"sortOrder",[27,[24,3],["value"]]],null],null],[10],[1,1,0,0,"Sort order: "],[1,0,0,0,[27,[24,3],["displayValue"]]],[11],[1,1,0,0,"\\n"]],"parameters":[3]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","items-per-page",null],[10],[1,1,0,0,"\\n              Items Per Page\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","items-per-page",null],[23,"class","idc-dropdown",null],[23,"name","items-per-page",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleItemsPerPageChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[13,"disabled",[27,[24,0],["args","itemsPerPage"]],null],[12,"selected","",null],[10],[1,1,0,0,"Items per page"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["itemsPerPage"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,2],[]],null],[13,"selected",[31,2307,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"itemsPerPage",[27,[24,2],[]]],null],null],[10],[1,1,0,0,"Items per page: "],[1,0,0,0,[27,[24,2],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","current-page",null],[10],[1,1,0,0,"\\n              Go to page\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","current-page",null],[23,"class","idc-dropdown",null],[23,"name","current-page",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleCurrentPageChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[12,"disabled","",null],[12,"selected","",null],[10],[1,1,0,0,"Go to page"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["pages"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,1],[]],null],[13,"selected",[31,2928,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args","pager"]],"current_page",[27,[24,1],[]]],null],null],[10],[1,1,0,0,"Go to page: "],[1,0,0,0,[27,[24,1],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["is","on","each"]}',meta:{scope:()=>({on:Ql,is:Ga})}},(Qa=eo((Xa=class extends Pl{constructor(...e){super(...e),function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"displayMenu",Qa,this),Za(this,"sortByOptions",[{value:"&sort_by=search_api_relevance",displayValue:"Relevance"},{value:"&sort_by=title",displayValue:"Title"}]),Za(this,"sortOrderOptions",[{value:"&sort_order=ASC",displayValue:"Ascending"},{value:"&sort_order=DESC",displayValue:"Descending"}]),Za(this,"itemsPerPage",[5,10,25,50])}get pages(){const e=this.args.pager.total_pages;return Array.from({length:e},(e,t)=>1+t)}updateMenuDisplay(){this.displayMenu=!this.displayMenu}handleSortByChange(e){this.args.changeSearchOptions({sortBy:e.target.value})}handleSortOrderChange(e){this.args.changeSearchOptions({sortOrder:e.target.value})}handleCurrentPageChange(e){this.args.changeSearchOptions({currentPage:Number(e.target.value)})}handleItemsPerPageChange(e){this.args.changeSearchOptions({itemsPerPage:Number(e.target.value)})}}).prototype,"displayMenu",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eo(Xa.prototype,"updateMenuDisplay",[ta],Object.getOwnPropertyDescriptor(Xa.prototype,"updateMenuDisplay"),Xa.prototype),eo(Xa.prototype,"handleSortByChange",[ta],Object.getOwnPropertyDescriptor(Xa.prototype,"handleSortByChange"),Xa.prototype),eo(Xa.prototype,"handleSortOrderChange",[ta],Object.getOwnPropertyDescriptor(Xa.prototype,"handleSortOrderChange"),Xa.prototype),eo(Xa.prototype,"handleCurrentPageChange",[ta],Object.getOwnPropertyDescriptor(Xa.prototype,"handleCurrentPageChange"),Xa.prototype),eo(Xa.prototype,"handleItemsPerPageChange",[ta],Object.getOwnPropertyDescriptor(Xa.prototype,"handleItemsPerPageChange"),Xa.prototype),Xa));var ro,no;r(0);function so(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let io=_i({id:"s/xkV0wz",block:'{"symbols":["@placeholder","@applySearchTerms"],"statements":[[1,1,0,0,"\\n    "],[9,"div",false],[23,"class","flex flex-col",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["keyup",[27,[24,0],["submitOnEnter"]]],null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-row",null],[10],[1,1,0,0,"\\n        "],[9,"input",false],[23,"aria-label","Search",null],[23,"value","",null],[23,"size","30",null],[23,"maxlength","128",null],[23,"class","form-text h-10 border-gray-500 bg-gray-100 border-2 px-2",null],[14,"placeholder",[27,[24,1],[]],null],[14,"value",[27,[24,0],["searchTerms"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["keyup",[27,[24,0],["updateSearchTerms"]]],null],[10],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","inline-flex items-center px-3 py-2 h-10 border border-transparent text-sm leading-4 font-medium text-white bg-blue-heritage hover:bg-blue-800",null],[23,"aria-label","submit search",null],[23,"type","button",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,721,2,[27,[26,1,"CallHead"],[]],[[27,[24,2],[]],[27,[24,0],["searchTerms"]]],null]],null],[10],[1,1,0,0,"\\n          "],[9,"svg",true],[12,"class","h-5 w-5 text-white",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","fn"]}',meta:{scope:()=>({on:Ql,fn:aa})}},(no=so((ro=class extends Pl{constructor(e,t){super(e,t),function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"searchTerms",no,this),this.searchTerms=t.searchTerms}updateSearchTerms(e){this.searchTerms=e.target.value}submitOnEnter(e){13===e.which&&this.args.applySearchTerms(this.searchTerms)}}).prototype,"searchTerms",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),so(ro.prototype,"updateSearchTerms",[ta],Object.getOwnPropertyDescriptor(ro.prototype,"updateSearchTerms"),ro.prototype),so(ro.prototype,"submitOnEnter",[ta],Object.getOwnPropertyDescriptor(ro.prototype,"submitOnEnter"),ro.prototype),ro));var lo,ao,oo;function uo(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function co(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ho(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let po=_i({id:"qv2IaGng",block:'{"symbols":["field","@term","@removeTerm"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[13,"id",[27,[24,0],["id"]],null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[13,"id",[27,[24,0],["opGroupId"]],null],[12,"class","flex flex-row ops-button-group",null],[10],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","button selected",null],[23,"name","AND",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,194,2,[27,[26,2,"CallHead"],[]],[[27,[24,0],["changeOperation"]],"AND"],null]],null],[10],[1,1,0,0,"\\n          AND\\n        "],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","button",null],[23,"name","OR",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,354,2,[27,[26,2,"CallHead"],[]],[[27,[24,0],["changeOperation"]],"OR"],null]],null],[10],[1,1,0,0,"\\n          OR\\n        "],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","button",null],[23,"name","NOT",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,513,2,[27,[26,2,"CallHead"],[]],[[27,[24,0],["changeOperation"]],"NOT"],null]],null],[10],[1,1,0,0,"\\n          NOT\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-row",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","w-48 self-center",null],[10],[1,1,0,0,"\\n          "],[9,"input",false],[14,"id",[27,[24,0],["proxyId"]],null],[23,"class","cursor-pointer",null],[14,"value",[27,[24,0],["localTerm","isProxy"]],null],[23,"type","checkbox",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["change",[27,[24,0],["toggleProxy"]]],null],[10],[11],[1,1,0,0,"\\n          "],[9,"label",true],[13,"for",[27,[24,0],["proxyId"]],null],[12,"class","py-2 cursor-pointer",null],[10],[1,1,0,0,"Proximity search"],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"],[5,[27,[26,3,"BlockHead"],[]],[[27,[24,0],["localTerm","isProxy"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[2," Proxy search "],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[13,"for",[27,[24,0],["proxyTermAId"]],null],[12,"class","",null],[10],[1,1,0,0,"Search for term"],[11],[1,1,0,0,"\\n            "],[9,"input",false],[14,"id",[27,[24,0],["proxyTermAId"]],null],[23,"class","idc-advanced-text-input invalid",null],[23,"placeholder","Enter a term",null],[14,"value",[27,[24,0],["localTerm","term"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["change",[27,[24,0],["updateSearchTerm"]]],null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","mx-8",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[13,"for",[27,[24,0],["proxyRangeId"]],null],[12,"class","",null],[10],[1,1,0,0,"Within a range of"],[11],[1,1,0,0,"\\n            "],[9,"input",false],[14,"id",[27,[24,0],["proxyRangeId"]],null],[23,"class","idc-advanced-text-input invalid",null],[23,"placeholder","Enter a number",null],[14,"value",[27,[24,0],["localTerm","proximity"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["change",[27,[24,0],["updateProximity"]]],null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[13,"for",[27,[24,0],["proxyTermBId"]],null],[12,"class","",null],[10],[1,1,0,0,"The following term"],[11],[1,1,0,0,"\\n            "],[9,"input",false],[14,"id",[27,[24,0],["proxyTermBId"]],null],[23,"class","idc-advanced-text-input invalid",null],[23,"placeholder","Enter a term",null],[14,"value",[27,[24,0],["localTerm","termB"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["change",[27,[24,0],["updateProxyTermB"]]],null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[2," Standard search "],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[13,"for",[27,[24,0],["fieldId"]],null],[12,"class","sr-only",null],[10],[1,1,0,0,"Select search term field"],[11],[1,1,0,0,"\\n            "],[9,"select",false],[14,"id",[27,[24,0],["fieldId"]],null],[23,"class","idc-dropdown h-full ",null],[14,"name",[27,[24,0],["fieldId"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["change",[27,[24,0],["updateField"]]],null],[10],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["fields"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,1],["keys"]],null],[10],[1,0,0,0,[27,[24,1],["label"]]],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[13,"for",[27,[24,0],["termInputId"]],null],[12,"class","sr-only",null],[10],[1,1,0,0,"Enter a word or phrase to search for"],[11],[1,1,0,0,"\\n            "],[9,"input",false],[14,"id",[27,[24,0],["termInputId"]],null],[23,"aria-label","Enter a word or phrase to search for",null],[23,"class","idc-advanced-text-input h-full invalid",null],[23,"placeholder","Enter search term",null],[23,"size","30",null],[14,"value",[27,[24,0],["localTerm","term"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["change",[27,[24,0],["updateSearchTerm"]]],null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[9,"div",true],[12,"class","ml-auto self-center",null],[10],[1,1,0,0,"\\n          "],[9,"button",false],[23,"class","rounded-full text-2xl leading-none font-bold text-accent-7 px-2 p-1 ml-4 hover:bg-accent-7 hover:text-white",null],[23,"title","Remove this term",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,3655,2,[27,[26,2,"CallHead"],[]],[[27,[24,3],[]],[27,[24,2],[]]],null]],null],[10],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"class","h-5 w-5",null],[12,"viewBox","0 0 20 20",null],[12,"fill","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"fill-rule","evenodd",null],[12,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",null],[12,"clip-rule","evenodd",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","each","fn","if"]}',meta:{scope:()=>({fn:aa,on:Ql})}},(ao=ho((lo=class extends Pl{constructor(e,t){super(e,t),uo(this,"searchInfo",ao,this),uo(this,"localTerm",oo,this),co(this,"fields",[]),co(this,"id",this.args.term.id),co(this,"opGroupId",this.id+"-operation-group"),co(this,"proxyId",this.id+"-proxy-toggle"),co(this,"fieldId",this.id+"-field-select"),co(this,"termInputId",this.id+"-term-input"),co(this,"proxyTermAId",this.id+"-proxy-term-a"),co(this,"proxyTermBId",this.id+"-proxy-term-b"),co(this,"proxyRangeId",this.id+"-proxy-range"),this.fields=this.searchInfo.searchFields()}toggleProxy(){this.updateTerm({isProxy:!this.args.term.isProxy})}updateField(e){const t=e.target.value;t?this.updateTerm({field:t.split(",")}):this.updateTerm({field:void 0})}updateSearchTerm(e){this.updateTerm({term:e.target.value})}updateProxyTermB(e){this.updateTerm({termB:e.target.value})}updateProximity(e){const t=e.target.value;try{const e=parseInt(t);this.updateTerm({proximity:e})}catch(e){console.log(`Invalid "proximity" input: "${t}"`)}}validateTerm(e){this.resetValidation(),e||(e=this.args.term);let t=!0;return e.isProxy?(e.term||(this.toggleInputValid(this.proxyTermAId,!1),t=!1),e.termB||(this.toggleInputValid(this.proxyTermBId,!1),t=!1),e.proximity&&!isNaN(e.proximity)||(this.toggleInputValid(this.proxyRangeId,!1),t=!1)):e.term||(this.toggleInputValid(this.termInputId,!1),t=!1),t}resetValidation(){[this.termInputId,this.proxyTermAId,this.proxyTermBId,this.proxyRangeId].forEach(e=>this.toggleInputValid(e,!0))}updateTerm(e){let t=Object.assign(this.args.term,e);t=Object.assign(t,{valid:this.validateTerm(t)}),this.localTerm=t,this.args.updateTerm(t)}toggleInputValid(e,t){const r=document.getElementById(e);r&&(t?r.classList.remove("invalid"):r.classList.add("invalid"))}changeOperation(e,t){const r=document.getElementById(this.opGroupId).children;for(let e=0;e<r.length;e++)r.item(e).classList.remove("selected");t.target.classList.add("selected"),this.updateTerm({operation:e})}}).prototype,"searchInfo",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo=ho(lo.prototype,"localTerm",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.term}}),ho(lo.prototype,"toggleProxy",[ta],Object.getOwnPropertyDescriptor(lo.prototype,"toggleProxy"),lo.prototype),ho(lo.prototype,"updateField",[ta],Object.getOwnPropertyDescriptor(lo.prototype,"updateField"),lo.prototype),ho(lo.prototype,"updateSearchTerm",[ta],Object.getOwnPropertyDescriptor(lo.prototype,"updateSearchTerm"),lo.prototype),ho(lo.prototype,"updateProxyTermB",[ta],Object.getOwnPropertyDescriptor(lo.prototype,"updateProxyTermB"),lo.prototype),ho(lo.prototype,"updateProximity",[ta],Object.getOwnPropertyDescriptor(lo.prototype,"updateProximity"),lo.prototype),ho(lo.prototype,"changeOperation",[ta],Object.getOwnPropertyDescriptor(lo.prototype,"changeOperation"),lo.prototype),lo));var mo,fo,go,bo;function yo(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function vo(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let wo=_i({id:"nn7WouMv",block:'{"symbols":["term","index"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"id","idc-advanced-search-inputs",null],[12,"class","",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex justify-between",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n          "],[9,"button",false],[23,"class","button mr-4 border-blue-heritage text-blue-heritage hover:bg-blue-heritage hover:text-white",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["addTerm"]]],null],[10],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"class","svg-icon mr-2",null],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M12 6v6m0 0v6m0-6h6m-6 0H6",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n            Add term\\n          "],[11],[1,1,0,0,"\\n          "],[9,"button",false],[23,"class","button border-accent-7 text-accent-7 hover:bg-accent-7 hover:text-white",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["clearSearch"]]],null],[10],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"class","svg-icon mr-2",null],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n            Clear\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[10],[1,1,0,0,"\\n          "],[9,"button",false],[23,"aria-label","Submit advanced search query",null],[14,"disabled",[27,[24,0],["disableSearch"]],null],[23,"class","button button-primary inline-flex items-center",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["doSearch"]]],null],[10],[1,1,0,0,"\\n            Search\\n            "],[9,"svg",true],[12,"class","svg-icon ml-2",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"ul",true],[12,"id","idc-advanced-search-terms-list",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["terms"]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[9,"li",true],[12,"class","my-2",null],[10],[1,1,0,0,"\\n            "],[7,"QueryTermInput",[],[["@index","@term","@updateTerm","@removeTerm"],[[27,[24,2],[]],[27,[24,1],[]],[27,[24,0],["updateTerm"]],[27,[24,0],["removeTerm"]]]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n"]],"parameters":[1,2]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","each"]}',meta:{scope:()=>({on:Ql,QueryTermInput:po})}},(fo=vo((mo=class extends Pl{constructor(e,t){super(e,t),yo(this,"searchInfo",fo,this),yo(this,"terms",go,this),yo(this,"disableSearch",bo,this),this.addTerm()}shouldDisableSearch(){return 0===this.terms.length||this.terms.some(e=>!e.valid)}addTerm(e){this.terms=this.terms.concat({id:oa(),isProxy:!1,term:"",operation:"AND",valid:!1}),this.disableSearch=this.shouldDisableSearch()}updateTerm(e){const t=this.terms.map(e=>e.id).findIndex(t=>t===e.id);t<0?console.error("Couldn't find advanced search term: "+JSON.stringify(e,null,2)):(this.terms[t]=e,this.disableSearch=this.shouldDisableSearch())}removeTerm(e){this.terms=this.terms.filter(t=>t.id!==e.id),this.disableSearch=this.shouldDisableSearch()}clearSearch(){this.terms=[],this.addTerm(),this.args.applySearchTerms()}doSearch(){this.args.applySearchTerms(this.query2string())}query2string(){return this.terms.filter(e=>e.valid).map((e,t)=>{let r="";if(t>0&&(r+=` ${e.operation} `),e.isProxy){if(!e.term||!e.termB||!e.proximity)return;r+=`"${e.term} ${e.termB}"~${e.proximity}`}else e.field?r+=`(${e.field.map(t=>`${t}:${e.term}`).join(" OR ")})`:r+=e.term;return r}).join("")}}).prototype,"searchInfo",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),go=vo(mo.prototype,"terms",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bo=vo(mo.prototype,"disableSearch",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vo(mo.prototype,"addTerm",[ta],Object.getOwnPropertyDescriptor(mo.prototype,"addTerm"),mo.prototype),vo(mo.prototype,"updateTerm",[ta],Object.getOwnPropertyDescriptor(mo.prototype,"updateTerm"),mo.prototype),vo(mo.prototype,"removeTerm",[ta],Object.getOwnPropertyDescriptor(mo.prototype,"removeTerm"),mo.prototype),vo(mo.prototype,"clearSearch",[ta],Object.getOwnPropertyDescriptor(mo.prototype,"clearSearch"),mo.prototype),vo(mo.prototype,"doSearch",[ta],Object.getOwnPropertyDescriptor(mo.prototype,"doSearch"),mo.prototype),mo));class ko extends Pl{}var xo,So,Eo,Oo,Co,To,Po,_o,Mo,Ao,Io;function No(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Bo(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}_i({id:"A37mMhfB",block:'{"symbols":["@title","@searchInputPlaceholder","@applySearchTerms","@searchTerms","@pager","@goToPage","@prevPage","@nextPage","@paginationItemLabel","@hasAdvancedSearch"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white px-4 py-5 border-b border-gray-200 sm:px-6",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,10],[]]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[9,"div",true],[12,"class","",null],[10],[1,1,0,0,"\\n          "],[7,"AdvancedQueryInput",[],[["@applySearchTerms","@searchTerms"],[[27,[24,3],[]],[27,[24,4],[]]]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"        "],[9,"div",true],[12,"class","flex flex-col lg:flex-row justify-between items-center",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex flex-col 2xl:flex-row items-center lg:mr-6 mb-4 lg:mb-0 w-full justify-between",null],[10],[1,1,0,0,"\\n            "],[9,"h2",true],[12,"class","text-xl font-bold leading-6 mb-2 2xl:mb-0 mr-4",null],[10],[1,1,0,0,"\\n              "],[1,0,0,0,[27,[24,1],[]]],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n            "],[7,"SearchInput",[],[["@placeholder","@applySearchTerms","@searchTerms"],[[27,[24,2],[]],[27,[24,3],[]],[27,[24,4],[]]]],null],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex flex-col 2xl:flex-row items-center flex-shrink-0 items-center",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","mb-2 2xl:mb-0",null],[10],[1,1,0,0,"\\n              "],[7,"PaginationControls",[],[["@compact","@pager","@goToPage","@prevPage","@nextPage","@itemLabel"],[true,[27,[24,5],[]],[27,[24,6],[]],[27,[24,7],[]],[27,[24,8],[]],[27,[24,9],[]]]],null],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({PaginationControls:Ya,SearchInput:io,AdvancedQueryInput:wo})}},ko);let zo=_i({id:"yk1kIUov",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","grid md:gap-4 grid-cols-1 md:grid-cols-4 container mx-auto",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","col-span-1",null],[10],[1,1,0,0,"\\n        "],[7,"SearchOptions",[],[["@pager","@sortBy","@sortOrder","@itemsPerPage","@changeSearchOptions","@resetOptions"],[[27,[24,0],["results","pager"]],[27,[24,0],["results","sortBy"]],[27,[24,0],["results","sortOrder"]],[27,[24,0],["results","itemsPerPage"]],[27,[24,0],["changeSearchOptions"]],[27,[24,0],["resetOptions"]]]],null],[1,1,0,0,"\\n        "],[9,"div",true],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex my-4 px-4 justify-between text-black",null],[10],[1,1,0,0,"\\n            "],[9,"h3",true],[12,"class","text-lg",null],[10],[1,1,0,0,"Filters"],[11],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["hasActiveFilters"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"button",false],[23,"class","",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["resetFilters"]]],null],[10],[1,1,0,0,"Clear"],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[26,2,"Expression"],[]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"AdvancedSearchFilters",[],[["@collectionFilterSelected"],[[27,[24,0],["collectionFilterSelected"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[7,"FacetList",[],[["@facets","@hasFacets","@facetSelected","@selectedFacets"],[[27,[24,0],["facets"]],[27,[24,0],["hasFacets"]],[27,[24,0],["facetSelected"]],[27,[24,0],["results","selectedFacets"]]]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","col-span-3",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","bg-white shadow mb-4",null],[10],[1,1,0,0,"\\n          "],[7,"TitleBar",[],[["@title","@pager","@goToPage","@prevPage","@nextPage","@searchTerms","@applySearchTerms","@searchInputPlaceholder","@paginationItemLabel","@hasAdvancedSearch"],[[27,[24,0],["title"]],[27,[24,0],["results","pager"]],[27,[24,0],["goToPage"]],[27,[24,0],["prevPage"]],[27,[24,0],["nextPage"]],[27,[24,0],["results","searchTerms"]],[27,[24,0],["applySearchTerms"]],[27,[24,0],["searchInputPlaceholder"]],[27,[24,0],["paginationItemLabel"]],[27,[24,0],["hasAdvancedSearch"]]]],null],[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["isLoading"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[7,"ListSpinner",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[7,"List",[],[["@list"],[[27,[24,0],["list"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex bg-white shadow p-4 items-center justify-center",null],[10],[1,1,0,0,"\\n          "],[7,"PaginationControls",[],[["@compact","@pager","@goToPage","@prevPage","@nextPage","@itemLabel"],[true,[27,[24,0],["results","pager"]],[27,[24,0],["goToPage"]],[27,[24,0],["prevPage"]],[27,[24,0],["nextPage"]],[27,[24,0],["paginationItemLabel"]]]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","if","hasAdvancedSearch"]}',meta:{scope:()=>({on:Ql,AdvancedSearchFilters:wa,FacetList:Aa,List:Va,ListSpinner:$a,PaginationControls:Ya,SearchOptions:to,TitleBar:ko})}},(So=Bo((xo=class extends Pl{constructor(e,t){var r,n,s;super(e,t),No(this,"results",So,this),s=!1,(n="hasAdvancedSearch")in(r=this)?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s,No(this,"isLoading",Eo,this),No(this,"list",Oo,this),No(this,"facets",Co,this),No(this,"hasFacets",To,this),No(this,"title",Po,this),No(this,"collectionId",_o,this),No(this,"searchInputPlaceholder",Mo,this),No(this,"paginationItemLabel",Ao,this),No(this,"activeCollectionFilter",Io,this);const i=document.getElementById("idc-search");this.collectionId=i.dataset.collectionId,this.title=i.dataset.title,this.searchInputPlaceholder=i.dataset.searchPlaceholder,this.paginationItemLabel=i.dataset.paginationLabel,this.hasAdvancedSearch=!!i.dataset.enableAdvancedSearch,this.results.initFromUrl(document.location.href),this.doSearch()}async doSearch(){this.isLoading=!0,await this.results.fetchData(),this.list=this.results.rows,this.isLoading=!1,this.facets=this.results.facets,this.hasFacets=this.results.facets.length>0}goToPage(e){this.results.pager.current_page=e,this.doSearch()}prevPage(){this.results.pager.current_page=--this.results.pager.current_page,this.doSearch()}nextPage(){this.results.pager.current_page=++this.results.pager.current_page,this.doSearch()}changeSearchOptions(e){Object.entries(e).map(([e,t],r)=>{"currentPage"===e?this.results.pager.current_page=1===Number(t)?0:Number(t):this.results[e]=t}),this.doSearch()}applySearchTerms(e){this.results.searchTerms=e,this.doSearch()}facetSelected(e){var t;t=e,this.results.selectedFacets.find(e=>Bl(e,t))?this.results.selectedFacets=function(e,t){return t.filter(t=>!Bl(t,e))}(e,this.results.selectedFacets):this.results.selectedFacets.push(e),this.doSearch()}resetOptions(){this.changeSearchOptions({sortBy:null,sortOrder:null,itemsPerPage:0,currentPage:0})}resetFilters(){this.results.selectedFacets=[],this.results.nodeFilters=[],this.doSearch()}collectionFilterSelected(e){this.results.nodeFilters=e,this.doSearch()}hasActiveFilters(){return this.results.selectedFacets.length>0||this.activeCollectionFilter}}).prototype,"results",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eo=Bo(xo.prototype,"isLoading",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oo=Bo(xo.prototype,"list",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Co=Bo(xo.prototype,"facets",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),To=Bo(xo.prototype,"hasFacets",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Po=Bo(xo.prototype,"title",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_o=Bo(xo.prototype,"collectionId",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Mo=Bo(xo.prototype,"searchInputPlaceholder",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ao=Bo(xo.prototype,"paginationItemLabel",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Io=Bo(xo.prototype,"activeCollectionFilter",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bo(xo.prototype,"goToPage",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"goToPage"),xo.prototype),Bo(xo.prototype,"prevPage",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"prevPage"),xo.prototype),Bo(xo.prototype,"nextPage",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"nextPage"),xo.prototype),Bo(xo.prototype,"changeSearchOptions",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"changeSearchOptions"),xo.prototype),Bo(xo.prototype,"applySearchTerms",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"applySearchTerms"),xo.prototype),Bo(xo.prototype,"facetSelected",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"facetSelected"),xo.prototype),Bo(xo.prototype,"resetOptions",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"resetOptions"),xo.prototype),Bo(xo.prototype,"resetFilters",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"resetFilters"),xo.prototype),Bo(xo.prototype,"collectionFilterSelected",[ta],Object.getOwnPropertyDescriptor(xo.prototype,"collectionFilterSelected"),xo.prototype),xo));var Lo,jo,Ro,Do,Ho,Fo;function Uo(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Vo(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let $o=_i({id:"gtcwRDhw",block:'{"symbols":["aid","number","title","description"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex flex-col place-content-center",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex items-center mx-auto",null],[10],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","flex items-center place-content-center hover:bg-gray-200 focus:bg-gray-200 p-4 z-50 mb-2",null],[3,0,0,[27,[26,3,"ModifierHead"],[]],["click",[27,[24,0],["toggleDrawer"]]],null],[10],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["drawerIsOpen"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-blue-heritage",null],[10],[1,1,0,0,"\\n              Hide Full Collection Record\\n            "],[11],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","{2}",null],[12,"d","M5 15l7-7 7 7",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-blue-heritage",null],[10],[1,1,0,0,"\\n            Show Full Collection Record\\n            "],[11],[1,1,0,0,"\\n            "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n              "],[9,"path",true],[12,"strokeLinecap","round",null],[12,"strokeLinejoin","round",null],[12,"strokeWidth","{2}",null],[12,"d","M19 9l-7 7-7-7",null],[10],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"id","drawer-content",null],[12,"class","flex flex-col place-content-center relative overflow-hidden transition-all ease-in-out duration-700 max-h-0",null],[10],[1,1,0,0,"\\n        "],[9,"hr",true],[12,"class","mt-4 mb-6 w-3/4 self-center",null],[10],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Translated Descriptions"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["descriptions","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["descriptions"]]],null,[["default"],[{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,1530,2,[27,[26,1,"CallHead"],[]],[[27,[24,4],[]],"language","English"],null]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"div",true],[12,"class","flex mb-2 text-gray-500",null],[10],[1,1,0,0,"\\n                  "],[1,0,0,0,[27,[24,4],["value"]]],[1,1,0,0," ("],[1,0,0,0,[27,[24,4],["language"]]],[1,1,0,0,")\\n                "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]]],"parameters":[4]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No translated descriptions available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Alternative Titles"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["alternativeTitles","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["alternativeTitles"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,3],["value"]]],[1,1,0,0," ("],[1,0,0,0,[27,[24,3],["language"]]],[1,1,0,0,")\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[3]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No alternative titles available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex flex-col mr-8",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Collection Contact Name"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_contact_name"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,0],["collectionAttrs","field_collection_contact_name"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n                No collection contact name available\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","flex flex-col",null],[10],[1,1,0,0,"\\n            "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Collection Contact Email"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_contact_email"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,0],["collectionAttrs","field_collection_contact_email"]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n                No collection contact email available\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Collection Numbers"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_number","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_collection_number"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n                "],[1,0,0,0,[27,[24,2],[]]],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No collection numbers available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Citable URL"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_citable_url","uri"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n              "],[9,"a",true],[12,"target","_blank",null],[13,"href",[27,[24,0],["collectionAttrs","field_citable_url","uri"]],null],[10],[1,0,0,0,[27,[24,0],["collectionAttrs","field_citable_url","uri"]]],[11],[1,1,0,0,"\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No citable URL available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-4",null],[10],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-black mb-2",null],[10],[1,1,0,0,"Finding Aids"],[11],[1,1,0,0,"\\n"],[5,[27,[26,4,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_finding_aid","length"]]],null,[["default","else"],[{"statements":[[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["collectionAttrs","field_finding_aid"]]],null,[["default"],[{"statements":[[1,1,0,0,"              "],[9,"div",true],[12,"class","flex mb-2 text-gray-800",null],[10],[1,1,0,0,"\\n                "],[9,"a",true],[12,"target","_blank",null],[13,"href",[27,[24,1],["uri"]],null],[10],[1,0,0,0,[27,[24,1],["title"]]],[11],[1,1,0,0,"\\n              "],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n              No finding aids available\\n            "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["each","is","unless","on","if"]}',meta:{scope:()=>({on:Ql,is:Ga})}},(jo=Vo((Lo=class extends Pl{constructor(e,t){super(...arguments),Uo(this,"drawerIsOpen",jo,this),Uo(this,"collectionUuid",Ro,this),Uo(this,"descriptions",Do,this),Uo(this,"alternativeTitles",Ho,this),Uo(this,"collectionAttrs",Fo,this);const r=document.getElementById("about-collection-drawer");this.collectionUuid=r.dataset.collectionUuid,this.fetchCollectionData()}async fetchCollectionData(){const e=await fetch(`/jsonapi/node/collection_object/${this.collectionUuid}?include=field_description,field_alternative_title`),t=await e.json();this.descriptions=await this.processDescriptions(t),this.alternativeTitles=await this.processAlternativeTitles(t),this.collectionAttrs=t.data.attributes}async processDescriptions(e){return e.data.relationships.field_description.data.map(t=>{const r=e.included.find(e=>e.id===t.id);return{value:t.meta.value,language:r.attributes.name}})}async processAlternativeTitles(e){return e.data.relationships.field_alternative_title.data.map(t=>{const r=e.included.find(e=>e.id===t.id);return{value:t.meta.value,language:r.attributes.name}})}toggleDrawer(){if(this.drawerIsOpen){this.drawerIsOpen=!this.drawerIsOpen;document.getElementById("drawer-content").style["max-height"]="0"}else{this.drawerIsOpen=!this.drawerIsOpen;const e=document.getElementById("drawer-content");e.style["max-height"]=e.scrollHeight+1e3+"px"}}}).prototype,"drawerIsOpen",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ro=Vo(Lo.prototype,"collectionUuid",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Do=Vo(Lo.prototype,"descriptions",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{value:"",language:""}]}}),Ho=Vo(Lo.prototype,"alternativeTitles",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[{value:"",language:""}]}}),Fo=Vo(Lo.prototype,"collectionAttrs",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vo(Lo.prototype,"toggleDrawer",[ta],Object.getOwnPropertyDescriptor(Lo.prototype,"toggleDrawer"),Lo.prototype),Lo));var Wo,Go,Jo;function qo(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ko(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let Yo=_i({id:"Vg9IsPqr",block:'{"symbols":["&attrs","&default"],"statements":[[1,1,0,0,"\\n    "],[9,"button",false],[14,"class",[32,["flex items-center place-content-center p-4 bg-blue-spirit hover:bg-gray-200 hover:shadow-xl text-black w-full ",[31,138,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["effect"]],"animate-wiggle"],null]]],null],[15,1],[3,0,0,[27,[26,1,"ModifierHead"],[]],["click",[27,[24,0],["animate"]]],null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["animationend",[27,[24,0],["reset"]]],null],[10],[1,1,0,0,"\\n      "],[16,2,null],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if","on"]}',meta:{scope:()=>({on:Ql})}},(Go=Ko((Wo=class extends Pl{constructor(...e){super(...e),qo(this,"effect",Go,this),qo(this,"clicked",Jo,this)}animate(){this.effect=!0,this.clicked=!0}reset(){this.effect=!1}}).prototype,"effect",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jo=Ko(Wo.prototype,"clicked",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ko(Wo.prototype,"animate",[ta],Object.getOwnPropertyDescriptor(Wo.prototype,"animate"),Wo.prototype),Ko(Wo.prototype,"reset",[ta],Object.getOwnPropertyDescriptor(Wo.prototype,"reset"),Wo.prototype),Wo));var Xo,Qo,Zo,eu;function tu(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function ru(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let nu=_i({id:"WWqoFHeu",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["hasContact"]]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"class","flex items-center place-content-center p-4 bg-blue-spirit hover:bg-gray-200 hover:shadow-xl text-black mb-4 w-full",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["toggleContactModal"]]],null],[10],[1,1,0,0,"\\n        Ask the collection admin\\n        "],[9,"svg",true],[12,"class","h-5 w-5 ml-1",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "],[7,"AnimatedButton",[[23,"id","copy-url-button",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,0],["copyCitableUrl"]]],null]],[[],[]],[["default"],[{"statements":[[1,1,0,0,"\\n      Copy the citable url\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["copied"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"        "],[9,"svg",true],[12,"class","h-5 w-5 ml-1",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"        "],[9,"svg",true],[12,"class","h-5 w-5 ml-1",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"    "]],"parameters":[]}]]],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","if"]}',meta:{scope:()=>({on:Ql,AnimatedButton:Yo})}},(Qo=ru((Xo=class extends Pl{constructor(e,t){super(...arguments),tu(this,"copied",Qo,this),tu(this,"citableUrl",Zo,this),tu(this,"hasContact",eu,this);let r=document.getElementById("about-collection-button-group");this.citableUrl=r.dataset.collectionUrl,this.hasContact=!!r.dataset.contactEmail}copyCitableUrl(){this.copied=!0,navigator.clipboard.writeText(this.citableUrl)}toggleContactModal(){const e=document.getElementById("idc-modal-container");e?e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden"):console.error("Contact modal not found on page.")}}).prototype,"copied",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zo=ru(Xo.prototype,"citableUrl",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),eu=ru(Xo.prototype,"hasContact",[_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ru(Xo.prototype,"copyCitableUrl",[ta],Object.getOwnPropertyDescriptor(Xo.prototype,"copyCitableUrl"),Xo.prototype),ru(Xo.prototype,"toggleContactModal",[ta],Object.getOwnPropertyDescriptor(Xo.prototype,"toggleContactModal"),Xo.prototype),Xo));class su{constructor(){var e,t,r;r=["=","<>",">",">=","<","<=","STARTS_WITH","CONTAINS","ENDS_WITH","IN","NOT IN","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL"],(t="suggestOperators")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}searchFields(){return[{keys:[],label:"Keywords"},{keys:["tm_X3b_en_title"],label:"Title"},{keys:["ss_author","sm_field_creator"],label:"Author / creator"},{keys:["sm_field_subject"],label:"Subject"},{keys:["sm_field_publisher"],label:"Publisher"}]}async suggestCollection(e,t,r){if(!this.suggestOperators.includes(r))return console.error(`Unknown JSONAPI filter: "${r}. Must use one of: ${JSON.stringify(this.suggestOperators)}`),[];const n=`/jsonapi/node/collection_object?${"filter[title-suggest][condition][path]="+t}&${"filter[title-suggest][condition][operator]="+r}&${"filter[title-suggest][condition][value]="+e}`,s=await fetch(n);return(await s.json()).data.map(e=>({id:e.attributes.drupal_internal__nid,title:e.attributes.title}))}}const iu=document.getElementById("idc-search"),lu=document.getElementById("about-collection-drawer"),au=document.getElementById("about-collection-button-group");if(iu){const e=iu.dataset.type;e&&Sl(zo,{element:iu,services:{results:new Xl(Yl[e.toUpperCase()]),searchInfo:new su}})}lu&&au&&(Sl($o,lu),Sl(nu,au))}]);