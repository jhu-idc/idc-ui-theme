!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=1)}([function(e,t){},function(e,t,r){"use strict";r.r(t);const n=Symbol("Services");class s{constructor(e){this[n]=e}lookup({type:e,name:t}){return this[n][t]}}const i="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`;let a=1;const l=i("TAG_COMPUTE");function o(e){return a}function u(e,t){return t>=e[l]()}const c=i("TAG_TYPE");class h{constructor(e){this.revision=1,this.lastChecked=1,this.lastValue=1,this.isUpdating=!1,this.subtags=null,this.subtag=null,this.subtagBufferCache=null,this[c]=e}[l](){let{lastChecked:e}=this;if(!0===this.isUpdating)this.lastChecked=++a;else if(e!==a){this.isUpdating=!0,this.lastChecked=a;try{let{subtags:e,subtag:t,subtagBufferCache:r,lastValue:n,revision:s}=this;if(null!==t){let e=t[l]();e===r?s=Math.max(s,n):(this.subtagBufferCache=null,s=Math.max(s,e))}if(null!==e)for(let t=0;t<e.length;t++){let r=e[t][l]();s=Math.max(r,s)}this.lastValue=s}finally{this.isUpdating=!1}}return this.lastValue}static updateTag(e,t){let r=e,n=t;n===g?r.subtag=null:(r.subtagBufferCache=n[l](),r.subtag=n)}static dirtyTag(e){e.revision=++a}}const p=h.dirtyTag,d=h.updateTag;function m(){return new h(0)}function f(){return new h(1)}const g=new h(3);function b({tag:e}){return e===g}function y(e){return e===g}new class{[l](){return 9007199254740991}};new class{[l](){return a}};function v(e){let t=[];for(let r=0,n=e.length;r<n;r++){let n=e[r];n!==g&&t.push(n)}return w(t)}function w(e){switch(e.length){case 0:return g;case 1:return e[0];default:let t=new h(2);return t.subtags=e,t}}let k=function(){};function x(e){return"object"==typeof e&&null!==e||"function"==typeof e}const S=new WeakMap;function E(e,t){if(x(e)){let r=S.get(e);if(void 0===r)r=new Map,S.set(e,r);else if(r.has(t))return r.get(t);let n=f();return r.set(t,n),n}return g}class C{constructor(){this.tags=new Set,this.last=null}add(e){this.tags.add(e),this.last=e}combine(){let{tags:e}=this;if(0===e.size)return g;if(1===e.size)return this.last;{let t=[];return e.forEach(e=>t.push(e)),v(t)}}}let O=null;const A=[];function M(){A.push(O),O=new C}function T(){let e=O;return O=A.pop(),e.combine()}new WeakMap;function P(e,t){let r;M();try{e()}finally{r=T()}return r}function N(e){null!==O&&O.add(e)}function _(e){A.push(O),O=null;try{e()}finally{O=A.pop()}}const R=m();function L(e,t){let r=new WeakMap,n="function"==typeof t;return{getter:function(s){let i;return N(E(s,e)),n&&!r.has(s)?(i=t.call(s),r.set(s,i)):i=r.get(s),i},setter:function(t,n){p(R),function(e,t){if(!x(e))throw new Error("BUG: Can't update a tag for a primitive");{let r=S.get(e);if(void 0===r)return;let n=r.get(t);void 0!==n&&(p(n),k())}}(t,e),r.set(t,n)}}}const B=Object.freeze([]);var D=function(e,t){if(!e)throw new Error(t||"assertion failure")};let I=0;function z(e){return e._guid=++I}function j(){return Object.create(null)}function U(e){return"object"==typeof e&&null!==e}class H{constructor(){this.stack=[],this.current=null}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop(),t=this.stack.length;return this.current=0===t?null:this.stack[t-1],void 0===e?null:e}nth(e){let t=this.stack.length;return t<e?null:this.stack[t-e]}isEmpty(){return 0===this.stack.length}toArray(){return this.stack}}function V(e="unreachable"){return new Error(e)}function F(e){throw new Error("Exhausted "+e)}const $="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`,W=$("DESTROY");function J(e){let t=e.firstChild;for(;t;){let r=t.nextSibling;e.removeChild(t),t=r}}const G=new WeakMap,Y=$("WILL_DROP"),K=$("DID_DROP"),q=$("CHILDREN"),X=new WeakMap;function Z(e){return null!==e&&"object"==typeof e&&void 0!==e[K]}function Q(e,t){ee(e,ne(t))}function ee(e,t){let r=G.get(e);r||(r=new Set,G.set(e,r)),r.add(t)}function te(e){let t=G.get(e);t&&t.forEach(e=>{e[Y]()})}function re(e){let t=G.get(e);t&&t.forEach(e=>{e[K](),t.delete(e)})}function ne(e){let t=X.get(e);return t||(t=function(e){return!(!e||void 0===e[W])}(e)?new ae(e):function(e){return!(!e||"object"!=typeof e||"function"!=typeof e.destroy)}(e)?new le(e):new oe(e),X.set(e,t)),t}function se(e){return new ie(e)}class ie{constructor(e){this.destructors=e}[Y](){this.destructors.forEach(e=>e[Y]())}[K](){this.destructors.forEach(e=>e[K]())}get[q](){return this.destructors}toString(){return"SnapshotDestructor"}}class ae{constructor(e){this.inner=e}[Y](){te(this.inner)}[K](){this.inner[W](),re(this.inner)}get[q](){return G.get(this.inner)||[]}toString(){return"DestroyableDestructor"}}class le{constructor(e){this.inner=e}[Y](){"function"==typeof this.inner.willDestroy&&this.inner.willDestroy(),te(this.inner)}[K](){this.inner.destroy(),re(this.inner)}get[q](){return G.get(this.inner)||[]}toString(){return"StringDestroyableDestructor"}}class oe{constructor(e){this.inner=e}[Y](){te(this.inner)}[K](){re(this.inner)}get[q](){return G.get(this.inner)||[]}toString(){return"SimpleDestructor"}}class ue{constructor(){this.clear()}head(){return this._head}tail(){return this._tail}clear(){this._head=this._tail=null}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e.next}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=t.next}insertBefore(e,t=null){return null===t?this.append(e):(t.prev?t.prev.next=e:this._head=e,e.prev=t.prev,e.next=t,t.prev=e,e)}append(e){let t=this._tail;return t?(t.next=e,e.prev=t,e.next=null):this._head=e,this._tail=e}remove(e){return e.prev?e.prev.next=e.next:this._head=e.next,e.next?e.next.prev=e.prev:this._tail=e.prev,e}[Y](){this.forEachNode(e=>ne(e)[Y]())}[K](){this.forEachNode(e=>ne(e)[K]())}get[q](){let e=[];return this.forEachNode(t=>e.push(...ne(t)[q])),e}}class ce{constructor(e,t){this._head=e,this._tail=t}forEachNode(e){let t=this._head;for(;null!==t;)e(t),t=this.nextNode(t)}head(){return this._head}tail(){return this._tail}toArray(){let e=[];return this.forEachNode(t=>e.push(t)),e}nextNode(e){return e===this._tail?null:e.next}}new ce(null,null);const{keys:he}=Object;function pe(e){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(null===r||"object"!=typeof r)continue;let n=he(r);for(let t=0;t<n.length;t++){let s=n[t];e[s]=r[s]}}return e}function de(e){return"number"==typeof e?e<0?1073741827-e:e:!1===e?1073741824:!0===e?1073741825:null===e?1073741826:void 0===e?1073741827:F(e)}function me(e){return function(e,t,r){return e%1==0&&e>=t&&e<=r}(e,-1073741820,1073741823)}function fe(e){return e<0}function ge(e,t=2147483647,r=-1){if(e>t)throw new Error(`index ${e} overflowed range 0 to ${t}`);return r-e}function be(e,t=-1){return t-e}function ye(e){if("number"==typeof e)return e;{let t=e.errors[0];throw new Error(`Compile Error: ${t.problem} @ ${t.span.start}..${t.span.end}`)}}function ve(e){if("error"===e.result)throw new Error(`Compile Error: ${e.problem} @ ${e.span.start}..${e.span.end}`);return e}function we(e,t="unexpected unreachable branch"){console.log("unreachable",e),console.trace(`${t} :: ${JSON.stringify(e)} (${e})`)}function ke(e){return e<=3}var xe,Se;!function(e){e[e.s0=4]="s0",e[e.s1=5]="s1"}(xe||(xe={})),function(e){e[e.t0=6]="t0",e[e.t1=7]="t1"}(Se||(Se={}));const Ee=$("INNER_VM"),Ce=$("DESTRUCTOR_STACK"),Oe=$("STACKS"),Ae=$("REGISTERS"),Me=$("HEAP"),Te=$("CONSTANTS"),Pe=$("ARGS");$("PC");class Ne{constructor(e,t){this.element=e,this.nextSibling=t}}class _e{constructor(e,t,r){this.parentNode=e,this.first=t,this.last=r}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}class Re{constructor(e,t){this.parentNode=e,this.node=t}parentElement(){return this.parentNode}firstNode(){return this.node}lastNode(){return this.node}}function Le(e,t){let r=e.parentElement(),n=e.firstNode(),s=e.lastNode(),i=n;for(;;){let e=i.nextSibling;if(r.insertBefore(i,t),i===s)return e;i=e}}function Be(e){let t=e.parentElement(),r=e.firstNode(),n=e.lastNode(),s=r;for(;;){let e=s.nextSibling;if(t.removeChild(s),s===n)return e;s=e}}function De(e,t){let r=function(e){return G.get(e)||null}(e);null!==r&&t.willDestroy(se(r))}function Ie(e,t){let r=function(e){let t=G.get(e);return t&&t.size>0?(G.delete(e),t):null}(e);null!==r&&t.didDestroy(se(r))}function ze(e,t){t.willDestroy(ne(e))}function je(e,t){t.didDestroy(ne(e))}var Ue;class He{constructor(e){this.node=e}firstNode(){return this.node}}class Ve{constructor(e){this.node=e}lastNode(){return this.node}}const Fe=$("CURSOR_STACK");class $e{constructor(e,t,r){this.constructing=null,this.operations=null,this[Ue]=new H,this.modifierStack=new H,this.blockStack=new H,this.pushElement(t,r),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}static forInitialRender(e,t){return new this(e,t.element,t.nextSibling).initialize()}static resume(e,t){let r=new this(e,t.parentElement(),t.reset(e)).initialize();return r.pushLiveBlock(t),r}initialize(){return this.pushSimpleBlock(),this}debugBlocks(){return this.blockStack.toArray()}get element(){return this[Fe].current.element}get nextSibling(){return this[Fe].current.nextSibling}get hasBlocks(){return this.blockStack.size>0}block(){return this.blockStack.current}popElement(){this[Fe].pop(),this[Fe].current}pushSimpleBlock(){return this.pushLiveBlock(new We(this.element))}pushUpdatableBlock(){return this.pushLiveBlock(new Ge(this.element))}pushBlockList(e){return this.pushLiveBlock(new Ye(this.element,e))}pushLiveBlock(e,t=!1){let r=this.blockStack.current;return null!==r&&(t||r.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(e){let t=this.element,r=this.constructing;this.__flushElement(t,r),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(r,null),this.didOpenElement(r)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){return this.willCloseElement(),this.popElement(),this.popModifiers()}pushRemoteElement(e,t,r){return this.__pushRemoteElement(e,t,r)}__pushRemoteElement(e,t,r){if(this.pushElement(e,r),void 0===r)for(;e.lastChild;)e.removeChild(e.lastChild);let n=new Je(e);return this.pushLiveBlock(n,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t=null){this[Fe].push(new Ne(e,t))}pushModifiers(e){this.modifierStack.push(e)}popModifiers(){return this.modifierStack.pop()}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let{dom:t,element:r,nextSibling:n}=this,s=t.createTextNode(e);return t.insertBefore(r,s,n),s}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let r=new _e(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),r}return new Re(this.element,this.__appendComment(""))}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendDynamicHTML(e){let t=this.trustedContent(e);this.didAppendBounds(t)}appendDynamicText(e){let t=this.untrustedContent(e);return this.didAppendNode(t),t}appendDynamicFragment(e){let t=this.__appendFragment(e);this.didAppendBounds(t)}appendDynamicNode(e){let t=this.__appendNode(e),r=new Re(this.element,t);this.didAppendBounds(r)}trustedContent(e){return this.__appendHTML(e)}untrustedContent(e){return this.__appendText(e)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let{dom:t,element:r,nextSibling:n}=this,s=t.createComment(e);return t.insertBefore(r,s,n),s}__setAttribute(e,t,r){this.dom.setAttribute(this.constructing,e,t,r)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,r){this.__setAttribute(e,t,r)}setDynamicAttribute(e,t,r,n){let s=this.constructing,i=this.env.attributeFor(s,e,r,n);return i.set(this,t,this.env),i}}Ue=Fe;class We{constructor(e){this.parent=e,this.first=null,this.last=null,this.destroyables=null,this.nesting=0}parentElement(){return this.parent}firstNode(){return this.first.firstNode()}lastNode(){return this.last.lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0===this.nesting&&(this.first||(this.first=new He(e)),this.last=new Ve(e))}didAppendBounds(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)}finalize(e){null===this.first&&e.appendComment("")}}class Je extends We{[W](){this.parentElement()===this.firstNode().parentNode&&Be(this)}}class Ge extends We{reset(e){let t=function(e,t){return De(e,t),Ie(e,t),Be(e)}(this,e);return this.first=null,this.last=null,this.destroyables=null,this.nesting=0,t}}class Ye{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}parentElement(){return this.parent}firstNode(){return this.boundList.head().firstNode()}lastNode(){return this.boundList.tail().lastNode()}openElement(e){}closeElement(){}didAppendNode(e){}didAppendBounds(e){}finalize(e){}}class Ke{constructor(e){this.lastValue=null,this.lastRevision=null,this.initialized=!1,this.tag=e.tag,this.reference=e}peek(){return this.initialized?this.lastValue:this.initialize()}revalidate(){if(!this.initialized)return this.initialize();let{reference:e,lastRevision:t}=this,r=e.tag;if(u(r,t))return qe;let{lastValue:n}=this,s=e.value();return this.lastRevision=o(),s===n?qe:(this.lastValue=s,s)}initialize(){let{reference:e}=this,t=this.lastValue=e.value();return this.lastRevision=o(e.tag),this.initialized=!0,t}}const qe=$("NOT_MODIFIED");const Xe=new class{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Xe}}(void 0);class Ze{constructor(e){this.inner=e,this.tag=g}value(){return this.inner}get(e){return Xe}}class Qe extends class{constructor(e){this.next=null,this.prev=null,this.value=e}}{constructor(e,t){super(e.valueReferenceFor(t)),this.retained=!1,this.seen=!1,this.key=t.key,this.iterable=e,this.memo=e.memoReferenceFor(t)}update(e){this.retained=!0,this.iterable.updateValueReference(this.value,e),this.iterable.updateMemoReference(this.memo,e)}shouldRemove(){return!this.retained}reset(){this.retained=!1,this.seen=!1}}class et{constructor(e){this.iterator=null,this.map=new Map,this.list=new ue,this.tag=e.tag,this.iterable=e}isEmpty(){return(this.iterator=this.iterable.iterate()).isEmpty()}iterate(){let e;return e=null===this.iterator?this.iterable.iterate():this.iterator,this.iterator=null,e}advanceToKey(e,t){let r=t;for(;null!==r&&r.key!==e;)r=this.advanceNode(r);return r}has(e){return this.map.has(e)}get(e){return this.map.get(e)}wasSeen(e){let t=this.map.get(e);return void 0!==t&&t.seen}update(e){let t=this.get(e.key);return t.update(e),t}append(e){let{map:t,list:r,iterable:n}=this,s=new Qe(n,e);return t.set(e.key,s),r.append(s),s}insertBefore(e,t){let{map:r,list:n,iterable:s}=this,i=new Qe(s,e);return r.set(e.key,i),i.retained=!0,n.insertBefore(i,t),i}move(e,t){let{list:r}=this;e.retained=!0,r.remove(e),r.insertBefore(e,t)}remove(e){let{list:t}=this;t.remove(e),this.map.delete(e.key)}nextNode(e){return this.list.nextNode(e)}advanceNode(e){return e.seen=!0,this.list.nextNode(e)}head(){return this.list.head()}}class tt{constructor(e){this.iterator=null;let t=new et(e);this.artifacts=t}next(){let{artifacts:e}=this,t=(this.iterator=this.iterator||e.iterate()).next();return null===t?null:e.append(t)}}var rt;!function(e){e[e.Append=0]="Append",e[e.Prune=1]="Prune",e[e.Done=2]="Done"}(rt||(rt={}));const nt=$("END");class st{constructor({target:e,artifacts:t,env:r}){this.target=e,this.artifacts=t,this.iterator=t.iterate(),this.current=t.head(),this.env=r}sync(){let e=rt.Append;for(;;)switch(e){case rt.Append:e=this.nextAppend();break;case rt.Prune:e=this.nextPrune();break;case rt.Done:return void this.nextDone()}}advanceToKey(e){let{current:t,artifacts:r}=this;if(null===t)return;let n=r.advanceNode(t);if(n.key===e)return void(this.current=r.advanceNode(n));let s=r.advanceToKey(e,t);s&&(this.move(s,t),this.current=r.nextNode(t))}move(e,t){e.next!==t&&(this.artifacts.move(e,t),this.target.move(this.env,e.key,e.value,e.memo,t?t.key:nt))}nextAppend(){let{iterator:e,current:t,artifacts:r}=this,n=e.next();if(null===n)return this.startPrune();let{key:s}=n;return null!==t&&t.key===s?this.nextRetain(n,t):r.has(s)?this.nextMove(n):this.nextInsert(n),rt.Append}nextRetain(e,t){let{artifacts:r}=this;t.update(e),this.current=r.nextNode(t),this.target.retain(this.env,e.key,t.value,t.memo)}nextMove(e){let{current:t,artifacts:r}=this,{key:n}=e,s=r.update(e);r.wasSeen(n)?this.move(s,t):this.advanceToKey(n)}nextInsert(e){let{artifacts:t,target:r,current:n}=this,s=t.insertBefore(e,n);r.insert(this.env,s.key,s.value,s.memo,n?n.key:null)}startPrune(){return this.current=this.artifacts.head(),rt.Prune}nextPrune(){let{artifacts:e,target:t,current:r}=this;if(null===r)return rt.Done;let n=r;return this.current=e.nextNode(n),n.shouldRemove()?(e.remove(n),t.delete(this.env,n.key)):n.reset(),rt.Prune}nextDone(){this.target.done(this.env)}}const it=$("UPDATE_REFERENCED_VALUE");class at{constructor(e){this.env=e,this.children=j(),this.tag=g}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}class lt extends at{constructor(e,t){super(t),this.inner=e}value(){return this.inner}}class ot extends at{constructor(e,t,r,n){super(r),this.fn=e,this.args=t,this.computeRevision=null,this.computeTag=null,b(t)&&this.compute();let{tag:s,computeTag:i}=this;if(null!==i&&y(i))s=this.tag=g,this.computeRevision=o();else{let e=this.valueTag=f();s=this.tag=v([t.tag,e]),null!==i&&(d(e,i),this.computeRevision=o())}}compute(){this.computeTag=P(()=>{this.computeValue=this.fn(this.args)})}value(){let{tag:e,computeRevision:t}=this;return null!==t&&u(e,t)||(this.compute(),d(this.valueTag,this.computeTag),this.computeRevision=o()),this.computeValue}}class ut{constructor(e,t,r){this.parentReference=e,this.propertyKey=t,this.env=r,this.children=j(),this.lastRevision=null;let n=this.valueTag=f(),s=e.tag;this.tag=v([s,n])}value(){let{tag:e,lastRevision:t,lastValue:r,parentReference:n,valueTag:s,propertyKey:i}=this;if(null===t||!u(e,t)){let e=n.value();if(null!=e){let t=P(()=>{r=this.env.getPath(e,i)});d(s,t)}else r=void 0;this.lastValue=r,this.lastRevision=o()}return r}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}[it](e){let{parentReference:t,propertyKey:r}=this,n=t.value();this.env.setPath(n,r,e)}}class ct{constructor(e,t,r,n){this.parentReference=e,this.itemValue=t,this.env=n,this.tag=f(),this.children=j()}value(){return this.itemValue}update(e){p(this.tag),this.itemValue=e}get(e){{let t=this.children[e];return void 0===t&&(t=this.children[e]=new ut(this,e,this.env)),t}}}const ht={},pt=(e,t)=>t,dt=(e,t)=>String(t),mt=e=>null===e?ht:e;function ft(e,t){switch(e){case"@key":return yt(pt);case"@index":return yt(dt);case"@identity":return yt(mt);default:return function(e,t){return yt(r=>t(r,e))}(e,t)}}class gt{get weakMap(){return void 0===this._weakMap&&(this._weakMap=new WeakMap),this._weakMap}get primitiveMap(){return void 0===this._primitiveMap&&(this._primitiveMap=new Map),this._primitiveMap}set(e,t){U(e)||"function"==typeof e?this.weakMap.set(e,t):this.primitiveMap.set(e,t)}get(e){return U(e)||"function"==typeof e?this.weakMap.get(e):this.primitiveMap.get(e)}}const bt=new gt;function yt(e){let t=new gt;return(r,n)=>{let s=e(r,n),i=t.get(r)||0;return t.set(s,i+1),0===i?s:function(e,t){let r=bt.get(e);void 0===r&&(r=[],bt.set(e,r));let n=r[t];return void 0===n&&(n={value:e,count:t},r[t]=n),n}(s,i)}}class vt{constructor(e,t,r){this.parentRef=e,this.key=t,this.env=r,this.tag=e.tag}iterate(){let{parentRef:e,key:t,env:r}=this,n=e.value(),s=ft(t,r.getPath);if(Array.isArray(n))return new kt(n,s);let i=r.toIterator(n);return null===i?new kt(B,()=>null):new wt(i,s)}valueReferenceFor(e){let{parentRef:t,env:r}=this;return new ct(t,e.value,e.memo,r)}updateValueReference(e,t){e.update(t.value)}memoReferenceFor(e){let{parentRef:t,env:r}=this;return new ct(t,e.memo,"",r)}updateMemoReference(e,t){e.update(t.memo)}}class wt{constructor(e,t){this.inner=e,this.keyFor=t}isEmpty(){return this.inner.isEmpty()}next(){let e=this.inner.next();return null!==e&&(e.key=this.keyFor(e.value,e.memo)),e}}class kt{constructor(e,t){this.iterator=e,this.keyFor=t,this.pos=0,0===e.length?this.current={kind:"empty"}:this.current={kind:"first",value:e[this.pos]}}isEmpty(){return"empty"===this.current.kind}next(){let e,t=this.current;if("first"===t.kind)this.current={kind:"progress"},e=t.value;else{if(this.pos>=this.iterator.length-1)return null;e=this.iterator[++this.pos]}let{keyFor:r}=this;return{key:r(e,this.pos),value:e,memo:this.pos}}}const xt={foreignObject:1,desc:1,title:1},St=Object.create(null);class Et{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement("div")}createElement(e,t){let r,n;if(t?(r="http://www.w3.org/2000/svg"===t.namespaceURI||"svg"===e,n=!!xt[t.tagName]):(r="svg"===e,n=!1),r&&!n){if(St[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS("http://www.w3.org/2000/svg",e)}return this.document.createElement(e)}insertBefore(e,t,r){e.insertBefore(t,r)}insertHTMLBefore(e,t,r){if(""===r){let r=this.createComment("");return e.insertBefore(r,t),new _e(e,r,r)}let n,s=t?t.previousSibling:e.lastChild;if(null===t)e.insertAdjacentHTML("beforeend",r),n=e.lastChild;else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",r),n=t.previousSibling;else{let{uselessElement:s}=this;e.insertBefore(s,t),s.insertAdjacentHTML("beforebegin",r),n=s.previousSibling,e.removeChild(s)}let i=s?s.nextSibling:e.firstChild;return new _e(e,i,n)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}function Ct(e,t,r){if(!e)return t;if(!function(e,t){let r=e.createElementNS(t,"svg");try{r.insertAdjacentHTML("beforeend","<circle></circle>")}catch(e){}finally{return 1!==r.childNodes.length||"http://www.w3.org/2000/svg"!==r.firstChild.namespaceURI}}(e,r))return t;let n=e.createElement("div");return class extends t{insertHTMLBefore(e,t,s){return""===s||e.namespaceURI!==r?super.insertHTMLBefore(e,t,s):function(e,t,r,n){let s;if("FOREIGNOBJECT"===e.tagName.toUpperCase()){let e="<svg><foreignObject>"+r+"</foreignObject></svg>";J(t),t.insertAdjacentHTML("afterbegin",e),s=t.firstChild.firstChild}else{let e="<svg>"+r+"</svg>";J(t),t.insertAdjacentHTML("afterbegin",e),s=t.firstChild}return function(e,t,r){let n=e.firstChild,s=n,i=n;for(;i;){let e=i.nextSibling;t.insertBefore(i,r),s=i,i=e}return new _e(t,n,s)}(s,e,n)}(e,n,s,t)}}}function Ot(e,t){return e&&function(e){let t=e.createElement("div");if(t.appendChild(e.createTextNode("first")),t.insertAdjacentHTML("beforeend","second"),2===t.childNodes.length)return!1;return!0}(e)?class extends t{constructor(e){super(e),this.uselessComment=e.createComment("")}insertHTMLBefore(e,t,r){if(""===r)return super.insertHTMLBefore(e,t,r);let n=!1,s=t?t.previousSibling:e.lastChild;s&&s instanceof Text&&(n=!0,e.insertBefore(this.uselessComment,t));let i=super.insertHTMLBefore(e,t,r);return n&&e.removeChild(this.uselessComment),i}}:t}["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach(e=>St[e]=1);let At="undefined"==typeof document?null:document;var Mt;!function(e){class t extends Et{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,r,n=null){n?e.setAttributeNS(n,t,r):e.setAttribute(t,r)}}e.TreeConstruction=t;let r=t;r=Ot(At,r),r=Ct(At,r,"http://www.w3.org/2000/svg"),e.DOMTreeConstruction=r}(Mt||(Mt={}));class Tt extends Et{constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,r){e.setAttribute(t,r)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,r){this.insertBefore(e,t,r.nextSibling)}}let Pt=Tt;Pt=Ot(At,Pt),Pt=Ct(At,Pt,"http://www.w3.org/2000/svg");const Nt=Mt.DOMTreeConstruction;class _t extends Ze{static create(e){return void 0===e?Bt:null===e?Dt:!0===e?It:!1===e?zt:"number"==typeof e?new Lt(e):new Rt(e)}constructor(e){super(e)}get(e){return Bt}}class Rt extends _t{constructor(){super(...arguments),this.lengthReference=null}get(e){if("length"===e){let{lengthReference:e}=this;return null===e&&(e=this.lengthReference=new Lt(this.inner.length)),e}return super.get(e)}}class Lt extends _t{constructor(e){super(e)}}const Bt=new Lt(void 0),Dt=new Lt(null),It=new Lt(!0),zt=new Lt(!1);class jt{constructor(e,t=Ut){this.inner=e,this.toBool=t,this.tag=e.tag}value(){return this.toBool(this.inner.value())}}function Ut(e){return!!e}function Ht(e){return Vt(e)?"":String(e)}function Vt(e){return null==e||"function"!=typeof e.toString}function Ft(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function $t(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function Wt(e){return"string"==typeof e}function Jt(e,t){let r,n;if(t in e)n=t,r="prop";else{let s=t.toLowerCase();s in e?(r="prop",n=s):(r="attr",n=t)}return"prop"!==r||"style"!==n.toLowerCase()&&!function(e,t){let r=Gt[e.toUpperCase()];return r&&r[t.toLowerCase()]||!1}(e.tagName,n)||(r="attr"),{normalized:n,type:r}}const Gt={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},BUTTON:{form:!0}};const Yt=["javascript:","vbscript:"],Kt=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],qt=["EMBED"],Xt=["href","src","background","action"],Zt=["src"];function Qt(e,t){return-1!==e.indexOf(t)}function er(e,t){return(null===e||Qt(Kt,e))&&Qt(Xt,t)}function tr(e,t){return null!==e&&(Qt(qt,e)&&Qt(Zt,t))}function rr(e,t){return er(e,t)||tr(e,t)}function nr(e,t,r,n){let s=null;if(null==n)return n;if(Ft(n))return n.toHTML();s=t?t.tagName.toUpperCase():null;let i=Ht(n);if(er(s,r)){let t=e.protocolForURL(i);if(Qt(Yt,t))return"unsafe:"+i}return tr(s,r)?"unsafe:"+i:i}function sr(e,t,r){let{tagName:n,namespaceURI:s}=e,i={element:e,name:t,namespace:r};if("http://www.w3.org/2000/svg"===s)return ir(n,t,i);let{type:a,normalized:l}=Jt(e,t);return"attr"===a?ir(n,l,i):function(e,t,r){if(rr(e,t))return new ur(t,r);if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new hr(t,r);if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new pr(t,r);return new or(t,r)}(n,l,i)}function ir(e,t,r){return rr(e,t)?new cr(r):new lr(r)}class ar{constructor(e){this.attribute=e}}class lr extends ar{set(e,t,r){let n=dr(t);if(null!==n){let{name:t,namespace:r}=this.attribute;e.__setAttribute(t,n,r)}}update(e,t){let r=dr(e),{element:n,name:s}=this.attribute;null===r?n.removeAttribute(s):n.setAttribute(s,r)}}class or extends ar{constructor(e,t){super(t),this.normalizedName=e}set(e,t,r){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))}update(e,t){let{element:r}=this.attribute;this.value!==e&&(r[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())}removeAttribute(){let{element:e,namespace:t}=this.attribute;t?e.removeAttributeNS(t,this.normalizedName):e.removeAttribute(this.normalizedName)}}class ur extends or{set(e,t,r){let{element:n,name:s}=this.attribute,i=nr(r,n,s,t);super.set(e,i,r)}update(e,t){let{element:r,name:n}=this.attribute,s=nr(t,r,n,e);super.update(s,t)}}class cr extends lr{set(e,t,r){let{element:n,name:s}=this.attribute,i=nr(r,n,s,t);super.set(e,i,r)}update(e,t){let{element:r,name:n}=this.attribute,s=nr(t,r,n,e);super.update(s,t)}}class hr extends or{set(e,t){e.__setProperty("value",Ht(t))}update(e){let t=this.attribute.element,r=t.value,n=Ht(e);r!==n&&(t.value=n)}}class pr extends or{set(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)}update(e){let t=this.attribute.element;t.selected=!!e}}function dr(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}const mr={},fr=Object.freeze([]);class gr{constructor(){this.strings=[],this.arrays=[fr],this.tables=[],this.handles=[],this.resolved=[],this.numbers=[],this.others=[]}other(e){return this.others.push(e)-1}string(e){let t=this.strings.indexOf(e);return t>-1?t:this.strings.push(e)-1}stringArray(e){let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=this.string(e[r]);return this.array(t)}array(e){if(0===e.length)return 0;let t=this.arrays.indexOf(e);return t>-1?t:this.arrays.push(e)-1}serializable(e){let t=JSON.stringify(e),r=this.strings.indexOf(t);return r>-1?r:this.strings.push(t)-1}templateMeta(e){return this.serializable(e)}number(e){let t=this.numbers.indexOf(e);return t>-1?t:this.numbers.push(e)-1}toPool(){return{strings:this.strings,arrays:this.arrays,handles:this.handles,numbers:this.numbers}}}class br{constructor(e){this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.numbers=e.numbers,this.others=[]}getString(e){return this.strings[e]}getNumber(e){return this.numbers[e]}getStringArray(e){let t=this.getArray(e),r=new Array(t.length);for(let e=0;e<t.length;e++){let n=t[e];r[e]=this.getString(n)}return r}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.getSerializable(e)}getOther(e){return this.others[e]}}class yr extends gr{constructor(e){super(),this.metas=[],e&&(this.strings=e.strings,this.arrays=e.arrays,this.handles=e.handles,this.resolved=this.handles.map(()=>mr),this.numbers=e.numbers),this.others=[]}templateMeta(e){let t=this.metas.indexOf(e);return t>-1?t:this.metas.push(e)-1}getNumber(e){return this.numbers[e]}getString(e){return this.strings[e]}getStringArray(e){let t=this.getArray(e),r=new Array(t.length);for(let e=0;e<t.length;e++){let n=t[e];r[e]=this.getString(n)}return r}getArray(e){return this.arrays[e]}getSerializable(e){return JSON.parse(this.strings[e])}getTemplateMeta(e){return this.metas[e]}getOther(e){return this.others[e]}}class vr{constructor(e){this.heap=e,this.offset=0}get size(){return 1+((768&this.heap.getbyaddr(this.offset))>>8)}get isMachine(){return 1024&this.heap.getbyaddr(this.offset)?1:0}get type(){return 255&this.heap.getbyaddr(this.offset)}get op1(){return this.heap.getbyaddr(this.offset+1)}get op2(){return this.heap.getbyaddr(this.offset+2)}get op3(){return this.heap.getbyaddr(this.offset+3)}}function wr(e,t){return t|e<<2}function kr(e,t){return e|t<<30}class xr{constructor(e){let{buffer:t,table:r}=e;this.heap=new Int32Array(t),this.table=r}getaddr(e){return this.table[e]}getbyaddr(e){return this.heap[e]}sizeof(e){return Or(this.table,e)}scopesizeof(e){return Ar(this.table,e)}}class Sr{constructor(){this.placeholders=[],this.stdlibs=[],this.offset=0,this.handle=0,this.capacity=1048576,this.heap=new Int32Array(1048576),this.table=[]}push(e){this.sizeCheck(),this.heap[this.offset++]=e}sizeCheck(){if(0===this.capacity){let e=Cr(this.heap,0,this.offset);this.heap=new Int32Array(e.length+1048576),this.heap.set(e,0),this.capacity=1048576}this.capacity--}getbyaddr(e){return this.heap[e]}setbyaddr(e,t){this.heap[e]=t}malloc(){this.table.push(this.offset,0,0);let e=this.handle;return this.handle+=3,e}finishMalloc(e,t){this.table[e+1]=wr(t,0)}size(){return this.offset}getaddr(e){return this.table[e]}gethandle(e){this.table.push(e,wr(0,3),0);let t=this.handle;return this.handle+=3,t}sizeof(e){return Or(this.table,e)}scopesizeof(e){return Ar(this.table,e)}free(e){let t=this.table[e+1];this.table[e+1]=kr(t,1)}compact(){let e=0,{table:t,table:{length:r},heap:n}=this;for(let s=0;s<r;s+=3){let r=t[s],i=t[s+1],a=i&Size.SIZE_MASK,l=0&i;if(2!==l)if(1===l)t[s+1]=kr(i,2),e+=a;else if(0===l){for(let t=r;t<=s+a;t++)n[t-e]=n[t];t[s]=r-e}else 3===l&&(t[s]=r-e)}this.offset=this.offset-e}pushPlaceholder(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.placeholders.push([t,e])}pushStdlib(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.stdlibs.push([t,e])}patchPlaceholders(){let{placeholders:e}=this;for(let t=0;t<e.length;t++){let[r,n]=e[t];this.setbyaddr(r,n())}}patchStdlibs(e){let{stdlibs:t}=this;for(let r=0;r<t.length;r++){let[n,{value:s}]=t[r];this.setbyaddr(n,e[s])}this.stdlibs=[]}capture(e,t=this.offset){this.patchPlaceholders(),this.patchStdlibs(e);let r=Cr(this.heap,0,t).buffer;return{handle:this.handle,table:this.table,buffer:r}}}class Er{constructor(e,t){this.constants=e,this.heap=t,this._opcode=new vr(this.heap)}static hydrate(e){let t=new xr(e.heap),r=new br(e.constants);return new Er(r,t)}opcode(e){return this._opcode.offset=e,this._opcode}}function Cr(e,t,r){if(void 0!==e.slice)return e.slice(t,r);let n=new Int32Array(r);for(;t<r;t++)n[t]=e[t];return n}function Or(e,t){return-1}function Ar(e,t){return e[t+1]>>2}function Mr(e){e.heap.patchStdlibs(e.stdlib)}var Tr;class Pr{constructor(e,t,r,n){this.slots=e,this.callerScope=t,this.evalScope=r,this.partialMap=n}static root(e,t=0){let r=new Array(t+1);for(let e=0;e<=t;e++)r[e]=Bt;return new Pr(r,null,null,null).init({self:e})}static sized(e=0){let t=new Array(e+1);for(let r=0;r<=e;r++)t[r]=Bt;return new Pr(t,null,null,null)}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){let t=this.get(e);return t===Bt?null:t}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new Pr(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}const Nr=$("TRANSACTION");class _r{constructor(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[],this.destructors=[]}didCreate(e,t){this.createdComponents.push(e),this.createdManagers.push(t)}didUpdate(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)}scheduleInstallModifier(e,t){this.scheduledInstallModifiers.push(e),this.scheduledInstallManagers.push(t)}scheduleUpdateModifier(e,t){this.scheduledUpdateModifiers.push(e),this.scheduledUpdateModifierManagers.push(t)}willDestroy(e){e[Y]()}didDestroy(e){this.destructors.push(e)}commit(){let{createdComponents:e,createdManagers:t}=this;for(let r=0;r<e.length;r++){let n=e[r];t[r].didCreate(n)}let{updatedComponents:r,updatedManagers:n}=this;for(let e=0;e<r.length;e++){let t=r[e];n[e].didUpdate(t)}let{destructors:s}=this;for(let e=0;e<s.length;e++)s[e][K]();let{scheduledInstallManagers:i,scheduledInstallModifiers:a}=this;for(let e=0;e<i.length;e++){let t=a[e];i[e].install(t)}let{scheduledUpdateModifierManagers:l,scheduledUpdateModifiers:o}=this;for(let e=0;e<l.length;e++){let t=o[e];l[e].update(t)}}}function Rr(e,t){let r=void 0!==e?e:t;return r}class Lr{constructor(e,t){this.delegate=t,this[Tr]=null,this.extra=this.delegate.extra,this.isInteractive="boolean"!=typeof this.delegate.isInteractive||this.delegate.isInteractive,this.protocolForURL=Rr(this.delegate.protocolForURL,Br),this.attributeFor=Rr(this.delegate.attributeFor,Dr),this.getPath=Rr(this.delegate.getPath,Ir),this.setPath=Rr(this.delegate.setPath,zr),this.toBool=Rr(this.delegate.toBool,jr),this.toIterator=Rr(this.delegate.toIterator,Ur),e.appendOperations?(this.appendOperations=e.appendOperations,this.updateOperations=e.updateOperations):e.document&&(this.appendOperations=new Nt(e.document),this.updateOperations=new Tt(e.document))}getTemplatePathDebugContext(e){return void 0!==this.delegate.getTemplatePathDebugContext?this.delegate.getTemplatePathDebugContext(e):""}setTemplatePathDebugContext(e,t,r){void 0!==this.delegate.setTemplatePathDebugContext&&this.delegate.setTemplatePathDebugContext(e,t,r)}iterableFor(e,t){let r=null===t?"@identity":String(t);return new vt(e,r,this)}toConditionalReference(e){return new jt(e,this.delegate.toBool)}getAppendOperations(){return this.appendOperations}getDOM(){return this.updateOperations}begin(){void 0!==this.delegate.onTransactionBegin&&this.delegate.onTransactionBegin(),this[Nr]=new _r}get transaction(){return this[Nr]}didCreate(e,t){this.transaction.didCreate(e,t)}didUpdate(e,t){this.transaction.didUpdate(e,t)}scheduleInstallModifier(e,t){this.isInteractive&&this.transaction.scheduleInstallModifier(e,t)}scheduleUpdateModifier(e,t){this.isInteractive&&this.transaction.scheduleUpdateModifier(e,t)}willDestroy(e){this.transaction.willDestroy(e)}didDestroy(e){this.transaction.didDestroy(e)}commit(){let e=this.transaction;this[Nr]=null,e.commit(),void 0!==this.delegate.onTransactionCommit&&this.delegate.onTransactionCommit()}}function Br(e){return"object"==typeof URL||"undefined"==typeof URL?function(e){if("undefined"==typeof window){let t=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i.exec(e);return t&&t[1]?t[1].toLowerCase():""}let t=window.document.createElement("a");return t.href=e,t.protocol}(e):"undefined"!=typeof document?new URL(e,document.baseURI).protocol:new URL(e,"https://www.example.com").protocol}function Dr(e,t,r,n){return sr(e,t,n)}function Ir(e,t){return e[t]}function zr(e,t,r){return e[t]=r}function jr(e){return Boolean(e)}function Ur(e){return e&&e[Symbol.iterator]?e[Symbol.iterator]():null}Tr=Nr;class Hr{constructor(e){this.inner=e}lookupComponent(e,t){if(this.inner.lookupComponent){let r=this.inner.lookupComponent(e,t);if(void 0===r)throw new Error(`Unexpected component ${e} (from ${t}) (lookupComponent returned undefined)`);return r}throw new Error("lookupComponent not implemented on RuntimeResolver.")}lookupPartial(e,t){if(this.inner.lookupPartial){let r=this.inner.lookupPartial(e,t);if(void 0===r)throw new Error(`Unexpected partial ${e} (from ${t}) (lookupPartial returned undefined)`);return r}throw new Error("lookupPartial not implemented on RuntimeResolver.")}resolve(e){if(this.inner.resolve){let t=this.inner.resolve(e);if(void 0===t)throw new Error(`Unexpected handle ${e} (resolve returned undefined)`);return t}throw new Error("resolve not implemented on RuntimeResolver.")}compilable(e){if(this.inner.compilable){let t=this.inner.compilable(e);if(void 0===t)throw new Error(`Unable to compile ${name} (compilable returned undefined)`);return t}throw new Error("compilable not implemented on RuntimeResolver.")}getInvocation(e){if(this.inner.getInvocation){let t=this.inner.getInvocation(e);if(void 0===t)throw new Error(`Unable to get invocation for ${JSON.stringify(e)} (getInvocation returned undefined)`);return t}throw new Error("getInvocation not implemented on RuntimeResolver.")}}const Vr=new class{constructor(){this.evaluateOpcode=function(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=null;return t}(107).slice()}add(e,t,r="syscall"){this.evaluateOpcode[e]={syscall:"machine"!==r,evaluate:t}}debugBefore(e,t){return{sp:void 0,pc:e.fetchValue(0),name:void 0,params:void 0,type:t.type,isMachine:t.isMachine,size:t.size,state:void 0}}debugAfter(e,t){let{sp:r,type:n,isMachine:s,pc:i}=t}evaluate(e,t,r){let n=this.evaluateOpcode[r];n.syscall?n.evaluate(e,t):n.evaluate(e[Ee],t)}};class Fr extends class{constructor(){z(this)}}{constructor(){super(...arguments),this.next=null,this.prev=null}}function $r(e){let t=[];for(let r=0,n=e.length;r<n;r++){let n=e[r].tag;n!==g&&t.push(n)}return w(t)}function Wr(e){let t=[],r=e.head();for(;null!==r;){let n=r.tag;n!==g&&t.push(n),r=e.nextNode(r)}return w(t)}class Jr extends class{constructor(){this.lastRevision=null,this.lastValue=null}value(){let{tag:e,lastRevision:t,lastValue:r}=this;return null!==t&&u(e,t)||(r=this.lastValue=this.compute(),this.lastRevision=o()),r}invalidate(){this.lastRevision=null}}{constructor(e){super(),this.parts=e,this.tag=$r(e)}compute(){let e=new Array;for(let t=0;t<this.parts.length;t++){let r=this.parts[t].value();null!=r&&(e[t]=Gr(r))}return e.length>0?e.join(""):null}}function Gr(e){return"function"!=typeof e.toString?"":String(e)}function Yr(e){return e===Bt}function Kr(e){return 0|(e.dynamicLayout?1:0)|(e.dynamicTag?2:0)|(e.prepareArgs?4:0)|(e.createArgs?8:0)|(e.attributeHook?16:0)|(e.elementHook?32:0)|(e.dynamicScope?64:0)|(e.createCaller?128:0)|(e.updateHook?256:0)|(e.createInstance?512:0)|(e.wrapped?1024:0)|(e.willDestroy?2048:0)}function qr(e,t,r){return!!(t&r)}function Xr(e,t){return!!(e&t)}var Zr;Vr.add(16,(e,{op1:t})=>{let r=e.stack,n=e.runtime.resolver.resolve(t)(r.pop(),e);e.loadValue(8,n)}),Vr.add(22,(e,{op1:t})=>{let r=e.referenceForSymbol(t);e.stack.push(r)}),Vr.add(19,(e,{op1:t})=>{let r=e.stack.pop();e.scope().bindSymbol(t,r)}),Vr.add(21,(e,{op1:t})=>{let r=e.stack.pop(),n=e.stack.pop(),s=e.stack.pop(),i=s?[r,n,s]:null;e.scope().bindBlock(t,i)},"jit"),Vr.add(20,(e,{op1:t})=>{let r=e.stack.pop(),n=e.stack.pop(),s=e.stack.pop(),i=s?[r,n,s]:null;e.scope().bindBlock(t,i)}),Vr.add(105,(e,{op1:t})=>{let r=e[Te].getString(t),n=e.scope().getPartialMap()[r];void 0===n&&(n=e.getSelf().get(r)),e.stack.push(n)}),Vr.add(37,(e,{op1:t})=>{e.pushRootScope(t)}),Vr.add(23,(e,{op1:t})=>{let r=e[Te].getString(t),n=e.stack.pop();e.stack.push(n.get(r))}),Vr.add(24,(e,{op1:t})=>{let{stack:r}=e,n=e.scope().getBlock(t);r.push(n)}),Vr.add(25,e=>{let{stack:t}=e,r=t.pop();r&&!Yr(r)?(t.push(r[2]),t.push(r[1]),t.push(r[0])):(t.push(null),t.push(null),t.push(null))}),Vr.add(26,e=>{let{stack:t}=e,r=t.pop();r&&!Yr(r)?t.push(It):t.push(zt)}),Vr.add(27,e=>{e.stack.pop(),e.stack.pop();let t=e.stack.pop(),r=t&&t.parameters.length;e.stack.push(r?It:zt)}),Vr.add(28,(e,{op1:t})=>{let r=new Array(t);for(let n=t;n>0;n--){r[n-1]=e.stack.pop()}e.stack.push(new Jr(r))});const Qr=$("CURRIED COMPONENT DEFINITION");function en(e){return!(!e||!e[Qr])}class tn{constructor(e,t){this.inner=e,this.args=t,this[Zr]=!0}unwrap(e){e.realloc(this.offset);let t=this;for(;;){let{args:r,inner:n}=t;if(r&&(e.positional.prepend(r.positional),e.named.merge(r.named)),!en(n))return n;t=n}}get offset(){let{inner:e,args:t}=this,r=t?t.positional.length:0;return en(e)?r+e.offset:r}}function rn(e,t,r){return e.lookupComponent(t,r)}Zr=Qr;class nn{constructor(e){this.list=e,this.tag=$r(e),this.list=e}value(){let e=[],{list:t}=this;for(let r=0;r<t.length;r++){let n=Ht(t[r].value());n&&e.push(n)}return 0===e.length?null:e.join(" ")}}class sn{constructor(e,t,r,n){this.inner=e,this.resolver=t,this.meta=r,this.args=n,this.tag=e.tag,this.lastValue=null,this.lastDefinition=null}value(){let{inner:e,lastValue:t}=this,r=e.value();if(r===t)return this.lastDefinition;let n=null;if(en(r))n=r;else if("string"==typeof r&&r){let{resolver:e,meta:t}=this;n=rn(e,r,t)}return n=this.curry(n),this.lastValue=r,this.lastDefinition=n,n}get(){return Bt}curry(e){let{args:t}=this;return!t&&en(e)?e:e?new tn(e,t):null}}class an extends Fr{constructor(e,t,r){super(),this.node=e,this.reference=t,this.lastValue=r,this.type="dynamic-text",this.tag=t.tag,this.lastRevision=o(this.tag)}evaluate(){let{reference:e,tag:t}=this;u(t,this.lastRevision)||(this.lastRevision=o(),this.update(e.value()))}update(e){let t,{lastValue:r}=this;if(e!==r&&(t=Vt(e)?"":Wt(e)?e:String(e),t!==r)){this.node.nodeValue=this.lastValue=t}}}class ln{constructor(e){this.inner=e,this.tag=e.tag}value(){let e=this.inner.value();return function(e){return Wt(e)||Vt(e)||"boolean"==typeof e||"number"==typeof e}(e)?1:(t=e)&&t[Qr]?0:Ft(e)?3:function(e){return $t(e)&&11===e.nodeType}(e)?4:$t(e)?5:1;var t}}Vr.add(43,e=>{let t=e.stack.pop().value(),r=Vt(t)?"":String(t);e.elements().appendDynamicHTML(r)}),Vr.add(44,e=>{let t=e.stack.pop().value().toHTML(),r=Vt(t)?"":t;e.elements().appendDynamicHTML(r)}),Vr.add(47,e=>{let t=e.stack.pop(),r=t.value(),n=Vt(r)?"":String(r),s=e.elements().appendDynamicText(n);b(t)||e.updateWith(new an(s,t,n))}),Vr.add(45,e=>{let t=e.stack.pop().value();e.elements().appendDynamicFragment(t)}),Vr.add(46,e=>{let t=e.stack.pop().value();e.elements().appendDynamicNode(t)}),Vr.add(39,e=>e.pushChildScope()),Vr.add(40,e=>e.popScope()),Vr.add(59,e=>e.pushDynamicScope()),Vr.add(60,e=>e.popDynamicScope()),Vr.add(29,(e,{op1:t})=>{e.stack.push(e[Te].getOther(t))}),Vr.add(30,(e,{op1:t})=>{let r=e.stack;if(fe(t)){let n;n=t>-1073741825?e[Te].getString(be(t,-1)):e[Te].getNumber(be(t,-1073741825)),r.pushJs(n)}else r.pushRaw(t)}),Vr.add(31,e=>{let t=e.stack;t.push(_t.create(t.pop()))}),Vr.add(32,e=>{let t=e.stack;t.push(t.peek().value())}),Vr.add(33,(e,{op1:t,op2:r})=>{let n=e.fetchValue(t)-r;e.stack.dup(n)}),Vr.add(34,(e,{op1:t})=>{e.stack.pop(t)}),Vr.add(35,(e,{op1:t})=>{e.load(t)}),Vr.add(36,(e,{op1:t})=>{e.fetch(t)}),Vr.add(58,(e,{op1:t})=>{let r=e[Te].getArray(t);e.bindDynamicScope(r)}),Vr.add(69,(e,{op1:t})=>{e.enter(t)}),Vr.add(70,e=>{e.exit()}),Vr.add(63,(e,{op1:t})=>{e.stack.push(e[Te].getSerializable(t))}),Vr.add(62,e=>{e.stack.push(e.scope())}),Vr.add(61,e=>{let t=e.stack,r=t.pop();r?t.push(e.compile(r)):t.push(null)},"jit"),Vr.add(64,e=>{let{stack:t}=e,r=t.pop(),n=t.pop(),s=t.pop(),i=t.pop();if(null===s)return e.pushFrame(),void e.pushScope(n);let a=n;{let e=s.parameters,t=e.length;if(t>0){a=a.child();for(let r=0;r<t;r++)a.bindSymbol(e[r],i.at(r))}}e.pushFrame(),e.pushScope(a),e.call(r)}),Vr.add(65,(e,{op1:t})=>{let r=e.stack.pop();if(b(r))r.value()&&e.goto(t);else{let n=new Ke(r);n.peek()&&e.goto(t),e.updateWith(new on(n))}}),Vr.add(66,(e,{op1:t})=>{let r=e.stack.pop();if(b(r))r.value()||e.goto(t);else{let n=new Ke(r);n.peek()||e.goto(t),e.updateWith(new on(n))}}),Vr.add(67,(e,{op1:t,op2:r})=>{e.stack.peek()===r&&e.goto(t)}),Vr.add(68,e=>{let t=e.stack.peek();b(t)||e.updateWith(on.initialize(new Ke(t)))}),Vr.add(71,e=>{let{env:t,stack:r}=e;r.push(t.toConditionalReference(r.pop()))});class on extends Fr{constructor(e){super(),this.type="assert",this.tag=e.tag,this.cache=e}static initialize(e){let t=new on(e);return e.peek(),t}evaluate(e){let{cache:t}=this;t.revalidate()!==qe&&e.throw()}}class un extends Fr{constructor(e,t){super(),this.target=t,this.type="jump-if-not-modified",this.tag=e,this.lastRevision=o()}evaluate(e){let{tag:t,target:r,lastRevision:n}=this;!e.alwaysRevalidate&&u(t,n)&&e.goto(r)}didModify(){this.lastRevision=o(this.tag)}}class cn extends Fr{constructor(e){super(),this.target=e,this.type="did-modify",this.tag=g}evaluate(){this.target.didModify()}}class hn{constructor(e){this.tag=g,this.type="label",this.label=null,this.prev=null,this.next=null,z(this),this.label=e}evaluate(){}inspect(){return`${this.label} [${this._guid}]`}}Vr.add(41,(e,{op1:t})=>{e.elements().appendText(e[Te].getString(t))}),Vr.add(42,(e,{op1:t})=>{e.elements().appendComment(e[Te].getString(t))}),Vr.add(48,(e,{op1:t})=>{e.elements().openElement(e[Te].getString(t))}),Vr.add(49,e=>{let t=e.stack.pop().value();e.elements().openElement(t)}),Vr.add(50,e=>{let t,r,n=e.stack.pop(),s=e.stack.pop(),i=e.stack.pop().value();if(b(n))t=n.value();else{let r=new Ke(n);t=r.peek(),e.updateWith(new on(r))}if(void 0!==s.value())if(b(s))r=s.value();else{let t=new Ke(s);r=t.peek(),e.updateWith(new on(t))}let a=e.elements().pushRemoteElement(t,i,r);a&&e.associateDestroyable(a)}),Vr.add(56,e=>{e.elements().popRemoteElement()}),Vr.add(54,e=>{let t=e.fetchValue(6),r=null;t&&(r=t.flush(e),e.loadValue(6,null)),e.elements().flushElement(r)}),Vr.add(55,e=>{let t=e.elements().closeElement();t&&t.forEach(([t,r])=>{e.env.scheduleInstallModifier(r,t);let n=t.getDestructor(r);n&&e.associateDestroyable(n)})}),Vr.add(57,(e,{op1:t})=>{let{manager:r,state:n}=e.runtime.resolver.resolve(t),s=e.stack.pop(),{constructing:i,updateOperations:a}=e.elements(),l=e.dynamicScope(),o=r.create(i,n,s,l,a);e.fetchValue(6).addModifier(r,o);let u=r.getTag(o);y(u)||e.updateWith(new pn(u,r,o))});class pn extends Fr{constructor(e,t,r){super(),this.tag=e,this.manager=t,this.modifier=r,this.type="update-modifier",this.lastUpdated=o()}evaluate(e){let{manager:t,modifier:r,tag:n,lastUpdated:s}=this;u(n,s)||(e.env.scheduleUpdateModifier(r,t),this.lastUpdated=o())}}Vr.add(51,(e,{op1:t,op2:r,op3:n})=>{let s=e[Te].getString(t),i=e[Te].getString(r),a=n?e[Te].getString(n):null;e.elements().setStaticAttribute(s,i,a)}),Vr.add(52,(e,{op1:t,op2:r,op3:n})=>{let s=e[Te].getString(t),i=e.stack.pop(),a=i.value(),l=n?e[Te].getString(n):null,o=e.elements().setDynamicAttribute(s,a,!!r,l);b(i)||e.updateWith(new dn(i,o))});class dn extends Fr{constructor(e,t){super(),this.reference=e,this.attribute=t,this.type="patch-element";let{tag:r}=e;this.tag=r,this.lastRevision=o()}evaluate(e){let{attribute:t,reference:r,tag:n}=this;u(n,this.lastRevision)||(t.update(r.value(),e.env),this.lastRevision=o())}}const mn=$("COMPONENT_INSTANCE");Vr.add(77,e=>{let t=e.stack,r=t.pop();t.push(new jt(r,en))}),Vr.add(78,e=>{let t=e.stack,r=t.peek();t.push(new ln(r))}),Vr.add(79,(e,{op1:t})=>{let r=e.stack,n=r.pop(),s=r.pop(),i=e[Te].getTemplateMeta(t),a=e.runtime.resolver;e.loadValue(8,new sn(n,a,i,s))}),Vr.add(80,(e,{op1:t})=>{let r=e.runtime.resolver.resolve(t),{manager:n}=r,s=Kr(n.getCapabilities(r.state)),i={[mn]:!0,definition:r,manager:n,capabilities:s,state:null,handle:null,table:null,lookup:null};e.stack.push(i)}),Vr.add(83,(e,{op1:t})=>{let r,n=e.stack,s=n.pop().value(),i=e[Te].getTemplateMeta(t);if(e.loadValue(7,null),"string"==typeof s){r=rn(e.runtime.resolver,s,i)}else{if(!en(s))throw V();r=s}n.push(r)}),Vr.add(81,e=>{let t,r,{stack:n}=e,s=n.pop();en(s)?r=t=null:(r=s.manager,t=Kr(r.getCapabilities(s.state))),n.push({definition:s,capabilities:t,manager:r,state:null,handle:null,table:null})}),Vr.add(82,e=>{let t,r=e.stack,n=r.pop().value();if(!en(n))throw V();t=n,r.push(t)}),Vr.add(84,(e,{op1:t,op2:r,op3:n})=>{let s=e.stack,i=e[Te].getStringArray(t),a=n>>4,l=8&n,o=7&n?e[Te].getStringArray(r):B;e[Pe].setup(s,i,o,a,!!l),s.push(e[Pe])}),Vr.add(85,e=>{let{stack:t}=e;t.push(e[Pe].empty(t))}),Vr.add(88,e=>{let t=e.stack,r=t.pop().capture();t.push(r)}),Vr.add(87,(e,{op1:t})=>{let r=e.stack,n=e.fetchValue(t),s=r.pop(),{definition:i}=n;en(i)&&(i=function(e,t,r){let n=e.definition=t.unwrap(r),{manager:s,state:i}=n;return e.manager=s,e.capabilities=Kr(s.getCapabilities(i)),n}(n,i,s));let{manager:a,state:l}=i;if(!qr(0,n.capabilities,4))return void r.push(s);let o=s.blocks.values,u=s.blocks.names,c=a.prepareArgs(l,s);if(c){s.clear();for(let e=0;e<o.length;e++)r.push(o[e]);let{positional:e,named:t}=c,n=e.length;for(let t=0;t<n;t++)r.push(e[t]);let i=Object.keys(t);for(let e=0;e<i.length;e++)r.push(t[i[e]]);s.setup(r,i,u,n,!1)}r.push(s)}),Vr.add(89,(e,{op1:t,op2:r})=>{let n=e.fetchValue(r),{definition:s,manager:i}=n,a=n.capabilities=Kr(i.getCapabilities(s.state));if(!qr(0,a,512))throw new Error("BUG");let l=null;qr(0,a,64)&&(l=e.dynamicScope());let o=1&t,u=null;qr(0,a,8)&&(u=e.stack.peek());let c=null;qr(0,a,128)&&(c=e.getSelf());let h=i.create(e.env,s.state,u,l,c,!!o);n.state=h;let p=i.getTag(h);qr(0,a,256)&&!y(p)&&e.updateWith(new kn(p,h,i,l))}),Vr.add(90,(e,{op1:t})=>{let{manager:r,state:n,capabilities:s}=e.fetchValue(t),i=r.getDestructor(n);i&&e.associateDestroyable(i)}),Vr.add(100,e=>{e.beginCacheGroup(),e.elements().pushSimpleBlock()}),Vr.add(91,e=>{e.loadValue(6,new fn)}),Vr.add(53,(e,{op1:t,op2:r,op3:n})=>{let s=e[Te].getString(t),i=e.stack.pop(),a=n?e[Te].getString(n):null;e.fetchValue(6).setAttribute(s,i,!!r,a)}),Vr.add(108,(e,{op1:t,op2:r,op3:n})=>{let s=e[Te].getString(t),i=e[Te].getString(r),a=n?e[Te].getString(n):null;e.fetchValue(6).setStaticAttribute(s,i,a)});class fn{constructor(){this.attributes=j(),this.classes=[],this.modifiers=[]}setAttribute(e,t,r,n){let s={value:t,namespace:n,trusting:r};"class"===e&&this.classes.push(t),this.attributes[e]=s}setStaticAttribute(e,t,r){let n={value:t,namespace:r};"class"===e&&this.classes.push(t),this.attributes[e]=n}addModifier(e,t){this.modifiers.push([e,t])}flush(e){let t,r=this.attributes;for(let n in this.attributes){if("type"===n){t=r[n];continue}let s=this.attributes[n];"class"===n?bn(e,"class",gn(this.classes),s.namespace,s.trusting):bn(e,n,s.value,s.namespace,s.trusting)}return void 0!==t&&bn(e,"type",t.value,t.namespace,t.trusting),this.modifiers}}function gn(e){return 0===e.length?"":1===e.length?e[0]:function(e){for(let t=0;t<e.length;t++)if("string"!=typeof e[t])return!1;return!0}(e)?e.join(" "):function(e){for(let t=0;t<e.length;t++){const r=e[t];"string"==typeof r&&(e[t]=_t.create(r))}return new nn(e)}(e)}function bn(e,t,r,n,s=!1){if("string"==typeof r)e.elements().setStaticAttribute(t,r,n);else{let i=e.elements().setDynamicAttribute(t,r.value(),s,n);b(r)||e.updateWith(new dn(r,i))}}function yn(e,t){return!1===qr(0,e,1)}function vn(e,t){return!0===qr(0,e,1)}function wn(e,t,r,n,s){let i=r.table.symbols.indexOf(e),a=n.get(t);-1!==i&&s.scope().bindBlock(i+1,a),r.lookup&&(r.lookup[e]=a)}Vr.add(102,(e,{op1:t})=>{let{definition:r,state:n}=e.fetchValue(t),{manager:s}=r,i=e.fetchValue(6);s.didCreateElement(n,e.elements().constructing,i)}),Vr.add(92,(e,{op1:t})=>{let{definition:r,state:n}=e.fetchValue(t),{manager:s}=r;e.stack.push(s.getSelf(n))}),Vr.add(93,(e,{op1:t})=>{let{definition:r,state:n}=e.fetchValue(t),{manager:s}=r;e.stack.push(s.getTagName(n))}),Vr.add(95,(e,{op1:t})=>{let r,n=e.fetchValue(t),s=n.manager,{definition:i}=n,{stack:a}=e,{capabilities:l}=n;if(yn(l,s))r=s.getJitStaticLayout(i.state,e.runtime.resolver);else{if(!vn(l,s))throw V();{let t=ve(s.getJitDynamicLayout(n.state,e.runtime.resolver));r=Xr(l,1024)?t.asWrappedLayout():t.asLayout()}}let o=r.compile(e.context);a.push(r.symbolTable),a.push(o)},"jit"),Vr.add(94,(e,{op1:t})=>{let r,n=e.fetchValue(t),{manager:s,definition:i}=n,{stack:a}=e,{state:l,capabilities:o}=n,{state:u}=i;if(yn(o,s))r=s.getAotStaticLayout(u,e.runtime.resolver);else{if(!vn(o,s))throw V();r=s.getAotDynamicLayout(l,e.runtime.resolver)}a.push(r.symbolTable),a.push(r.handle)}),Vr.add(76,(e,{op1:t})=>{let r=e.stack.pop(),n=e.stack.pop(),{manager:s}=r,i=Kr(s.getCapabilities(r.state)),a={[mn]:!0,definition:r,manager:s,capabilities:i,state:null,handle:n.handle,table:n.symbolTable,lookup:null};e.loadValue(t,a)}),Vr.add(98,(e,{op1:t})=>{let{stack:r}=e,n=r.pop(),s=r.pop(),i=e.fetchValue(t);i.handle=n,i.table=s}),Vr.add(38,(e,{op1:t})=>{let{symbols:r}=e.fetchValue(t).table;e.pushRootScope(r.length+1)}),Vr.add(97,(e,{op1:t})=>{let r=e.fetchValue(t);if(r.table.hasEval){let t=r.lookup=j();e.scope().bindEvalScope(t)}}),Vr.add(17,(e,{op1:t})=>{let r=e.fetchValue(t),n=e.scope(),s=e.stack.peek(),i=s.named.atNames;for(let e=i.length-1;e>=0;e--){let t=i[e],a=r.table.symbols.indexOf(i[e]),l=s.named.get(t,!0);-1!==a&&n.bindSymbol(a+1,l),r.lookup&&(r.lookup[t]=l)}}),Vr.add(18,(e,{op1:t})=>{let r=e.fetchValue(t),{blocks:n}=e.stack.peek();for(let t=0;t<n.names.length;t++)wn(n.symbolNames[t],n.names[t],r,n,e)}),Vr.add(99,(e,{op1:t})=>{let r=e.fetchValue(t);e.call(r.handle)}),Vr.add(103,(e,{op1:t})=>{let{manager:r,state:n,capabilities:s}=e.fetchValue(t),i=e.elements().popBlock();if(!qr(0,s,512))throw new Error("BUG");r.didRenderLayout(n,i),e.env.didCreate(n,r),e.updateWith(new xn(r,n,i))}),Vr.add(101,e=>{e.commitCacheGroup()});class kn extends Fr{constructor(e,t,r,n){super(),this.tag=e,this.component=t,this.manager=r,this.dynamicScope=n,this.type="update-component"}evaluate(e){let{component:t,manager:r,dynamicScope:n}=this;r.update(t,n)}}class xn extends Fr{constructor(e,t,r){super(),this.manager=e,this.component=t,this.bounds=r,this.type="did-update-layout",this.tag=g}evaluate(e){let{manager:t,component:r,bounds:n}=this;t.didUpdateLayout(r,n),e.env.didUpdate(r,t)}}function Sn(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}let En=Sn;class Cn{constructor(e,t,r){this.scope=e,this.locals=j();for(let n=0;n<r.length;n++){let s=r[n],i=t[s-1],a=e.getSymbol(s);this.locals[i]=a}}get(e){let t,{scope:r,locals:n}=this,s=e.split("."),[i,...a]=e.split("."),l=r.getEvalScope();return"this"===i?t=r.getSelf():n[i]?t=n[i]:0===i.indexOf("@")&&l[i]?t=l[i]:(t=this.scope.getSelf(),a=s),a.reduce((e,t)=>e.get(t),t)}}Vr.add(106,(e,{op1:t,op2:r})=>{let n=e[Te].getStringArray(t),s=e[Te].getArray(r),i=new Cn(e.scope(),n,s);En(e.getSelf().value(),e=>i.get(e).value())}),Vr.add(104,(e,{op1:t,op2:r,op3:n})=>{let{[Te]:s,stack:i}=e,a=i.pop().value(),l=s.getTemplateMeta(t),o=s.getStringArray(r),u=s.getArray(n),c=e.runtime.resolver.lookupPartial(a,l),h=e.runtime.resolver.resolve(c),{symbolTable:p,handle:d}=h.getPartial(e.context);{let t=p.symbols,r=e.scope(),n=e.pushRootScope(t.length),s=r.getEvalScope();n.bindEvalScope(s),n.bindSelf(r.getSelf());let i=Object.create(r.getPartialMap());for(let e=0;e<u.length;e++){let t=u[e],n=o[t-1],s=r.getSymbol(t);i[n]=s}if(s)for(let e=0;e<t.length;e++){let r=e+1,i=s[t[e]];void 0!==i&&n.bind(r,i)}n.bindPartialMap(i),e.pushFrame(),e.call(ye(d))}},"jit");class On{constructor(e){this.tag=e.tag,this.artifacts=e}value(){return!this.artifacts.isEmpty()}}Vr.add(74,e=>{let t=e.stack,r=t.pop(),n=t.pop(),s=e.env.iterableFor(r,n.value()),i=new tt(s);t.push(i),t.push(new On(i.artifacts))}),Vr.add(72,(e,{op1:t})=>{e.enterList(t)}),Vr.add(73,e=>{e.exitList()}),Vr.add(75,(e,{op1:t})=>{let r=e.stack.peek().next();if(r){let t=e.iterate(r.memo,r.value);e.enterItem(r.key,t)}else e.goto(t)});const An={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};new class{getCapabilities(e){return An}prepareArgs(e,t){throw new Error("Unimplemented prepareArgs in SimpleComponentManager")}create(e,t,r,n,s,i){throw new Error("Unimplemented create in SimpleComponentManager")}getSelf(e){return Bt}getTag(e){throw new Error("Unimplemented getTag in SimpleComponentManager")}didRenderLayout(e,t){throw new Error("Unimplemented didRenderLayout in SimpleComponentManager")}didCreate(e){throw new Error("Unimplemented didCreate in SimpleComponentManager")}update(e,t){throw new Error("Unimplemented update in SimpleComponentManager")}didUpdateLayout(e,t){throw new Error("Unimplemented didUpdateLayout in SimpleComponentManager")}didUpdate(e){throw new Error("Unimplemented didUpdate in SimpleComponentManager")}getDestructor(e){return null}};class Mn{constructor(e){this.bucket=e?pe({},e):{}}get(e){return this.bucket[e]}set(e,t){return this.bucket[e]=t}child(){return new Mn(this.bucket)}}class Tn{constructor(){this.stack=null,this.positional=new Pn,this.named=new _n,this.blocks=new Bn}empty(e){let t=e[Ae][3]+1;return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this}setup(e,t,r,n,s){this.stack=e;let i=this.named,a=t.length,l=e[Ae][3]-a+1;i.setup(e,l,a,t,s);let o=l-n;this.positional.setup(e,o,n);let u=this.blocks,c=r.length,h=o-3*c;u.setup(e,h,c,r)}get tag(){return $r([this.positional,this.named])}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){let{stack:t}=this;if(e>0&&null!==t){let{positional:r,named:n}=this,s=r.base+e;for(let e=r.length+n.length-1;e>=0;e--)t.copy(e+r.base,e+s);r.base+=e,n.base+=e,t[Ae][3]+=e}}capture(){let e=0===this.positional.length?jn:this.positional.capture(),t=0===this.named.length?zn:this.named.capture();return new In(this.tag,e,t,this.length)}clear(){let{stack:e,length:t}=this;t>0&&null!==e&&e.pop(t)}}class Pn{constructor(){this.base=0,this.length=0,this.stack=null,this._tag=null,this._references=null}empty(e,t){this.stack=e,this.base=t,this.length=0,this._tag=g,this._references=B}setup(e,t,r){this.stack=e,this.base=t,this.length=r,0===r?(this._tag=g,this._references=B):(this._tag=null,this._references=null)}get tag(){let e=this._tag;return e||(e=this._tag=$r(this.references)),e}at(e){let{base:t,length:r,stack:n}=this;return e<0||e>=r?Bt:n.get(e,t)}capture(){return new Nn(this.tag,this.references)}prepend(e){let t=e.length;if(t>0){let{base:r,length:n,stack:s}=this;this.base=r-=t,this.length=n+t;for(let n=0;n<t;n++)s.set(e.at(n),n,r);this._tag=null,this._references=null}}get references(){let e=this._references;if(!e){let{stack:t,base:r,length:n}=this;e=this._references=t.sliceArray(r,r+n)}return e}}class Nn{constructor(e,t,r=t.length){this.tag=e,this.references=t,this.length=r}static empty(){return new Nn(g,B,0)}at(e){return this.references[e]}value(){return this.references.map(this.valueOf)}get(e){let{references:t,length:r}=this;if("length"===e)return _t.create(r);{let n=parseInt(e,10);return n<0||n>=r?Bt:t[n]}}valueOf(e){return e.value()}}class _n{constructor(){this.base=0,this.length=0,this._references=null,this._names=B,this._atNames=B}empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=B,this._names=B,this._atNames=B}setup(e,t,r,n,s){this.stack=e,this.base=t,this.length=r,0===r?(this._references=B,this._names=B,this._atNames=B):(this._references=null,s?(this._names=null,this._atNames=n):(this._names=n,this._atNames=null))}get tag(){return $r(this.references)}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!1){let{base:r,stack:n}=this,s=(t?this.atNames:this.names).indexOf(e);return-1===s?Bt:n.get(s,r)}capture(){return new Rn(this.tag,this.names,this.references)}merge(e){let{length:t}=e;if(t>0){let{names:r,length:n,stack:s}=this,{names:i}=e;Object.isFrozen(r)&&0===r.length&&(r=[]);for(let a=0;a<t;a++){let t=i[a];-1===r.indexOf(t)&&(n=r.push(t),s.push(e.references[a]))}this.length=n,this._references=null,this._names=r,this._atNames=null}}get references(){let e=this._references;if(!e){let{base:t,length:r,stack:n}=this;e=this._references=n.sliceArray(t,t+r)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return"@"+e}}class Rn{constructor(e,t,r){this.tag=e,this.names=t,this.references=r,this.length=t.length,this._map=null}get map(){let e=this._map;if(!e){let{names:t,references:r}=this;e=this._map=j();for(let n=0;n<t.length;n++){e[t[n]]=r[n]}}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let{names:t,references:r}=this,n=t.indexOf(e);return-1===n?Bt:r[n]}value(){let{names:e,references:t}=this,r=j();for(let n=0;n<e.length;n++){r[e[n]]=t[n].value()}return r}}function Ln(e){return"&"+e}class Bn{constructor(){this.internalValues=null,this._symbolNames=null,this.internalTag=null,this.names=B,this.length=0,this.base=0}empty(e,t){this.stack=e,this.names=B,this.base=t,this.length=0,this._symbolNames=null,this.internalTag=g,this.internalValues=B}setup(e,t,r,n){this.stack=e,this.names=n,this.base=t,this.length=r,this._symbolNames=null,0===r?(this.internalTag=g,this.internalValues=B):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let{base:t,length:r,stack:n}=this;e=this.internalValues=n.sliceArray(t,t+3*r)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);if(-1===t)return null;let{base:r,stack:n}=this,s=n.get(3*t,r),i=n.get(3*t+1,r),a=n.get(3*t+2,r);return null===a?null:[a,i,s]}capture(){return new Dn(this.names,this.values)}get symbolNames(){let e=this._symbolNames;return null===e&&(e=this._symbolNames=this.names.map(Ln)),e}}class Dn{constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}class In{constructor(e,t,r,n){this.tag=e,this.positional=t,this.named=r,this.length=n}value(){return{named:this.named.value(),positional:this.positional.value()}}}const zn=new Rn(g,B,B),jn=new Nn(g,B);new In(g,jn,zn,0);class Un{constructor(e,t,r,n,s){this.stack=e,this.heap=t,this.program=r,this.externs=n,this.registers=s,this.currentOpSize=0}fetchRegister(e){return this.registers[e]}loadRegister(e,t){this.registers[e]=t}setPc(e){this.registers[0]=e}pushFrame(){this.stack.push(this.registers[1]),this.stack.push(this.registers[2]),this.registers[2]=this.registers[3]-1}popFrame(){this.registers[3]=this.registers[2]-1,this.registers[1]=this.stack.get(0),this.registers[2]=this.stack.get(1)}pushSmallFrame(){this.stack.push(this.registers[1])}popSmallFrame(){this.registers[1]=this.stack.pop()}goto(e){this.setPc(this.target(e))}target(e){return this.registers[0]+e-this.currentOpSize}call(e){this.registers[1]=this.registers[0],this.setPc(this.heap.getaddr(e))}returnTo(e){this.registers[1]=this.target(e)}return(){this.setPc(this.registers[1])}nextStatement(){let{registers:e,program:t}=this,r=e[0];if(-1===r)return null;let n=t.opcode(r),s=this.currentOpSize=n.size;return this.registers[0]+=s,n}evaluateOuter(e,t){this.evaluateInner(e,t)}evaluateInner(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)}evaluateMachine(e){switch(e.type){case 0:return this.pushFrame();case 1:return this.popFrame();case 3:return this.call(e.op1);case 2:return this.call(this.stack.pop());case 4:return this.goto(e.op1);case 5:return this.return();case 6:return this.returnTo(e.op1)}}evaluateSyscall(e,t){Vr.evaluate(t,e,e.type)}}class Hn{constructor(e,{alwaysRevalidate:t=!1}){this.frameStack=new H,this.env=e,this.dom=e.getDOM(),this.alwaysRevalidate=t}execute(e,t){let{frameStack:r}=this;for(this.try(e,t);!r.isEmpty();){let e=this.frame.nextStatement();null!==e?e.evaluate(this):r.pop()}}get frame(){return this.frameStack.current}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new Gn(e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class Vn{constructor(e,t){this.state=e,this.resumeCallback=t}resume(e,t){return this.resumeCallback(e,this.state,t)}}class Fn extends Fr{constructor(e,t,r,n){super(),this.state=e,this.runtime=t,this.type="block",this.next=null,this.prev=null,this.children=n,this.bounds=r}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}}class $n extends Fn{constructor(e,t,r,n){super(e,t,r,n),this.type="try",this.tag=this._tag=f()}didInitializeChildren(){d(this._tag,Wr(this.children))}evaluate(e){e.try(this.children,this)}handleException(){let{state:e,bounds:t,children:r,prev:n,next:s,runtime:i}=this;De(this,i.env),r.clear(),Ie(this,i.env);let a=$e.resume(i.env,t),l=e.resume(i,a),o=new ue;Q(this,l.execute(e=>{e.pushUpdating(o),e.updateWith(this),e.pushUpdating(r)}).drop),this.prev=n,this.next=s}}class Wn{constructor(e,t){this.opcode=e,this.marker=t,this.didInsert=!1,this.didDelete=!1,this.map=e.map,this.updating=e.children}insert(e,t,r,n,s){let{map:i,opcode:a,updating:l}=this,o=null,u=null;u=i.get(s),o=void 0!==u?u.bounds.firstNode():this.marker;let c=a.vmForInsertion(o),h=null,p=c.execute(e=>{h=e.iterate(n,r),i.set(t,h),e.pushUpdating(new ue),e.updateWith(h),e.pushUpdating(h.children)});l.insertBefore(h,u),Q(a,p.drop),this.didInsert=!0}retain(e,t,r,n){}move(e,t,r,n,s){let{map:i,updating:a}=this,l=i.get(t);if(s===nt)Le(l,this.marker),a.remove(l),a.append(l);else{let e=i.get(s);Le(l,e.firstNode()),a.remove(l),a.insertBefore(l,e)}}delete(e,t){let{map:r,updating:n}=this,s=r.get(t);!function(e,t){ze(e,t),Be(e),je(e,t)}(s,e),n.remove(s),r.delete(t),this.didDelete=!0}done(){this.opcode.didInitializeChildren(this.didInsert||this.didDelete)}}class Jn extends Fn{constructor(e,t,r,n,s){super(e,t,r,n),this.type="list-block",this.map=new Map,this.lastIterated=1,this.artifacts=s;let i=this._tag=f();this.tag=v([s.tag,i])}didInitializeChildren(e=!0){this.lastIterated=o(this.artifacts.tag),e&&d(this._tag,Wr(this.children))}evaluate(e){let{artifacts:t,lastIterated:r}=this;if(!u(t.tag,r)){let{bounds:r}=this,{dom:n}=e,s=n.createComment("");n.insertAfter(r.parentElement(),s,r.lastNode());let i=new Wn(this,s);new st({target:i,artifacts:t,env:e.env}).sync(),this.parentElement().removeChild(s)}super.evaluate(e)}vmForInsertion(e){let{bounds:t,state:r,runtime:n}=this,s=$e.forInitialRender(n.env,{element:t.parentElement(),nextSibling:e});return r.resume(n,s)}}class Gn{constructor(e,t){this.ops=e,this.exceptionHandler=t,this.current=e.head()}goto(e){this.current=e}nextStatement(){let{current:e,ops:t}=this;return e&&(this.current=t.nextNode(e)),e}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class Yn{constructor(e,t,r,n){this.env=e,this.updating=t,this.bounds=r,this.drop=n,Q(this,n)}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let{env:t,updating:r}=this;new Hn(t,{alwaysRevalidate:e}).execute(r,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw"this should never happen"}[W](){Be(this.bounds)}destroy(){!function(e,t){if(e[Nr])t();else{e.begin();try{t()}finally{e.commit()}}}(this.env,()=>{ze(this,this.env),je(this,this.env)})}}class Kn{constructor(e=[]){this.vec=e}clone(){return new Kn(this.vec.slice())}sliceFrom(e){return new Kn(this.vec.slice(e))}slice(e,t){return new Kn(this.vec.slice(e,t))}copy(e,t){this.vec[t]=this.vec[e]}writeRaw(e,t){this.vec[e]=t}getRaw(e){return this.vec[e]}reset(){this.vec.length=0}len(){return this.vec.length}}class qn{constructor(e=new Kn,t=[]){this.inner=e,this.js=t}slice(e,t){let r;return r="number"==typeof e&&"number"==typeof t?this.inner.slice(e,t):"number"==typeof e&&void 0===t?this.inner.sliceFrom(e):this.inner.clone(),new qn(r,this.js.slice(e,t))}sliceInner(e,t){let r=[];if(-1===e)return r;for(let n=e;n<t;n++)r.push(this.get(n));return r}copy(e,t){this.inner.copy(e,t)}write(e,t){switch(typeof t){case"boolean":case"undefined":this.writeRaw(e,de(t));break;case"number":if(me(t)){this.writeRaw(e,de(t));break}case"object":if(null===t){this.writeRaw(e,de(t));break}default:this.writeJs(e,t)}}writeJs(e,t){let r=this.js.length;this.js.push(t),this.inner.writeRaw(e,ge(r))}writeRaw(e,t){this.inner.writeRaw(e,t)}get(e){let t=this.inner.getRaw(e);return fe(t)?this.js[be(t)]:function(e){if(e>1073741823)switch(e){case 1073741824:return!1;case 1073741825:return!0;case 1073741826:return null;case 1073741827:return;default:return 1073741827-e}return e}(t)}reset(){this.inner.reset(),this.js.length=0}get length(){return this.inner.len()}}var Xn,Zn;class Qn{constructor(){this.scope=new H,this.dynamicScope=new H,this.updating=new H,this.cache=new H,this.list=new H}}class es{constructor(e,{pc:t,scope:r,dynamicScope:n,stack:s},i){this.runtime=e,this.elementStack=i,this[Xn]=new Qn,this[Zn]=new H,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null;let a=class{constructor(e,t){this.stack=e,this[Ae]=t}static restore(e){let t=new qn;for(let r=0;r<e.length;r++)t.write(r,e[r]);return new this(t,[0,-1,e.length-1,0])}push(e){this.stack.write(++this[Ae][3],e)}pushJs(e){this.stack.writeJs(++this[Ae][3],e)}pushRaw(e){this.stack.writeRaw(++this[Ae][3],e)}dup(e=this[Ae][3]){this.stack.copy(e,++this[Ae][3])}copy(e,t){this.stack.copy(e,t)}pop(e=1){let t=this.stack.get(this[Ae][3]);return this[Ae][3]-=e,t}peek(e=0){return this.stack.get(this[Ae][3]-e)}get(e,t=this[Ae][2]){return this.stack.get(t+e)}set(e,t,r=this[Ae][2]){this.stack.write(r+t,e)}slice(e,t){return this.stack.slice(e,t)}sliceArray(e,t){return this.stack.sliceInner(e,t)}capture(e){let t=this[Ae][3]+1,r=t-e;return this.stack.sliceInner(r,t)}reset(){this.stack.reset()}toArray(){return console.log(this[Ae]),this.stack.sliceInner(this[Ae][2],this[Ae][3]+1)}}.restore(s);a[Ae][0]=t,a[Ae][3]=s.length-1,a[Ae][2]=-1,this[Me]=this.program.heap,this[Te]=this.program.constants,this.elementStack=i,this[Oe].scope.push(r),this[Oe].dynamicScope.push(n),this[Pe]=new Tn,this[Ee]=new Un(a,this[Me],e.program,{debugBefore:e=>Vr.debugBefore(this,e),debugAfter:e=>{Vr.debugAfter(this,e)}},a[Ae]),this.destructor={},this[Ce].push(this.destructor)}get stack(){return this[Ee].stack}get pc(){return this[Ee].fetchRegister(0)}fetch(e){this.stack.push(this.fetchValue(e))}load(e){let t=this.stack.pop();this.loadValue(e,t)}fetchValue(e){if(ke(e))return this[Ee].fetchRegister(e);switch(e){case 4:return this.s0;case 5:return this.s1;case 6:return this.t0;case 7:return this.t1;case 8:return this.v0}}loadValue(e,t){switch(ke(e)&&this[Ee].loadRegister(e,t),e){case 4:this.s0=t;break;case 5:this.s1=t;break;case 6:this.t0=t;break;case 7:this.t1=t;break;case 8:this.v0=t}}pushFrame(){this[Ee].pushFrame()}popFrame(){this[Ee].popFrame()}goto(e){this[Ee].goto(e)}call(e){this[Ee].call(e)}returnTo(e){this[Ee].returnTo(e)}return(){this[Ee].return()}get program(){return this.runtime.program}get env(){return this.runtime.env}captureState(e,t=this[Ee].fetchRegister(0)){return{pc:t,dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}}beginCacheGroup(){this[Oe].cache.push(this.updating().tail())}commitCacheGroup(){let e=new hn("END"),t=this.updating(),r=this[Oe].cache.pop(),n=r?t.nextNode(r):t.head(),s=t.tail(),i=Wr(new ce(n,s)),a=new un(i,e);t.insertBefore(a,n),t.append(new cn(a)),t.append(e)}enter(e){let t=new ue,r=this.capture(e),n=this.elements().pushUpdatableBlock(),s=new $n(r,this.runtime,n,t);this.didEnter(s)}iterate(e,t){let r=this.stack;r.push(t),r.push(e);let n=this.capture(2),s=this.elements().pushUpdatableBlock();return new $n(n,this.runtime,s,new ue)}enterItem(e,t){this.listBlock().map.set(e,t),this.didEnter(t)}enterList(e){let t=new ue,r=this[Ee].target(e),n=this.capture(0,r),s=this.elements().pushBlockList(t),i=this.stack.peek().artifacts,a=new Jn(n,this.runtime,s,t,i);this[Oe].list.push(a),this.didEnter(a)}didEnter(e){this.associateDestructor(ne(e)),this[Ce].push(e),this.updateWith(e),this.pushUpdating(e.children)}exit(){this[Ce].pop(),this.elements().popBlock(),this.popUpdating(),this.updating().tail().didInitializeChildren()}exitList(){this.exit(),this[Oe].list.pop()}pushUpdating(e=new ue){this[Oe].updating.push(e)}popUpdating(){return this[Oe].updating.pop()}updateWith(e){this.updating().append(e)}listBlock(){return this[Oe].list.current}associateDestructor(e){if(!Z(e))return;ee(this[Ce].current,e)}associateDestroyable(e){this.associateDestructor(ne(e))}tryUpdating(){return this[Oe].updating.current}updating(){return this[Oe].updating.current}elements(){return this.elementStack}scope(){return this[Oe].scope.current}dynamicScope(){return this[Oe].dynamicScope.current}pushChildScope(){this[Oe].scope.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this[Oe].dynamicScope.push(e),e}pushRootScope(e){let t=Pr.sized(e);return this[Oe].scope.push(t),t}pushScope(e){this[Oe].scope.push(e)}popScope(){this[Oe].scope.pop()}popDynamicScope(){this[Oe].dynamicScope.pop()}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e){let t;e&&e(this);try{for(;t=this.next(),!t.done;);}finally{let e=this.elements();for(;e.hasBlocks;)e.popBlock()}return t.value}next(){let e,{env:t,elementStack:r}=this,n=this[Ee].nextStatement();return null!==n?(this[Ee].evaluateOuter(n,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new Yn(t,this.popUpdating(),r.popBlock(),this.destructor)}),e}bindDynamicScope(e){let t=this.dynamicScope();for(let r=e.length-1;r>=0;r--){let n=this[Te].getString(e[r]);t.set(n,this.stack.pop())}}}function ts(e,t=Pr.root(Bt,0),r){return{pc:e,scope:t,dynamicScope:r,stack:[]}}Xn=Oe,Zn=Ce;function rs(e){return(t,r,n)=>new ns(t,r,n,e)}class ns extends es{constructor(e,t,r,n){super(e,t,r),this.context=n,this.resume=rs(this.context)}static initial(e,t,{handle:r,self:n,dynamicScope:s,treeBuilder:i}){let a=e.program.heap.scopesizeof(r),l=Pr.root(n,a),o=ts(e.program.heap.getaddr(r),l,s),u=rs(t)(e,o,i);return u.pushUpdating(),u}static empty(e,{handle:t,treeBuilder:r,dynamicScope:n},s){let i=rs(s)(e,ts(e.program.heap.getaddr(t),Pr.root(Bt,0),n),r);return i.pushUpdating(),i}capture(e,t=this[Ee].fetchRegister(0)){return new Vn(this.captureState(e,t),this.resume)}compile(e){return ye(e.compile(this.context))}}class ss{constructor(e){this.vm=e}next(){return this.vm.next()}sync(){return function(e,t){let r;e.begin();do{r=t.next()}while(!r.done);let n=r.value;return e.commit(),n}(this.vm.runtime.env,this)}}function is(e,t,r,n){const s=Object.keys(n).map(e=>[e,n[e]]),i=["main","else","attrs"],a=s.map(([e])=>"@"+e);e.pushFrame();for(let t=0;t<3*i.length;t++)e.stack.push(null);return e.stack.push(null),s.forEach(([,t])=>{e.stack.push(t)}),e[Pe].setup(e.stack,a,i,0,!0),e.stack.push(e[Pe]),e.stack.push(t),e.stack.push(r),new ss(e)}function as(e){return{type:"array",value:e}}function ls(e){return{type:"string-array",value:e}}function os(e){return{type:"template-meta",value:e}}function us(e){return{type:"other",value:e}}function cs(e){return{type:"label",value:e}}function hs(e,t){return{type:"primitive",value:{primitive:e,type:t}}}const ps={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};class ds{constructor(e){this.inner=e}lookupHelper(e,t){if(this.inner.lookupHelper){let r=this.inner.lookupHelper(e,t);if(void 0===r)throw new Error(`Unexpected helper (${e} from ${JSON.stringify(t)}) (lookupHelper returned undefined)`);return r}throw new Error("Can't compile global helper invocations without an implementation of lookupHelper")}lookupModifier(e,t){if(this.inner.lookupModifier){let r=this.inner.lookupModifier(e,t);if(void 0===r)throw new Error(`Unexpected modifier (${e} from ${JSON.stringify(t)}) (lookupModifier returned undefined)`);return r}throw new Error("Can't compile global modifier invocations without an implementation of lookupModifier")}lookupComponent(e,t){if(this.inner.lookupComponent){let r=this.inner.lookupComponent(e,t);if(void 0===r)throw new Error(`Unexpected component (${e} from ${JSON.stringify(t)}) (lookupComponent returned undefined)`);return r}throw new Error("Can't compile global component invocations without an implementation of lookupComponent")}lookupPartial(e,t){if(this.inner.lookupPartial){let r=this.inner.lookupPartial(e,t);if(void 0===r)throw new Error(`Unexpected partial (${e} from ${JSON.stringify(t)}) (lookupPartial returned undefined)`);return r}throw new Error("Can't compile global partial invocations without an implementation of lookupPartial")}resolve(e){if(this.inner.resolve)return this.inner.resolve(e);throw new Error("Compile-time debugging requires an implementation of resolve")}}function ms(e,{resolver:t,meta:{referrer:r}}){let n=t.lookupComponent(e,r);if(null===n)return n;let{handle:s,compilable:i,capabilities:a}=n;return{handle:s,compilable:i,capabilities:a||ps}}class fs{constructor(e){this.buffer=e,this.size=0}encode(e,t){if(e>255)throw new Error(`Opcode type over 8-bits. Got ${e}.`);let r=e|t|arguments.length-2<<8;this.buffer.push(r);for(let e=2;e<arguments.length;e++){let t=arguments[e];if("number"==typeof t&&t>2147483647)throw new Error(`Operand over 32-bits. Got ${t}.`);this.buffer.push(t)}this.size=this.buffer.length}patch(e,t){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.");this.buffer[e+1]=t}}function gs(e){return[bs(e),ri(31)]}function bs(e){let t;switch(typeof e){case"number":t=me(e)?hs(e,0):hs(e,2);break;case"string":t=hs(e,1);break;case"boolean":case"object":case"undefined":t=hs(e,0);break;default:throw new Error("Invalid primitive passed to pushPrimitive")}return ri(30,t)}function ys({handle:e,params:t,hash:r}){return[ri(0),ri("SimpleArgs",{params:t,hash:r,atNames:!1}),ri(16,e),ri(1),ri(36,8)]}function vs(e,t){return[ri(59),ri(58,ls(e)),t(),ri(60)]}function ws(e,t){return[ri("SimpleArgs",{params:t,hash:null,atNames:!0}),ri(24,e),ri(25),ri("Option",ri("JitCompileBlock")),ri(64),ri(40),ri(1)]}function ks(e){return[Es(e&&e.symbolTable),ri(62),ri("PushCompilable",e)]}function xs(e){return[ri(0),ri("PushCompilable",e),ri("JitCompileBlock"),ri(2),ri(1)]}function Ss(e,t){let{parameters:r}=e.symbolTable,n=r.length,s=Math.min(t,n);if(0===s)return xs(e);let i=[];if(i.push(ri(0)),s){i.push(ri(39));for(let e=0;e<s;e++)i.push(ri(33,2,t-e)),i.push(ri(19,r[e]))}return i.push(ri("PushCompilable",e)),i.push(ri("JitCompileBlock")),i.push(ri(2)),s&&i.push(ri(40)),i.push(ri(1)),i}function Es(e){return e?ri(63,{type:"serializable",value:e}):bs(null)}function Cs(e){let t=[],r=0;e((function(e,n){t.push({match:e,callback:n,label:"CLAUSE"+r++})}));let n=[ri(69,2),ri(68),ri(32),ri("StartLabels")];for(let e of t.slice(0,-1))n.push(ri(67,cs(e.label),e.match));for(let e=t.length-1;e>=0;e--){let r=t[e];n.push(ri("Label",r.label),ri(34,2),r.callback()),0!==e&&n.push(ri(4,cs("END")))}return n.push(ri("Label","END"),ri("StopLabels"),ri(70)),n}function Os({args:e,body:t}){let{count:r,actions:n}=e();return[ri("StartLabels"),ri(0),ri(6,cs("ENDINITIAL")),n,ri(69,r),t(),ri("Label","FINALLY"),ri(70),ri(5),ri("Label","ENDINITIAL"),ri(1),ri("StopLabels")]}function As({args:e,ifTrue:t,ifFalse:r}){return Os({args:e,body:()=>{let e=[ri(66,cs("ELSE")),t(),ri(4,cs("FINALLY")),ri("Label","ELSE")];return r&&e.push(r()),e}})}function Ms(e,t){let{encoder:r,syntax:{program:{mode:n,constants:s}}}=e;switch(t.op){case"Option":return zs(e,function(e){let t=e.op1;return null===t?Ls:t}(t));case"Label":return r.label(t.op1);case"StartLabels":return r.startLabels();case"StopLabels":return r.stopLabels();case"JitCompileBlock":return zs(e,function(e){return"jit"===e?ri(61):Ls}(n));case"GetComponentLayout":return r.push(s,function(e){return"aot"===e?94:95}(n),t.op1);case"SetBlock":return r.push(s,function(e){return"aot"===e?20:21}(n),t.op1);default:return F(t)}}function Ts(e,t){Us(e,function(e,t){switch(t.op){case"CompileBlock":return function(e,t){return function(e,t){let[,r,n,s,i]=e,a=Zs(i,t.meta),l=Qs(r,t.meta,"Expected block head to be a string");if("string"!=typeof l)return l;return t.syntax.macros.blocks.compile(l,n||[],s,a,t)}(t.op1,e)}(e,t);case"CompileInline":return function(e,t){let{inline:r,ifUnhandled:n}=t.op1,s=function(e,t){return t.syntax.macros.inlines.compile(e,t)}(r,e);return Is(s)?s:n(r)}(e,t);case"InvokeStatic":return function(e,t){let r=t.op1;if("aot"===e.program.mode){let t=r.compile(e);return"number"!=typeof t?ri("Error",{problem:"Invalid block",start:0,end:0}):ri(3,t===Js?()=>r.compile(e):t)}return[ri(29,us(t.op1)),ri(61),ri(2)]}(e.syntax,t);case"Args":return function({params:e,hash:t,blocks:r,atNames:n}){let s=[],i=r.names;for(let e=0;e<i.length;e++)s.push(ks(r.get(i[e])));let{count:a,actions:l}=si(e);s.push(l);let o=a<<4;n&&(o|=8);r&&(o|=7);let u=B;if(t){u=t[0];let e=t[1];for(let t=0;t<e.length;t++)s.push(ri("Expr",e[t]))}return s.push(ri(84,ls(u),ls(i),o)),s}(t.op1);case"PushCompilable":return function(e,t){if(null===e)return bs(null);if("aot"===t.program.mode){let r=e.compile(t);return"number"!=typeof r?ri("Error",{problem:"Compile Error (TODO: thread better)",start:0,end:0}):bs(r)}return ri(29,us(e))}(t.op1,e.syntax);case"DynamicComponent":return function(e,t){let{definition:r,attrs:n,params:s,args:i,blocks:a,atNames:l}=t.op1,o=n&&n.length>0?Ks(n,e.meta):null,u=Array.isArray(a)||null===a?Zs(a,e.meta):a;return ui(e.meta,{definition:r,attrs:o,params:s,hash:i,atNames:l,blocks:u})}(e,t);case"IfResolvedComponent":return function(e,t){let{name:r,attrs:n,blocks:s,staticTemplate:i,dynamicTemplate:a,orElse:l}=t.op1,o=ms(r,{resolver:e.syntax.program.resolverDelegate,meta:e.meta}),{meta:u}=e;if(null!==o){let{handle:e,capabilities:t,compilable:r}=o,l=Ks(n,u),c=Zs(s,u);return null!==r?i(e,t,r,{attrs:l,blocks:c}):a(e,t,{attrs:l,blocks:c})}if(l)return l();throw new Error("Compile Error: Cannot find component "+r)}(e,t);default:return F(t)}}(e,t))}function Ps(e,t,r){void 0!==r.op3?e.push(t,r.op,r.op1,r.op2,r.op3):void 0!==r.op2?e.push(t,r.op,r.op1,r.op2):void 0!==r.op1?e.push(t,r.op,r.op1):e.push(t,r.op)}class Ns{constructor(){this.names={},this.funcs=[]}add(e,t){this.names[e]=this.funcs.push(t)-1}compile(e,t){let r=e[0],n=this.names[r];return(0,this.funcs[n])(e,t)}}const _s=new Ns;function Rs(e,t,r,n){switch(r.op){case"SimpleArgs":js(e,t,function(e,t,r){let n=[],{count:s,actions:i}=si(e);n.push(i);let a=s<<4;r&&(a|=8);let l=B;if(t){l=t[0];let e=t[1];for(let t=0;t<e.length;t++)n.push(ri("Expr",e[t]))}return n.push(ri(84,ls(l),ls(B),a)),n}(r.op1.params,r.op1.hash,r.op1.atNames),n);break;case"Expr":js(e,t,(s=r.op1,i=t.meta,Array.isArray(s)?_s.compile(s,i):[bs(s),ri(31)]),n);break;case"IfResolved":js(e,t,function(e,{op1:t}){let{kind:r,name:n,andThen:s,orElse:i,span:a}=t,l=function(e,t,r,n){switch(t){case"Modifier":return e.lookupModifier(r,n);case"Helper":return e.lookupHelper(r,n);case"ComponentDefinition":{let t=e.lookupComponent(r,n);return t&&t.handle}}}(e.syntax.program.resolverDelegate,r,n,e.meta.referrer);return null!==l?s(l):i?i():ti(`Unexpected ${r} ${n}`,a.start,a.end)}(t,r),n);break;case"ResolveFree":throw new Error("Unimplemented HighLevelResolutionOpcode.ResolveFree");case"ResolveContextualFree":{let{freeVar:s,context:i}=r.op1;if(t.meta.asPartial){js(e,t,[ri(105,t.meta.upvars[s])],n);break}switch(i){case"Expression":{let r=t.meta.upvars[s];js(e,t,[ri(22,0),ri(23,r)],n);break}case"AppendSingleId":{let r,i=t.syntax.program.resolverDelegate,a=t.meta.upvars[s],l=i.lookupHelper(a,t.meta.referrer);r=l?ys({handle:l,params:null,hash:null}):[ri(22,0),ri(23,a)],js(e,t,r,n);break}default:throw new Error("unimplemented: Can't evaluate expression in context "+i)}break}default:return F(r)}var s,i}_s.add(32,([,e])=>{let t=[];for(let r of e)t.push(ri("Expr",r));return t.push(ri(28,e.length)),t}),_s.add(31,([,e,t,r,n,s],i)=>{if(function(e,t){if(!Array.isArray(e))return!1;if(27===e[0]){let r=e[1];return!(26!==r[0]||!t.upvars||"component"!==t.upvars[r[1]])}return!1}(r,i)){if(!n||0===n.length)return ri("Error",{problem:"component helper requires at least one argument",start:e,end:e+t});let[r,...a]=n;return function({definition:e,params:t,hash:r,atNames:n},s){return[ri(0),ri("SimpleArgs",{params:t,hash:r,atNames:n}),ri(88),ri("Expr",e),ri(79,os(s)),ri(1),ri(36,8)]}({definition:r,params:a,hash:s,atNames:!1},i.referrer)}let a=Qs(r,i,"Expected call head to be a string");return"string"!=typeof a?a:ri("IfResolved",{kind:"Helper",name:a,andThen:e=>ys({handle:e,params:n,hash:s}),span:{start:e,end:e+t}})}),_s.add(24,([,e])=>[ri(22,e)]),_s.add(27,([,e,t])=>[ri("Expr",e),...t.map(e=>ri(23,e))]),_s.add(25,([,e])=>ri("ResolveFree",e)),_s.add(26,([,e,t])=>ri("ResolveContextualFree",{freeVar:e,context:t})),_s.add(30,()=>gs(void 0)),_s.add(28,([,e])=>[ri("Expr",e),ri(26)]),_s.add(29,([,e])=>[ri("Expr",e),ri(25),ri("JitCompileBlock"),ri(27)]);const Ls={"no-action":!0},Bs={"not-handled":!0};function Ds(e){return e&&!!e["no-action"]}function Is(e){return!e||!e["not-handled"]}function zs(e,t){if(!Ds(t))if(Array.isArray(t))for(let r of t)zs(e,r);else"Simple"===t.type?Ms(e,t):Ps(e.encoder,e.syntax.program.constants,t)}function js(e,t,r,n){if(!Ds(r))if(Array.isArray(r))for(let s of r)js(e,t,s,n);else if("Number"===r.type)Ps(e,n,r);else if("Resolution"===r.type)Rs(e,t,r,n);else if("Simple"===r.type)Ms(t,r);else{if("Error"!==r.type)throw we(r,"unexpected action kind");e.error({problem:r.op1.problem,span:{start:r.op1.start,end:r.op1.end}})}}function Us(e,t){if(!Ds(t))if(Array.isArray(t))for(let r of t)Us(e,r);else if("Number"===t.type)Ps(e.encoder,e.syntax.program.constants,t);else if("Compile"===t.type)Ts(e,t);else if("Resolution"===t.type)Rs(e.encoder,e,t,e.syntax.program.constants);else if("Simple"===t.type)Ms(e,t);else if("Error"!==t.type)throw we(t,"unexpected action type")}class Hs{constructor(){let{blocks:e,inlines:t}=function(e,t){return e.add("if",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #if requires a single argument");return As({args:()=>({count:1,actions:[ri("Expr",e[0]),ri(71)]}),ifTrue:()=>xs(r.get("default")),ifFalse:()=>r.has("else")?xs(r.get("else")):Ls})}),e.add("unless",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #unless requires a single argument");return As({args:()=>({count:1,actions:[ri("Expr",e[0]),ri(71)]}),ifTrue:()=>r.has("else")?xs(r.get("else")):Ls,ifFalse:()=>xs(r.get("default"))})}),e.add("with",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #with requires a single argument");return As({args:()=>({count:2,actions:[ri("Expr",e[0]),ri(33,3,0),ri(71)]}),ifTrue:()=>Ss(r.get("default"),1),ifFalse:()=>r.has("else")?xs(r.get("else")):Ls})}),e.add("let",(e,t,r)=>{if(!e)return ti("let requires arguments",0,0);let{count:n,actions:s}=si(e);return[s,Ss(r.get("default"),n)]}),e.add("each",(e,t,r)=>Os({args(){let r;return r=t&&"key"===t[0][0]?[ri("Expr",t[1][0])]:[gs(null)],r.push(ri("Expr",e[0])),{count:2,actions:r}},body(){let e=[ri(74),ri(66,cs("ELSE")),ri(0),ri(33,2,1),ri(6,cs("ITER")),ri(72,cs("BODY")),ri("Label","ITER"),ri(75,cs("BREAK")),ri("Label","BODY"),Ss(r.get("default"),2),ri(34,2),ri(4,cs("FINALLY")),ri("Label","BREAK"),ri(73),ri(1),ri(4,cs("FINALLY")),ri("Label","ELSE")];return r.has("else")&&e.push(xs(r.get("else"))),e}})),e.add("in-element",(e,t,r)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #in-element requires a single argument");return As({args(){let[r,n]=t,s=[];for(let e=0;e<r.length;e++){let t=r[e];if("guid"!==t&&"insertBefore"!==t)throw new Error(`SYNTAX ERROR: #in-element does not take a \`${r[0]}\` option`);s.push(ri("Expr",n[e]))}return s.push(ri("Expr",e[0]),ri(33,3,0)),{count:4,actions:s}},ifTrue:()=>[ri(50),xs(r.get("default")),ri(56)]})}),e.add("-with-dynamic-vars",(e,t,r)=>{if(t){let[e,n]=t,{actions:s}=si(n);return[s,vs(e,()=>xs(r.get("default")))]}return xs(r.get("default"))}),e.add("component",(e,t,r,n)=>{if("string"==typeof e[0]){let s=li(n,e[0],t,r.get("default"));if(Is(s))return s}let[s,...i]=e;return ri("DynamicComponent",{definition:s,attrs:null,params:i,args:t,atNames:!1,blocks:r})}),t.add("component",(e,t,r,n)=>{let s=t&&t[0];if("string"==typeof s){let e=li(n,s,r,null);if(e!==Bs)return e}let[i,...a]=t;return ui(n.meta,{definition:i,attrs:null,params:a,hash:r,atNames:!1,blocks:Xs})}),{blocks:e,inlines:t}}(new Vs,new Fs);this.blocks=e,this.inlines=t}}class Vs{constructor(){this.names=j(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t,r,n,s){let i=this.names[e],a={resolver:s.syntax.program.resolverDelegate,meta:s.meta};if(void 0===i){return(0,this.missing)(e,t,r,n,a)}return(0,this.funcs[i])(t,r,n,a)}}class Fs{constructor(){this.names=j(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t){let r,n,s,[,,,,i]=e;if(!Array.isArray(i))return Bs;if(31===i[0]){let e=Qs(i[3],t.meta,"Expected head of call to be a string");if("string"!=typeof e)return e;r=e,n=i[4],s=i[5]}else{if(27!==i[0])return Bs;{let e=function([,e,t],r){if(t.length>0)return null;if(25===e[0]||26===e[0])return r.upvars[e[1]];return null}(i,t.meta);if(null===e)return Bs;r=e,n=null,s=null}}let a=this.names[r],l={resolver:t.syntax.program.resolverDelegate,meta:t.meta};if(void 0===a&&this.missing){return(0,this.missing)(r,n,s,l)}if(void 0!==a){return(0,this.funcs[a])(r,n,s,l)}return Bs}}function $s(e,t){return{syntax:e,encoder:new ni,meta:t}}const Ws=new Ns;Ws.add(2,e=>ri(42,e[1])),Ws.add(11,()=>ri(55)),Ws.add(10,()=>ri(54)),Ws.add(3,(e,t)=>{let[,,,r,n,s]=e,i=Qs(r,t,"Expected modifier head to be a string");return"string"!=typeof i?i:ri("IfResolved",{kind:"Modifier",name:i,andThen:e=>[ri(0),ri("SimpleArgs",{params:n,hash:s,atNames:!1}),ri(57,e),ri(1)],span:{start:0,end:0}})}),Ws.add(12,([,e,t,r])=>ri(51,e,t,r)),Ws.add(23,([,e,t,r])=>ri(108,e,t,r)),Ws.add(13,([,e,t,r])=>[ri("Expr",t),ri(52,e,!1,r)]),Ws.add(20,([,e,t,r])=>[ri("Expr",t),ri(52,e,!0,r)]),Ws.add(14,([,e,t,r])=>[ri("Expr",t),ri(53,e,!1,r)]),Ws.add(21,([,e,t,r])=>[ri("Expr",t),ri(53,e,!0,r)]),Ws.add(9,([,e,t])=>t?ri(48,e):[ri(91),ri(48,e)]),Ws.add(7,([,e,t,r,n])=>"string"==typeof e?ri("IfResolvedComponent",{name:e,attrs:t,blocks:n,staticTemplate:(e,t,n,{blocks:s,attrs:i})=>[ri(80,e),oi({capabilities:t,layout:n,attrs:i,params:null,hash:r,blocks:s})],dynamicTemplate:(e,t,{attrs:n,blocks:s})=>[ri(80,e),ci({capabilities:t,attrs:n,params:null,hash:r,atNames:!0,blocks:s})]}):ri("DynamicComponent",{definition:e,attrs:t,params:null,args:r,blocks:n,atNames:!0})),Ws.add(17,([,e,t],r)=>As({args:()=>({count:2,actions:[ri("Expr",e),ri(33,3,0)]}),ifTrue:()=>[ri(104,os(r.referrer),ls(r.evalSymbols),as(t)),ri(40),ri(1)]})),Ws.add(16,([,e,t])=>ws(e,t)),Ws.add(15,([,e])=>ws(e,B)),Ws.add(22,([,e],t)=>ri(106,ls(t.evalSymbols),as(e))),Ws.add(1,e=>{let[,t,,,r]=e;return"string"==typeof r&&t?ri(41,r):ri("CompileInline",{inline:e,ifUnhandled:()=>[ri(0),ri("Expr",r),ri(3,{type:"stdlib",value:t?"trusting-append":"cautious-append"}),ri(1)]})}),Ws.add(5,e=>ri("CompileBlock",e));const Js=-1;class Gs{constructor(e,t,r){this.statements=e,this.meta=t,this.symbolTable=r,this.compiled=null}compile(e){return function(e,t){if(null!==e.compiled)return e.compiled;e.compiled=Js;let{statements:r,meta:n}=e,s=function(e,t,r){let n=Ws,s=$s(r,t);for(let t=0;t<e.length;t++)Us(s,n.compile(e[t],s.meta));0;return s.encoder.commit(r.program.heap,t.size)}(r,n,t);return Mr(t.program),e.compiled=s,s}(this,e)}}function Ys(e){let t=e.block;return new Gs(t.statements,ii(e),{symbols:t.symbols,hasEval:t.hasEval})}function Ks(e,t){let r=Array.isArray(e)?{statements:e,parameters:B}:e;return new Gs(r.statements,t,{parameters:r.parameters})}class qs{constructor(e){this.blocks=e,this.names=e?Object.keys(e):[]}get(e){return this.blocks&&this.blocks[e]||null}has(e){let{blocks:t}=this;return null!==t&&e in t}with(e,t){let{blocks:r}=this;return new qs(r?pe({},r,{[e]:t}):{[e]:t})}get hasAny(){return null!==this.blocks}}const Xs=new qs(null);function Zs(e,t){if(null===e)return Xs;let r=j(),[n,s]=e;for(let e=0;e<n.length;e++)r[n[e]]=Ks(s[e],t);return new qs(r)}function Qs(e,t,r){if(!t.upvars)return ti(r+", but there were no free variables in the template",0,0);if(!Array.isArray(e)||27!==e[0])throw new Error(`${r}, got ${JSON.stringify(e)}`);if(0!==e[2].length)throw new Error(`${r}, got ${JSON.stringify(e)}`);if(26===e[1][0]||25===e[1][0]){let r=e[1][1];return t.upvars[r]}throw new Error(`${r}, got ${JSON.stringify(e)}`)}class ei{constructor(){this.labels=j(),this.targets=[]}label(e,t){this.labels[e]=t}target(e,t){this.targets.push({at:e,target:t})}patch(e){let{targets:t,labels:r}=this;for(let n=0;n<t.length;n++){let{at:s,target:i}=t[n],a=r[i]-s;e.patch(s,a)}}}function ti(e,t,r){return ri("Error",{problem:e,start:t,end:r})}function ri(e,t,r,n){if("number"==typeof e)return void 0!==n?{type:"Number",op:e,op1:t,op2:r,op3:n}:void 0!==r?{type:"Number",op:e,op1:t,op2:r}:void 0!==t?{type:"Number",op:e,op1:t}:{type:"Number",op:e};{let r;if("CompileInline"===(s=e)||"CompileBlock"===s||"InvokeStatic"===s||"PushCompilable"===s||"Args"===s||"IfResolvedComponent"===s||"DynamicComponent"===s)r="Compile";else if(function(e){return"IfResolved"===e||"Expr"===e||"SimpleArgs"===e||"ResolveFree"===e||"ResolveContextualFree"===e}(e))r="Resolution";else if(function(e){return"Label"===e||"Option"===e||"GetComponentLayout"===e||"StartLabels"===e||"StopLabels"===e||"SimpleArgs"===e||"JitCompileBlock"===e||"SetBlock"===e}(e))r="Simple";else{if(!function(e){return"Error"===e}(e))throw new Error("Exhausted "+e);r="Error"}return void 0===t?{type:r,op:e,op1:void 0}:{type:r,op:e,op1:t}}var s}class ni{constructor(){this.labelsStack=new H,this.encoder=new fs([]),this.errors=[]}error(e){this.encoder.encode(30,0),this.errors.push(e)}commit(e,t){this.encoder.encode(5,1024);let r=function(e,t,r){let n=e.malloc();for(let t=0;t<r.length;t++){let n=r[t];"function"==typeof n?e.pushPlaceholder(n):"object"==typeof n?e.pushStdlib(n):e.push(n)}return e.finishMalloc(n,t),n}(e,t,this.encoder.buffer);return this.errors.length?{errors:this.errors,handle:r}:r}push(e,t,...r){if((n=t)>=0&&n<=15){let n=r.map((t,r)=>this.operand(e,t,r));return this.encoder.encode(t,1024,...n)}{let n=r.map((t,r)=>this.operand(e,t,r));return this.encoder.encode(t,0,...n)}var n}operand(e,t,r){return t&&"object"==typeof t&&"label"===t.type?(this.currentLabels.target(this.encoder.size+r,t.value),-1):function(e,t){if("number"==typeof t||"function"==typeof t)return t;if("boolean"==typeof t)return!0===t?1:0;if("string"==typeof t)return e.string(t);if(null===t)return 0;switch(t.type){case"array":return e.array(t.value);case"string-array":return e.stringArray(t.value);case"serializable":return e.serializable(t.value);case"template-meta":return e.templateMeta(t.value);case"other":return e.other(t.value);case"stdlib":return t;case"primitive":switch(t.value.type){case 1:return ge(e.string(t.value.primitive),1073741823,-1);case 2:return ge(e.number(t.value.primitive),1073741823,-1073741825);case 0:return de(t.value.primitive);default:return F(t.value)}case"lookup":throw V("lookup not reachable");default:return F(t)}}(e,t)}get currentLabels(){return this.labelsStack.current}label(e){this.currentLabels.label(e,this.encoder.size)}startLabels(){this.labelsStack.push(new ei)}stopLabels(){this.labelsStack.pop().patch(this.encoder)}}function si(e){if(!e)return{count:0,actions:Ls};let t=[];for(let r=0;r<e.length;r++)t.push(ri("Expr",e[r]));return{count:e.length,actions:t}}function ii(e){return{asPartial:e.asPartial||!1,evalSymbols:ai(e),upvars:e.block.upvars,referrer:e.referrer,size:e.block.symbols.length}}function ai(e){let{block:t}=e;return t.hasEval?t.symbols:null}function li(e,t,r,n){let s=ms(t,e);if(null!==s){let{compilable:e,handle:t,capabilities:i}=s;if(e){if(r)for(let e=0;e<r.length;e+=2)r[e][0]="@"+r[e][0];let s=[ri(80,t)];return s.push(oi({capabilities:i,layout:e,attrs:null,params:null,hash:r,blocks:new qs({default:n})})),s}}return Bs}function oi({capabilities:e,layout:t,attrs:r,params:n,hash:s,blocks:i}){let{symbolTable:a}=t;if(a.hasEval||e.prepareArgs)return ci({capabilities:e,attrs:r,params:n,hash:s,atNames:!0,blocks:i,layout:t});let l=[ri(36,4),ri(33,3,1),ri(35,4)],{symbols:o}=a;e.createArgs&&l.push(ri(0),ri("SimpleArgs",{params:n,hash:s,atNames:!0})),l.push(ri(100)),e.dynamicScope&&l.push(ri(59)),e.createInstance&&l.push(ri(89,0|i.has("default"),4)),e.createArgs&&l.push(ri(1)),l.push(ri(0),ri(90,4));let u=[];l.push(ri(92,4)),u.push({symbol:0,isBlock:!1});for(let e=0;e<o.length;e++){let t=o[e];switch(t.charAt(0)){case"&":let n;n="&attrs"===t?r:i.get(t.slice(1)),n?(l.push(ks(n)),u.push({symbol:e+1,isBlock:!0})):(l.push(ks(null)),u.push({symbol:e+1,isBlock:!0}));break;case"@":if(!s)break;let[a,o]=s,c=t,h=a.indexOf(c);-1!==h&&(l.push(ri("Expr",o[h])),u.push({symbol:e+1,isBlock:!1}))}}l.push(ri(37,o.length+1,Object.keys(i).length>0?1:0));for(let e=u.length-1;e>=0;e--){let{symbol:t,isBlock:r}=u[e];r?l.push(ri("SetBlock",t)):l.push(ri(19,t))}return l.push(ri("InvokeStatic",t)),e.createInstance&&l.push(ri(103,4)),l.push(ri(1),ri(40)),e.dynamicScope&&l.push(ri(60)),l.push(ri(101),ri(35,4)),l}function ui(e,{definition:t,attrs:r,params:n,hash:s,atNames:i,blocks:a}){return Os({args:()=>({count:2,actions:[ri("Expr",t),ri(33,3,0)]}),body:()=>[ri(66,cs("ELSE")),ri(83,os(e.referrer)),ri(81),ci({capabilities:!0,attrs:r,params:n,hash:s,atNames:i,blocks:a}),ri("Label","ELSE")]})}function ci({capabilities:e,attrs:t,params:r,hash:n,atNames:s,blocks:i,layout:a}){let l=!!i,o=!0===e||e.prepareArgs||!(!n||0===n[0].length),u=i.with("attrs",t);return[ri(36,4),ri(33,3,1),ri(35,4),ri(0),ri("Args",{params:r,hash:n,blocks:u,atNames:s}),ri(87,4),hi(u.has("default"),l,o,()=>{let e;return e=a?[Es(a.symbolTable),ri("PushCompilable",a),ri("JitCompileBlock")]:[ri("GetComponentLayout",4)],e.push(ri(98,4)),e}),ri(35,4)]}function hi(e,t,r,n=null){let s=[ri(100),ri(59),ri(89,0|e,4)];return n&&s.push(n()),s.push(ri(90,4),ri(92,4),ri(38,4),ri(19,0),ri(97,4),r?ri(17,4):Ls,t?ri(18,4):Ls,ri(34,1),ri(99,4),ri(103,4),ri(1),ri(40),ri(60),ri(101)),s}function pi(e){return Ks(e.block.statements,ii(e))}class di{constructor(e,t,r){this.main=e,this.trustingGuardedAppend=t,this.cautiousGuardedAppend=r}get"trusting-append"(){return this.trustingGuardedAppend}get"cautious-append"(){return this.cautiousGuardedAppend}getAppend(e){return e?this.trustingGuardedAppend:this.cautiousGuardedAppend}}function mi(){return[ri(76,4),hi(!1,!1,!0)]}function fi(e){return[ri(78),Cs(t=>{t(1,()=>e?[ri(68),ri(43)]:ri(47)),t(0,()=>[ri(82),ri(81),[ri(36,4),ri(33,3,1),ri(35,4),ri(0),ri(85),ri(87,4),hi(!1,!1,!0,()=>[ri("GetComponentLayout",4),ri(98,4)]),ri(35,4)]]),t(3,()=>[ri(68),ri(44)]),t(4,()=>[ri(68),ri(45)]),t(5,()=>[ri(68),ri(46)])})]}function gi(e){let t=yi(e,mi),r=yi(e,()=>fi(!0)),n=yi(e,()=>fi(!1));return new di(t,r,n)}const bi={asPartial:!1,evalSymbols:null,upvars:null,referrer:{},size:0};function yi(e,t){let r=new ni,n=new Hs;zs({encoder:r,meta:bi,syntax:{macros:n,program:e}},t());let s=r.commit(e.heap,0);if("number"!=typeof s)throw new Error("Unexpected errors compiling std");return s}class vi{constructor(e){this.constants=new yr,this.heap=new Sr,this.mode="jit",this.resolverDelegate=e,this.stdlib=gi(this)}}class wi{constructor(e){this.layout=e,this.compiled=null;let{block:t}=e,r=t.symbols.slice(),n=r.indexOf("&attrs");this.attrsBlockNumber=-1===n?r.push("&attrs"):n+1,this.symbolTable={hasEval:t.hasEval,symbols:r}}compile(e){if(null!==this.compiled)return this.compiled;let t=ii(this.layout),r=$s(e,t);var n,s,i,a;Us(r,(n=this.layout,s=this.attrsBlockNumber,[ri("StartLabels"),(i=5,a=()=>[ri(93,4),ri(31),ri(33,3,0)],[ri(36,i),a(),ri(35,i)]),ri(66,cs("BODY")),ri(36,5),ri(91),ri(49),ri(102,4),ws(s,B),ri(54),ri("Label","BODY"),xs(pi(n)),ri(36,5),ri(66,cs("END")),ri(55),ri("Label","END"),ri(35,5),ri("StopLabels")]));let l=r.encoder.commit(r.syntax.program.heap,t.size);return"number"!=typeof l||(this.compiled=l,Mr(r.syntax.program)),l}}let ki=0;function xi({id:e,meta:t,block:r}){let n,s=e||"client-"+ki++;return{id:s,meta:t,create:e=>{let i=e?pe({},e,t):t;return n||(n=JSON.parse(r)),new Si({id:s,block:n,referrer:i})}}}class Si{constructor(e){this.parsedLayout=e,this.result="ok",this.layout=null,this.partial=null,this.wrappedLayout=null;let{block:t}=e;this.symbols=t.symbols,this.hasEval=t.hasEval,this.referrer=e.referrer,this.id=e.id||"client-"+ki++}asLayout(){return this.layout?this.layout:this.layout=Ys(pe({},this.parsedLayout,{asPartial:!1}))}asPartial(){return this.partial?this.partial:this.layout=Ys(pe({},this.parsedLayout,{asPartial:!0}))}asWrappedLayout(){return this.wrappedLayout?this.wrappedLayout:this.wrappedLayout=new wi(pe({},this.parsedLayout,{asPartial:!1}))}}function Ei(e){return Array.isArray(e)?0!==e.length:Boolean(e)}class Ci{constructor(){this.toBool=Ei}toIterator(e){return function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)?class{constructor(e,t){this.iterable=e,this.result=t,this.position=0}static from(e){const t=e[Symbol.iterator](),r=t.next(),{done:n}=r;return!0===n?null:new this(t,r)}isEmpty(){return!1}next(){const{iterable:e,result:t,position:r}=this;if(t.done)return null;const n=t.value,s=r;return this.position++,this.result=e.next(),{value:n,memo:s}}}.from(e):null}}class Oi extends Ci{constructor(){super(...arguments),this.isInteractive=!0,this.uselessAnchor=self.document.createElement("a"),this.protocolForURL=e=>(this.uselessAnchor.href=e,this.uselessAnchor.protocol)}}const Ai=new WeakMap,Mi=Object.getPrototypeOf;function Ti(e,t){return Ai.set(t,e),t}const Pi=new WeakMap,Ni=`__OWNER_${Math.floor(Math.random()*Date.now())}__`;let _i={};const Ri=new WeakMap,Li=new WeakMap,Bi=Object.getPrototypeOf;function Di(e,t){return Ri.set(t,e),t}function Ii(e){let t=e;for(;null!=t;){const e=Ri.get(t);if(void 0!==e)return e;t=Bi(t)}}function zi(e,t){let r=Li.get(e);void 0===r&&(r=new WeakMap,Li.set(e,r));let n=r.get(t);return void 0===n&&(n=t(e),r.set(t,n)),n}function ji(e,t){const r=Ii(t);if(void 0!==r&&"component"===r.type)return zi(e,r.factory)}function Ui(e){if("symbol"==typeof e)return null;const t=Number(e);return isNaN(t)?null:t%1==0?t:null}function Hi(e,t){const{named:r,positional:n}=e,s={get(e,t){if(r.has(t)){const e=r.get(t);return N(e.tag),e.value()}},has:(e,t)=>r.has(t),ownKeys:e=>r.names,isExtensible:()=>!1,getOwnPropertyDescriptor:(e,t)=>({enumerable:!0,configurable:!0})},i={get(e,t){if("length"===t)return N(n.tag),n.length;const r=Ui(t);if(null!==r&&r<n.length){const e=n.at(r);return N(e.tag),e.value()}return e[t]},isExtensible:()=>!1,has(e,t){const r=Ui(t);return null!==r&&r<n.length}},a=Object.create(null);return{named:new Proxy(a,s),positional:new Proxy([],i)}}const Vi={createInstance:!0,dynamicLayout:!1,dynamicTag:!1,wrapped:!1,prepareArgs:!1,createArgs:!0,attributeHook:!1,elementHook:!1,updateHook:!1,createCaller:!1,dynamicScope:!0,willDestroy:!1};function Fi(e){return e.capabilities.asyncLifecycleCallbacks}function $i(e){return e.capabilities.updateHook}function Wi(e){return e.capabilities.destructor}class Ji{constructor(e,t,r,n,s){this.env=e,this.delegate=t,this.component=r,this.args=n,this.argsProxy=s}destroy(){const{delegate:e,component:t}=this;Wi(e)&&e.destroyComponent(t)}}const Gi=new class{create(e,t,r,n){const{ComponentDefinition:s}=t,i=r.capture(),a=ji(n.get(Ni).value(),s),l=Hi(i),o=a.createComponent(s,l);return new Ji(e,a,o,i,l)}update({delegate:e,component:t,argsProxy:r}){$i(e)&&e.updateComponent(t,r)}didCreate({delegate:e,component:t}){Fi(e)&&e.didCreateComponent(t)}didUpdate({delegate:e,component:t}){(function(e){return Fi(e)&&$i(e)})(e)&&e.didUpdateComponent(t)}getContext({delegate:e,component:t}){e.getContext(t)}getSelf({env:e,delegate:t,component:r}){return new lt(t.getContext(r),e)}getDestructor(e){return Wi(e.delegate)?e:null}getCapabilities({capabilities:e}){return Object.assign({},Vi,{updateHook:e.updateHook})}getTag({args:e}){return b(e)?m():e.tag}didRenderLayout(){}didUpdateLayout(){}getJitStaticLayout({definition:e}){return e.template.asLayout()}};class Yi{constructor(e,t,r){this.manager=Gi,this.handle=e,this.template=ve(r);const n=ji(_i,t).capabilities;this.state={ComponentDefinition:t,capabilities:n,definition:this}}}function Ki(e){let t,r,n;return()=>(r&&u(r,n)||(r=P(()=>t=e()),n=o()),N(r),t)}function qi(e){return(t,r)=>{const n=function(e,t){const r=Ii(t);if(void 0!==r&&"helper"===r.type)return zi(e,r.factory)}(r.dynamicScope().get(Ni).value(),e),s=t.capture();let i;if(void 0!==n)i=function(e,t,r,n){let s;const i=Hi(r),a=e.capabilities.updateHook;(function(e){return e.capabilities.destructor})(e)&&n.associateDestroyable({destroy(){void 0!==s&&e.destroyHelper(s)}});const l=Ki(()=>e.getValue(s)),o=Ki(()=>{void 0===s?s=e.createHelper(t,i):a&&e.updateHelper(s,i)});return()=>(o(),l())}(n,e,s,r);else{0;const t=e;i=e=>t(...e.positional.value())}return new ot(i,s,r.env)}}const Xi={attributeHook:!1,createArgs:!1,createCaller:!1,createInstance:!0,dynamicLayout:!1,dynamicScope:!1,dynamicTag:!1,elementHook:!1,prepareArgs:!1,updateHook:!1,wrapped:!1,willDestroy:!1};const Zi=new Ze(null);class Qi{static create(){return new Qi}getCapabilities(){return Xi}getJitStaticLayout({definition:e}){return e.template.asLayout()}create(e,t){}getSelf(e){return Zi}getTag(){return g}didRenderLayout(){}didCreate(){}didUpdateLayout(){}didUpdate(){}getDestructor(){return null}}const ea=new Qi;class ta{constructor(e,t,r){this.manager=ea,this.handle=e,this.template=ve(r),this.state={name:t,definition:this}}}class ra{}function na(e,t={}){return D("3.13"===e,"Invalid component manager compatibility specified"),{disableAutoTracking:Boolean(t.disableAutoTracking)}}const sa=new class{constructor(){this.capabilities=na("3.13")}createModifier(e,t){return{definition:e}}installModifier(e,t,r){e.destructor=e.definition(t,...r.positional),e.element=t}updateModifier(e,t){this.destroyModifier(e),this.installModifier(e,e.element,t)}destroyModifier(e){const{destructor:t}=e;void 0!==t&&t()}};class ia{constructor(e,t,r,n,s){this.element=e,this.delegate=t,this.modifier=r,this.argsProxy=n,this.capturedArgs=s,this.tag=f()}destroy(){const{delegate:e,modifier:t,argsProxy:r}=this;e.destroyModifier(t,r)}}const aa=new class{create(e,t,r,n){let s=function(e,t){const r=Ii(t);if(void 0!==r&&"modifier"===r.type)return zi(e,r.factory)}(n.get(Ni).value(),t);void 0===s&&(s=sa);const i=r.capture(),a=Hi(i),l=s.createModifier(t,a);return new ia(e,s,l,a,i)}getTag({tag:e,capturedArgs:t}){return v([e,t.tag])}install(e){const{element:t,argsProxy:r,delegate:n,modifier:s,tag:i}=e;if(!0===n.capabilities.disableAutoTracking)_(()=>n.installModifier(s,t,r));else{const e=P(()=>n.installModifier(s,t,r));d(i,e)}}update(e){const{argsProxy:t,delegate:r,modifier:n,tag:s}=e;if(!0===r.capabilities.disableAutoTracking)_(()=>r.updateModifier(n,t));else{const e=P(()=>r.updateModifier(n,t));d(s,e)}}getDestructor(e){return e}};class la{constructor(e,t){this.handle=e,this.state=t,this.manager=aa}}let oa=0;const ua=new WeakMap,ca=new WeakMap,ha=new WeakMap;function pa(e){return ua.get(e)||function(e){const t=xi(function(e){let t=e;for(;null!=t;){const e=Ai.get(t);if(void 0!==e)return e;t=Mi(t)}}(e)).create();let r;r=e instanceof ra?new ta(oa++,"template-only-component",t):new Yi(oa++,e,t);return ua.set(e,r),r}(e)}function da(e){return ca.get(e)||function(e){const t={helper:qi(e),handle:oa++};return ca.set(e,t),t}(e)}function ma(e){return ha.get(e)||function(e){const t=new la(oa++,e);return ha.set(e,t),t}(e)}const fa={if:(ga=function(e,t){return new ot(({positional:e})=>{if(e.length>3)throw new Error('The inline form of the `if` helper expects two or three arguments, e.g. `{{if trialExpired "Expired" expiryDate}}`.');const t=e.at(0),r=e.at(1),n=e.at(2);return!0===Ei(t.value())?r.value():void 0!==n?n.value():void 0},e.capture(),t.env,"if")},{helper:ga,handle:oa++})};var ga;let ba=[];var ya=async function(e,t){const r=t instanceof HTMLElement?{element:t}:t,{element:n,args:s,owner:i}=r,a=function(e,t,r,n,s={},i=_i){const a=function(e,t={},r,n={}){return{env:new Lr(e,t),program:new Er(r.program.constants,r.program.heap),resolver:new Hr(n)}}(r,n,xa,ka),l=(u=a.env,c={element:t,nextSibling:null},$e.forInitialRender(u,c)),o=ka.registerRoot(e);var u,c;let h;i&&(h=new Mn({[Ni]:new Ze(i)}));return function(e,t,r,n,s,i={},a=new Mn){let l=ns.empty(e,{treeBuilder:t,handle:n,dynamicScope:a},r);const o=rn(l.runtime.resolver,s),{manager:u,state:c}=o;let h;if(!yn(Kr(u.getCapabilities(c))))throw new Error("Cannot invoke components with dynamic layouts as a root component.");{let e=u.getJitStaticLayout(c,l.runtime.resolver),t=ye(e.compile(r));if(Array.isArray(t)){let e=t[0];throw new Error(`Compile Error: ${e.problem} ${e.span.start}..${e.span.end} :: TODO (thread better)`)}h={handle:t,symbolTable:e.symbolTable}}return is(l,h,o,i)}(a,l,xa,0,o,function(e,t){const r=new lt(e,t);return Object.keys(e).reduce((e,t)=>(e[t]=r.get(t),e),{})}(s,a.env),h)}(e,n,{document:self.document},new Oi,s,i).sync();va.push(a)};const va=[];k=function(){wa||(wa=!0,setTimeout(()=>{wa=!1;try{!function(){for(const e of va){const{env:t}=e;t.begin(),e.rerender(),t.commit()}}(),ba.forEach(([e])=>e())}catch(e){ba.forEach(([,t])=>t(e))}ba=[]},0))};let wa=!1;const ka=new class{constructor(){this.registry=[]}registerRoot(e){const t=pa(e),{handle:r}=t;return this.registry[r]=t,r}lookupComponent(e,t){return this.registry[e]}resolve(e){return this.registry[e]}compilable(e){throw new Error("Method not implemented.")}lookupPartial(e,t){throw new Error("Method not implemented.")}},xa=function(e={},t=new Hs){return{program:new vi(new ds(e)),macros:t}}(new class{constructor(e){this.inner=e}lookupHelper(e,t){const r=t.scope(),{helper:n,handle:s}=fa[e]||da(r[e]);return this.inner.registry[s]=n,s}lookupModifier(e,t){const r=ma(t.scope()[e]),{handle:n}=r;return this.inner.registry[n]=r,n}lookupComponent(e,t){const r=t.scope()[e];const n=pa(r),{state:s,manager:i,template:a,handle:l}=n;return this.inner.registry[l]=n,{handle:l,capabilities:i.getCapabilities(s),compilable:ve(a).asLayout()}}resolve(e){return this.inner.resolve(e)}lookupPartial(e,t){throw new Error("Method not implemented.")}}(ka));const Sa=new WeakMap,Ea=new WeakMap;const Ca=function(e,t={}){D("3.4"===e||"3.13"===e,"Invalid component manager compatibility specified");const r="3.4"===e||Boolean(t.updateHook);return{asyncLifecycleCallbacks:Boolean(t.asyncLifecycleCallbacks),destructor:Boolean(t.destructor),updateHook:r}}("3.13",{destructor:!0});class Oa extends class{constructor(e){this.owner=e}createComponent(e,t){return new e(this.owner,t.named)}getContext(e){return e}}{constructor(){super(...arguments),this.capabilities=Ca}destroyComponent(e){!function(e){Sa.set(e,!0)}(e),e.willDestroy(),function(e){Ea.set(e,!0)}(e)}}class Aa extends class{constructor(e,t){this.args=t,Sa.set(this,!1),Ea.set(this,!1)}get isDestroying(){return Sa.get(this)||!1}get isDestroyed(){return Ea.get(this)||!1}willDestroy(){}}{constructor(e,t){super(e,t),function(e,t){Pi.set(e,t)}(this,e)}}Di({factory:e=>new Oa(e),type:"component"},Aa);const Ma=(...e)=>{const[t,r,n]=e;if(n)return Ta(t,r,n);Object.defineProperty(t,r,Ta(t,r))};function Ta(e,t,r){const{getter:n,setter:s}=L(t,r&&r.initializer);return{enumerable:!0,configurable:!0,get(){return n(this)},set(e){s(this,e)}}}class Pa extends Aa{}function Na(e,t,r,n){}Ti({id:"2VUzcfJO",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow mb-4 max-h-64 p-4 hidden",null],[10],[1,1,0,0,"\\n     Hi i\'m where the facets will live\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},Pa);class _a{constructor(){this.capabilities=na("3.13")}createModifier(e,t){return{args:t,previousArgs:t}}installModifier(e,t){const{args:r}=e,[n,s]=r.positional,i=Object.assign({},r.named);t.addEventListener(n,s,i),e.element=t,e.previousArgs={positional:[n,s],named:i}}updateModifier(e){this.destroyModifier(e),this.installModifier(e,e.element)}destroyModifier({element:e,previousArgs:t}){const[r,n]=t.positional;e.removeEventListener(r,n,t.named)}}!function(e,t){Di({factory:e,type:"modifier"},t)}(()=>new _a,Na);const Ra=new WeakMap;function La(e,t,r){const n=r.value;return{enumerable:r.enumerable,configurable:r.configurable,get(){let e=Ra.get(this);void 0===e&&(e=new Map,Ra.set(this,e));let t=e.get(n);return void 0===t&&(t=n.bind(this),e.set(n,t)),t}}}class Ba{constructor(e){this.owner=e,this.capabilities=function(e,t={}){return D("glimmerjs-2.0.0"===e,"Invalid helper manager compatibility specified"),{destructor:Boolean(t.destructor),updateHook:Boolean(t.updateHook)}}("glimmerjs-2.0.0")}getValue({fn:e,args:t,ownerProxy:r}){return e(t.positional,t.named,{services:r})}createHelper(e,t){const{owner:r}=this;return{fn:e,args:t,ownerProxy:new Proxy({},{get:(e,t)=>r.lookup({type:"service",name:t})})}}}const Da=e=>new Ba(e);function Ia(e){return function(e,t){Di({factory:e,type:"helper"},t)}(Da,e),e}function za(e,...t){return e.bind(null,...t)}function ja(e){return Ia((t,r)=>e(r,...t))}const Ua=ja(({},e,t,r)=>e[t]===r);ja(({},e)=>!e),ja(({},e,t)=>e===t);class Ha extends Aa{}var Va,Fa,$a;Ti({id:"fTWuUzbA",block:'{"symbols":["@item","@nextPage","@prevPage","@goToPage"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[31,12,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","page"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[14,"aria-label",[32,["page number ",[27,[24,1],["page"]]]],null],[14,"class",[32,["mr-2 hover:bg-gray-200 rounded-full p-2 ",[31,141,2,[27,[26,2,"CallHead"],[]],[[27,[24,1],["selected"]],"bg-blue-spirit"],null]]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,193,2,[27,[26,3,"CallHead"],[]],[[27,[24,4],[]],[27,[24,1],["page"]]],null]],null],[10],[1,1,0,0,"\\n        "],[1,0,0,0,[27,[24,1],["page"]]],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,275,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","start-ellipsis"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"aria-label","start ellipsis",null],[12,"class","mr-2",null],[10],[1,1,0,0,"..."],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,388,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","end-ellipsis"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"aria-label","end ellipsis",null],[12,"class","mr-2",null],[10],[1,1,0,0,"..."],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,497,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","previous"],null]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"aria-label","previous page",null],[23,"class","border rounded-full mr-4 p-2 shadow hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",null],[14,"disabled",[27,[24,1],["disabled"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,3],[]]],null],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-4 w-4 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M15 19l-7-7 7-7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[5,[27,[26,2,"BlockHead"],[]],[[31,1053,2,[27,[26,1,"CallHead"],[]],[[27,[24,1],[]],"type","next"],null]],null,[["default"],[{"statements":[[1,1,0,0,"      "],[9,"button",false],[23,"aria-label","next page",null],[23,"class","border rounded-full ml-2 p-2 shadow hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",null],[14,"disabled",[27,[24,1],["disabled"]],null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[27,[24,2],[]]],null],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-4 w-4 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5l7 7-7 7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["on","is","if","fn"]}',meta:{scope:()=>({on:Na,fn:za,is:Ua})}},Ha);let Wa=Ti({id:"Ta6PpoS8",block:'{"symbols":["item","item","@goToPage","@prevPage","@nextPage","@pager","@itemLabel"],"statements":[[1,1,0,0,"\\n"],[5,[27,[26,1,"BlockHead"],[]],[[27,[24,0],["compact"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","flex flex-col items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["paginatedItems"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"PageItem",[],[["@item","@goToPage","@prevPage","@nextPage"],[[27,[24,2],[]],[27,[24,3],[]],[27,[24,4],[]],[27,[24,5],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-gray-500 text-sm",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,0],["offset"]]],[1,1,0,0,"  "],[1,0,0,0,[27,[24,0],["lastItemOnPage"]]],[1,1,0,0," of "],[1,0,0,0,[27,[24,6],["total_items"]]],[1,1,0,0," "],[1,0,0,0,[27,[24,7],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"      "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex items-center mr-6",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["paginatedItems"]]],null,[["default"],[{"statements":[[1,1,0,0,"            "],[7,"PageItem",[],[["@item","@goToPage","@prevPage","@nextPage"],[[27,[24,1],[]],[27,[24,3],[]],[27,[24,4],[]],[27,[24,5],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","text-gray-500",null],[10],[1,1,0,0,"\\n          Showing "],[1,0,0,0,[27,[24,0],["offset"]]],[1,1,0,0,"  "],[1,0,0,0,[27,[24,0],["lastItemOnPage"]]],[1,1,0,0," of "],[1,0,0,0,[27,[24,6],["total_items"]]],[1,1,0,0," "],[1,0,0,0,[27,[24,7],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"  "]],"hasEval":false,"upvars":["each","if"]}',meta:{scope:()=>({PageItem:Ha})}},($a=class extends Aa{constructor(...e){var t,r,n,s;super(...e),t=this,r="compact",s=this,(n=Fa)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(s):void 0})}get lastItemOnPage(){const e=this.offset+Number(this.args.pager.items_per_page)-1;return e>this.args.pager.total_items?this.args.pager.total_items:e}get offset(){return(this.args.pager.current_page-1)*Number(this.args.pager.items_per_page)+1}get paginatedItems(){let e=this.args.pager.current_page,t=this.compact?1:3,r=this.compact?1:3,n=this.args.pager.total_pages;const s=(e,t)=>{const r=t-e+1;return Array.from({length:r},(t,r)=>e+r)},i=s(1,Math.min(t,n)),a=s(Math.max(n-t+1,t+1),n),l=Math.max(Math.min(e-r,n-t-2*r-1),t+2),o=Math.min(Math.max(e+r,t+2*r+2),a.length>0?a[0]-2:n-1),u=["previous",...i,...l>t+2?["start-ellipsis"]:t+1<n-t?[t+1]:[],...s(l,o),...o<n-t-1?["end-ellipsis"]:n-t>t?[n-t]:[],...a,"next"],c=t=>{switch(t){case"first":return 1;case"previous":return e-1;case"next":return e+1;case"last":return n;default:return null}};return u.map(t=>"number"==typeof t?{type:"page",page:t,selected:t===e,disabled:!1,"aria-current":t===e?"true":void 0}:{type:t,page:c(t),selected:!1,disabled:-1===t.indexOf("ellipsis")&&("next"===t||"last"===t?e>=n:e<=1)})}},Ja=(Va=$a).prototype,Ga="compact",Ya=[Ma],Ka={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.compact||!1}},Xa={},Object.keys(Ka).forEach((function(e){Xa[e]=Ka[e]})),Xa.enumerable=!!Xa.enumerable,Xa.configurable=!!Xa.configurable,("value"in Xa||Xa.initializer)&&(Xa.writable=!0),Xa=Ya.slice().reverse().reduce((function(e,t){return t(Ja,Ga,e)||e}),Xa),qa&&void 0!==Xa.initializer&&(Xa.value=Xa.initializer?Xa.initializer.call(qa):void 0,Xa.initializer=void 0),void 0===Xa.initializer&&(Object.defineProperty(Ja,Ga,Xa),Xa=null),Fa=Xa,Va));var Ja,Ga,Ya,Ka,qa,Xa,Za,Qa;r(0);function el(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let tl=Ti({id:"fqBwZps4",block:'{"symbols":["@placeholder","@applySearchTerms"],"statements":[[1,1,0,0,"\\n    "],[9,"div",false],[23,"class","flex flex-col",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["keyup",[27,[24,0],["submitOnEnter"]]],null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-row",null],[10],[1,1,0,0,"\\n        "],[9,"input",false],[23,"value","",null],[23,"size","30",null],[23,"maxlength","128",null],[23,"class","form-text h-10 border-gray-500 bg-gray-100 border-2 px-2",null],[14,"placeholder",[27,[24,1],[]],null],[14,"value",[27,[24,0],["searchTerms"]],null],[23,"type","text",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["keyup",[27,[24,0],["updateSearchTerms"]]],null],[10],[11],[1,1,0,0,"\\n        "],[9,"button",false],[23,"class","inline-flex items-center px-3 py-2 h-10 border border-transparent text-sm leading-4 font-medium text-white bg-blue-heritage hover:bg-blue-800",null],[23,"aria-label","submit search",null],[23,"type","button",null],[3,0,0,[27,[26,0,"ModifierHead"],[]],["click",[31,691,2,[27,[26,1,"CallHead"],[]],[[27,[24,2],[]],[27,[24,0],["searchTerms"]]],null]],null],[10],[1,1,0,0,"\\n          "],[9,"svg",true],[12,"class","h-5 w-5 text-white",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n            "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",null],[10],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["on","fn"]}',meta:{scope:()=>({on:Na,fn:za})}},(Qa=el((Za=class extends Aa{constructor(...e){super(...e),function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"searchTerms",Qa,this)}updateSearchTerms(e){this.searchTerms=e.target.value}submitOnEnter(e){13===e.which&&this.args.applySearchTerms(this.searchTerms)}}).prototype,"searchTerms",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),el(Za.prototype,"updateSearchTerms",[La],Object.getOwnPropertyDescriptor(Za.prototype,"updateSearchTerms"),Za.prototype),el(Za.prototype,"submitOnEnter",[La],Object.getOwnPropertyDescriptor(Za.prototype,"submitOnEnter"),Za.prototype),Za));class rl extends Aa{}Ti({id:"wfMUfXqL",block:'{"symbols":["@title","@searchInputPlaceholder","@applySearchTerms","@pager","@goToPage","@prevPage","@nextPage","@paginationItemLabel"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex flex-col lg:flex-row bg-white px-4 py-5 border-b border-gray-200 sm:px-6 justify-between items-center",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-col 2xl:flex-row items-center lg:mr-6 mb-4 lg:mb-0 w-full justify-between",null],[10],[1,1,0,0,"\\n        "],[9,"h2",true],[12,"class","text-xl font-bold leading-6 mb-2 2xl:mb-0 mr-4",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,1],[]]],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n        "],[7,"SearchInput",[],[["@placeholder","@applySearchTerms"],[[27,[24,2],[]],[27,[24,3],[]]]],null],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex flex-col 2xl:flex-row items-center flex-shrink-0 items-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","mb-2 2xl:mb-0",null],[10],[1,1,0,0,"\\n          "],[7,"PaginationControls",[],[["@compact","@pager","@goToPage","@prevPage","@nextPage","@itemLabel"],[true,[27,[24,4],[]],[27,[24,5],[]],[27,[24,6],[]],[27,[24,7],[]],[27,[24,8],[]]]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({PaginationControls:Wa,SearchInput:tl})}},rl);class nl extends Aa{}var sl,il;Ti({id:"qE8k8VX7",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","flex items-center justify-center h-24 w-24 mr-2 sm:mr-20 flex-shrink-0",null],[10],[1,1,0,0,"\\n      "],[9,"svg",true],[12,"class","h-16 w-16 text-gray-200",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n        "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",null],[10],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},nl);let al=Ti({id:"oA1wDhbM",block:'{"symbols":["@listItem"],"statements":[[1,1,0,0,"\\n    "],[9,"a",true],[13,"href",[32,["/node/",[27,[24,1],["nid"]]]],null],[12,"class","flex items-center justify-between w-full min-h-12 p-4 border-b border-gray-200 hover:bg-gray-100 cursor-pointer",null],[12,"type","button",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex items-center",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["imageUrl"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"          "],[9,"img",true],[13,"src",[27,[24,0],["imageUrl"]],null],[12,"alt","collection or item image",null],[12,"class","h-24 w-24 mr-2 sm:mr-20 flex-shrink-0",null],[10],[11],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"          "],[7,"MissingAsset",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[9,"div",true],[12,"class","flex flex-col text-align-left w-3/5",null],[10],[1,1,0,0,"\\n          "],[1,0,0,0,[27,[24,1],["title"]]],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","text-gray-600 line-clamp-2",null],[10],[1,1,0,0,"\\n            "],[1,0,0,0,[27,[24,1],["field_description"]]],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[10],[1,1,0,0,"\\n        "],[9,"svg",true],[12,"class","h-6 w-6 text-gray-500",null],[12,"xmlns","http://www.w3.org/2000/svg","http://www.w3.org/2000/xmlns/"],[12,"fill","none",null],[12,"viewBox","0 0 24 24",null],[12,"stroke","currentColor",null],[10],[1,1,0,0,"\\n          "],[9,"path",true],[12,"stroke-linecap","round",null],[12,"stroke-linejoin","round",null],[12,"stroke-width","2",null],[12,"d","M9 5l7 7-7 7",null],[10],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({MissingAsset:nl})}},(il=function(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}((sl=class extends Aa{constructor(e,t){super(...arguments),function(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}(this,"imageUrl",il,this),this.fetchThumbnail()}async fetchThumbnail(){let e=`/jsonapi/media/image?include=thumbnail&filter[media-filter][condition][value]=${this.args.listItem.uuid}&filter[media-filter][condition][operator]=IN&filter[media-filter][condition][path]=field_media_of.id&filter[thumb-filter][condition][value]=Thumbnail Image&filter[thumb-filter][condition][operator]=IN&filter[thumb-filter][condition][path]=field_media_use.name`;try{let t=await fetch(e),r=await t.json();r.data.length>0&&(this.imageUrl=r.included[0].attributes.uri.url)}catch(e){console.log(e)}}}).prototype,"imageUrl",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sl));class ll extends Aa{}Ti({id:"UFCAov7T",block:'{"symbols":["listItem","@list"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","h-auto",null],[10],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,2],[]]],null,[["default"],[{"statements":[[1,1,0,0,"          "],[7,"ListItem",[],[["@listItem"],[[27,[24,1],[]]]],null],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["each"]}',meta:{scope:()=>({ListItem:al})}},ll);class ol extends Aa{}function ul(e){return()=>({enumerable:!0,configurable:!1,get(){return(t=this,Pi.get(t)).lookup({type:"service",name:e});var t}})}function cl(e,t){return"string"==typeof e?ul(e):ul(t)(e,t)}Ti({id:"S+rNk3Cq",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","bg-white shadow",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","flex h-auto p-4 items-center justify-center",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","sk-pulse bg-blue-heritage",null],[10],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},ol);var hl,pl,dl;function ml(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function fl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gl(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let bl=Ti({id:"kVawA2wa",block:'{"symbols":["page","numItems","selectOption","selectOption"],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","text-left ml-0",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","bg-white border border-gray-300 divide-y divide-gray-100 px-10 py-2 outline-none",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex flex-col h-full justify-between my-4 text-gray-500",null],[10],[1,1,0,0,"\\n          "],[9,"h3",true],[12,"class","text-xl mb-2",null],[10],[1,1,0,0,"List Options"],[11],[1,1,0,0,"\\n          "],[9,"div",true],[12,"class","my-2",null],[10],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","sort-by",null],[10],[1,1,0,0,"\\n              Sort by\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","sort-by",null],[23,"class","mb-3 inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","sort-by",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleSortByChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[12,"disabled","",null],[12,"selected","",null],[10],[1,1,0,0,"Sort by"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["sortByOptions"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,4],["value"]],null],[13,"selected",[31,1075,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"sortBy",[27,[24,4],["value"]]],null],null],[10],[1,1,0,0,"Sort by: "],[1,0,0,0,[27,[24,4],["displayValue"]]],[11],[1,1,0,0,"\\n"]],"parameters":[4]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","sort-order",null],[10],[1,1,0,0,"\\n              Sort Order\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","sort-order",null],[23,"class","mb-3 inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","sort-order",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleSortOrderChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[12,"disabled","",null],[12,"selected","",null],[10],[1,1,0,0,"Sort order"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["sortOrderOptions"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,3],["value"]],null],[13,"selected",[31,2013,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"sortOrder",[27,[24,3],["value"]]],null],null],[10],[1,1,0,0,"Sort order: "],[1,0,0,0,[27,[24,3],["displayValue"]]],[11],[1,1,0,0,"\\n"]],"parameters":[3]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","items-per-page",null],[10],[1,1,0,0,"\\n              Items Per Page\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","items-per-page",null],[23,"class","mb-3 inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","items-per-page",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleItemsPerPageChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[12,"disabled","",null],[12,"selected","",null],[10],[1,1,0,0,"Items per page"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["itemsPerPage"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,2],[]],null],[13,"selected",[31,2962,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args"]],"itemsPerPage",[27,[24,2],[]]],null],null],[10],[1,1,0,0,"Items per page: "],[1,0,0,0,[27,[24,2],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[2]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n            "],[9,"label",true],[12,"class","block text-sm font-medium text-gray-700 hidden",null],[12,"for","current-page",null],[10],[1,1,0,0,"\\n              Go to page\\n            "],[11],[1,1,0,0,"\\n            "],[9,"select",false],[23,"id","current-page",null],[23,"class","inline-flex hover:bg-gray-200 justify-center w-full px-4 py-2 text-sm font-medium leading-5 transition duration-150 ease-in-out bg-white border border-gray-300 hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-50 active:text-gray-800",null],[23,"name","current-page",null],[3,0,0,[27,[26,1,"ModifierHead"],[]],["change",[27,[24,0],["handleCurrentPageChange"]]],null],[10],[1,1,0,0,"\\n              "],[9,"option",true],[12,"value","",null],[12,"disabled","",null],[12,"selected","",null],[10],[1,1,0,0,"Go to page"],[11],[1,1,0,0,"\\n"],[5,[27,[26,2,"BlockHead"],[]],[[27,[24,0],["pages"]]],null,[["default"],[{"statements":[[1,1,0,0,"                "],[9,"option",true],[13,"value",[27,[24,1],[]],null],[13,"selected",[31,3856,2,[27,[26,0,"CallHead"],[]],[[27,[24,0],["args","pager"]],"current_page",[27,[24,1],[]]],null],null],[10],[1,1,0,0,"Go to page: "],[1,0,0,0,[27,[24,1],[]]],[11],[1,1,0,0,"\\n"]],"parameters":[1]}]]],[1,1,0,0,"            "],[11],[1,1,0,0,"\\n          "],[11],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["is","on","each"]}',meta:{scope:()=>({on:Na,is:Ua})}},(pl=gl((hl=class extends Aa{constructor(...e){super(...e),ml(this,"results",pl,this),ml(this,"displayMenu",dl,this),fl(this,"sortByOptions",[{value:"&sort_by=search_api_relevance",displayValue:"Relevance"},{value:"&sort_by=title",displayValue:"Title"}]),fl(this,"sortOrderOptions",[{value:"&sort_order=ASC",displayValue:"Ascending"},{value:"&sort_order=DESC",displayValue:"Descending"}]),fl(this,"itemsPerPage",[5,10,25,50])}get pages(){const e=this.results.pager.total_pages;return Array.from({length:e},(e,t)=>1+t)}updateMenuDisplay(){this.displayMenu=!this.displayMenu}handleSortByChange(e){this.args.changeSearchOptions({sortBy:e.target.value})}handleSortOrderChange(e){this.args.changeSearchOptions({sortOrder:e.target.value})}handleCurrentPageChange(e){this.args.changeSearchOptions({currentPage:Number(e.target.value)})}handleItemsPerPageChange(e){this.args.changeSearchOptions({itemsPerPage:Number(e.target.value)})}}).prototype,"results",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dl=gl(hl.prototype,"displayMenu",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gl(hl.prototype,"updateMenuDisplay",[La],Object.getOwnPropertyDescriptor(hl.prototype,"updateMenuDisplay"),hl.prototype),gl(hl.prototype,"handleSortByChange",[La],Object.getOwnPropertyDescriptor(hl.prototype,"handleSortByChange"),hl.prototype),gl(hl.prototype,"handleSortOrderChange",[La],Object.getOwnPropertyDescriptor(hl.prototype,"handleSortOrderChange"),hl.prototype),gl(hl.prototype,"handleCurrentPageChange",[La],Object.getOwnPropertyDescriptor(hl.prototype,"handleCurrentPageChange"),hl.prototype),gl(hl.prototype,"handleItemsPerPageChange",[La],Object.getOwnPropertyDescriptor(hl.prototype,"handleItemsPerPageChange"),hl.prototype),hl));var yl,vl,wl,kl,xl;function Sl(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function El(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}let Cl=Ti({id:"PTdheYrr",block:'{"symbols":[],"statements":[[1,1,0,0,"\\n    "],[9,"div",true],[12,"class","grid sm:gap-4 grid-cols-1 sm:grid-cols-4 container mx-auto",null],[10],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","col-span-1",null],[10],[1,1,0,0,"\\n        "],[7,"SearchOptions",[],[["@pager","@sortBy","@sortOrder","@itemsPerPage","@changeSearchOptions"],[[27,[24,0],["results","pager"]],[27,[24,0],["results","sortBy"]],[27,[24,0],["results","sortOrder"]],[27,[24,0],["results","itemsPerPage"]],[27,[24,0],["changeSearchOptions"]]]],null],[1,1,0,0,"\\n        "],[7,"Facets",[],[[],[]],null],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n      "],[9,"div",true],[12,"class","col-span-3",null],[10],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","bg-white shadow mb-4",null],[10],[1,1,0,0,"\\n          "],[7,"TitleBar",[],[["@title","@pager","@goToPage","@prevPage","@nextPage","@applySearchTerms","@searchInputPlaceholder","@paginationItemLabel"],[[27,[24,0],["title"]],[27,[24,0],["results","pager"]],[27,[24,0],["goToPage"]],[27,[24,0],["prevPage"]],[27,[24,0],["nextPage"]],[27,[24,0],["applySearchTerms"]],"Search collections ...","collections"]],null],[1,1,0,0,"\\n"],[5,[27,[26,0,"BlockHead"],[]],[[27,[24,0],["isLoading"]]],null,[["default","else"],[{"statements":[[1,1,0,0,"            "],[7,"ListSpinner",[],[[],[]],null],[1,1,0,0,"\\n"]],"parameters":[]},{"statements":[[1,1,0,0,"            "],[7,"List",[],[["@list"],[[27,[24,0],["list"]]]],null],[1,1,0,0,"\\n"]],"parameters":[]}]]],[1,1,0,0,"        "],[11],[1,1,0,0,"\\n        "],[9,"div",true],[12,"class","flex bg-white shadow p-4 items-center justify-center",null],[10],[1,1,0,0,"\\n          "],[7,"PaginationControls",[],[["@compact","@pager","@goToPage","@prevPage","@nextPage","@itemLabel"],[false,[27,[24,0],["results","pager"]],[27,[24,0],["goToPage"]],[27,[24,0],["prevPage"]],[27,[24,0],["nextPage"]],"collections"]],null],[1,1,0,0,"\\n        "],[11],[1,1,0,0,"\\n      "],[11],[1,1,0,0,"\\n    "],[11],[1,1,0,0,"\\n  "]],"hasEval":false,"upvars":["if"]}',meta:{scope:()=>({Facets:Pa,TitleBar:rl,List:ll,ListSpinner:ol,PaginationControls:Wa,SearchOptions:bl})}},(vl=El((yl=class extends Aa{constructor(e,t){super(...arguments),Sl(this,"results",vl,this),Sl(this,"title",wl,this),Sl(this,"isLoading",kl,this),Sl(this,"list",xl,this),this.fetchCollections()}async fetchCollections(){this.isLoading=!0,await this.results.fetchData(),this.list=this.results.rows,this.isLoading=!1}goToPage(e){this.results.pager.current_page=e,this.fetchCollections()}prevPage(){this.results.pager.current_page=--this.results.pager.current_page,this.fetchCollections()}nextPage(){this.results.pager.current_page=++this.results.pager.current_page,this.fetchCollections()}changeSearchOptions(e){Object.entries(e).map(([e,t],r)=>{"currentPage"===e?this.results.pager.current_page=1===Number(t)?0:Number(t):this.results[e]=t}),this.fetchCollections()}applySearchTerms(e){this.results.searchTerms=e,this.fetchCollections()}}).prototype,"results",[cl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wl=El(yl.prototype,"title",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"All Collections"}}),kl=El(yl.prototype,"isLoading",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xl=El(yl.prototype,"list",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),El(yl.prototype,"goToPage",[La],Object.getOwnPropertyDescriptor(yl.prototype,"goToPage"),yl.prototype),El(yl.prototype,"prevPage",[La],Object.getOwnPropertyDescriptor(yl.prototype,"prevPage"),yl.prototype),El(yl.prototype,"nextPage",[La],Object.getOwnPropertyDescriptor(yl.prototype,"nextPage"),yl.prototype),El(yl.prototype,"changeSearchOptions",[La],Object.getOwnPropertyDescriptor(yl.prototype,"changeSearchOptions"),yl.prototype),El(yl.prototype,"applySearchTerms",[La],Object.getOwnPropertyDescriptor(yl.prototype,"applySearchTerms"),yl.prototype),yl));var Ol,Al,Ml,Tl,Pl,Nl,_l;function Rl(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ll(e,t,r,n,s){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),s&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(s):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const Bl={collections:{types:["collection_object"]},items:{types:["islandora_object"]},mixed:{types:["collection_object","islandora_object"]}};let Dl=(Al=Ll((Ol=class{constructor(e){var t,r,n;n=[],(r="types")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,Rl(this,"rows",Al,this),Rl(this,"pager",Ml,this),Rl(this,"sortBy",Tl,this),Rl(this,"sortOrder",Pl,this),Rl(this,"itemsPerPage",Nl,this),Rl(this,"searchTerms",_l,this),this.types=Bl[e].types}searchParams(){return(this.searchTerms?this.searchTerms+" AND ":"")+this.types.map(e=>"ss_type:"+e).join(" OR ")+(this.pager.current_page?"&page="+--this.pager.current_page:"")+(this.sortBy?this.sortBy:"")+(this.sortOrder?this.sortOrder:"")+(this.itemsPerPage?"&items_per_page="+this.itemsPerPage:"")}async fetchData(){let e="/search_rest_endpoint?query="+this.searchParams();console.log(e);try{let t=await fetch(e),r=await t.json();this.rows=r.rows,this.pager=r.pager,this.pager.current_page=++this.pager.current_page}catch(e){console.log(e)}}}).prototype,"rows",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ml=Ll(Ol.prototype,"pager",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{current_page:0,total_items:0,total_pages:0,items_per_page:0}}}),Tl=Ll(Ol.prototype,"sortBy",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pl=Ll(Ol.prototype,"sortOrder",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nl=Ll(Ol.prototype,"itemsPerPage",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_l=Ll(Ol.prototype,"searchTerms",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ol);const Il=document.getElementById("collections-list");Il&&function(e,t){if(t instanceof Element)return ya(e,t);const{element:r,args:n,services:i}=t,a=new s(null!=i?i:{});ya(e,{element:r,args:n,owner:a})}(Cl,{element:Il,services:{results:new Dl("collections")}})}]);