!function(e){var t={};function s(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s(s.s=6)}([function(e,t,s){"use strict";(function(e){s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return a}));const n="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`,r="undefined"!=typeof Symbol?Symbol.for:e=>"__GLIMMER_VALIDATOR_SYMBOL_FOR_"+e;function i(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}function a(e){if(null==e)throw new Error("Expected value to be present");return e}}).call(this,s(2))},function(e,t,s){var n=s(3),r=s(4);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var i={insert:"head",singleton:!1};n(r,i);e.exports=r.locals||{}},function(e,t){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(e){"object"==typeof window&&(s=window)}e.exports=s},function(e,t,s){"use strict";var n,r=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),a=[];function l(e){for(var t=-1,s=0;s<a.length;s++)if(a[s].identifier===e){t=s;break}return t}function o(e,t){for(var s={},n=[],r=0;r<e.length;r++){var i=e[r],o=t.base?i[0]+t.base:i[0],u=s[o]||0,c="".concat(o," ").concat(u);s[o]=u+1;var h=l(c),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==h?(a[h].references++,a[h].updater(p)):a.push({identifier:c,updater:g(p,t),references:1}),n.push(c)}return n}function u(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=s.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,s,n){var r=s?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t,s){var n=s.css,r=s.media,i=s.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,m=0;function g(e,t){var s,n,r;if(t.singleton){var i=m++;s=f||(f=u(t)),n=p.bind(null,s,i,!1),r=p.bind(null,s,i,!0)}else s=u(t),n=d.bind(null,s,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=r());var s=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<s.length;n++){var r=l(s[n]);a[r].references--}for(var i=o(e,t),u=0;u<s.length;u++){var c=l(s[u]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}s=i}}}},function(e,t,s){(t=s(5)(!1)).push([e.i,"/* body {\n  margin: 0;\n}\n\n#app {\n  background: #1E293B;\n  min-height: 100vh;\n\n  display: grid;\n  align-items: center;\n  justify-content: center;\n}\n\n#intro {\n  width: 34em;\n}\n\n#intro h1, #intro h3 {\n  font-family: Roboto, 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-style: italic;\n\n  color: #FFFFFF;\n  margin: 0.35em;\n}\n\n#intro img {\n  float: left;\n  width: 6.5em;\n  margin: 0.5em 2em;\n}\n\n#intro a {\n  color: #FFFFFF;\n} */\n",""]),e.exports=t},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s=e[1]||"",n=e[3];if(!n)return s;if(t&&"function"==typeof btoa){var r=(a=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(o," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[s].concat(i).concat([r]).join("\n")}var a,l,o;return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var l=0;l<e.length;l++){var o=[].concat(e[l]);n&&r[o[0]]||(s&&(o[2]?o[2]="".concat(s," and ").concat(o[2]):o[2]=s),t.push(o))}},t}},function(e,t,s){"use strict";s.r(t);const n=Object.freeze([]);var r=function(e,t){if(!e)throw new Error(t||"assertion failure")};let i=0;function a(e){return e._guid=++i}function l(){return Object.create(null)}function o(e){return null!=e}function u(e){return"object"==typeof e&&null!==e}class c{constructor(){this.stack=[],this.current=null}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop(),t=this.stack.length;return this.current=0===t?null:this.stack[t-1],void 0===e?null:e}nth(e){let t=this.stack.length;return t<e?null:this.stack[t-e]}isEmpty(){return 0===this.stack.length}toArray(){return this.stack}}function h(e){let t=e.firstChild;for(;t;){let s=t.nextSibling;e.removeChild(t),t=s}}const{keys:p}=Object;function d(e){for(let t=1;t<arguments.length;t++){let s=arguments[t];if(null===s||"object"!=typeof s)continue;let n=p(s);for(let t=0;t<n.length;t++){let r=n[t];e[r]=s[r]}}return e}function f(e="unreachable"){return new Error(e)}function m(e){throw new Error("Exhausted "+e)}const g="undefined"!=typeof Symbol?Symbol:e=>`__${e}${Math.floor(Math.random()*Date.now())}__`;function b(...e){return[!1,!0,null,void 0,...e]}function y(e){return e%1==0&&e<=536870911&&e>=-536870912}function v(e){return(e|=0)<0?function(e){return-536870913&e}(e):function(e){return~e}(e)}function k(e){return(e|=0)>-536870913?function(e){return~e}(e):function(e){return 536870912|e}(e)}function w(e){if("number"==typeof e)return e;{let t=e.errors[0];throw new Error(`Compile Error: ${t.problem} @ ${t.span.start}..${t.span.end}`)}}function S(e){if("error"===e.result)throw new Error(`Compile Error: ${e.problem} @ ${e.span.start}..${e.span.end}`);return e}[1,2,3].forEach(e=>e),[1,-1].forEach(e=>k(v(e)));var E="function"==typeof WeakSet?WeakSet:class{constructor(){this._map=new WeakMap}add(e){return this._map.set(e,!0),this}delete(e){return this._map.delete(e)}has(e){return this._map.has(e)}};function x(e,t="unexpected unreachable branch"){console.log("unreachable",e),console.trace(`${t} :: ${JSON.stringify(e)} (${e})`)}function C(e){return e<=3}var A,N;!function(e){e[e.s0=4]="s0",e[e.s1=5]="s1"}(A||(A={})),function(e){e[e.t0=6]="t0",e[e.t1=7]="t1"}(N||(N={}));const M=g("INNER_VM"),_=g("DESTROYABLE_STACK"),T=g("STACKS"),L=g("REGISTERS"),R=g("HEAP"),O=g("CONSTANTS"),B=g("ARGS");g("PC");class I{constructor(e,t){this.element=e,this.nextSibling=t}}class D{constructor(e,t,s){this.parentNode=e,this.first=t,this.last=s}parentElement(){return this.parentNode}firstNode(){return this.first}lastNode(){return this.last}}class J{constructor(e,t){this.parentNode=e,this.node=t}parentElement(){return this.parentNode}firstNode(){return this.node}lastNode(){return this.node}}function V(e,t){let s=e.parentElement(),n=e.firstNode(),r=e.lastNode(),i=n;for(;;){let e=i.nextSibling;if(s.insertBefore(i,t),i===r)return e;i=e}}function U(e){let t=e.parentElement(),s=e.firstNode(),n=e.lastNode(),r=s;for(;;){let e=r.nextSibling;if(t.removeChild(r),r===n)return e;r=e}}let j,F,P,H,z,W,$,G,Y=()=>{};function q(e){return K(e)?"":String(e)}function K(e){return null==e||"function"!=typeof e.toString}function X(e){return"object"==typeof e&&null!==e&&"function"==typeof e.toHTML}function Z(e){return"object"==typeof e&&null!==e&&"number"==typeof e.nodeType}function Q(e){return"string"==typeof e}function ee(e,t){let s,n;if(t in e)n=t,s="prop";else{let r=t.toLowerCase();r in e?(s="prop",n=r):(s="attr",n=t)}return"prop"!==s||"style"!==n.toLowerCase()&&!function(e,t){let s=te[e.toUpperCase()];return s&&s[t.toLowerCase()]||!1}(e.tagName,n)||(s="attr"),{normalized:n,type:s}}const te={INPUT:{form:!0,autocorrect:!0,list:!0},SELECT:{form:!0},OPTION:{form:!0},TEXTAREA:{form:!0},LABEL:{form:!0},FIELDSET:{form:!0},LEGEND:{form:!0},OBJECT:{form:!0},BUTTON:{form:!0}};const se=["javascript:","vbscript:"],ne=["A","BODY","LINK","IMG","IFRAME","BASE","FORM"],re=["EMBED"],ie=["href","src","background","action"],ae=["src"];function le(e,t){return-1!==e.indexOf(t)}function oe(e,t){return(null===e||le(ne,e))&&le(ie,t)}function ue(e,t){return null!==e&&(le(re,e)&&le(ae,t))}function ce(e,t){return oe(e,t)||ue(e,t)}let he;if("object"==typeof URL&&null!==URL&&"function"==typeof URL.parse){let e=URL;he=t=>{let s=null;return"string"==typeof t&&(s=e.parse(t).protocol),null===s?":":s}}else if("function"==typeof URL)he=e=>{try{return new URL(e).protocol}catch(e){return":"}};else{let e=document.createElement("a");he=t=>(e.href=t,e.protocol)}function pe(e,t,s){let n=null;if(null==s)return s;if(X(s))return s.toHTML();n=e?e.tagName.toUpperCase():null;let r=q(s);if(oe(n,t)){let e=he(r);if(le(se,e))return"unsafe:"+r}return ue(n,t)?"unsafe:"+r:r}function de(e,t,s,n=!1){let{tagName:r,namespaceURI:i}=e,a={element:e,name:t,namespace:s};if("http://www.w3.org/2000/svg"===i)return fe(r,t,a);let{type:l,normalized:o}=ee(e,t);return"attr"===l?fe(r,o,a):function(e,t,s){if(ce(e,t))return new ye(t,s);if(function(e,t){return("INPUT"===e||"TEXTAREA"===e)&&"value"===t}(e,t))return new ke(t,s);if(function(e,t){return"OPTION"===e&&"selected"===t}(e,t))return new we(t,s);return new be(t,s)}(r,o,a)}function fe(e,t,s){return ce(e,t)?new ve(s):new ge(s)}class me{constructor(e){this.attribute=e}}class ge extends me{set(e,t,s){let n=Se(t);if(null!==n){let{name:t,namespace:s}=this.attribute;e.__setAttribute(t,n,s)}}update(e,t){let s=Se(e),{element:n,name:r}=this.attribute;null===s?n.removeAttribute(r):n.setAttribute(r,s)}}class be extends me{constructor(e,t){super(t),this.normalizedName=e}set(e,t,s){null!=t&&(this.value=t,e.__setProperty(this.normalizedName,t))}update(e,t){let{element:s}=this.attribute;this.value!==e&&(s[this.normalizedName]=this.value=e,null==e&&this.removeAttribute())}removeAttribute(){let{element:e,namespace:t}=this.attribute;t?e.removeAttributeNS(t,this.normalizedName):e.removeAttribute(this.normalizedName)}}class ye extends be{set(e,t,s){let{element:n,name:r}=this.attribute,i=pe(n,r,t);super.set(e,i,s)}update(e,t){let{element:s,name:n}=this.attribute,r=pe(s,n,e);super.update(r,t)}}class ve extends ge{set(e,t,s){let{element:n,name:r}=this.attribute,i=pe(n,r,t);super.set(e,i,s)}update(e,t){let{element:s,name:n}=this.attribute,r=pe(s,n,e);super.update(r,t)}}class ke extends be{set(e,t){e.__setProperty("value",q(t))}update(e){let t=this.attribute.element,s=t.value,n=q(e);s!==n&&(t.value=n)}}class we extends be{set(e,t){null!=t&&!1!==t&&e.__setProperty("selected",!0)}update(e){let t=this.attribute.element;t.selected=!!e}}function Se(e){return!1===e||null==e||void 0===e.toString?null:!0===e?"":"function"==typeof e?null:String(e)}let Ee=new WeakMap;function xe(e,t){return null===e?t:Array.isArray(e)?(e.push(t),e):[e,t]}function Ce(e,t){if(Array.isArray(e))for(let s=0;s<e.length;s++)t(e[s]);else null!==e&&t(e)}function Ae(e,t,s){if(Array.isArray(e)&&e.length>1){let s=e.indexOf(t);return e.splice(s,1),e}return null}function Ne(e){let t=Ee.get(e);return void 0===t&&(t={parents:null,children:null,eagerDestructors:null,destructors:null,state:0},Ee.set(e,t)),t}function Me(e,t){let s=Ne(e),n=Ne(t);return s.children=xe(s.children,t),n.parents=xe(n.parents,e),t}function _e(e,t,s=!1){let n=Ne(e),r=!0===s?"eagerDestructors":"destructors";return n[r]=xe(n[r],t),t}function Te(e){let t=Ne(e);if(t.state>=1)return;let{parents:s,children:n,eagerDestructors:r,destructors:i}=t;t.state=1,Ce(n,Te),Ce(r,t=>t(e)),Ce(i,t=>j(e,t)),F(()=>{Ce(s,t=>function(e,t){let s=Ne(t);0===s.state&&(s.children=Ae(s.children,e))}(e,t)),t.state=2})}var Le;class Re{constructor(e){this.node=e}firstNode(){return this.node}}class Oe{constructor(e){this.node=e}lastNode(){return this.node}}const Be=g("CURSOR_STACK");class Ie{constructor(e,t,s){this.constructing=null,this.operations=null,this[Le]=new c,this.modifierStack=new c,this.blockStack=new c,this.pushElement(t,s),this.env=e,this.dom=e.getAppendOperations(),this.updateOperations=e.getDOM()}static forInitialRender(e,t){return new this(e,t.element,t.nextSibling).initialize()}static resume(e,t){let s=new this(e,t.parentElement(),t.reset(e)).initialize();return s.pushLiveBlock(t),s}initialize(){return this.pushSimpleBlock(),this}debugBlocks(){return this.blockStack.toArray()}get element(){return this[Be].current.element}get nextSibling(){return this[Be].current.nextSibling}get hasBlocks(){return this.blockStack.size>0}block(){return this.blockStack.current}popElement(){this[Be].pop(),this[Be].current}pushSimpleBlock(){return this.pushLiveBlock(new De(this.element))}pushUpdatableBlock(){return this.pushLiveBlock(new Ve(this.element))}pushBlockList(e){return this.pushLiveBlock(new Ue(this.element,e))}pushLiveBlock(e,t=!1){let s=this.blockStack.current;return null!==s&&(t||s.didAppendBounds(e)),this.__openBlock(),this.blockStack.push(e),e}popBlock(){return this.block().finalize(this),this.__closeBlock(),this.blockStack.pop()}__openBlock(){}__closeBlock(){}openElement(e){let t=this.__openElement(e);return this.constructing=t,t}__openElement(e){return this.dom.createElement(e,this.element)}flushElement(e){let t=this.element,s=this.constructing;this.__flushElement(t,s),this.constructing=null,this.operations=null,this.pushModifiers(e),this.pushElement(s,null),this.didOpenElement(s)}__flushElement(e,t){this.dom.insertBefore(e,t,this.nextSibling)}closeElement(){return this.willCloseElement(),this.popElement(),this.popModifiers()}pushRemoteElement(e,t,s){return this.__pushRemoteElement(e,t,s)}__pushRemoteElement(e,t,s){if(this.pushElement(e,s),void 0===s)for(;e.lastChild;)e.removeChild(e.lastChild);let n=new Je(e);return this.pushLiveBlock(n,!0)}popRemoteElement(){this.popBlock(),this.popElement()}pushElement(e,t=null){this[Be].push(new I(e,t))}pushModifiers(e){this.modifierStack.push(e)}popModifiers(){return this.modifierStack.pop()}didAppendBounds(e){return this.block().didAppendBounds(e),e}didAppendNode(e){return this.block().didAppendNode(e),e}didOpenElement(e){return this.block().openElement(e),e}willCloseElement(){this.block().closeElement()}appendText(e){return this.didAppendNode(this.__appendText(e))}__appendText(e){let{dom:t,element:s,nextSibling:n}=this,r=t.createTextNode(e);return t.insertBefore(s,r,n),r}__appendNode(e){return this.dom.insertBefore(this.element,e,this.nextSibling),e}__appendFragment(e){let t=e.firstChild;if(t){let s=new D(this.element,t,e.lastChild);return this.dom.insertBefore(this.element,e,this.nextSibling),s}return new J(this.element,this.__appendComment(""))}__appendHTML(e){return this.dom.insertHTMLBefore(this.element,this.nextSibling,e)}appendDynamicHTML(e){let t=this.trustedContent(e);this.didAppendBounds(t)}appendDynamicText(e){let t=this.untrustedContent(e);return this.didAppendNode(t),t}appendDynamicFragment(e){let t=this.__appendFragment(e);this.didAppendBounds(t)}appendDynamicNode(e){let t=this.__appendNode(e),s=new J(this.element,t);this.didAppendBounds(s)}trustedContent(e){return this.__appendHTML(e)}untrustedContent(e){return this.__appendText(e)}appendComment(e){return this.didAppendNode(this.__appendComment(e))}__appendComment(e){let{dom:t,element:s,nextSibling:n}=this,r=t.createComment(e);return t.insertBefore(s,r,n),r}__setAttribute(e,t,s){this.dom.setAttribute(this.constructing,e,t,s)}__setProperty(e,t){this.constructing[e]=t}setStaticAttribute(e,t,s){this.__setAttribute(e,t,s)}setDynamicAttribute(e,t,s,n){let r=de(this.constructing,e,n,s);return r.set(this,t,this.env),r}}Le=Be;class De{constructor(e){this.parent=e,this.first=null,this.last=null,this.nesting=0}parentElement(){return this.parent}firstNode(){return this.first.firstNode()}lastNode(){return this.last.lastNode()}openElement(e){this.didAppendNode(e),this.nesting++}closeElement(){this.nesting--}didAppendNode(e){0===this.nesting&&(this.first||(this.first=new Re(e)),this.last=new Oe(e))}didAppendBounds(e){0===this.nesting&&(this.first||(this.first=e),this.last=e)}finalize(e){null===this.first&&e.appendComment("")}}class Je extends De{constructor(e){super(e),_e(this,()=>{this.parentElement()===this.firstNode().parentNode&&U(this)})}}class Ve extends De{reset(){Te(this);let e=U(this);return this.first=null,this.last=null,this.nesting=0,e}}class Ue{constructor(e,t){this.parent=e,this.boundList=t,this.parent=e,this.boundList=t}parentElement(){return this.parent}firstNode(){return this.boundList[0].firstNode()}lastNode(){let e=this.boundList;return e[e.length-1].lastNode()}openElement(e){}closeElement(){}didAppendNode(e){}didAppendBounds(e){}finalize(e){}}function je(e,t){return Ie.forInitialRender(e,t)}var Fe=s(0);let Pe=1;const He=Object(Fe.b)("TAG_COMPUTE");function ze(e){return e[He]()}function We(e,t){return t>=e[He]()}const $e=Object(Fe.b)("TAG_TYPE");class Ge{constructor(e){this.revision=1,this.lastChecked=1,this.lastValue=1,this.isUpdating=!1,this.subtag=null,this.subtagBufferCache=null,this[$e]=e}static combine(e){switch(e.length){case 0:return Xe;case 1:return e[0];default:let t=new Ge(2);return t.subtag=e,t}}[He](){let{lastChecked:e}=this;if(!0===this.isUpdating)this.lastChecked=++Pe;else if(e!==Pe){this.isUpdating=!0,this.lastChecked=Pe;try{let{subtag:e,revision:t}=this;if(null!==e)if(Array.isArray(e))for(let s=0;s<e.length;s++){let n=e[s][He]();t=Math.max(n,t)}else{let s=e[He]();s===this.subtagBufferCache?t=Math.max(t,this.lastValue):(this.subtagBufferCache=null,t=Math.max(t,s))}this.lastValue=t}finally{this.isUpdating=!1}}return this.lastValue}static updateTag(e,t){let s=e,n=t;n===Xe?s.subtag=null:(s.subtagBufferCache=n[He](),s.subtag=n)}static dirtyTag(e){e.revision=++Pe,Y()}}const Ye=Ge.dirtyTag,qe=Ge.updateTag;function Ke(){return new Ge(1)}const Xe=new Ge(3);new class{[He](){return NaN}};new class{[He](){return Pe}};const Ze=Ge.combine;let Qe=Ke(),et=Ke(),tt=Ke();ze(Qe),Ye(Qe),ze(Qe),qe(Qe,Ze([et,tt])),ze(Qe),Ye(et),ze(Qe),Ye(tt),ze(Qe),qe(Qe,tt),ze(Qe),Ye(tt),ze(Qe);new WeakMap;class st{constructor(){this.tags=new Set,this.last=null}add(e){e!==Xe&&(this.tags.add(e),this.last=e)}combine(){let{tags:e}=this;if(0===e.size)return Xe;if(1===e.size)return this.last;{let t=[];return e.forEach(e=>t.push(e)),Ze(t)}}}let nt=null;const rt=[];function it(e){rt.push(nt),nt=new st}function at(){let e=nt;return nt=rt.pop()||null,Object(Fe.d)(e).combine()}function lt(e){null!==nt&&nt.add(e)}Object(Fe.b)("CACHE_KEY"),Object(Fe.b)("FN"),Object(Fe.b)("LAST_VALUE"),Object(Fe.b)("TAG"),Object(Fe.b)("SNAPSHOT"),Object(Fe.b)("DEBUG_LABEL");function ot(e,t){let s;it();try{e()}finally{s=at()}return s}function ut(e){rt.push(nt),nt=null;try{return e()}finally{nt=rt.pop()||null}}const ct=Object(Fe.c)("GLIMMER_VALIDATOR_REGISTRATION"),ht=Object(Fe.a)();if(!0===ht[ct])throw new Error("The `@glimmer/validator` library has been included twice in this application. It could be different versions of the package, or the same version included twice by mistake. `@glimmer/validator` depends on having a single copy of the package in use at any time in an application, even if they are the same version. You must dedupe your build to remove the duplicate packages in order to prevent this error.");ht[ct]=!0;const pt=g("REFERENCE");class dt{constructor(e){this.tag=null,this.lastRevision=1,this.children=null,this.compute=null,this.update=null,this[pt]=e}}function ft(e){let t=new dt(2);return t.tag=Xe,t.lastValue=e,t}const mt=ft(void 0),gt=ft(null),bt=ft(!0),yt=ft(!1);function vt(e,t){let s=new dt(0);return s.lastValue=e,s.tag=Xe,s}function kt(e,t=null,s="unknown"){let n=new dt(1);return n.compute=e,n.update=t,n}function wt(e){return e.tag===Xe}function St(e){let t=e,{tag:s}=t;if(s===Xe)return t.lastValue;let n,{lastRevision:r}=t;if(null!==s&&We(s,r))n=t.lastValue;else{let{compute:e}=t;s=t.tag=ot(()=>{n=t.lastValue=e()}),t.lastRevision=ze(s)}return lt(s),n}function Et(e,t){(0,e.update)(t)}function xt(e,t){let s,n=e,r=n[pt],i=n.children;if(null===i)i=n.children=new Map;else if(s=i.get(t),void 0!==s)return s;if(2===r){let e=St(n);s=o(e)?function(e,t){let s=new dt(2);return s.lastValue=e,s.tag=Xe,s}(e[t]):mt}else s=kt(()=>{let e=St(n);if(o(e))return z(e,t)},e=>{let s=St(n);if(o(s))return W(s,t,e)});return i.set(t,s),s}const Ct={},At=(e,t)=>t,Nt=(e,t)=>String(t),Mt=e=>null===e?Ct:e;function _t(e){switch(e){case"@key":return Rt(At);case"@index":return Rt(Nt);case"@identity":return Rt(Mt);default:return t=e,Rt(e=>$(e,t))}var t}class Tt{get weakMap(){return void 0===this._weakMap&&(this._weakMap=new WeakMap),this._weakMap}get primitiveMap(){return void 0===this._primitiveMap&&(this._primitiveMap=new Map),this._primitiveMap}set(e,t){u(e)||"function"==typeof e?this.weakMap.set(e,t):this.primitiveMap.set(e,t)}get(e){return u(e)||"function"==typeof e?this.weakMap.get(e):this.primitiveMap.get(e)}}const Lt=new Tt;function Rt(e){let t=new Tt;return(s,n)=>{let r=e(s,n),i=t.get(r)||0;return t.set(r,i+1),0===i?r:function(e,t){let s=Lt.get(e);void 0===s&&(s=[],Lt.set(e,s));let n=s[t];return void 0===n&&(n={value:e,count:t},s[t]=n),n}(r,i)}}function Ot(e){let t=e,s=new Ge(0);return kt(()=>(lt(s),t),e=>{t!==e&&(t=e,Ye(s))})}class Bt{constructor(e,t){this.inner=e,this.keyFor=t}isEmpty(){return this.inner.isEmpty()}next(){let e=this.inner.next();return null!==e&&(e.key=this.keyFor(e.value,e.memo)),e}}class It{constructor(e,t){this.iterator=e,this.keyFor=t,this.pos=0,0===e.length?this.current={kind:"empty"}:this.current={kind:"first",value:e[this.pos]}}isEmpty(){return"empty"===this.current.kind}next(){let e,t=this.current;if("first"===t.kind)this.current={kind:"progress"},e=t.value;else{if(this.pos>=this.iterator.length-1)return null;e=this.iterator[++this.pos]}let{keyFor:s}=this;return{key:s(e,this.pos),value:e,memo:this.pos}}}class Dt{constructor(e){this.bucket=e?d({},e):{}}get(e){return this.bucket[e]}set(e,t){return this.bucket[e]=t}child(){return new Dt(this.bucket)}}class Jt{constructor(e,t,s,n){this.slots=e,this.callerScope=t,this.evalScope=s,this.partialMap=n}static root(e,t=0){let s=new Array(t+1);for(let e=0;e<=t;e++)s[e]=mt;return new Jt(s,null,null,null).init({self:e})}static sized(e=0){let t=new Array(e+1);for(let s=0;s<=e;s++)t[s]=mt;return new Jt(t,null,null,null)}init({self:e}){return this.slots[0]=e,this}getSelf(){return this.get(0)}getSymbol(e){return this.get(e)}getBlock(e){let t=this.get(e);return t===mt?null:t}getEvalScope(){return this.evalScope}getPartialMap(){return this.partialMap}bind(e,t){this.set(e,t)}bindSelf(e){this.set(0,e)}bindSymbol(e,t){this.set(e,t)}bindBlock(e,t){this.set(e,t)}bindEvalScope(e){this.evalScope=e}bindPartialMap(e){this.partialMap=e}bindCallerScope(e){this.callerScope=e}getCallerScope(){return this.callerScope}child(){return new Jt(this.slots.slice(),this.callerScope,this.evalScope,this.partialMap)}get(e){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);return this.slots[e]}set(e,t){if(e>=this.slots.length)throw new RangeError(`BUG: cannot get $${e} from scope; length=${this.slots.length}`);this.slots[e]=t}}const Vt=new class{constructor(){this.evaluateOpcode=function(e){let t=new Array(e);for(let s=0;s<e;s++)t[s]=null;return t}(104).slice()}add(e,t,s="syscall"){this.evaluateOpcode[e]={syscall:"machine"!==s,evaluate:t}}debugBefore(e,t){return{sp:void 0,pc:e.fetchValue(0),name:void 0,params:void 0,type:t.type,isMachine:t.isMachine,size:t.size,state:void 0}}debugAfter(e,t){let{sp:s,type:n,isMachine:r,pc:i}=t}evaluate(e,t,s){let n=this.evaluateOpcode[s];n.syscall?n.evaluate(e,t):n.evaluate(e[M],t)}};class Ut extends class{constructor(){a(this)}}{}function jt(e){return"function"!=typeof e.toString?"":String(e)}function Ft(e){return e===mt}function Pt(e){return 0|(e.dynamicLayout?1:0)|(e.dynamicTag?2:0)|(e.prepareArgs?4:0)|(e.createArgs?8:0)|(e.attributeHook?16:0)|(e.elementHook?32:0)|(e.dynamicScope?64:0)|(e.createCaller?128:0)|(e.updateHook?256:0)|(e.createInstance?512:0)|(e.wrapped?1024:0)|(e.willDestroy?2048:0)}function Ht(e,t,s){return!!(t&s)}function zt(e,t){return!!(e&t)}Vt.add(16,(e,{op1:t})=>{let s=e.stack,n=e.runtime.resolver.resolve(t)(s.popJs(),e);e.loadValue(8,n)}),Vt.add(21,(e,{op1:t})=>{let s=e.referenceForSymbol(t);e.stack.pushJs(s)}),Vt.add(19,(e,{op1:t})=>{let s=e.stack.pop();e.scope().bindSymbol(t,s)}),Vt.add(20,(e,{op1:t})=>{let s=e.stack.popJs(),n=e.stack.popJs(),r=e.stack.popJs(),i=r?[s,n,r]:null;e.scope().bindBlock(t,i)}),Vt.add(102,(e,{op1:t})=>{let s=e[O].getValue(t),n=e.scope().getPartialMap()[s];void 0===n&&(n=xt(e.getSelf(),s)),e.stack.pushJs(n)}),Vt.add(36,(e,{op1:t})=>{e.pushRootScope(t)}),Vt.add(22,(e,{op1:t})=>{let s=e[O].getValue(t),n=e.stack.popJs();e.stack.pushJs(xt(n,s))}),Vt.add(23,(e,{op1:t})=>{let{stack:s}=e,n=e.scope().getBlock(t);null===n?s.pushNull():s.pushJs(n)}),Vt.add(24,e=>{let{stack:t}=e,s=t.popJs();if(s&&!Ft(s)){let[e,n,r]=s;t.pushJs(r),t.pushJs(n),"number"==typeof e?t.pushSmallInt(e):t.pushJs(e)}else t.pushNull(),t.pushNull(),t.pushNull()}),Vt.add(25,e=>{let{stack:t}=e,s=t.pop();s&&!Ft(s)?t.pushJs(bt):t.pushJs(yt)}),Vt.add(26,e=>{e.stack.pop(),e.stack.popJs();let t=e.stack.popJs(),s=t&&t.parameters.length;e.stack.pushJs(s?bt:yt)}),Vt.add(27,(e,{op1:t})=>{let s=new Array(t);for(let n=t;n>0;n--){s[n-1]=e.stack.pop()}var n;e.stack.pushJs((n=s,kt(()=>{let e=new Array;for(let t=0;t<n.length;t++){let s=St(n[t]);null!=s&&(e[t]=jt(s))}return e.length>0?e.join(""):null})))});const Wt=g("INNER"),$t=g("ARGS"),Gt=new E;function Yt(e){return Gt.has(e)}class qt{constructor(e,t){Gt.add(this),this[Wt]=e,this[$t]=t}}function Kt(e,t){let s=e;for(t.realloc(function e(t){let s=t[Wt],n=t[$t],r=n?n.positional.length:0;return Yt(s)?r+e(s):r}(s));;){let{[$t]:e,[Wt]:n}=s;if(e&&(t.positional.prepend(e.positional),t.named.merge(e.named)),!Yt(n))return n;s=n}}function Xt(e,t,s){return e.lookupComponent(t,s)}const Zt={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};function Qt(e,t,s,n){let r,i;return kt(()=>{let a=St(e);if(a===r)return i;let l=null;return Yt(a)?l=a:"string"==typeof a&&a&&(l=Xt(t,a,s)),l=function(e,t){return!t&&Yt(e)?e:e?new qt(e,t):null}(l,n),r=a,i=l,l})}Vt.add(38,e=>e.pushChildScope()),Vt.add(39,e=>e.popScope()),Vt.add(58,e=>e.pushDynamicScope()),Vt.add(59,e=>e.popDynamicScope()),Vt.add(28,(e,{op1:t})=>{e.stack.pushJs(e[O].getValue(t))}),Vt.add(29,(e,{op1:t})=>{let s=e.stack;if(t>3){let n=e[O].getValue(t);s.pushJs(n)}else s.pushRaw(t)}),Vt.add(30,e=>{let t,s=e.stack,n=s.pop();t=void 0===n?mt:null===n?gt:!0===n?bt:!1===n?yt:ft(n),s.pushJs(t)}),Vt.add(32,(e,{op1:t,op2:s})=>{let n=e.fetchValue(t)-s;e.stack.dup(n)}),Vt.add(33,(e,{op1:t})=>{e.stack.pop(t)}),Vt.add(34,(e,{op1:t})=>{e.load(t)}),Vt.add(35,(e,{op1:t})=>{e.fetch(t)}),Vt.add(57,(e,{op1:t})=>{let s=e[O].getArray(t);e.bindDynamicScope(s)}),Vt.add(68,(e,{op1:t})=>{e.enter(t)}),Vt.add(69,e=>{e.exit()}),Vt.add(62,(e,{op1:t})=>{e.stack.pushJs(e[O].getSerializable(t))}),Vt.add(61,e=>{e.stack.pushJs(e.scope())}),Vt.add(60,e=>{let t=e.stack,s=t.pop();s?t.pushSmallInt(e.compile(s)):t.pushNull()}),Vt.add(63,e=>{let{stack:t}=e,s=t.pop(),n=t.popJs(),r=t.popJs(),i=t.pop();if(null===r)return e.pushFrame(),void e.pushScope(n);let a=n;{let e=r.parameters,t=e.length;if(t>0){a=a.child();for(let s=0;s<t;s++)a.bindSymbol(e[s],i.at(s))}}e.pushFrame(),e.pushScope(a),e.call(s)}),Vt.add(64,(e,{op1:t})=>{let s=e.stack.popJs(),n=Boolean(St(s));wt(s)?!0===n&&e.goto(t):(!0===n&&e.goto(t),e.updateWith(new es(s)))}),Vt.add(65,(e,{op1:t})=>{let s=e.stack.popJs(),n=Boolean(St(s));wt(s)?!1===n&&e.goto(t):(!1===n&&e.goto(t),e.updateWith(new es(s)))}),Vt.add(66,(e,{op1:t,op2:s})=>{e.stack.peekSmallInt()===s&&e.goto(t)}),Vt.add(67,e=>{let t=e.stack.peekJs();!1===wt(t)&&e.updateWith(new es(t))}),Vt.add(70,e=>{let{stack:t}=e,s=t.popJs();t.pushJs(kt(()=>H(St(s))))});class es extends Ut{constructor(e){super(),this.ref=e,this.type="assert",this.last=St(e)}evaluate(e){let{last:t,ref:s}=this;t!==St(s)&&e.throw()}}class ts extends Ut{constructor(e,t){super(),this.ref=e,this.filter=t,this.type="assert-filter",this.last=t(St(e))}evaluate(e){let{last:t,ref:s,filter:n}=this;t!==n(St(s))&&e.throw()}}class ss extends Ut{constructor(){super(...arguments),this.type="jump-if-not-modified",this.tag=Xe,this.lastRevision=1}finalize(e,t){this.target=t,this.didModify(e)}evaluate(e){let{tag:t,target:s,lastRevision:n}=this;!e.alwaysRevalidate&&We(t,n)&&(lt(t),e.goto(s))}didModify(e){this.tag=e,this.lastRevision=ze(this.tag),lt(e)}}class ns extends Ut{constructor(e){super(),this.debugLabel=e,this.type="begin-track-frame"}evaluate(){it(this.debugLabel)}}class rs extends Ut{constructor(e){super(),this.target=e,this.type="end-track-frame"}evaluate(){let e=at();this.target.didModify(e)}}Vt.add(40,(e,{op1:t})=>{e.elements().appendText(e[O].getValue(t))}),Vt.add(41,(e,{op1:t})=>{e.elements().appendComment(e[O].getValue(t))}),Vt.add(47,(e,{op1:t})=>{e.elements().openElement(e[O].getValue(t))}),Vt.add(48,e=>{let t=St(e.stack.popJs());e.elements().openElement(t)}),Vt.add(49,e=>{let t=e.stack.popJs(),s=e.stack.popJs(),n=e.stack.popJs(),r=St(t),i=St(s),a=St(n);wt(t)||e.updateWith(new es(t)),void 0===i||wt(s)||e.updateWith(new es(s));let l=e.elements().pushRemoteElement(r,a,i);l&&e.associateDestroyable(l)}),Vt.add(55,e=>{e.elements().popRemoteElement()}),Vt.add(53,e=>{let t=e.fetchValue(6),s=null;t&&(s=t.flush(e),e.loadValue(6,null)),e.elements().flushElement(s)}),Vt.add(54,e=>{let t=e.elements().closeElement();t&&t.forEach(([t,s])=>{e.env.scheduleInstallModifier(s,t);let n=t.getDestroyable(s);n&&e.associateDestroyable(n)})}),Vt.add(56,(e,{op1:t})=>{let{manager:s,state:n}=e.runtime.resolver.resolve(t),r=e.stack.popJs(),{constructing:i,updateOperations:a}=e.elements(),l=e.dynamicScope(),o=s.create(i,n,r,l,a);e.fetchValue(6).addModifier(s,o);let u=s.getTag(o);null!==u&&(lt(u),e.updateWith(new is(u,s,o)))});class is extends Ut{constructor(e,t,s){super(),this.tag=e,this.manager=t,this.modifier=s,this.type="update-modifier",this.lastUpdated=ze(e)}evaluate(e){let{manager:t,modifier:s,tag:n,lastUpdated:r}=this;lt(n),We(n,r)||(e.env.scheduleUpdateModifier(s,t),this.lastUpdated=ze(n))}}Vt.add(50,(e,{op1:t,op2:s,op3:n})=>{let r=e[O].getValue(t),i=e[O].getValue(s),a=n?e[O].getValue(n):null;e.elements().setStaticAttribute(r,i,a)}),Vt.add(51,(e,{op1:t,op2:s,op3:n})=>{let r=e[O].getValue(t),i=e.stack.popJs(),a=St(i),l=n?e[O].getValue(n):null,o=e.elements().setDynamicAttribute(r,a,!!s,l);wt(i)||e.updateWith(new as(i,o))});class as extends Ut{constructor(e,t){super(),this.reference=e,this.attribute=t,this.type="patch-element",this.lastValue=St(e)}evaluate(e){let{attribute:t,reference:s,lastValue:n}=this,r=St(s);r!==n&&(t.update(r,e.env),this.lastValue=r)}}const ls=g("COMPONENT_INSTANCE");Vt.add(76,(e,{op1:t})=>{let s=e.stack,n=s.popJs(),r=s.popJs(),i=e[O].getValue(t),a=e.runtime.resolver;e.loadValue(8,Qt(n,a,i,r))}),Vt.add(77,(e,{op1:t})=>{let s=e.runtime.resolver.resolve(t),{manager:n}=s,r=Pt(n.getCapabilities(s.state)),i={[ls]:!0,definition:s,manager:n,capabilities:r,state:null,handle:null,table:null,lookup:null};e.stack.pushJs(i)}),Vt.add(80,(e,{op1:t})=>{let s,n=e.stack,r=St(n.popJs()),i=e[O].getValue(t);if(e.loadValue(7,null),"string"==typeof r){s=Xt(e.runtime.resolver,r,i)}else s=r;n.pushJs(s)}),Vt.add(81,e=>{let t=e.stack,s=t.popJs(),n=St(s);let r=n;e.loadValue(7,null),t.pushJs(r)}),Vt.add(78,e=>{let t,s,{stack:n}=e,r=n.pop();Yt(r)?s=t=null:(s=r.manager,t=Pt(s.getCapabilities(r.state))),n.pushJs({definition:r,capabilities:t,manager:s,state:null,handle:null,table:null})}),Vt.add(79,e=>{let t,s=e.stack,n=St(s.popJs());if(!Yt(n))throw f();t=n,s.pushJs(t)}),Vt.add(82,(e,{op1:t,op2:s,op3:r})=>{let i=e.stack,a=e[O].getArray(t),l=r>>4,o=8&r,u=7&r?e[O].getArray(s):n;e[B].setup(i,a,u,l,!!o),i.pushJs(e[B])}),Vt.add(83,e=>{let{stack:t}=e;t.pushJs(e[B].empty(t))}),Vt.add(86,e=>{let t=e.stack,s=t.popJs().capture();t.pushJs(s)}),Vt.add(85,(e,{op1:t})=>{let s=e.stack,n=e.fetchValue(t),r=s.popJs(),{definition:i}=n;Yt(i)&&(i=function(e,t,s){let n=e.definition=Kt(t,s),{manager:r,state:i}=n;return e.manager=r,e.capabilities=Pt(r.getCapabilities(i)),n}(n,i,r));let{manager:a,state:l}=i;if(!Ht(0,n.capabilities,4))return void s.pushJs(r);let o=r.blocks.values,u=r.blocks.names,c=a.prepareArgs(l,r);if(c){r.clear();for(let e=0;e<o.length;e++){let t=o[e];"number"==typeof t?s.pushSmallInt(t):s.pushJs(t)}let{positional:e,named:t}=c,n=e.length;for(let t=0;t<n;t++)s.pushJs(e[t]);let i=Object.keys(t);for(let e=0;e<i.length;e++)s.pushJs(t[i[e]]);r.setup(s,i,u,n,!1)}s.pushJs(r)}),Vt.add(87,(e,{op1:t,op2:s})=>{let n=e.fetchValue(s),{definition:r,manager:i}=n,a=n.capabilities=Pt(i.getCapabilities(r.state));if(!Ht(0,a,512))return;let l=null;Ht(0,a,64)&&(l=e.dynamicScope());let o=1&t,u=null;Ht(0,a,8)&&(u=e.stack.peekJs());let c=null;Ht(0,a,128)&&(c=e.getSelf());let h=i.create(e.env,r.state,u,l,c,!!o);n.state=h,Ht(0,a,256)&&e.updateWith(new ps(h,i,l))}),Vt.add(88,(e,{op1:t})=>{let{manager:s,state:n,capabilities:r}=e.fetchValue(t),i=s.getDestroyable(n);i&&e.associateDestroyable(i)}),Vt.add(97,(e,{op1:t})=>{let s;e.beginCacheGroup(s),e.elements().pushSimpleBlock()}),Vt.add(89,e=>{e.loadValue(6,new os)}),Vt.add(52,(e,{op1:t,op2:s,op3:n})=>{let r=e[O].getValue(t),i=e.stack.popJs(),a=n?e[O].getValue(n):null;e.fetchValue(6).setAttribute(r,i,!!s,a)}),Vt.add(105,(e,{op1:t,op2:s,op3:n})=>{let r=e[O].getValue(t),i=e[O].getValue(s),a=n?e[O].getValue(n):null;e.fetchValue(6).setStaticAttribute(r,i,a)});class os{constructor(){this.attributes=l(),this.classes=[],this.modifiers=[]}setAttribute(e,t,s,n){let r={value:t,namespace:n,trusting:s};"class"===e&&this.classes.push(t),this.attributes[e]=r}setStaticAttribute(e,t,s){let n={value:t,namespace:s};"class"===e&&this.classes.push(t),this.attributes[e]=n}addModifier(e,t){this.modifiers.push([e,t])}flush(e){let t,s=this.attributes;for(let n in this.attributes){if("type"===n){t=s[n];continue}let r=this.attributes[n];"class"===n?cs(e,"class",us(this.classes),r.namespace,r.trusting):cs(e,n,r.value,r.namespace,r.trusting)}return void 0!==t&&cs(e,"type",t.value,t.namespace,t.trusting),this.modifiers}}function us(e){return 0===e.length?"":1===e.length?e[0]:function(e){for(let t=0;t<e.length;t++)if("string"!=typeof e[t])return!1;return!0}(e)?e.join(" "):(t=e,kt(()=>{let e=[];for(let s=0;s<t.length;s++){let n=t[s],r=q("string"==typeof n?n:St(t[s]));r&&e.push(r)}return 0===e.length?null:e.join(" ")}));var t}function cs(e,t,s,n,r=!1){if("string"==typeof s)e.elements().setStaticAttribute(t,s,n);else{let i=e.elements().setDynamicAttribute(t,St(s),r,n);wt(s)||e.updateWith(new as(s,i))}}function hs(e,t,s,n,r){let i=s.table.symbols.indexOf(e),a=n.get(t);-1!==i&&r.scope().bindBlock(i+1,a),s.lookup&&(s.lookup[e]=a)}Vt.add(99,(e,{op1:t})=>{let{definition:s,state:n}=e.fetchValue(t),{manager:r}=s,i=e.fetchValue(6);r.didCreateElement(n,e.elements().constructing,i)}),Vt.add(90,(e,{op1:t})=>{let{definition:s,state:n}=e.fetchValue(t),{manager:r}=s;e.stack.pushJs(r.getSelf(n))}),Vt.add(91,(e,{op1:t})=>{let{definition:s,state:n}=e.fetchValue(t),{manager:r}=s,i=r.getTagName(n);e.stack.pushJs(i)}),Vt.add(92,(e,{op1:t})=>{let s,n=e.fetchValue(t),r=n.manager,{definition:i}=n,{stack:a}=e,{capabilities:l}=n;if(function(e,t){return!zt(e,1)}(l))s=r.getStaticLayout(i.state,e.runtime.resolver);else{let t=S(r.getDynamicLayout(n.state,e.runtime.resolver));s=zt(l,1024)?t.asWrappedLayout():t.asLayout()}let o=s.compile(e.context);a.pushJs(s.symbolTable),a.pushSmallInt(o)}),Vt.add(74,(e,{op1:t})=>{let s=e.stack.popJs(),n=e.stack.popJs(),{manager:r}=s,i=Pt(r.getCapabilities(s.state)),a={[ls]:!0,definition:s,manager:r,capabilities:i,state:null,handle:n.handle,table:n.symbolTable,lookup:null};e.loadValue(t,a)}),Vt.add(95,(e,{op1:t})=>{let{stack:s}=e,n=s.popSmallInt(),r=s.popJs(),i=e.fetchValue(t);i.handle=n,i.table=r}),Vt.add(37,(e,{op1:t})=>{let{symbols:s}=e.fetchValue(t).table;e.pushRootScope(s.length+1)}),Vt.add(94,(e,{op1:t})=>{let s=e.fetchValue(t);if(s.table.hasEval){let t=s.lookup=l();e.scope().bindEvalScope(t)}}),Vt.add(17,(e,{op1:t})=>{let s=e.fetchValue(t),n=e.scope(),r=e.stack.peekJs(),i=r.named.atNames;for(let e=i.length-1;e>=0;e--){let t=i[e],a=s.table.symbols.indexOf(i[e]),l=r.named.get(t,!0);-1!==a&&n.bindSymbol(a+1,l),s.lookup&&(s.lookup[t]=l)}}),Vt.add(18,(e,{op1:t})=>{let s=e.fetchValue(t),{blocks:n}=e.stack.peekJs();for(let t=0;t<n.names.length;t++)hs(n.symbolNames[t],n.names[t],s,n,e)}),Vt.add(96,(e,{op1:t})=>{let s=e.fetchValue(t);e.call(s.handle)}),Vt.add(100,(e,{op1:t})=>{let{manager:s,state:n,capabilities:r}=e.fetchValue(t),i=e.elements().popBlock();s.didRenderLayout(n,i),Ht(0,r,512)&&(e.env.didCreate(n,s),e.updateWith(new ds(s,n,i)))}),Vt.add(98,e=>{e.commitCacheGroup()});class ps extends Ut{constructor(e,t,s){super(),this.component=e,this.manager=t,this.dynamicScope=s,this.type="update-component"}evaluate(e){let{component:t,manager:s,dynamicScope:n}=this;s.update(t,n)}}class ds extends Ut{constructor(e,t,s){super(),this.manager=e,this.component=t,this.bounds=s,this.type="did-update-layout"}evaluate(e){let{manager:t,component:s,bounds:n}=this;t.didUpdateLayout(s,n),e.env.didUpdate(s,t)}}class fs extends Ut{constructor(e,t,s){super(),this.node=e,this.reference=t,this.lastValue=s,this.type="dynamic-text"}evaluate(){let e,t=St(this.reference),{lastValue:s}=this;if(t!==s&&(e=K(t)?"":Q(t)?t:String(t),e!==s)){this.node.nodeValue=this.lastValue=e}}}function ms(e){return function(e){return Q(e)||K(e)||"boolean"==typeof e||"number"==typeof e}(e)?1:Yt(e)?0:X(e)?3:function(e){return Z(e)&&11===e.nodeType}(e)?4:Z(e)?5:1}function gs(e,t){console.info("Use `context`, and `get(<path>)` to debug this template."),t("this")}Vt.add(75,e=>{let t=e.stack.peek();e.stack.pushSmallInt(ms(St(t))),wt(t)||e.updateWith(new ts(t,ms))}),Vt.add(42,e=>{let t=St(e.stack.popJs()),s=K(t)?"":String(t);e.elements().appendDynamicHTML(s)}),Vt.add(43,e=>{let t=St(e.stack.popJs()).toHTML(),s=K(t)?"":t;e.elements().appendDynamicHTML(s)}),Vt.add(46,e=>{let t=e.stack.popJs(),s=St(t),n=K(s)?"":String(s),r=e.elements().appendDynamicText(n);wt(t)||e.updateWith(new fs(r,t,n))}),Vt.add(44,e=>{let t=St(e.stack.popJs());e.elements().appendDynamicFragment(t)}),Vt.add(45,e=>{let t=St(e.stack.popJs());e.elements().appendDynamicNode(t)});let bs=gs;class ys{constructor(e,t,s){this.scope=e,this.locals=l();for(let n=0;n<s.length;n++){let r=s[n],i=t[r-1],a=e.getSymbol(r);this.locals[i]=a}}get(e){let t,{scope:s,locals:n}=this,r=e.split("."),[i,...a]=e.split("."),l=s.getEvalScope();return"this"===i?t=s.getSelf():n[i]?t=n[i]:0===i.indexOf("@")&&l[i]?t=l[i]:(t=this.scope.getSelf(),a=r),a.reduce((e,t)=>xt(e,t),t)}}Vt.add(103,(e,{op1:t,op2:s})=>{let n=e[O].getArray(t),r=e[O].getValue(s),i=new ys(e.scope(),n,r);bs(St(e.getSelf()),e=>St(i.get(e)))}),Vt.add(101,(e,{op1:t,op2:s,op3:n})=>{let{[O]:r,stack:i}=e,a=St(i.pop()),l=r.getValue(t),o=r.getArray(s),u=r.getValue(n),c=e.runtime.resolver.lookupPartial(a,l),h=e.runtime.resolver.resolve(c),{symbolTable:p,handle:d}=h.getPartial(e.context);{let t=p.symbols,s=e.scope(),n=e.pushRootScope(t.length),r=s.getEvalScope();n.bindEvalScope(r),n.bindSelf(s.getSelf());let i=Object.create(s.getPartialMap());for(let e=0;e<u.length;e++){let t=u[e],n=o[t-1],r=s.getSymbol(t);i[n]=r}if(r)for(let e=0;e<t.length;e++){let s=e+1,i=r[t[e]];void 0!==i&&n.bind(s,i)}n.bindPartialMap(i),e.pushFrame(),e.call(w(d))}}),Vt.add(71,(e,{op1:t,op2:s})=>{let r=e.stack,i=r.popJs(),a=St(r.popJs()),l=function(e,t){return kt(()=>{let s=St(e),r=_t(t);if(Array.isArray(s))return new It(s,r);let i=P(s);return null===i?new It(n,()=>null):new Bt(i,r)})}(i,null===a?"@identity":String(a)),o=St(l);e.updateWith(new ts(l,e=>e.isEmpty())),!0===o.isEmpty()?e.goto(s+1):(e.enterList(l,t),e.stack.pushJs(o))}),Vt.add(72,e=>{e.exitList()}),Vt.add(73,(e,{op1:t})=>{let s=e.stack.peekJs().next();null!==s?e.registerItem(e.enterItem(s)):e.goto(t)});new class{getCapabilities(e){return Zt}getDebugName(){return""}prepareArgs(e,t){throw new Error("Unimplemented prepareArgs in SimpleComponentManager")}create(e,t,s,n,r,i){throw new Error("Unimplemented create in SimpleComponentManager")}getSelf(e){return mt}didRenderLayout(e,t){throw new Error("Unimplemented didRenderLayout in SimpleComponentManager")}didCreate(e){throw new Error("Unimplemented didCreate in SimpleComponentManager")}update(e,t){throw new Error("Unimplemented update in SimpleComponentManager")}didUpdateLayout(e,t){throw new Error("Unimplemented didUpdateLayout in SimpleComponentManager")}didUpdate(e){throw new Error("Unimplemented didUpdate in SimpleComponentManager")}getDestroyable(e){return null}};const vs={foreignObject:1,desc:1,title:1},ks=Object.create(null);class ws{constructor(e){this.document=e,this.setupUselessElement()}setupUselessElement(){this.uselessElement=this.document.createElement("div")}createElement(e,t){let s,n;if(t?(s="http://www.w3.org/2000/svg"===t.namespaceURI||"svg"===e,n=!!vs[t.tagName]):(s="svg"===e,n=!1),s&&!n){if(ks[e])throw new Error(`Cannot create a ${e} inside an SVG context`);return this.document.createElementNS("http://www.w3.org/2000/svg",e)}return this.document.createElement(e)}insertBefore(e,t,s){e.insertBefore(t,s)}insertHTMLBefore(e,t,s){if(""===s){let s=this.createComment("");return e.insertBefore(s,t),new D(e,s,s)}let n,r=t?t.previousSibling:e.lastChild;if(null===t)e.insertAdjacentHTML("beforeend",s),n=e.lastChild;else if(t instanceof HTMLElement)t.insertAdjacentHTML("beforebegin",s),n=t.previousSibling;else{let{uselessElement:r}=this;e.insertBefore(r,t),r.insertAdjacentHTML("beforebegin",s),n=r.previousSibling,e.removeChild(r)}let i=r?r.nextSibling:e.firstChild;return new D(e,i,n)}createTextNode(e){return this.document.createTextNode(e)}createComment(e){return this.document.createComment(e)}}function Ss(e,t,s){if(!e)return t;if(!function(e,t){let s=e.createElementNS(t,"svg");try{s.insertAdjacentHTML("beforeend","<circle></circle>")}catch(e){}finally{return 1!==s.childNodes.length||"http://www.w3.org/2000/svg"!==s.firstChild.namespaceURI}}(e,s))return t;let n=e.createElement("div");return class extends t{insertHTMLBefore(e,t,r){return""===r||e.namespaceURI!==s?super.insertHTMLBefore(e,t,r):function(e,t,s,n){let r;if("FOREIGNOBJECT"===e.tagName.toUpperCase()){let e="<svg><foreignObject>"+s+"</foreignObject></svg>";h(t),t.insertAdjacentHTML("afterbegin",e),r=t.firstChild.firstChild}else{let e="<svg>"+s+"</svg>";h(t),t.insertAdjacentHTML("afterbegin",e),r=t.firstChild}return function(e,t,s){let n=e.firstChild,r=n,i=n;for(;i;){let e=i.nextSibling;t.insertBefore(i,s),r=i,i=e}return new D(t,n,r)}(r,e,n)}(e,n,r,t)}}}function Es(e,t){return e&&function(e){let t=e.createElement("div");if(t.appendChild(e.createTextNode("first")),t.insertAdjacentHTML("beforeend","second"),2===t.childNodes.length)return!1;return!0}(e)?class extends t{constructor(e){super(e),this.uselessComment=e.createComment("")}insertHTMLBefore(e,t,s){if(""===s)return super.insertHTMLBefore(e,t,s);let n=!1,r=t?t.previousSibling:e.lastChild;r&&r instanceof Text&&(n=!0,e.insertBefore(this.uselessComment,t));let i=super.insertHTMLBefore(e,t,s);return n&&e.removeChild(this.uselessComment),i}}:t}["b","big","blockquote","body","br","center","code","dd","div","dl","dt","em","embed","h1","h2","h3","h4","h5","h6","head","hr","i","img","li","listing","main","meta","nobr","ol","p","pre","ruby","s","small","span","strong","strike","sub","sup","table","tt","u","ul","var"].forEach(e=>ks[e]=1);let xs="undefined"==typeof document?null:document;var Cs;!function(e){class t extends ws{createElementNS(e,t){return this.document.createElementNS(e,t)}setAttribute(e,t,s,n=null){n?e.setAttributeNS(n,t,s):e.setAttribute(t,s)}}e.TreeConstruction=t;let s=t;s=Es(xs,s),s=Ss(xs,s,"http://www.w3.org/2000/svg"),e.DOMTreeConstruction=s}(Cs||(Cs={}));class As extends ws{constructor(e){super(e),this.document=e,this.namespace=null}setAttribute(e,t,s){e.setAttribute(t,s)}removeAttribute(e,t){e.removeAttribute(t)}insertAfter(e,t,s){this.insertBefore(e,t,s.nextSibling)}}let Ns=As;Ns=Es(xs,Ns),Ns=Ss(xs,Ns,"http://www.w3.org/2000/svg");const Ms=Cs.DOMTreeConstruction,_s=Object.freeze([]),Ts=b(_s),Ls=Ts.indexOf(_s);class Rs extends class{constructor(){this.values=Ts.slice(),this.indexMap=new Map(this.values.map((e,t)=>[e,t]))}value(e){let t=this.indexMap,s=t.get(e);return void 0===s&&(s=this.values.push(e)-1,t.set(e,s)),s}array(e){if(0===e.length)return Ls;let t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=this.value(e[s]);return this.value(t)}serializable(e){let t=JSON.stringify(e);return this.value(t)}toPool(){return this.values}}{constructor(){super(...arguments),this.reifiedArrs={[Ls]:_s}}templateMeta(e){return this.value(e)}getValue(e){return this.values[e]}getArray(e){let t=this.reifiedArrs,s=t[e];if(void 0===s){let n=this.getValue(e);s=new Array(n.length);for(let e=0;e<n.length;e++)s[e]=this.getValue(n[e]);t[e]=s}return s}getSerializable(e){return JSON.parse(this.getValue(e))}}class Os{constructor(e){this.heap=e,this.offset=0}get size(){return 1+((768&this.heap.getbyaddr(this.offset))>>8)}get isMachine(){return 1024&this.heap.getbyaddr(this.offset)?1:0}get type(){return 255&this.heap.getbyaddr(this.offset)}get op1(){return this.heap.getbyaddr(this.offset+1)}get op2(){return this.heap.getbyaddr(this.offset+2)}get op3(){return this.heap.getbyaddr(this.offset+3)}}function Bs(e,t){return t|e<<2}function Is(e,t){return e|t<<30}class Ds{constructor(){this.placeholders=[],this.stdlibs=[],this.offset=0,this.handle=0,this.capacity=1048576,this.heap=new Int32Array(1048576),this.table=[]}push(e){this.sizeCheck(),this.heap[this.offset++]=e}sizeCheck(){if(0===this.capacity){let e=Vs(this.heap,0,this.offset);this.heap=new Int32Array(e.length+1048576),this.heap.set(e,0),this.capacity=1048576}this.capacity--}getbyaddr(e){return this.heap[e]}setbyaddr(e,t){this.heap[e]=t}malloc(){this.table.push(this.offset,0,0);let e=this.handle;return this.handle+=3,e}finishMalloc(e,t){this.table[e+1]=Bs(t,0)}size(){return this.offset}getaddr(e){return this.table[e]}gethandle(e){this.table.push(e,Bs(0,3),0);let t=this.handle;return this.handle+=3,t}sizeof(e){return Us(this.table,e)}scopesizeof(e){return js(this.table,e)}free(e){let t=this.table[e+1];this.table[e+1]=Is(t,1)}compact(){let e=0,{table:t,table:{length:s},heap:n}=this;for(let r=0;r<s;r+=3){let s=t[r],i=t[r+1],a=i&Size.SIZE_MASK,l=0&i;if(2!==l)if(1===l)t[r+1]=Is(i,2),e+=a;else if(0===l){for(let t=s;t<=r+a;t++)n[t-e]=n[t];t[r]=s-e}else 3===l&&(t[r]=s-e)}this.offset=this.offset-e}pushPlaceholder(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.placeholders.push([t,e])}pushStdlib(e){this.sizeCheck();let t=this.offset++;this.heap[t]=2147483647,this.stdlibs.push([t,e])}patchPlaceholders(){let{placeholders:e}=this;for(let t=0;t<e.length;t++){let[s,n]=e[t];this.setbyaddr(s,n())}}patchStdlibs(e){let{stdlibs:t}=this;for(let s=0;s<t.length;s++){let[n,{value:r}]=t[s];this.setbyaddr(n,e[r])}this.stdlibs=[]}capture(e,t=this.offset){this.patchPlaceholders(),this.patchStdlibs(e);let s=Vs(this.heap,0,t).buffer;return{handle:this.handle,table:this.table,buffer:s}}}class Js{constructor(e,t){this.constants=e,this.heap=t,this._opcode=new Os(this.heap)}opcode(e){return this._opcode.offset=e,this._opcode}}function Vs(e,t,s){if(void 0!==e.slice)return e.slice(t,s);let n=new Int32Array(s);for(;t<s;t++)n[t]=e[t];return n}function Us(e,t){return-1}function js(e,t){return e[t+1]>>2}function Fs(e){e.heap.patchStdlibs(e.stdlib)}var Ps;const Hs=g("TRANSACTION");class zs{constructor(){this.scheduledInstallManagers=[],this.scheduledInstallModifiers=[],this.scheduledUpdateModifierManagers=[],this.scheduledUpdateModifiers=[],this.createdComponents=[],this.createdManagers=[],this.updatedComponents=[],this.updatedManagers=[]}didCreate(e,t){this.createdComponents.push(e),this.createdManagers.push(t)}didUpdate(e,t){this.updatedComponents.push(e),this.updatedManagers.push(t)}scheduleInstallModifier(e,t){this.scheduledInstallModifiers.push(e),this.scheduledInstallManagers.push(t)}scheduleUpdateModifier(e,t){this.scheduledUpdateModifiers.push(e),this.scheduledUpdateModifierManagers.push(t)}commit(){let{createdComponents:e,createdManagers:t}=this;for(let s=0;s<e.length;s++){let n=e[s];t[s].didCreate(n)}let{updatedComponents:s,updatedManagers:n}=this;for(let e=0;e<s.length;e++){let t=s[e];n[e].didUpdate(t)}let r,i,{scheduledInstallManagers:a,scheduledInstallModifiers:l}=this;for(let e=0;e<a.length;e++){i=l[e],r=a[e];let t=r.getTag(i);if(null!==t){let e=ot(()=>r.install(i));qe(t,e)}else r.install(i)}let{scheduledUpdateModifierManagers:o,scheduledUpdateModifiers:u}=this;for(let e=0;e<o.length;e++){i=u[e],r=o[e];let t=r.getTag(i);if(null!==t){let e=ot(()=>r.update(i));qe(t,e)}else r.update(i)}}}class Ws{constructor(e,t){this.delegate=t,this[Ps]=null,this.extra=this.delegate.extra,this.isInteractive=this.delegate.isInteractive,e.appendOperations?(this.appendOperations=e.appendOperations,this.updateOperations=e.updateOperations):e.document&&(this.appendOperations=new Ms(e.document),this.updateOperations=new As(e.document))}getAppendOperations(){return this.appendOperations}getDOM(){return this.updateOperations}begin(){this.delegate.onTransactionBegin(),this[Hs]=new zs}get transaction(){return this[Hs]}didCreate(e,t){this.transaction.didCreate(e,t)}didUpdate(e,t){this.transaction.didUpdate(e,t)}scheduleInstallModifier(e,t){this.isInteractive&&this.transaction.scheduleInstallModifier(e,t)}scheduleUpdateModifier(e,t){this.isInteractive&&this.transaction.scheduleUpdateModifier(e,t)}commit(){let e=this.transaction;this[Hs]=null,e.commit(),this.delegate.onTransactionCommit()}}Ps=Hs;class $s{constructor(){this.stack=null,this.positional=new Gs,this.named=new Ys,this.blocks=new Ks}empty(e){let t=e[L][3]+1;return this.named.empty(e,t),this.positional.empty(e,t),this.blocks.empty(e,t),this}setup(e,t,s,n,r){this.stack=e;let i=this.named,a=t.length,l=e[L][3]-a+1;i.setup(e,l,a,t,r);let o=l-n;this.positional.setup(e,o,n);let u=this.blocks,c=s.length,h=o-3*c;u.setup(e,h,c,s)}get base(){return this.blocks.base}get length(){return this.positional.length+this.named.length+3*this.blocks.length}at(e){return this.positional.at(e)}realloc(e){let{stack:t}=this;if(e>0&&null!==t){let{positional:s,named:n}=this,r=s.base+e;for(let e=s.length+n.length-1;e>=0;e--)t.copy(e+s.base,e+r);s.base+=e,n.base+=e,t[L][3]+=e}}capture(){let e=0===this.positional.length?en:this.positional.capture();return{named:0===this.named.length?Qs:this.named.capture(),positional:e}}clear(){let{stack:e,length:t}=this;t>0&&null!==e&&e.pop(t)}}class Gs{constructor(){this.base=0,this.length=0,this.stack=null,this._references=null}empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=n}setup(e,t,s){this.stack=e,this.base=t,this.length=s,this._references=0===s?n:null}at(e){let{base:t,length:s,stack:n}=this;return e<0||e>=s?mt:n.get(e,t)}capture(){return this.references}prepend(e){let t=e.length;if(t>0){let{base:s,length:n,stack:r}=this;this.base=s-=t,this.length=n+t;for(let n=0;n<t;n++)r.set(e[n],n,s);this._references=null}}get references(){let e=this._references;if(!e){let{stack:t,base:s,length:n}=this;e=this._references=t.slice(s,s+n)}return e}}class Ys{constructor(){this.base=0,this.length=0,this._references=null,this._names=n,this._atNames=n}empty(e,t){this.stack=e,this.base=t,this.length=0,this._references=n,this._names=n,this._atNames=n}setup(e,t,s,r,i){this.stack=e,this.base=t,this.length=s,0===s?(this._references=n,this._names=n,this._atNames=n):(this._references=null,i?(this._names=null,this._atNames=r):(this._names=r,this._atNames=null))}get names(){let e=this._names;return e||(e=this._names=this._atNames.map(this.toSyntheticName)),e}get atNames(){let e=this._atNames;return e||(e=this._atNames=this._names.map(this.toAtName)),e}has(e){return-1!==this.names.indexOf(e)}get(e,t=!1){let{base:s,stack:n}=this,r=(t?this.atNames:this.names).indexOf(e);if(-1===r)return mt;let i=n.get(r,s);return i}capture(){let{names:e,references:t}=this,s=l();for(let n=0;n<e.length;n++){let r=e[n];s[r]=t[n]}return s}merge(e){let t=Object.keys(e);if(t.length>0){let{names:s,length:n,stack:r}=this,i=s.slice();for(let s=0;s<t.length;s++){let a=t[s];-1===i.indexOf(a)&&(n=i.push(a),r.pushJs(e[a]))}this.length=n,this._references=null,this._names=i,this._atNames=null}}get references(){let e=this._references;if(!e){let{base:t,length:s,stack:n}=this;e=this._references=n.slice(t,t+s)}return e}toSyntheticName(e){return e.slice(1)}toAtName(e){return"@"+e}}function qs(e){return"&"+e}class Ks{constructor(){this.internalValues=null,this._symbolNames=null,this.internalTag=null,this.names=n,this.length=0,this.base=0}empty(e,t){this.stack=e,this.names=n,this.base=t,this.length=0,this._symbolNames=null,this.internalTag=Xe,this.internalValues=n}setup(e,t,s,r){this.stack=e,this.names=r,this.base=t,this.length=s,this._symbolNames=null,0===s?(this.internalTag=Xe,this.internalValues=n):(this.internalTag=null,this.internalValues=null)}get values(){let e=this.internalValues;if(!e){let{base:t,length:s,stack:n}=this;e=this.internalValues=n.slice(t,t+3*s)}return e}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);if(-1===t)return null;let{base:s,stack:n}=this,r=n.get(3*t,s),i=n.get(3*t+1,s),a=n.get(3*t+2,s);return null===a?null:[a,i,r]}capture(){return new Xs(this.names,this.values)}get symbolNames(){let e=this._symbolNames;return null===e&&(e=this._symbolNames=this.names.map(qs)),e}}class Xs{constructor(e,t){this.names=e,this.values=t,this.length=e.length}has(e){return-1!==this.names.indexOf(e)}get(e){let t=this.names.indexOf(e);return-1===t?null:[this.values[3*t+2],this.values[3*t+1],this.values[3*t]]}}function Zs(e){return e.map(St)}const Qs=Object.freeze(Object.create(null)),en=n;var tn,sn;class nn{constructor(e,t,s,n,r){this.stack=e,this.heap=t,this.program=s,this.externs=n,this.registers=r,this.currentOpSize=0}fetchRegister(e){return this.registers[e]}loadRegister(e,t){this.registers[e]=t}setPc(e){this.registers[0]=e}pushFrame(){this.stack.pushSmallInt(this.registers[1]),this.stack.pushSmallInt(this.registers[2]),this.registers[2]=this.registers[3]-1}popFrame(){this.registers[3]=this.registers[2]-1,this.registers[1]=this.stack.get(0),this.registers[2]=this.stack.get(1)}pushSmallFrame(){this.stack.pushSmallInt(this.registers[1])}popSmallFrame(){this.registers[1]=this.stack.popSmallInt()}goto(e){this.setPc(this.target(e))}target(e){return this.registers[0]+e-this.currentOpSize}call(e){this.registers[1]=this.registers[0],this.setPc(this.heap.getaddr(e))}returnTo(e){this.registers[1]=this.target(e)}return(){this.setPc(this.registers[1])}nextStatement(){let{registers:e,program:t}=this,s=e[0];if(-1===s)return null;let n=t.opcode(s),r=this.currentOpSize=n.size;return this.registers[0]+=r,n}evaluateOuter(e,t){this.evaluateInner(e,t)}evaluateInner(e,t){e.isMachine?this.evaluateMachine(e):this.evaluateSyscall(e,t)}evaluateMachine(e){switch(e.type){case 0:return this.pushFrame();case 1:return this.popFrame();case 3:return this.call(e.op1);case 2:return this.call(this.stack.popSmallInt());case 4:return this.goto(e.op1);case 5:return this.return();case 6:return this.returnTo(e.op1)}}evaluateSyscall(e,t){Vt.evaluate(t,e,e.type)}}class rn{constructor(e,{alwaysRevalidate:t=!1}){this.frameStack=new c,this.env=e,this.dom=e.getDOM(),this.alwaysRevalidate=t}execute(e,t){this._execute(e,t)}_execute(e,t){let{frameStack:s}=this;for(this.try(e,t);!s.isEmpty();){let e=this.frame.nextStatement();void 0!==e?e.evaluate(this):s.pop()}}get frame(){return this.frameStack.current}goto(e){this.frame.goto(e)}try(e,t){this.frameStack.push(new hn(e,t))}throw(){this.frame.handleException(),this.frameStack.pop()}}class an{constructor(e,t){this.state=e,this.resumeCallback=t}resume(e,t){return this.resumeCallback(e,this.state,t)}}class ln extends Ut{constructor(e,t,s,n){super(),this.state=e,this.runtime=t,this.type="block",this.children=n,this.bounds=s}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}evaluate(e){e.try(this.children,null)}}class on extends ln{constructor(){super(...arguments),this.type="try"}evaluate(e){e.try(this.children,this)}handleException(){let{state:e,bounds:t,runtime:s}=this;!function(e){let{children:t}=Ne(e);Ce(t,Te)}(this);let n=Ie.resume(s.env,t),r=e.resume(s,n),i=[],a=this.children=[];Me(this,r.execute(e=>{e.pushUpdating(i),e.updateWith(this),e.pushUpdating(a)}).drop)}}class un extends on{constructor(e,t,s,n,r,i){super(e,t,s,[]),this.key=n,this.memo=r,this.value=i,this.retained=!1,this.index=-1}updateReferences(e){this.retained=!0,Et(this.value,e.value),Et(this.memo,e.memo)}shouldRemove(){return!this.retained}reset(){this.retained=!1}}class cn extends ln{constructor(e,t,s,n,r){super(e,t,s,n),this.iterableRef=r,this.type="list-block",this.opcodeMap=new Map,this.marker=null,this.lastIterator=St(r)}initializeChild(e){e.index=this.children.length-1,this.opcodeMap.set(e.key,e)}evaluate(e){let t=St(this.iterableRef);if(this.lastIterator!==t){let{bounds:s}=this,{dom:n}=e,r=this.marker=n.createComment("");n.insertAfter(s.parentElement(),r,s.lastNode()),this.sync(t),this.parentElement().removeChild(r),this.marker=null,this.lastIterator=t}super.evaluate(e)}sync(e){let{opcodeMap:t,children:s}=this,n=0,r=0;for(this.children=this.bounds.boundList=[];;){let i=e.next();if(null===i)break;let a=s[n],{key:l}=i;for(;void 0!==a&&!0===a.retained;)a=s[++n];if(void 0!==a&&a.key===l)this.retainItem(a,i),n++;else if(t.has(l)){let e=t.get(l);if(e.index<r)this.moveItem(e,i,a);else{r=e.index;let t=!1;for(let e=n+1;e<r;e++)if(!1===s[e].retained){t=!0;break}!1===t?(this.retainItem(e,i),n=r+1):(this.moveItem(e,i,a),n++)}}else this.insertItem(i,a)}for(let e=0;e<s.length;e++){let t=s[e];!1===t.retained?this.deleteItem(t):t.reset()}}retainItem(e,t){let{children:s}=this;Et(e.memo,t.memo),Et(e.value,t.value),e.retained=!0,e.index=s.length,s.push(e)}insertItem(e,t){let{opcodeMap:s,bounds:n,state:r,runtime:i,children:a}=this,{key:l}=e,o=void 0===t?this.marker:t.firstNode(),u=Ie.forInitialRender(i.env,{element:n.parentElement(),nextSibling:o});r.resume(i,u).execute(t=>{t.pushUpdating();let n=t.enterItem(e);n.index=a.length,a.push(n),s.set(l,n),Me(this,n)})}moveItem(e,t,s){let n,r,{children:i}=this;Et(e.memo,t.memo),Et(e.value,t.value),e.retained=!0,void 0===s?V(e,this.marker):(n=e.lastNode().nextSibling,r=s.firstNode(),n!==r&&V(e,r)),e.index=i.length,i.push(e)}deleteItem(e){Te(e),U(e),this.opcodeMap.delete(e.key)}}class hn{constructor(e,t){this.ops=e,this.exceptionHandler=t,this.current=0}goto(e){this.current=e}nextStatement(){return this.ops[this.current++]}handleException(){this.exceptionHandler&&this.exceptionHandler.handleException()}}class pn{constructor(e,t,s,n){this.env=e,this.updating=t,this.bounds=s,this.drop=n,Me(this,n),_e(this,()=>U(this.bounds))}rerender({alwaysRevalidate:e=!1}={alwaysRevalidate:!1}){let{env:t,updating:s}=this;new rn(t,{alwaysRevalidate:e}).execute(s,this)}parentElement(){return this.bounds.parentElement()}firstNode(){return this.bounds.firstNode()}lastNode(){return this.bounds.lastNode()}handleException(){throw"this should never happen"}}class dn{constructor(e=[]){this.vec=e}clone(){return new dn(this.vec.slice())}sliceFrom(e){return new dn(this.vec.slice(e))}slice(e,t){return new dn(this.vec.slice(e,t))}copy(e,t){this.vec[t]=this.vec[e]}writeRaw(e,t){this.vec[e]=t}getRaw(e){return this.vec[e]}reset(){this.vec.length=0}len(){return this.vec.length}}class fn{constructor(e=new dn,t){this.inner=e,this.js=b(),void 0!==t&&(this.js=this.js.concat(t))}slice(e,t){let s=[];if(-1===e)return s;for(let n=e;n<t;n++)s.push(this.get(n));return s}copy(e,t){this.inner.copy(e,t)}writeJs(e,t){let s=this.js.length;this.js.push(t),this.inner.writeRaw(e,s)}writeSmallInt(e,t){this.inner.writeRaw(e,v(t))}writeTrue(e){this.inner.writeRaw(e,1)}writeFalse(e){this.inner.writeRaw(e,0)}writeNull(e){this.inner.writeRaw(e,2)}writeUndefined(e){this.inner.writeRaw(e,3)}writeRaw(e,t){this.inner.writeRaw(e,t)}getJs(e){let t=this.inner.getRaw(e);return this.js[t]}getSmallInt(e){return k(this.inner.getRaw(e))}get(e){let t=0|this.inner.getRaw(e);return function(e){return e>=0}(t)?this.js[t]:k(t)}reset(){this.inner.reset(),this.js.length=0}get length(){return this.inner.len()}}class mn{constructor(){this.scope=new c,this.dynamicScope=new c,this.updating=new c,this.cache=new c,this.list=new c}}class gn{constructor(e,{pc:t,scope:s,dynamicScope:n,stack:r},i,a){this.runtime=e,this.elementStack=i,this.context=a,this[tn]=new mn,this[sn]=new c,this.s0=null,this.s1=null,this.t0=null,this.t1=null,this.v0=null,this.resume=yn(this.context);let l=class{constructor(e,t){this.stack=e,this[L]=t}static restore(e){let t=new fn;for(let s=0;s<e.length;s++){let n=e[s];"number"==typeof n&&y(n)?t.writeRaw(s,v(n)):!0===n?t.writeTrue(s):!1===n?t.writeFalse(s):null===n?t.writeNull(s):void 0===n?t.writeUndefined(s):t.writeJs(s,n)}return new this(t,[0,-1,e.length-1,0])}pushJs(e){this.stack.writeJs(++this[L][3],e)}pushSmallInt(e){this.stack.writeSmallInt(++this[L][3],e)}pushTrue(){this.stack.writeTrue(++this[L][3])}pushFalse(){this.stack.writeFalse(++this[L][3])}pushNull(){this.stack.writeNull(++this[L][3])}pushUndefined(){this.stack.writeUndefined(++this[L][3])}pushRaw(e){this.stack.writeRaw(++this[L][3],e)}dup(e=this[L][3]){this.stack.copy(e,++this[L][3])}copy(e,t){this.stack.copy(e,t)}popJs(e=1){let t=this.stack.getJs(this[L][3]);return this[L][3]-=e,t}popSmallInt(e=1){let t=this.stack.getSmallInt(this[L][3]);return this[L][3]-=e,t}pop(e=1){let t=this.stack.get(this[L][3]);return this[L][3]-=e,t}peekJs(e=0){return this.stack.getJs(this[L][3]-e)}peekSmallInt(e=0){return this.stack.getSmallInt(this[L][3]-e)}peek(e=0){return this.stack.get(this[L][3]-e)}get(e,t=this[L][2]){return this.stack.get(t+e)}set(e,t,s=this[L][2]){this.stack.writeJs(s+t,e)}slice(e,t){return this.stack.slice(e,t)}capture(e){let t=this[L][3]+1,s=t-e;return this.stack.slice(s,t)}reset(){this.stack.reset()}toArray(){return console.log(this[L]),this.stack.slice(this[L][2],this[L][3]+1)}}.restore(r);l[L][0]=t,l[L][3]=r.length-1,l[L][2]=-1,this[R]=this.program.heap,this[O]=this.program.constants,this.elementStack=i,this[T].scope.push(s),this[T].dynamicScope.push(n),this[B]=new $s,this[M]=new nn(l,this[R],e.program,{debugBefore:e=>Vt.debugBefore(this,e),debugAfter:e=>{Vt.debugAfter(this,e)}},l[L]),this.destructor={},this[_].push(this.destructor)}get stack(){return this[M].stack}get pc(){return this[M].fetchRegister(0)}fetch(e){let t=this.fetchValue(e);this.stack.pushJs(t)}load(e){let t=this.stack.pop();this.loadValue(e,t)}fetchValue(e){if(C(e))return this[M].fetchRegister(e);switch(e){case 4:return this.s0;case 5:return this.s1;case 6:return this.t0;case 7:return this.t1;case 8:return this.v0}}loadValue(e,t){switch(C(e)&&this[M].loadRegister(e,t),e){case 4:this.s0=t;break;case 5:this.s1=t;break;case 6:this.t0=t;break;case 7:this.t1=t;break;case 8:this.v0=t}}pushFrame(){this[M].pushFrame()}popFrame(){this[M].popFrame()}goto(e){this[M].goto(e)}call(e){this[M].call(e)}returnTo(e){this[M].returnTo(e)}return(){this[M].return()}static initial(e,t,{handle:s,self:n,dynamicScope:r,treeBuilder:i}){let a=e.program.heap.scopesizeof(s),l=Jt.root(n,a),o=bn(e.program.heap.getaddr(s),l,r),u=yn(t)(e,o,i);return u.pushUpdating(),u}static empty(e,{handle:t,treeBuilder:s,dynamicScope:n},r){let i=yn(r)(e,bn(e.program.heap.getaddr(t),Jt.root(mt,0),n),s);return i.pushUpdating(),i}compile(e){return w(e.compile(this.context))}get program(){return this.runtime.program}get env(){return this.runtime.env}captureState(e,t=this[M].fetchRegister(0)){return{pc:t,dynamicScope:this.dynamicScope(),scope:this.scope(),stack:this.stack.capture(e)}}capture(e,t=this[M].fetchRegister(0)){return new an(this.captureState(e,t),this.resume)}beginCacheGroup(e){let t=this.updating(),s=new ss;t.push(s),t.push(new ns(e)),this[T].cache.push(s),it()}commitCacheGroup(){let e=this.updating(),t=this[T].cache.pop(),s=at();e.push(new rs(t)),t.finalize(s,e.length)}enter(e){let t=this.capture(e),s=this.elements().pushUpdatableBlock(),n=new on(t,this.runtime,s,[]);this.didEnter(n)}enterItem({key:e,value:t,memo:s}){let{stack:n}=this,r=Ot(t),i=Ot(s);n.pushJs(r),n.pushJs(i);let a=this.capture(2),l=this.elements().pushUpdatableBlock(),o=new un(a,this.runtime,l,e,i,r);return this.didEnter(o),o}registerItem(e){this.listBlock().initializeChild(e)}enterList(e,t){let s=[],n=this[M].target(t),r=this.capture(0,n),i=this.elements().pushBlockList(s),a=new cn(r,this.runtime,i,s,e);this[T].list.push(a),this.didEnter(a)}didEnter(e){this.associateDestroyable(e),this[_].push(e),this.updateWith(e),this.pushUpdating(e.children)}exit(){this[_].pop(),this.elements().popBlock(),this.popUpdating()}exitList(){this.exit(),this[T].list.pop()}pushUpdating(e=[]){this[T].updating.push(e)}popUpdating(){return this[T].updating.pop()}updateWith(e){this.updating().push(e)}listBlock(){return this[T].list.current}associateDestroyable(e){Me(this[_].current,e)}tryUpdating(){return this[T].updating.current}updating(){return this[T].updating.current}elements(){return this.elementStack}scope(){return this[T].scope.current}dynamicScope(){return this[T].dynamicScope.current}pushChildScope(){this[T].scope.push(this.scope().child())}pushDynamicScope(){let e=this.dynamicScope().child();return this[T].dynamicScope.push(e),e}pushRootScope(e){let t=Jt.sized(e);return this[T].scope.push(t),t}pushScope(e){this[T].scope.push(e)}popScope(){this[T].scope.pop()}popDynamicScope(){this[T].dynamicScope.pop()}getSelf(){return this.scope().getSelf()}referenceForSymbol(e){return this.scope().getSymbol(e)}execute(e){return this._execute(e)}_execute(e){let t;for(0,e&&e(this);t=this.next(),!t.done;);return t.value}next(){let e,{env:t,elementStack:s}=this,n=this[M].nextStatement();return null!==n?(this[M].evaluateOuter(n,this),e={done:!1,value:null}):(this.stack.reset(),e={done:!0,value:new pn(t,this.popUpdating(),s.popBlock(),this.destructor)}),e}bindDynamicScope(e){let t=this.dynamicScope();for(let s=e.length-1;s>=0;s--){let n=e[s];t.set(n,this.stack.popJs())}}}function bn(e,t=Jt.root(mt,0),s){return{pc:e,scope:t,dynamicScope:s,stack:[]}}function yn(e){return(t,s,n)=>new gn(t,s,n,e)}tn=T,sn=_;class vn{constructor(e){this.vm=e}next(){return this.vm.next()}sync(){return this.vm.execute()}}function kn(e,t){let s;return function(e,t){if(e[Hs])t();else{e.begin();try{t()}finally{e.commit()}}}(e,()=>s=t.sync()),s}function wn(e,t,s,n,r,i={},a=new Dt){const l={handle:w(r.compile(s)),symbolTable:r.symbolTable};return function(e,t,s,n){const r=Object.keys(n).map(e=>[e,n[e]]),i=["main","else","attrs"],a=r.map(([e])=>"@"+e);e.pushFrame();for(let t=0;t<3*i.length;t++)e.stack.pushNull();return e.stack.pushNull(),r.forEach(([,t])=>{e.stack.pushJs(t)}),e[B].setup(e.stack,a,i,0,!0),e.stack.pushJs(e[B]),e.stack.pushJs(t),e.stack.pushJs(s),new vn(e)}(gn.empty(e,{treeBuilder:t,handle:s.program.stdlib.main,dynamicScope:a},s),l,n,i)}class Sn extends I{constructor(e,t,s){super(e,t),this.startingBlockDepth=s,this.candidate=null,this.injectedOmittedNode=!1,this.openBlockDepth=s-1}}class En extends Ie{constructor(e,t,s){if(super(e,t,s),this.unmatchedAttributes=null,this.blockDepth=0,s)throw new Error("Rehydration with nextSibling not supported");let n=this.currentCursor.element.firstChild;for(;null!==n&&!xn(n);)n=n.nextSibling;this.candidate=n;const r=An(n);if(0!==r){const e=r-1,t=this.dom.createComment(`%+b:${e}%`);n.parentNode.insertBefore(t,this.candidate);let s=n.nextSibling;for(;null!==s&&(!Cn(s)||An(s)!==r);)s=s.nextSibling;const i=this.dom.createComment(`%-b:${e}%`);n.parentNode.insertBefore(i,s.nextSibling),this.candidate=t,this.startingBlockOffset=e}else this.startingBlockOffset=0}get currentCursor(){return this[Be].current}get candidate(){return this.currentCursor?this.currentCursor.candidate:null}set candidate(e){this.currentCursor.candidate=e}disableRehydration(e){let t=this.currentCursor;t.candidate=null,t.nextSibling=e}enableRehydration(e){let t=this.currentCursor;t.candidate=e,t.nextSibling=null}pushElement(e,t=null){let s=new Sn(e,t,this.blockDepth||0);null!==this.candidate&&(s.candidate=e.firstChild,this.candidate=e.nextSibling),this[Be].push(s)}clearMismatch(e){let t=e,s=this.currentCursor;if(null!==s){let e=s.openBlockDepth;if(e>=s.startingBlockDepth)for(;t;){if(Cn(t)){if(e>=Nn(t,this.startingBlockOffset))break}t=this.remove(t)}else for(;null!==t;)t=this.remove(t);this.disableRehydration(t)}}__openBlock(){let{currentCursor:e}=this;if(null===e)return;let t=this.blockDepth;this.blockDepth++;let{candidate:s}=e;if(null===s)return;let{tagName:n}=e.element;xn(s)&&Nn(s,this.startingBlockOffset)===t?(this.candidate=this.remove(s),e.openBlockDepth=t):"TITLE"!==n&&"SCRIPT"!==n&&"STYLE"!==n&&this.clearMismatch(s)}__closeBlock(){let{currentCursor:e}=this;if(null===e)return;let t=e.openBlockDepth;this.blockDepth--;let{candidate:s}=e,n=!1;if(null!==s)if(n=!0,Cn(s)&&Nn(s,this.startingBlockOffset)===t){let t=this.remove(s);this.candidate=t,e.openBlockDepth--}else this.clearMismatch(s),n=!1;if(!1===n){let t=e.nextSibling;if(null!==t&&Cn(t)&&Nn(t,this.startingBlockOffset)===this.blockDepth){let s=this.remove(t);this.enableRehydration(s),e.openBlockDepth--}}}__appendNode(e){let{candidate:t}=this;return t||super.__appendNode(e)}__appendHTML(e){let t=this.markerBounds();if(t){let e=t.firstNode(),s=t.lastNode(),n=new D(this.element,e.nextSibling,s.previousSibling),r=this.remove(e);return this.remove(s),null!==r&&Tn(r)&&(this.candidate=this.remove(r),null!==this.candidate&&this.clearMismatch(this.candidate)),n}return super.__appendHTML(e)}remove(e){let t=e.parentNode,s=e.nextSibling;return t.removeChild(e),s}markerBounds(){let e=this.candidate;if(e&&_n(e)){let t=e,s=t.nextSibling;for(;s&&!_n(s);)s=s.nextSibling;return new D(this.element,t,s)}return null}__appendText(e){let{candidate:t}=this;return t?3===t.nodeType?(t.nodeValue!==e&&(t.nodeValue=e),this.candidate=t.nextSibling,t):function(e){return 8===e.nodeType&&"%|%"===e.nodeValue}(t)||Tn(t)&&""===e?(this.candidate=this.remove(t),this.__appendText(e)):(this.clearMismatch(t),super.__appendText(e)):super.__appendText(e)}__appendComment(e){let t=this.candidate;return t&&8===t.nodeType?(t.nodeValue!==e&&(t.nodeValue=e),this.candidate=t.nextSibling,t):(t&&this.clearMismatch(t),super.__appendComment(e))}__openElement(e){let t=this.candidate;if(t&&Mn(t)&&function(e,t){if("http://www.w3.org/2000/svg"===e.namespaceURI)return e.tagName===t;return e.tagName===t.toUpperCase()}(t,e))return this.unmatchedAttributes=[].slice.call(t.attributes),t;if(t){if(Mn(t)&&"TBODY"===t.tagName)return this.pushElement(t,null),this.currentCursor.injectedOmittedNode=!0,this.__openElement(e);this.clearMismatch(t)}return super.__openElement(e)}__setAttribute(e,t,s){let n=this.unmatchedAttributes;if(n){let s=Ln(n,e);if(s)return s.value!==t&&(s.value=t),void n.splice(n.indexOf(s),1)}return super.__setAttribute(e,t,s)}__setProperty(e,t){let s=this.unmatchedAttributes;if(s){let n=Ln(s,e);if(n)return n.value!==t&&(n.value=t),void s.splice(s.indexOf(n),1)}return super.__setProperty(e,t)}__flushElement(e,t){let{unmatchedAttributes:s}=this;if(s){for(let e=0;e<s.length;e++)this.constructing.removeAttribute(s[e].name);this.unmatchedAttributes=null}else super.__flushElement(e,t)}willCloseElement(){let{candidate:e,currentCursor:t}=this;null!==e&&this.clearMismatch(e),t&&t.injectedOmittedNode&&this.popElement(),super.willCloseElement()}getMarker(e,t){let s=e.querySelector(`script[glmr="${t}"]`);return s||null}__pushRemoteElement(e,t,s){let n=this.getMarker(e,t);if(void 0===s){for(;null!==e.firstChild&&e.firstChild!==n;)this.remove(e.firstChild);s=null}let r=new Sn(e,null,this.blockDepth);this[Be].push(r),null===n?this.disableRehydration(s):this.candidate=this.remove(n);let i=new Je(e);return this.pushLiveBlock(i,!0)}didAppendBounds(e){if(super.didAppendBounds(e),this.candidate){let t=e.lastNode();this.candidate=t&&t.nextSibling}return e}}function xn(e){return 8===e.nodeType&&0===e.nodeValue.lastIndexOf("%+b:",0)}function Cn(e){return 8===e.nodeType&&0===e.nodeValue.lastIndexOf("%-b:",0)}function An(e){return parseInt(e.nodeValue.slice(4),10)}function Nn(e,t){return An(e)-t}function Mn(e){return 1===e.nodeType}function _n(e){return 8===e.nodeType&&"%glmr%"===e.nodeValue}function Tn(e){return 8===e.nodeType&&"% %"===e.nodeValue}function Ln(e,t){for(let s=0;s<e.length;s++){let n=e[s];if(n.name===t)return n}}function Rn(e,t){return En.forInitialRender(e,t)}function On(e){return{type:"array",value:e}}function Bn(e){return{type:"string-array",value:e}}function In(e){return{type:"template-meta",value:e}}function Dn(e){return{type:"other",value:e}}function Jn(e){return{type:"label",value:e}}const Vn={dynamicLayout:!1,dynamicTag:!1,prepareArgs:!1,createArgs:!1,attributeHook:!1,elementHook:!1,dynamicScope:!1,createCaller:!1,updateHook:!1,createInstance:!1,wrapped:!1,willDestroy:!1};function Un(e,{resolver:t,meta:{referrer:s}}){let n=t.lookupComponent(e,s);if(null===n)return n;let{handle:r,compilable:i,capabilities:a}=n;return{handle:r,compilable:i,capabilities:a||Vn}}class jn{constructor(e){this.buffer=e,this.size=0}encode(e,t){if(e>255)throw new Error(`Opcode type over 8-bits. Got ${e}.`);let s=e|t|arguments.length-2<<8;this.buffer.push(s);for(let e=2;e<arguments.length;e++){let t=arguments[e];if("number"==typeof t&&t>2147483647)throw new Error(`Operand over 32-bits. Got ${t}.`);this.buffer.push(t)}this.size=this.buffer.length}patch(e,t){if(-1!==this.buffer[e+1])throw new Error("Trying to patch operand in populated slot instead of a reserved slot.");this.buffer[e+1]=t}}function Fn(e){return[Pn(e),Br(30)]}function Pn(e){return Br(29,"number"==typeof e&&y(e)?{type:"immediate",value:e}:function(e){return{type:"primitive",value:e}}(e))}function Hn({handle:e,params:t,hash:s}){return[Br(0),Br("SimpleArgs",{params:t,hash:s,atNames:!1}),Br(16,e),Br(1),Br(35,8)]}function zn(e,t){return[Br(58),Br(57,Bn(e)),t(),Br(59)]}function Wn(e,t){return[Br("SimpleArgs",{params:t,hash:null,atNames:!0}),Br(23,e),Br(24),Br("Option",Br(60)),Br(63),Br(39),Br(1)]}function $n(e){return[qn(e&&e.symbolTable),Br(61),Kn(e)]}function Gn(e){return[Br(0),Kn(e),Br(60),Br(2),Br(1)]}function Yn(e,t){let{parameters:s}=e.symbolTable,n=s.length,r=Math.min(t,n);if(0===r)return Gn(e);let i=[];if(i.push(Br(0)),r){i.push(Br(38));for(let e=0;e<r;e++)i.push(Br(32,2,t-e)),i.push(Br(19,s[e]))}return i.push(Kn(e)),i.push(Br(60)),i.push(Br(2)),r&&i.push(Br(39)),i.push(Br(1)),i}function qn(e){return e?Br(62,{type:"serializable",value:e}):Pn(null)}function Kn(e){return null===e?Pn(null):Br(28,Dn(e))}function Xn(e){let t=[],s=0;e((function(e,n){t.push({match:e,callback:n,label:"CLAUSE"+s++})}));let n=[Br(68,1),Br(75),Br("StartLabels")];for(let e of t.slice(0,-1))n.push(Br(66,Jn(e.label),e.match));for(let e=t.length-1;e>=0;e--){let s=t[e];n.push(Br("Label",s.label),Br(33,1),s.callback()),0!==e&&n.push(Br(4,Jn("END")))}return n.push(Br("Label","END"),Br("StopLabels"),Br(69)),n}function Zn({args:e,body:t}){let{count:s,actions:n}=e();return[Br("StartLabels"),Br(0),Br(6,Jn("ENDINITIAL")),n,Br(68,s),t(),Br("Label","FINALLY"),Br(69),Br(5),Br("Label","ENDINITIAL"),Br(1),Br("StopLabels")]}function Qn({args:e,ifTrue:t,ifFalse:s}){return Zn({args:e,body:()=>{let e=[Br(65,Jn("ELSE")),t(),Br(4,Jn("FINALLY")),Br("Label","ELSE")];return s&&e.push(s()),e}})}function er(e,t){let{encoder:s}=e;switch(t.op){case"Option":return hr(e,function(e){let t=e.op1;return null===t?lr:t}(t));case"Label":return s.label(t.op1);case"StartLabels":return s.startLabels();case"StopLabels":return s.stopLabels();default:return m(t)}}function tr(e,t){dr(e,function(e,t){switch(t.op){case"CompileBlock":return function(e,t){return function(e,t){let[,s,n,r,i]=e,a=Mr(i,t.meta),l=_r(s,t.meta,"Expected block head to be a string");if("string"!=typeof l)return l;return t.syntax.macros.blocks.compile(l,n||[],r,a,t)}(t.op1,e)}(e,t);case"CompileInline":return function(e,t){let{inline:s,ifUnhandled:n}=t.op1,r=function(e,t){return t.syntax.macros.inlines.compile(e,t)}(s,e);return cr(r)?r:n(s)}(e,t);case"DynamicComponent":return function(e,t){let{definition:s,attrs:n,params:r,args:i,blocks:a,atNames:l,curried:o}=t.op1,u=n&&n.length>0?Cr(n,e.meta):null,c=Array.isArray(a)||null===a?Mr(a,e.meta):a;return Pr(e.meta,{definition:s,attrs:u,params:r,hash:i,atNames:l,blocks:c,curried:o})}(e,t);case"IfResolvedComponent":return function(e,t){let{name:s,attrs:n,blocks:r,staticTemplate:i,dynamicTemplate:a,orElse:l}=t.op1,o=Un(s,{resolver:e.syntax.program.resolver,meta:e.meta}),{meta:u}=e;if(null!==o){let{handle:e,capabilities:t,compilable:s}=o,l=Cr(n,u),c=Mr(r,u);return null!==s?i(e,t,s,{attrs:l,blocks:c}):a(e,t,{attrs:l,blocks:c})}if(l)return l();throw new Error("Compile Error: Cannot find component "+s)}(e,t);default:return m(t)}}(e,t))}function sr(e,t,s){void 0!==s.op3?e.push(t,s.op,s.op1,s.op2,s.op3):void 0!==s.op2?e.push(t,s.op,s.op1,s.op2):void 0!==s.op1?e.push(t,s.op,s.op1):e.push(t,s.op)}class nr{constructor(){this.names={},this.funcs=[]}add(e,t){this.names[e]=this.funcs.push(t)-1}compile(e,t){let s=e[0],n=this.names[s];return(0,this.funcs[n])(e,t)}}const rr=new nr;function ir(e,t){if(void 0===t||0===t.length)return e;Array.isArray(e)||(e=[e]);for(let s=0;s<t.length;s++)e.push(Br(22,t[s]));return e}function ar(e,t,s,r){switch(s.op){case"SimpleArgs":pr(e,t,function(e,t,s){let r=[],{count:i,actions:a}=Jr(e);r.push(a);let l=i<<4;s&&(l|=8);let o=n;if(t){o=t[0];let e=t[1];for(let t=0;t<e.length;t++)r.push(Br("Expr",e[t]))}return r.push(Br(82,Bn(o),Bn(n),l)),r}(s.op1.params,s.op1.hash,s.op1.atNames),r);break;case"Expr":pr(e,t,(i=s.op1,a=t.meta,Array.isArray(i)?rr.compile(i,a):[Pn(i),Br(30)]),r);break;case"IfResolved":pr(e,t,function(e,{op1:t}){let{kind:s,name:n,andThen:r,orElse:i,span:a}=t,l=function(e,t,s,n){switch(t){case"Modifier":return e.lookupModifier(s,n);case"Helper":return e.lookupHelper(s,n);case"ComponentDefinition":{let t=e.lookupComponent(s,n);return t&&t.handle}}}(e.syntax.program.resolver,s,n,e.meta.referrer);return null!==l?r(l):i?i():Or(`Unexpected ${s} ${n}`,a.start,a.end)}(t,s),r);break;case"ResolveFree":throw new Error("Unimplemented HighLevelResolutionOpcode.ResolveFree");case"ResolveContextualFree":{let{freeVar:n,context:i}=s.op1;if(t.meta.asPartial){pr(e,t,[Br(102,t.meta.upvars[n])],r);break}switch(i){case 1:{let s=t.meta.upvars[n];pr(e,t,[Br(21,0),Br(22,s)],r);break}case 0:{let s,i=t.syntax.program.resolver,a=t.meta.upvars[n],l=i.lookupHelper(a,t.meta.referrer);s=l?Hn({handle:l,params:null,hash:null}):[Br(21,0),Br(22,a)],pr(e,t,s,r);break}default:throw new Error("unimplemented: Can't evaluate expression in context "+i)}break}default:return m(s)}var i,a}rr.add(31,([,e])=>{let t=[];for(let s of e)t.push(Br("Expr",s));return t.push(Br(27,e.length)),t}),rr.add(30,([,e,t,s],n)=>{if(function(e,t){if(!Array.isArray(e))return!1;if(s=e,s[0]>=34){let s=e[1];return!(!t.upvars||"component"!==t.upvars[s])}var s;return!1}(e,n)){if(!t||0===t.length)return Br("Error",{problem:"component helper requires at least one argument",start:0,end:0});let[e,...r]=t;return function({definition:e,params:t,hash:s,atNames:n},r){return[Br(0),Br("SimpleArgs",{params:t,hash:s,atNames:n}),Br(86),Br("Expr",e),Br(76,In(r)),Br(1),Br(35,8)]}({definition:e,params:r,hash:s,atNames:!1},n.referrer)}let r=_r(e,n,"Expected call head to be a string");return"string"!=typeof r?r:Br("IfResolved",{kind:"Helper",name:r,andThen:e=>Hn({handle:e,params:t,hash:s}),span:{start:0,end:0}})}),rr.add(32,([,e,t])=>ir(Br(21,e),t)),rr.add(33,([,e,t])=>ir(Br("ResolveFree",e),t)),rr.add(34,([,e,t])=>ir(Br("ResolveContextualFree",{freeVar:e,context:0}),t)),rr.add(35,([,e,t])=>ir(Br("ResolveContextualFree",{freeVar:e,context:1}),t)),rr.add(36,([,e,t])=>ir(Br("ResolveContextualFree",{freeVar:e,context:2}),t)),rr.add(37,([,e,t])=>ir(Br("ResolveContextualFree",{freeVar:e,context:3}),t)),rr.add(38,([,e,t])=>ir(Br("ResolveContextualFree",{freeVar:e,context:4}),t)),rr.add(39,([,e,t])=>ir(Br("ResolveContextualFree",{freeVar:e,context:5}),t)),rr.add(29,()=>Fn(void 0)),rr.add(27,([,e])=>[Br("Expr",e),Br(25)]),rr.add(28,([,e])=>[Br("Expr",e),Br(24),Br(60),Br(26)]);const lr={"no-action":!0},or={"not-handled":!0};function ur(e){return e&&!!e["no-action"]}function cr(e){return!e||!e["not-handled"]}function hr(e,t){if(!ur(t))if(Array.isArray(t))for(let s of t)hr(e,s);else"Simple"===t.type?er(e,t):sr(e.encoder,e.syntax.program.constants,t)}function pr(e,t,s,n){if(!ur(s))if(Array.isArray(s))for(let r of s)pr(e,t,r,n);else if("Number"===s.type)sr(e,n,s);else if("Resolution"===s.type)ar(e,t,s,n);else if("Simple"===s.type)er(t,s);else{if("Error"!==s.type)throw x(s,"unexpected action kind");e.error({problem:s.op1.problem,span:{start:s.op1.start,end:s.op1.end}})}}function dr(e,t){if(!ur(t))if(Array.isArray(t))for(let s of t)dr(e,s);else if("Number"===t.type)sr(e.encoder,e.syntax.program.constants,t);else if("Compile"===t.type)tr(e,t);else if("Resolution"===t.type)ar(e.encoder,e,t,e.syntax.program.constants);else if("Simple"===t.type)er(e,t);else if("Error"!==t.type)throw x(t,"unexpected action type")}class fr{constructor(){let{blocks:e,inlines:t}=function(e,t){return e.add("if",(e,t,s)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #if requires a single argument");return Qn({args:()=>({count:1,actions:[Br("Expr",e[0]),Br(70)]}),ifTrue:()=>Gn(s.get("default")),ifFalse:()=>s.has("else")?Gn(s.get("else")):lr})}),e.add("unless",(e,t,s)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #unless requires a single argument");return Qn({args:()=>({count:1,actions:[Br("Expr",e[0]),Br(70)]}),ifTrue:()=>s.has("else")?Gn(s.get("else")):lr,ifFalse:()=>Gn(s.get("default"))})}),e.add("with",(e,t,s)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #with requires a single argument");return Qn({args:()=>({count:2,actions:[Br("Expr",e[0]),Br(32,3,0),Br(70)]}),ifTrue:()=>Yn(s.get("default"),1),ifFalse:()=>s.has("else")?Gn(s.get("else")):lr})}),e.add("let",(e,t,s)=>{if(!e)return Or("let requires arguments",0,0);let{count:n,actions:r}=Jr(e);return[r,Yn(s.get("default"),n)]}),e.add("each",(e,t,s)=>Zn({args(){let s;return s=t&&"key"===t[0][0]?[Br("Expr",t[1][0])]:[Fn(null)],s.push(Br("Expr",e[0])),{count:2,actions:s}},body(){let e=[Br(71,Jn("BODY"),Jn("ELSE")),Br(0),Br(32,2,1),Br(6,Jn("ITER")),Br("Label","ITER"),Br(73,Jn("BREAK")),Br("Label","BODY"),Yn(s.get("default"),2),Br(33,2),Br(4,Jn("FINALLY")),Br("Label","BREAK"),Br(1),Br(72),Br(4,Jn("FINALLY")),Br("Label","ELSE")];return s.has("else")&&e.push(Gn(s.get("else"))),e}})),e.add("in-element",(e,t,s)=>{if(!e||1!==e.length)throw new Error("SYNTAX ERROR: #in-element requires a single argument");return Qn({args(){let[s,n]=t,r=[];for(let e=0;e<s.length;e++){let t=s[e];if("guid"!==t&&"insertBefore"!==t)throw new Error(`SYNTAX ERROR: #in-element does not take a \`${s[0]}\` option`);r.push(Br("Expr",n[e]))}return r.push(Br("Expr",e[0]),Br(32,3,0)),{count:4,actions:r}},ifTrue:()=>[Br(49),Gn(s.get("default")),Br(55)]})}),e.add("-with-dynamic-vars",(e,t,s)=>{if(t){let[e,n]=t,{actions:r}=Jr(n);return[r,zn(e,()=>Gn(s.get("default")))]}return Gn(s.get("default"))}),e.add("component",(e,t,s,n)=>{if("string"==typeof e[0]){let r=jr(n,e[0],t,s.get("default"));if(cr(r))return r}let[r,...i]=e;return Br("DynamicComponent",{definition:r,attrs:null,params:i,args:t,atNames:!1,blocks:s,curried:!1})}),t.add("component",(e,t,s,n)=>{let r=t&&t[0];if("string"==typeof r){let e=jr(n,r,s,null);if(e!==or)return e}let[i,...a]=t;return Pr(n.meta,{definition:i,attrs:null,params:a,hash:s,atNames:!1,blocks:Nr,curried:!1})}),{blocks:e,inlines:t}}(new mr,new gr);this.blocks=e,this.inlines=t}}class mr{constructor(){this.names=l(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t,s,n,r){let i=this.names[e],a={resolver:r.syntax.program.resolver,meta:r.meta};if(void 0===i){return(0,this.missing)(e,t,s,n,a)}return(0,this.funcs[i])(t,s,n,a)}}class gr{constructor(){this.names=l(),this.funcs=[]}add(e,t){this.funcs.push(t),this.names[e]=this.funcs.length-1}addMissing(e){this.missing=e}compile(e,t){let s,n,r,[,i]=e;if(!Array.isArray(i))return or;if(30===i[0]){let e=_r(i[1],t.meta,"Expected head of call to be a string");if("string"!=typeof e)return e;s=e,n=i[2],r=i[3]}else{if(!Lr(i))return or;{let e=Tr(i,t.meta);if(null===e)return or;s=e,n=null,r=null}}let a=this.names[s],l={resolver:t.syntax.program.resolver,meta:t.meta};if(void 0===a&&this.missing){return(0,this.missing)(s,n,r,l)}if(void 0!==a){return(0,this.funcs[a])(s,n,r,l)}return or}}function br(e,t){return{syntax:e,encoder:new Ir,meta:t}}const yr=new nr,vr=["class","id","value","name","type","style","href"],kr=["div","span","p","a"];function wr(e){return"string"==typeof e?e:kr[e]}function Sr(e){return"string"==typeof e?e:vr[e]}yr.add(3,e=>Br(41,e[1])),yr.add(13,()=>Br(54)),yr.add(12,()=>Br(53)),yr.add(4,(e,t)=>{let[,s,n,r]=e,i=_r(s,t,"Expected modifier head to be a string");return"string"!=typeof i?i:Br("IfResolved",{kind:"Modifier",name:i,andThen:e=>[Br(0),Br("SimpleArgs",{params:n,hash:r,atNames:!1}),Br(56,e),Br(1)],span:{start:0,end:0}})}),yr.add(14,([,e,t,s])=>Br(50,Sr(e),t,null!=s?s:null)),yr.add(24,([,e,t,s])=>Br(105,Sr(e),t,null!=s?s:null)),yr.add(15,([,e,t,s])=>[Br("Expr",t),Br(51,Sr(e),!1,null!=s?s:null)]),yr.add(22,([,e,t,s])=>[Br("Expr",t),Br(51,Sr(e),!0,null!=s?s:null)]),yr.add(16,([,e,t,s])=>[Br("Expr",t),Br(52,Sr(e),!1,null!=s?s:null)]),yr.add(23,([,e,t,s])=>[Br("Expr",t),Br(52,Sr(e),!0,null!=s?s:null)]),yr.add(10,([,e])=>Br(47,wr(e))),yr.add(11,([,e])=>[Br(89),Br(47,wr(e))]),yr.add(8,([,e,t,s,n])=>"string"==typeof e?Br("IfResolvedComponent",{name:e,attrs:t,blocks:n,staticTemplate:(e,t,n,{blocks:r,attrs:i})=>[Br(77,e),Fr({capabilities:t,layout:n,attrs:i,params:null,hash:s,blocks:r})],dynamicTemplate:(e,t,{attrs:n,blocks:r})=>[Br(77,e),Hr({capabilities:t,attrs:n,params:null,hash:s,atNames:!0,blocks:r})]}):Br("DynamicComponent",{definition:e,attrs:t,params:null,args:s,blocks:n,atNames:!0,curried:!0})),yr.add(19,([,e,t],s)=>Qn({args:()=>({count:2,actions:[Br("Expr",e),Br(32,3,0)]}),ifTrue:()=>[Br(101,In(s.referrer),Bn(s.evalSymbols),On(t)),Br(39),Br(1)]})),yr.add(18,([,e,t])=>Wn(e,t)),yr.add(17,([,e])=>Wn(e,n)),yr.add(26,([,e],t)=>Br(103,Bn(t.evalSymbols),On(e))),yr.add(1,e=>{let[,t]=e;return Br("CompileInline",{inline:e,ifUnhandled:()=>[Br(0),Br("Expr",t),Br(3,{type:"stdlib",value:"cautious-append"}),Br(1)]})}),yr.add(2,e=>{let[,t]=e;return"string"==typeof t?Br(40,t):[Br(0),Br("Expr",t),Br(3,{type:"stdlib",value:"trusting-append"}),Br(1)]}),yr.add(6,e=>Br("CompileBlock",e));class Er{constructor(e,t,s){this.statements=e,this.meta=t,this.symbolTable=s,this.compiled=null}compile(e){return function(e,t){if(null!==e.compiled)return e.compiled;e.compiled=-1;let{statements:s,meta:n}=e,r=function(e,t,s){let n=yr,r=br(s,t);for(let t=0;t<e.length;t++)dr(r,n.compile(e[t],r.meta));0;return r.encoder.commit(s.program.heap,t.size)}(s,n,t);return Fs(t.program),e.compiled=r,r}(this,e)}}function xr(e){let t=e.block;return new Er(t.statements,Vr(e),{symbols:t.symbols,hasEval:t.hasEval})}function Cr(e,t){let s=Array.isArray(e)?{statements:e,parameters:n}:e;return new Er(s.statements,t,{parameters:s.parameters})}class Ar{constructor(e){this.blocks=e,this.names=e?Object.keys(e):[]}get(e){return this.blocks&&this.blocks[e]||null}has(e){let{blocks:t}=this;return null!==t&&e in t}with(e,t){let{blocks:s}=this;return new Ar(s?d({},s,{[e]:t}):{[e]:t})}get hasAny(){return null!==this.blocks}}const Nr=new Ar(null);function Mr(e,t){if(null===e)return Nr;let s=l(),[n,r]=e;for(let e=0;e<n.length;e++)s[n[e]]=Cr(r[e],t);return new Ar(s)}function _r(e,t,s){if(!t.upvars)return Or(s+", but there were no free variables in the template",0,0);if(!Array.isArray(e))throw new Error(`${s}, got ${JSON.stringify(e)}`);if(Lr(e)){let s=Tr(e,t);if(null!==s)return s}throw new Error(`${s}, got ${JSON.stringify(e)}`)}function Tr(e,t){return 3===e.length&&e[2].length>0?null:function(e){return e[0]>=33}(e)?t.upvars[e[1]]:null}function Lr(e){return e.length>=2&&e[0]>=32}class Rr{constructor(){this.labels=l(),this.targets=[]}label(e,t){this.labels[e]=t}target(e,t){this.targets.push({at:e,target:t})}patch(e){let{targets:t,labels:s}=this;for(let n=0;n<t.length;n++){let{at:r,target:i}=t[n],a=s[i]-r;e.patch(r,a)}}}function Or(e,t,s){return Br("Error",{problem:e,start:t,end:s})}function Br(e,t,s,n){if("number"==typeof e)return void 0!==n?{type:"Number",op:e,op1:t,op2:s,op3:n}:void 0!==s?{type:"Number",op:e,op1:t,op2:s}:void 0!==t?{type:"Number",op:e,op1:t}:{type:"Number",op:e};{let s;if("CompileInline"===(r=e)||"CompileBlock"===r||"IfResolvedComponent"===r||"DynamicComponent"===r)s="Compile";else if(function(e){return"IfResolved"===e||"Expr"===e||"SimpleArgs"===e||"ResolveFree"===e||"ResolveContextualFree"===e}(e))s="Resolution";else if(function(e){return"Label"===e||"Option"===e||"StartLabels"===e||"StopLabels"===e}(e))s="Simple";else{if(!function(e){return"Error"===e}(e))throw new Error("Exhausted "+e);s="Error"}return void 0===t?{type:s,op:e,op1:void 0}:{type:s,op:e,op1:t}}var r}class Ir{constructor(){this.labelsStack=new c,this.encoder=new jn([]),this.errors=[]}error(e){this.encoder.encode(29,0),this.errors.push(e)}commit(e,t){this.encoder.encode(5,1024);let s=function(e,t,s){let n=e.malloc();for(let t=0;t<s.length;t++){let n=s[t];"function"==typeof n?e.pushPlaceholder(n):"object"==typeof n?e.pushStdlib(n):e.push(n)}return e.finishMalloc(n,t),n}(e,t,this.encoder.buffer);return this.errors.length?{errors:this.errors,handle:s}:s}push(e,t,...s){if((n=t)>=0&&n<=15){let n=s.map((t,s)=>this.operand(e,t,s));return this.encoder.encode(t,1024,...n)}{let n=s.map((t,s)=>this.operand(e,t,s));return this.encoder.encode(t,0,...n)}var n}operand(e,t,s){return t&&"object"==typeof t&&"label"===t.type?(this.currentLabels.target(this.encoder.size+s,t.value),-1):function(e,t){if("number"==typeof t||"function"==typeof t)return t;if("boolean"==typeof t)return!0===t?1:0;if("string"==typeof t)return e.value(t);if(null===t)return 0;switch(t.type){case"string-array":return e.array(t.value);case"serializable":return e.serializable(t.value);case"stdlib":return t;case"immediate":return v(t.value);case"primitive":case"template-meta":case"array":case"other":return e.value(t.value);case"lookup":throw f("lookup not reachable");default:return m(t)}}(e,t)}get currentLabels(){return this.labelsStack.current}label(e){this.currentLabels.label(e,this.encoder.size)}startLabels(){this.labelsStack.push(new Rr)}stopLabels(){this.labelsStack.pop().patch(this.encoder)}}function Dr({params:e,hash:t,blocks:s,atNames:r}){let i=[],a=s.names;for(let e=0;e<a.length;e++)i.push($n(s.get(a[e])));let{count:l,actions:o}=Jr(e);i.push(o);let u=l<<4;r&&(u|=8),s&&(u|=7);let c=n;if(t){c=t[0];let e=t[1];for(let t=0;t<e.length;t++)i.push(Br("Expr",e[t]))}return i.push(Br(82,Bn(c),Bn(a),u)),i}function Jr(e){if(!e)return{count:0,actions:lr};let t=[];for(let s=0;s<e.length;s++)t.push(Br("Expr",e[s]));return{count:e.length,actions:t}}function Vr(e){return{asPartial:e.asPartial||!1,evalSymbols:Ur(e),upvars:e.block.upvars,referrer:e.referrer,size:e.block.symbols.length}}function Ur(e){let{block:t}=e;return t.hasEval?t.symbols:null}function jr(e,t,s,n){let r=Un(t,e);if(null!==r){let{compilable:e,handle:t,capabilities:i}=r;if(e){if(s)for(let e=0;e<s[0].length;e+=1)s[0][e]="@"+s[0][e];let r=[Br(77,t)];return r.push(Fr({capabilities:i,layout:e,attrs:null,params:null,hash:s,blocks:new Ar({default:n})})),r}}return or}function Fr({capabilities:e,layout:t,attrs:s,params:n,hash:r,blocks:i}){let{symbolTable:a}=t;if(a.hasEval||e.prepareArgs)return Hr({capabilities:e,attrs:s,params:n,hash:r,atNames:!0,blocks:i,layout:t});let l=[Br(35,4),Br(32,3,1),Br(34,4)],{symbols:o}=a;e.createArgs&&l.push(Br(0),Br("SimpleArgs",{params:n,hash:r,atNames:!0})),l.push(Br(97,4)),e.dynamicScope&&l.push(Br(58)),e.createInstance&&l.push(Br(87,0|i.has("default"),4)),e.createArgs&&l.push(Br(1)),l.push(Br(0),Br(88,4));let u=[];l.push(Br(90,4)),u.push({symbol:0,isBlock:!1});for(let e=0;e<o.length;e++){let t=o[e];switch(t.charAt(0)){case"&":let n;n="&attrs"===t?s:i.get(t.slice(1)),n?(l.push($n(n)),u.push({symbol:e+1,isBlock:!0})):(l.push($n(null)),u.push({symbol:e+1,isBlock:!0}));break;case"@":if(!r)break;let[a,o]=r,c=t,h=a.indexOf(c);-1!==h&&(l.push(Br("Expr",o[h])),u.push({symbol:e+1,isBlock:!1}))}}l.push(Br(36,o.length+1,Object.keys(i).length>0?1:0));for(let e=u.length-1;e>=0;e--){let{symbol:t,isBlock:s}=u[e];s?l.push(Br(20,t)):l.push(Br(19,t))}return l.push([Br(28,Dn(t)),Br(60),Br(2)]),l.push(Br(100,4)),l.push(Br(1),Br(39)),e.dynamicScope&&l.push(Br(59)),l.push(Br(98),Br(34,4)),l}function Pr(e,{definition:t,attrs:s,params:n,hash:r,atNames:i,blocks:a,curried:l}){return Zn({args:()=>({count:2,actions:[Br("Expr",t),Br(32,3,0)]}),body:()=>[Br(65,Jn("ELSE")),l?Br(81):Br(80,In(e.referrer)),Br(78),Hr({capabilities:!0,attrs:s,params:n,hash:r,atNames:i,blocks:a}),Br("Label","ELSE")]})}function Hr({capabilities:e,attrs:t,params:s,hash:n,atNames:r,blocks:i,layout:a}){let l=!!i,o=!0===e||e.prepareArgs||!(!n||0===n[0].length),u=i.with("attrs",t);return[Br(35,4),Br(32,3,1),Br(34,4),Br(0),Dr({params:s,hash:n,blocks:u,atNames:r}),Br(85,4),zr(u.has("default"),l,o,()=>{let e;return e=a?[qn(a.symbolTable),Kn(a),Br(60)]:[Br(92,4)],e.push(Br(95,4)),e}),Br(34,4)]}function zr(e,t,s,n=null){let r=[Br(97,4),Br(58),Br(87,0|e,4)];return n&&r.push(n()),r.push(Br(88,4),Br(90,4),Br(37,4),Br(19,0),Br(94,4),s?Br(17,4):lr,t?Br(18,4):lr,Br(33,1),Br(96,4),Br(100,4),Br(1),Br(39),Br(59),Br(98)),r}function Wr(e){return Cr(e.block.statements,Vr(e))}class $r{constructor(e,t,s){this.main=e,this.trustingGuardedAppend=t,this.cautiousGuardedAppend=s}get"trusting-append"(){return this.trustingGuardedAppend}get"cautious-append"(){return this.cautiousGuardedAppend}getAppend(e){return e?this.trustingGuardedAppend:this.cautiousGuardedAppend}}function Gr(){return[Br(74,4),zr(!1,!1,!0)]}function Yr(e){return[Xn(t=>{t(1,()=>e?[Br(67),Br(42)]:Br(46)),t(0,()=>[Br(79),Br(78),[Br(35,4),Br(32,3,1),Br(34,4),Br(0),Br(83),Br(85,4),zr(!1,!1,!0,()=>[Br(92,4),Br(95,4)]),Br(34,4)]]),t(3,()=>[Br(67),Br(43)]),t(4,()=>[Br(67),Br(44)]),t(5,()=>[Br(67),Br(45)])})]}const qr={asPartial:!1,evalSymbols:null,upvars:null,referrer:{},size:0};function Kr(e,t){let s=new Ir,n=new fr;hr({encoder:s,meta:qr,syntax:{macros:n,program:e}},t());let r=s.commit(e.heap,0);if("number"!=typeof r)throw new Error("Unexpected errors compiling std");return r}class Xr{constructor({constants:e,heap:t},s){this.resolver=s,this.constants=e,this.heap=t,this.stdlib=function(e){let t=Kr(e,Gr),s=Kr(e,()=>Yr(!0)),n=Kr(e,()=>Yr(!1));return new $r(t,s,n)}(this)}}class Zr{constructor(e){this.layout=e,this.compiled=null;let{block:t}=e,s=t.symbols.slice(),n=s.indexOf("&attrs");this.attrsBlockNumber=-1===n?s.push("&attrs"):n+1,this.symbolTable={hasEval:t.hasEval,symbols:s}}compile(e){if(null!==this.compiled)return this.compiled;let t=Vr(this.layout),s=br(e,t);var r,i,a,l;dr(s,(r=this.layout,i=this.attrsBlockNumber,[Br("StartLabels"),(a=5,l=()=>[Br(91,4),Br(30),Br(32,3,0)],[Br(35,a),l(),Br(34,a)]),Br(65,Jn("BODY")),Br(35,5),Br(89),Br(48),Br(99,4),Wn(i,n),Br(53),Br("Label","BODY"),Gn(Wr(r)),Br(35,5),Br(65,Jn("END")),Br(54),Br("Label","END"),Br(34,5),Br("StopLabels")]));let o=s.encoder.commit(s.syntax.program.heap,t.size);return"number"!=typeof o||(this.compiled=o,Fs(s.syntax.program)),o}}let Qr=0;function ei({id:e,meta:t,block:s}){let n,r=e||"client-"+Qr++;return{id:r,meta:t,create:e=>{let i=e?d({},e,t):t;return n||(n=JSON.parse(s)),new ti({id:r,block:n,referrer:i})}}}class ti{constructor(e){this.parsedLayout=e,this.result="ok",this.layout=null,this.partial=null,this.wrappedLayout=null;let{block:t}=e;this.symbols=t.symbols,this.hasEval=t.hasEval,this.referrer=e.referrer,this.id=e.id||"client-"+Qr++}asLayout(){return this.layout?this.layout:this.layout=xr(d({},this.parsedLayout,{asPartial:!1}))}asPartial(){return this.partial?this.partial:this.layout=xr(d({},this.parsedLayout,{asPartial:!0}))}asWrappedLayout(){return this.wrappedLayout?this.wrappedLayout:this.wrappedLayout=new Zr(d({},this.parsedLayout,{asPartial:!1}))}}let si=[],ni=[],ri=[];var ii;Y=(ii={getProp:(e,t)=>e[t],setProp(e,t,s){e[t]=s},getPath:(e,t)=>e[t],scheduleRevalidate:function(){Zi||(Zi=!0,setTimeout(()=>{Zi=!1;try{!function(){for(const e of Xi){const{env:t}=e;t.begin(),e.rerender(),t.commit()}}(),qi.forEach(([e])=>e())}catch(e){qi.forEach(([,t])=>t(e))}qi=[]},0))},toBool:function(e){return Array.isArray(e)?0!==e.length:Boolean(e)},toIterator:e=>function(e){return"object"==typeof e&&null!==e&&Symbol.iterator in e}(e)?class{constructor(e,t){this.iterable=e,this.result=t,this.position=0}static from(e){const t=e[Symbol.iterator](),s=t.next(),{done:n}=s;return!0===n?null:new this(t,s)}isEmpty(){return!1}next(){const{iterable:e,result:t,position:s}=this;if(t.done)return null;const n=t.value,r=s;return this.position++,this.result=e.next(),{value:n,memo:r}}}.from(e):null,scheduleDestroy(e,t){si.push(e),ni.push(t)},scheduleDestroyed(e){ri.push(e)},warnIfStyleNotTrusted(){}}).scheduleRevalidate,j=ii.scheduleDestroy,F=ii.scheduleDestroyed,P=ii.toIterator,H=ii.toBool,z=ii.getProp,W=ii.setProp,$=ii.getPath,G=ii.warnIfStyleNotTrusted;class ai extends class{constructor(){this.extra=void 0}onTransactionBegin(){}onTransactionCommit(){for(let e=0;e<si.length;e++)ni[e](si[e]);ri.forEach(e=>e()),si=[],ni=[],ri=[]}}{constructor(){super(...arguments),this.isInteractive=!0,this.uselessAnchor=self.document.createElement("a"),this.protocolForURL=e=>(this.uselessAnchor.href=e,this.uselessAnchor.protocol)}}const li=new WeakMap,oi=Object.getPrototypeOf;function ui(e,t){return li.set(t,e),t}const ci=new WeakMap,hi=`__OWNER_${Math.floor(Math.random()*Date.now())}__`;let pi={};const di=new WeakMap,fi=new WeakMap,mi=Object.getPrototypeOf;function gi(e,t){return di.set(t,e),t}function bi(e){let t=e;for(;null!=t;){const e=di.get(t);if(void 0!==e)return e;t=mi(t)}}function yi(e,t){let s=fi.get(e);void 0===s&&(s=new WeakMap,fi.set(e,s));let n=s.get(t);return void 0===n&&(n=t(e),s.set(t,n)),n}function vi(e,t){const s=bi(t);if(void 0!==s&&"component"===s.type)return yi(e,s.factory)}function ki(e){if("symbol"==typeof e)return null;const t=Number(e);return isNaN(t)?null:t%1==0?t:null}function wi(e,t){const{named:s,positional:n}=e,r={get(e,t){const n=s[t];if(void 0!==n)return St(n)},has:(e,t)=>t in s,ownKeys:e=>Object.keys(s),isExtensible:()=>!1,getOwnPropertyDescriptor:(e,t)=>({enumerable:!0,configurable:!0})},i={get(e,t){if("length"===t)return n.length;const s=ki(t);return null!==s&&s<n.length?St(n[s]):e[t]},isExtensible:()=>!1,has(e,t){const s=ki(t);return null!==s&&s<n.length}},a=Object.create(null);return{named:new Proxy(a,r),positional:new Proxy([],i)}}const Si={createInstance:!0,dynamicLayout:!1,dynamicTag:!1,wrapped:!1,prepareArgs:!1,createArgs:!0,attributeHook:!1,elementHook:!1,updateHook:!1,createCaller:!1,dynamicScope:!0,willDestroy:!1};function Ei(e){return e.capabilities.asyncLifecycleCallbacks}function xi(e){return e.capabilities.updateHook}class Ci{constructor(e,t,s,n,r){this.env=e,this.delegate=t,this.component=s,this.args=n,this.argsProxy=r,function(e){return e.capabilities.destructor}(t)&&_e(this,()=>t.destroyComponent(s))}}const Ai=new class{create(e,t,s,n){const{ComponentDefinition:r}=t,i=s.capture(),a=vi(St(n.get(hi)),r),l=wi(i),o=a.createComponent(r,l);return new Ci(e,a,o,i,l)}update({delegate:e,component:t,argsProxy:s}){xi(e)&&e.updateComponent(t,s)}didCreate({delegate:e,component:t}){Ei(e)&&e.didCreateComponent(t)}didUpdate({delegate:e,component:t}){(function(e){return Ei(e)&&xi(e)})(e)&&e.didUpdateComponent(t)}getContext({delegate:e,component:t}){e.getContext(t)}getDebugName(e){return String(e.ComponentDefinition)}getSelf({delegate:e,component:t}){return vt(e.getContext(t))}getDestroyable(e){return e}getCapabilities({capabilities:e}){return Object.assign({},Si,{updateHook:e.updateHook})}didRenderLayout(){}didUpdateLayout(){}getStaticLayout({definition:e}){return e.template.asLayout()}};class Ni{constructor(e,t,s){this.manager=Ai,this.handle=e,this.template=S(s);const n=vi(pi,t).capabilities;this.state={ComponentDefinition:t,capabilities:n,definition:this}}}function Mi(e){let t,s,n;return()=>(s&&We(s,n)||(s=ot(()=>t=e()),n=ze(s)),lt(s),t)}function _i(e){return(t,s)=>{const n=function(e,t){const s=bi(t);if(void 0!==s&&"helper"===s.type)return yi(e,s.factory)}(St(s.dynamicScope().get(hi)),e),r=t.capture();let i;if(void 0!==n)i=function(e,t,s,n){let r;const i=wi(s),a=e.capabilities.updateHook,l=Mi(()=>e.getValue(r)),o=Mi(()=>{void 0===r?(r=e.createHelper(t,i),function(e){return e.capabilities.destroyable}(e)&&n.associateDestroyable(e.getDestroyable(r))):a&&e.updateHelper(r,i)});return()=>(o(),l())}(n,e,r,s);else{0;const t=e;i=e=>t(...Zs(e.positional))}return kt(()=>i(r),null,i.name)}}const Ti={attributeHook:!1,createArgs:!1,createCaller:!1,createInstance:!0,dynamicLayout:!1,dynamicScope:!1,dynamicTag:!1,elementHook:!1,prepareArgs:!1,updateHook:!1,wrapped:!1,willDestroy:!1};const Li=vt(null);class Ri{static create(){return new Ri}getDebugName(e){return e.name}getCapabilities(){return Ti}getStaticLayout({definition:e}){return e.template.asLayout()}create(e,t){}getSelf(e){return Li}getTag(){return Xe}didRenderLayout(){}didCreate(){}didUpdateLayout(){}didUpdate(){}getDestroyable(){return null}}const Oi=new Ri;class Bi{constructor(e,t,s){this.manager=Oi,this.handle=e,this.template=S(s),this.state={name:t,definition:this}}}class Ii{}const Di=new class{constructor(){this.capabilities=function(e,t={}){return r("3.13"===e,"Invalid component manager compatibility specified"),{disableAutoTracking:Boolean(t.disableAutoTracking)}}("3.13")}createModifier(e,t){return{definition:e}}installModifier(e,t,s){e.destructor=e.definition(t,...s.positional),e.element=t}updateModifier(e,t){this.destroyModifier(e),this.installModifier(e,e.element,t)}destroyModifier(e){const{destructor:t}=e;void 0!==t&&t()}};class Ji{constructor(e,t,s,n,r){this.element=e,this.delegate=t,this.modifier=s,this.argsProxy=n,this.capturedArgs=r,this.tag=Ke(),_e(this,()=>t.destroyModifier(s,n))}}const Vi=new class{create(e,t,s,n){let r=function(e,t){const s=bi(t);if(void 0!==s&&"modifier"===s.type)return yi(e,s.factory)}(St(n.get(hi)),t);void 0===r&&(r=Di);const i=s.capture(),a=wi(i),l=r.createModifier(t,a);return new Ji(e,r,l,a,i)}getDebugName(e){return String(e.modifier)}getTag({tag:e}){return e}install(e){const{element:t,argsProxy:s,delegate:n,modifier:r}=e;!0===n.capabilities.disableAutoTracking?ut(()=>n.installModifier(r,t,s)):n.installModifier(r,t,s)}update(e){const{argsProxy:t,delegate:s,modifier:n}=e;!0===s.capabilities.disableAutoTracking?ut(()=>s.updateModifier(n,t)):s.updateModifier(n,t)}getDestroyable(e){return e}};class Ui{constructor(e,t){this.handle=e,this.state=t,this.manager=Vi}}let ji=0;const Fi=new WeakMap,Pi=new WeakMap,Hi=new WeakMap;function zi(e){return Fi.get(e)||function(e){const t=ei(function(e){let t=e;for(;null!=t;){const e=li.get(t);if(void 0!==e)return e;t=oi(t)}}(e)).create();let s;s=e instanceof Ii?new Bi(ji++,"template-only-component",t):new Ni(ji++,e,t);return Fi.set(e,s),s}(e)}function Wi(e){return Pi.get(e)||function(e){const t={helper:_i(e),handle:ji++};return Pi.set(e,t),t}(e)}function $i(e){return Hi.get(e)||function(e){const t=new Ui(ji++,e);return Hi.set(e,t),t}(e)}const Gi={if:(Yi=function(e){const t=e.positional.capture();return kt(()=>{if(t.length>3)throw new Error('The inline form of the `if` helper expects two or three arguments, e.g. `{{if trialExpired "Expired" expiryDate}}`.');const[e,s,n]=t;return!0===H(St(e))?St(s):void 0!==n?St(n):void 0},null,"if")},{helper:Yi,handle:ji++})};var Yi;let qi=[];var Ki=async function(e,t){const s=t instanceof HTMLElement?{element:t}:t,{element:n,args:r,owner:i}=s,a=self.document,{env:l,iterator:o}=function(e,t,s,n,r={},i=pi,a=je){const l=function(e,t,s,n){return{env:new Ws(e,t),program:new Js(s.constants,s.heap),resolver:n}}(s,n,ea,Qi),o=a(l.env,{element:t,nextSibling:null}),u=Qi.registerRoot(e),c=Qi.lookupComponent(u),h=c.manager.getStaticLayout(c.state,Qi);let p;i&&(p=new Dt({[hi]:vt(i)}));return{iterator:wn(l,o,ta,c,h,sa(r),p),env:l.env}}(e,n,{document:a},new ai,r,i,s.rehydrate?Rn:je),u=kn(l,o);Xi.push(u)};const Xi=[];let Zi=!1;const Qi=new class{constructor(){this.registry=[]}registerRoot(e){const t=zi(e),{handle:s}=t;return this.registry[s]=t,s}lookupComponent(e,t){return this.registry[e]}resolve(e){return this.registry[e]}compilable(e){throw new Error("Method not implemented.")}lookupPartial(e,t){throw new Error("Method not implemented.")}},ea={constants:new Rs,heap:new Ds},ta=function(e,t,s=new fr){return{program:new Xr(e,t),macros:s}}(ea,new class{constructor(e){this.inner=e}lookupHelper(e,t){const s=t.scope(),{helper:n,handle:r}=Gi[e]||Wi(s[e]);return this.inner.registry[r]=n,r}lookupModifier(e,t){const s=$i(t.scope()[e]),{handle:n}=s;return this.inner.registry[n]=s,n}lookupComponent(e,t){const s=t.scope()[e];const n=zi(s),{state:r,manager:i,template:a,handle:l}=n;return this.inner.registry[l]=n,{handle:l,capabilities:i.getCapabilities(r),compilable:S(a).asLayout()}}resolve(e){return this.inner.resolve(e)}lookupPartial(e,t){throw new Error("Method not implemented.")}}(Qi));function sa(e){const t=vt(e);return Object.keys(e).reduce((e,s)=>(e[s]=xt(t,s),e),{})}s(1);const na=new WeakMap,ra=new WeakMap;const ia=function(e,t={}){r("3.4"===e||"3.13"===e,"Invalid component manager compatibility specified");const s="3.4"===e||Boolean(t.updateHook);return{asyncLifecycleCallbacks:Boolean(t.asyncLifecycleCallbacks),destructor:Boolean(t.destructor),updateHook:s}}("3.13",{destructor:!0});class aa extends class{constructor(e){this.owner=e}createComponent(e,t){return new e(this.owner,t.named)}getContext(e){return e}}{constructor(){super(...arguments),this.capabilities=ia}destroyComponent(e){!function(e){na.set(e,!0)}(e),e.willDestroy(),function(e){ra.set(e,!0)}(e)}}class la extends class{constructor(e,t){this.args=t,na.set(this,!1),ra.set(this,!1)}get isDestroying(){return na.get(this)||!1}get isDestroyed(){return ra.get(this)||!1}willDestroy(){}}{constructor(e,t){super(e,t),function(e,t){ci.set(e,t)}(this,e)}}gi({factory:e=>new aa(e),type:"component"},la);var oa=s.p+"images/e14e33bc4ea14463b5e068ac55c6081f.svg";class ua extends la{constructor(...e){var t,s,n;super(...e),n=oa,(s="logo")in(t=this)?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n}}ui({id:"jsAuy3P6",block:'{"symbols":[],"statements":[[2,"\\n    "],[10,"div"],[14,1,"intro"],[12],[2,"\\n      "],[10,"img"],[15,"src",[32,0,["logo"]]],[12],[13],[2,"\\n\\n      "],[10,"h1"],[14,0,"text-3xl text-blue-500"],[12],[2,"hello, glimmer 1 i\'m being watched by lerna!"],[13],[2,"\\n      "],[10,"h3"],[12],[2,"\\n        you can get started by editing "],[10,"code"],[12],[2,"src/App.js"],[13],[2,",\\n        and run tests by visiting "],[10,"a"],[14,6,"./tests"],[12],[2,"/tests"],[13],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},ua);class ca extends la{constructor(...e){var t,s,n;super(...e),n=oa,(s="logo")in(t=this)?Object.defineProperty(t,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[s]=n}}ui({id:"nd1eTRqf",block:'{"symbols":[],"statements":[[2,"\\n    "],[10,"div"],[14,1,"intro"],[12],[2,"\\n      "],[10,"img"],[15,"src",[32,0,["logo"]]],[12],[13],[2,"\\n\\n      "],[10,"h1"],[12],[2,"hello, glimmer 2!"],[13],[2,"\\n      "],[10,"h3"],[12],[2,"\\n        you can get started by editing "],[10,"code"],[12],[2,"src/App.js"],[13],[2,",\\n        and run tests by visiting "],[10,"a"],[14,6,"./tests"],[12],[2,"/tests"],[13],[2,"\\n      "],[13],[2,"\\n    "],[13],[2,"\\n  "]],"hasEval":false,"upvars":[]}',meta:{scope:()=>({})}},ca);const ha=document.getElementById("glimmer-idc"),pa=document.getElementById("app2");Ki(ua,ha),Ki(ca,pa)}]);